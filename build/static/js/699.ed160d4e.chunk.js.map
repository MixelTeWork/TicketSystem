{"version":3,"file":"static/js/699.ed160d4e.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","api/auth.ts","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","utils/query.ts","api/events.ts","utils/nums.ts","utils/dates.ts","api/ticketTypes.ts","api/tickets.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/TicketEditor/styles.module.css?35f4","utils/imagefileToData.ts","utils/useFont.ts","components/TicketEditor/editor.ts","components/TicketEditor/inspector.tsx","api/fonts.ts","components/TicketEditor/index.tsx","components/TicketEditor/viewer.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/simple.tsx","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/PopupConfirmDeletion/index.tsx","api/staff.ts","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/EventsFullPage/styles.module.css?dfe7","pages/EventsFullPage/index.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","components/create/CreateFontForm.tsx","pages/FontsPage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://ticket_system/./src/pages/ManagersPage/styles.module.css?b9cc","api/managers.ts","components/create/CreateManagerForm.tsx","pages/ManagersPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","utils/getTicketPrefix.ts","pages/PrintTicketsPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/useSound.ts","pages/ScannerPage/index.tsx","api/checkTicket.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","App.tsx"],"sourcesContent":["import type { TicketPattern } from \"../components/TicketEditor/editor\";\n\nexport class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface User\n{\n\tauth: boolean,\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\toperations: string[],\n}\n\nexport interface UserFull\n{\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\tbossId: number | null,\n\tdeleted: boolean,\n\taccess: string[],\n\toperations: string[],\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string,\n}\n\nexport interface ImgData\n{\n\tdata: string,\n\tname: string,\n\taccessEventId: number,\n}\n\nexport interface ResponseEvent\n{\n\tid: number,\n\tname: string,\n\tdate: string,\n}\n\nexport interface EventData\n{\n\tid: number,\n\tname: string,\n\tdate: Date,\n}\nexport interface EventDataFull\n{\n\tid: number,\n\tdeleted: boolean,\n\tname: string,\n\tdate: Date,\n\tactive: boolean,\n\taccess: User[],\n}\n\nexport interface ResponseCheckTicket\n{\n\tsuccess: boolean,\n\terrorCode: null | \"event\" | \"scanned\" | \"notExist\",\n\tticket: ResponseTicket | null,\n\tevent: ResponseEvent | null,\n}\n\nexport interface ResponseTicket\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\teventId: number,\n\tcreatedDate: string,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: string,\n\tauthOnPltf: boolean,\n}\n\nexport type CheckTicketResult = CheckTicketResult_success | CheckTicketResult_event | CheckTicketResult_scanned | CheckTicketResult_notExist;\n\ninterface CheckTicketResult_success\n{\n\tsuccess: true,\n\terrorCode: null,\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_event\n{\n\tsuccess: boolean,\n\terrorCode: \"event\",\n\tticket: Ticket,\n\tevent: EventData,\n}\n\ninterface CheckTicketResult_scanned\n{\n\tsuccess: false,\n\terrorCode: \"scanned\",\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_notExist\n{\n\tsuccess: false,\n\terrorCode: \"notExist\",\n\tticket: null,\n\tevent: null,\n}\n\nexport type Ticket = Ticket_common | Ticket_scanned;\n\ninterface Ticket_common\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: Date,\n\tauthOnPltf: boolean,\n}\n\ninterface Ticket_scanned\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy: string,\n\tscannedById: number,\n\tscannedDate: Date,\n\tauthOnPltf: boolean,\n}\n\nexport interface TicketType\n{\n\tid: number,\n\tname: string,\n\timageId: number | null,\n\tpattern: TicketPattern,\n}\n\nexport interface TicketStats\n{\n\ttypeId: number,\n\tcount: number,\n\tscanned: number,\n\tauthOnPltf: number,\n}\n\nexport interface Font\n{\n\tid: number,\n\tname: string,\n\ttype: \"ttf\" | \"otf\" | \"woff\" | \"woff2\",\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"GET\", input, body);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"GET\", input, body);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n\nexport async function fetchPostForm<T>(input: RequestInfo | URL, body: FormData)\n{\n\tconst res = await fetch(input, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t});\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as T;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError } from \"./dataTypes\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPost } from \"../utils/fetch\";\n\nexport function createEmptyUser(): User\n{\n\treturn { auth: false, id: -1, login: \"\", roles: [], name: \"\", operations: [] };\n}\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", async () =>\n\t{\n\t\tconst res = await fetch(\"/api/user\");\n\t\tconst data = await res.json();\n\n\t\tif (res.status == 401) return createEmptyUser();\n\t\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\t\tconst user = data as User;\n\t\tuser.auth = true;\n\t\treturn user;\n\t});\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\"),\n\t);\n}\n\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeNameData) =>\n\t\t\tawait fetchPost(\"/api/user/change_name\", data),\n\t\tonSuccess: (_, data: ChangeNameData) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeNameData\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_debug_events: \"page_debug_events\",\n\tpage_debug_users: \"page_debug_users\",\n\tpage_fonts: \"page_fonts\",\n\tpage_managers: \"page_managers\",\n\n\tget_staff_event: \"get_staff_event\",\n\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tadd_font: \"add_font\",\n\tadd_manager: \"add_manager\",\n\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n\tdelete_manager: \"delete_manager\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","import { useMutation, useQueryClient } from \"react-query\";\nimport { ApiError, User } from \"./dataTypes\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { createEmptyUser } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (authData: AuthData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => fetchPost(\"/api/logout\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", (_?: User) => createEmptyUser());\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, padding, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\", padding }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tpadding?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_fonts\") && <Link to=\"/fonts\" className=\"button button_large\">Шрифты</Link>}\n\t\t\t{hasPermission(user, \"page_managers\") && <Link to=\"/managers\" className=\"button button_large\">Организаторы</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/d\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t{useHasPermission(\"page_debug_users\") && <Link to=\"/d/users\" className=\"button\">Users</Link>}\n\t\t\t{useHasPermission(\"page_debug_events\") && <Link to=\"/d/events\" className=\"button\">Events</Link>}\n\t\t\t<Link to=\"/d/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\",\"ticketTypes\":\"styles_ticketTypes__FIDHq\"};","import type { QueryClient, QueryKey } from \"react-query\";\n\nexport function queryStrKey(queryKey: QueryKey)\n{\n\treturn queryKey instanceof Array ? queryKey.map(v => `${v}`) : `${queryKey}`;\n}\n\nexport function queryInvalidate(queryClient: QueryClient, queryKey: QueryKey)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tqueryClient.invalidateQueries(queryKey, { exact: true });\n}\n\nexport function queryListAddItem<T>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items, item] : [item]);\n}\n\nexport function queryListUpdateItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items?.map(v => v.id == item.id ? item : v) || []);\n}\n\nexport function queryListDeleteItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, itemId: number | string)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? items.filter(v => v.id != itemId) : []);\n}\n\ninterface ObjWithId\n{\n\tid: number | string,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, EventData, ResponseEvent, ResponseMsg, type EventDataFull } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem, queryInvalidate } from \"../utils/query\";\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery(\"events\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events\");\n\t\treturn events.map(parseEventResponse);\n\t}, {\n\t\tonSuccess: data =>\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v)),\n\t});\n}\n\nexport function useEventsFull()\n{\n\treturn useQuery(\"events_full\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events_full\");\n\t\treturn events.map(parseEventResponse) as EventDataFull[];\n\t});\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst event = await fetchJsonGet<ResponseEvent>(\"/api/events/\" + eventId);\n\t\treturn parseEventResponse(event);\n\t});\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst res = await fetch(\"/api/scanner_events/\" + eventId);\n\t\tconst data = await res.json();\n\t\tif (!res.ok)\n\t\t{\n\t\t\tif (res.status == 403)\n\t\t\t\treturn NaN;\n\t\t\tthrow new ApiError((await res.json() as ResponseMsg).msg);\n\t\t}\n\t\treturn parseEventResponse(data as ResponseEvent);\n\t}, { retry: 3 });\n}\n\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events\", eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListAddItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events/\" + eventId, eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListUpdateItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/events/\" + eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, [\"event\", eventId]);\n\t\t\tqueryListDeleteItem(queryClient, \"events\", eventId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationGetAccessToEvent()\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventId: number | string) =>\n\t\t\tawait fetchPost(`/api/events/${eventId}/add_access`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, \"events\");\n\t\t\tqueryInvalidate(queryClient, \"events_full\");\n\t\t},\n\t});\n}\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false, year = true)\n{\n\tif (!date) return \"\";\n\tconst nums = [padNum(date.getDate(), 2), padNum(date.getMonth() + 1, 2)];\n\tif (year) nums.push(`${date.getFullYear()}`);\n\tif (reverse) nums.reverse();\n\treturn nums.join(\".\");\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport type { ImgData, TicketType } from \"./dataTypes\";\nimport type { TicketPattern } from \"../components/TicketEditor/editor\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryInvalidate, queryListUpdateItem } from \"../utils/query\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery([\"ticket_types\", eventId], async () =>\n\t\tawait fetchJsonGet<TicketType[]>(`/api/events/${eventId}/ticket_types`),\n\t\t{\n\t\t\tonSuccess: data =>\n\t\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v)),\n\t\t});\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypesData[]) =>\n\t\t\tawait fetchJsonPost<TicketType[]>(`/api/events/${eventId}/ticket_types`, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryInvalidate(queryClient, [\"tickets\", eventId])\n\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], data);\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n\n\nexport function useTicketType(typeId: number)\n{\n\treturn useQuery([\"ticket_type\", `${typeId}`], async () =>\n\t\tawait fetchJsonGet<TicketType>(\"/api/ticket_types/\" + typeId),\n\t\t{ enabled: typeId >= 0 }\n\t);\n}\n\nexport function useMutationUpdateTicketType(typeId: number | string, onSuccess?: (ticket: TicketType) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypeData) =>\n\t\t\tawait fetchJsonPost<TicketType>(\"/api/ticket_types/\" + typeId, data),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"ticket_type\", `${typeId}`], data);\n\t\t\tqueryListUpdateItem(queryClient, [\"ticket_types\", typeId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypeData\n{\n\timg: ImgData | null,\n\tpattern: TicketPattern,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseTicket, Ticket, TicketStats } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", `${eventId}`], async () =>\n\t{\n\t\tconst tickets = await fetchJsonGet<ResponseTicket[]>(`/api/events/${eventId}/tickets`);\n\t\treturn tickets.map(parseTicketResponse);\n\t});\n}\n\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: NewTicketData) =>\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets\", ticketData);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async function postUpdateTicket(params: UpdateTicketParams)\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets/\" + params.ticketId, params.data);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketId: number | string) =>\n\t\t\tawait fetchDelete(\"/api/tickets/\" + ticketId),\n\t\tonSuccess: (_, ticketId) =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, [\"tickets\", eventId], ticketId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useTicketStats(eventId: number | string)\n{\n\treturn useQuery([\"ticket_stats\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<TicketStats[]>(`/api/events/${eventId}/tickets_stats`),\n\t);\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(ticketTypes.data?.[0]?.id || -1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__+QOp3\",\"canvas\":\"styles_canvas__wzjs3\",\"inspector\":\"styles_inspector__TrPRu\",\"inspector_open\":\"styles_inspector_open__h5KZj\",\"fields\":\"styles_fields__fz+aE\",\"colorInput\":\"styles_colorInput__8Ty5B\",\"fontInput\":\"styles_fontInput__zF4OQ\",\"panel\":\"styles_panel__yLWcU\",\"br\":\"styles_br__7BTyB\",\"footer\":\"styles_footer__ADD9E\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string, accessEventId?: number)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t\taccessEventId,\n\t} as ImgData\n}","import { useEffect } from \"react\";\nimport { Font } from \"../api/dataTypes\";\n\nexport default function useFont(font: Font)\n{\n\tconst fontName = `${font.id}_${font.name}`;\n\tuseEffect(() =>\n\t{\n\t\tconst myFont = newFontFace(fontName, font.id, font.type);\n\t\tdocument.fonts.add(myFont);\n\t\treturn () =>\n\t\t{\n\t\t\tdocument.fonts.delete(myFont);\n\t\t}\n\t}, []);\n\treturn `\"${fontName}\"`;\n}\n\nexport function newFontFace(family: string, id: number, type: keyof typeof fontTypes)\n{\n\treturn new FontFace(family, `url(\"/api/fonts/${id}\")  format(\"${fontTypes[type]}\")`);\n}\n\nconst fontTypes = {\n\totf: \"opentype\",\n\tttf: \"truetype\",\n\twoff: \"woff\",\n\twoff2: \"woff2\",\n}\n","import { Font, Ticket } from \"../../api/dataTypes\";\nimport type { UpdateTicketTypeData } from \"../../api/ticketTypes\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport QRCode from \"qrcode\"\nimport { newFontFace } from \"../../utils/useFont\";\n\nexport class TicketEditor\n{\n\tprivate editor: Editor | null = null;\n\tprivate img: HTMLImageElement | null = null;\n\tprivate imgQr = new Image();\n\tprivate qrLast = 0;\n\tprivate imgFile: File | null = null;\n\tprivate data: TicketPattern = { width: 0, height: 0, objects: [] };\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate loadingImg = false;\n\tprivate loadingFont = false;\n\tprivate loadingFonts: FontFace[] = [];\n\tprivate get loading() { return this.loadingImg || this.loadingFont; }\n\tprivate ticket: Ticket | null = null;\n\tprivate fonts: { id: number, font: FontFace }[] = [];\n\tprivate listenerResize = () => this.draw();\n\tprivate listenerKeydown = (e: KeyboardEvent) => { if (e.key == \"Delete\") if (this.editor?.deleteSelectedObj()) this.draw(); };\n\tprivate listenerMouseDown = (e: MouseEvent) => { if (this.editor?.mouseDown(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerMouseMove = (e: MouseEvent) => { if (this.editor?.mouseMove(e.offsetX, e.offsetY)) this.draw() };\n\tprivate listenerMouseUp = (e: MouseEvent) => { if (this.editor?.mouseUp(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerContextMenu = (e: MouseEvent) => { e.preventDefault(); };\n\tprivate listenerWheel = (e: WheelEvent) => { e.preventDefault(); if (this.editor?.wheel(e.offsetX, e.offsetY, e.deltaY)) this.draw() };\n\tprivate inspectorSet: InspectorSetFunc = () => { };\n\n\tconstructor(private fontTypes: FontTypes | null, init = true, private viewMode = false)\n\t{\n\t\tif (!init || viewMode) return;\n\t\twindow.addEventListener(\"resize\", this.listenerResize);\n\t\twindow.addEventListener(\"keydown\", this.listenerKeydown);\n\t}\n\n\tpublic static renderQRCode(code: string, color: string, callback: (img: HTMLImageElement) => void)\n\t{\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10, margin: 2, color: { light: \"#ffffff00\", dark: color } }, (e, url) =>\n\t\t{\n\t\t\tif (e) console.error(e);\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener(\"load\", () =>\n\t\t\t{\n\t\t\t\tcallback(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tpublic setData(image: number | null, data: TicketPattern)\n\t{\n\t\tthis.img = null;\n\t\tthis.imgFile = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t\tthis.data = data || this.createNewData();\n\n\t\t// update data from prev version\n\t\tthis.data.objects.forEach(v => v.f == undefined ? v.f = -1 : {});\n\n\t\tif (!this.data.objects.find(v => v.type == \"code\"))\n\t\t\tthis.data.objects.push({ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 });\n\n\t\tthis.editor = null;\n\t\tthis.reRenderQR();\n\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t\tthis.editor?.setViewTicket(ticket);\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setNewImage(image: File)\n\t{\n\t\tthis.imgFile = image;\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tURL.revokeObjectURL(url);\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tconst url = URL.createObjectURL(image)\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = url;\n\t}\n\tpublic setImage(image: number | null)\n\t{\n\t\tthis.imgFile = null;\n\t\tthis.img = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t}\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.removeCanvasListeners();\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\n\t\tif (this.viewMode) return;\n\n\t\tcanvas.addEventListener(\"mousedown\", this.listenerMouseDown);\n\t\tcanvas.addEventListener(\"mousemove\", this.listenerMouseMove);\n\t\tcanvas.addEventListener(\"mouseup\", this.listenerMouseUp);\n\t\tcanvas.addEventListener(\"wheel\", this.listenerWheel);\n\t\tcanvas.addEventListener(\"contextmenu\", this.listenerContextMenu);\n\t}\n\tpublic setInspector(f: InspectorSetFunc)\n\t{\n\t\tthis.inspectorSet = f;\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tthis.editor?.inspectorInput(field, value);\n\t\tif (field == \"f\")\n\t\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic reset()\n\t{\n\t\tthis.editor = null;\n\t\tthis.img = null;\n\t\tthis.imgQr = new Image();\n\t\tthis.imgFile = null;\n\t\tthis.data = { width: 0, height: 0, objects: [] };\n\t\tthis.loadingImg = false;\n\t\tthis.loadingFont = false;\n\t\tthis.ticket = null;\n\t\tthis.inspectorSet(null);\n\t\tthis.draw();\n\t}\n\tpublic async getData(imageName: string, eventId: number)\n\t{\n\t\treturn {\n\t\t\tpattern: this.data,\n\t\t\timg: this.imgFile ? await imagefileToData(this.imgFile, imageName, eventId) : null,\n\t\t} as UpdateTicketTypeData\n\t}\n\tpublic destroy()\n\t{\n\t\twindow.removeEventListener(\"resize\", this.listenerResize);\n\t\twindow.removeEventListener(\"keydown\", this.listenerKeydown);\n\t\tthis.removeCanvasListeners();\n\t\tthis.inspectorSet(null);\n\t}\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.editor?.drawObject(obj);\n\t\tthis.draw();\n\t}\n\tpublic resetZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.resetZoom();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\tpublic fitZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.fitToView();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners()\n\t{\n\t\tif (this.canvas)\n\t\t{\n\t\t\tthis.canvas.removeEventListener(\"mousedown\", this.listenerMouseDown);\n\t\t\tthis.canvas.removeEventListener(\"mousemove\", this.listenerMouseMove);\n\t\t\tthis.canvas.removeEventListener(\"mouseup\", this.listenerMouseUp);\n\t\t\tthis.canvas.removeEventListener(\"wheel\", this.listenerWheel);\n\t\t\tthis.canvas.removeEventListener(\"contextmenu\", this.listenerContextMenu);\n\t\t}\n\t}\n\n\tprivate loadImage(image: number)\n\t{\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = `/api/img/${image}`;\n\t}\n\n\tprivate loadFonts()\n\t{\n\t\tthis.loadingFont = true;\n\t\tif (!this.fontTypes) return;\n\n\t\tconst reqFonts = this.data.objects.map(v => v.f);\n\t\t// delete unused fonts\n\t\tfor (let i = this.fonts.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst font = this.fonts[i];\n\t\t\tif (!reqFonts.includes(font.id))\n\t\t\t{\n\t\t\t\tdocument.fonts.delete(font.font);\n\t\t\t\tthis.fonts.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t// load new fonts\n\n\t\tconst loadedFonts = this.fonts.map(v => v.id);\n\t\tfor (const obj of this.data.objects)\n\t\t{\n\t\t\tif (obj.f < 0 || loadedFonts.includes(obj.f))\n\t\t\t\tcontinue\n\t\t\tconst font = newFontFace(`font_${obj.f}`, obj.f, this.fontTypes[obj.f]);\n\t\t\tthis.fonts.push({ id: obj.f, font });\n\t\t\tthis.loadingFonts.push(font);\n\t\t\tdocument.fonts.add(font);\n\t\t\tfont.load().then(() =>\n\t\t\t{\n\t\t\t\tthis.loadingFonts.splice(this.loadingFonts.indexOf(font), 1)\n\t\t\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t\t\t\tif (!this.loadingFont)\n\t\t\t\t\tthis.draw();\n\t\t\t});\n\t\t}\n\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t}\n\n\tprivate reRenderQR()\n\t{\n\t\tconst color = this.data.objects.find(v => v.type == \"qr\")?.c || \"#000000\";\n\t\tconst id = ++this.qrLast;\n\t\tTicketEditor.renderQRCode(this.ticket?.code || \"23-31224-34-07-4321\", color, img =>\n\t\t{\n\t\t\tif (id != this.qrLast) return;\n\t\t\tthis.imgQr = img;\n\t\t\tif (this.editor)\n\t\t\t{\n\t\t\t\tthis.editor.setQr(img);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setCursor(cursor: Cursor)\n\t{\n\t\tif (!this.canvas) return;\n\t\tthis.canvas.style.cursor = cursor;\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas) return;\n\t\tconst parent = this.canvas.parentElement;\n\t\tif (!parent) return;\n\n\t\tlet w = parent.clientWidth;\n\t\tlet h = parent.clientHeight;\n\t\tif (this.viewMode && this.img && !this.loading)\n\t\t{\n\t\t\tw = this.data.width;\n\t\t\th = this.data.height;\n\t\t}\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.style.width = `${w}px`;\n\t\tthis.canvas.height = h;\n\t\tthis.canvas.style.height = `${h}px`;\n\n\t\tif (!this.ctx) return;\n\t\tthis.ctx.fillStyle = \"#00000033\";\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (!this.img || this.loading)\n\t\t{\n\t\t\tthis.ctx.fillStyle = \"black\";\n\t\t\tconst text = this.loading ? \"Загрузка\" : (this.viewMode ? \"Этот тип билетов\\nне настроен\" : \"Загрузите картинку\");\n\t\t\tthis.drawTextAtCenter(text, 32);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor)\n\t\t{\n\t\t\tthis.editor = new Editor(this.img, this.data, this.reRenderQR.bind(this), this.setCursor.bind(this), this.inspectorSet, this.imgQr, this.viewMode)\n\t\t\tthis.editor.setCanvasSize({ w, h });\n\t\t\tthis.editor.fitToView();\n\t\t}\n\t\tthis.editor.setCanvasSize({ w, h });\n\t\tthis.ctx.imageSmoothingEnabled = false;\n\t\tif (this.ticket)\n\t\t\tthis.editor.setViewTicket(this.ticket);\n\t\tthis.editor.draw(this.ctx)\n\t}\n\n\tprivate drawTextAtCenter(text: string, size: number)\n\t{\n\t\tif (!this.ctx || !this.canvas) return;\n\t\tconst w = this.canvas.width;\n\t\tconst h = this.canvas.height;\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.font = `${size}px Arial`;\n\t\tconst lines = text.split(\"\\n\");\n\t\tconst dy = -lines.length * size * 0.8 / 2;\n\t\tconst ddy = lines.length * size * 0.8;\n\t\tfor (let i = 0; i < lines.length; i++)\n\t\t\tthis.ctx.fillText(lines[i], w / 2, h / 2 + dy + ddy * i);\n\t}\n\n\tprivate createNewData()\n\t{\n\t\treturn {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tobjects: [\n\t\t\t\t{ type: \"qr\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"name\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"promo\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t],\n\t\t} as TicketPattern;\n\t}\n}\n\nexport interface FontTypes\n{\n\t[id: number]: Font[\"type\"];\n}\n\nexport interface TicketPattern\n{\n\twidth: number,\n\theight: number,\n\tobjects: TicketPatternObject[],\n}\nexport interface TicketPatternObject\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tc: string, // color\n\tf: number, // font\n\ttype: TicketPatternObjectType,\n}\ntype TicketPatternObjectType = \"qr\" | \"name\" | \"promo\" | \"code\";\n\ntype InspectorSetFunc = (obj: TicketPatternObject | null) => void;\ntype InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) => void;\n\ntype MoveMode = null | \"view\" | \"obj\" | \"resize\";\ntype Cursor = \"default\" | \"move\" | \"n-resize\" | \"e-resize\" | \"ne-resize\" | \"nw-resize\";\n\n\nclass Editor\n{\n\tprivate transform = { x: 0, y: 0, s: 1 };\n\tprivate moving = { sx: 0, sy: 0, vx: 0, vy: 0, vw: 0, vh: 0, mode: null as MoveMode };\n\tprivate drawing = { sx: 0, sy: 0, ex: 0, ey: 0, active: false, type: null as TicketPatternObjectType | null };\n\tprivate resizing = { dir: [0, 0] as RectZone, keepAspect: false, aspect: 1 };\n\tprivate canvasSize = { w: 0, h: 0 };\n\tprivate selected = -1;\n\tprivate readonly selectionBorder = 16;\n\tprivate ticket: Ticket | null = null;\n\n\tconstructor(\n\t\tprivate img: HTMLImageElement,\n\t\tprivate data: TicketPattern,\n\t\tprivate reRenderQR: () => void,\n\t\tprivate setCursor: (cursor: Cursor) => void,\n\t\tprivate setInspector: InspectorSetFunc,\n\t\tprivate imgqr: HTMLImageElement,\n\t\tprivate viewMode: boolean,\n\t)\n\t{\n\t\tdata.width = img.width;\n\t\tdata.height = img.height;\n\t}\n\n\tpublic fitToView()\n\t{\n\t\tconst m = this.viewMode ? 0 : 100;\n\t\tthis.transform.s = Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height);\n\t\tthis.transform.x = (this.canvasSize.w - this.img.width * this.transform.s) / 2;\n\t\tthis.transform.y = (this.canvasSize.h - this.img.height * this.transform.s) / 2;\n\t\tthis.restrictView();\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tif (this.selected < 0) return;\n\t\tconst obj = this.data.objects[this.selected]\n\t\tconst fs = [\"x\", \"y\", \"w\", \"h\", \"f\"] as const;\n\t\tif (fs.includes(field as any))\n\t\t{\n\t\t\tconst f = field as typeof fs[number];\n\t\t\tconst v = value as number;\n\t\t\tobj[f] = Math.max(v, 0);\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (f == \"w\") obj.h = obj.w;\n\t\t\t\tif (f == \"h\") obj.w = obj.h;\n\t\t\t}\n\t\t}\n\t\telse if (field == \"c\")\n\t\t{\n\t\t\tobj[field] = value;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tthis.reRenderQR();\n\t\t}\n\t}\n\tpublic setCanvasSize(size: { w: number, h: number })\n\t{\n\t\tthis.canvasSize = size;\n\t}\n\tpublic setQr(qr: HTMLImageElement)\n\t{\n\t\tthis.imgqr = qr;\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.x, this.transform.y);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tctx.fillStyle = \"black\"\n\t\tctx.fillRect(0, 0, this.img.width, this.img.height);\n\t\tctx.drawImage(this.img, 0, 0);\n\n\t\tconst texts = {\n\t\t\tname: this.ticket?.personName ?? \"Иванов Иван Иванович 太阳\",\n\t\t\tpromo: this.ticket?.promocode ?? \"Неутомимый\",\n\t\t\tcode: this.ticket?.code ?? \"23-31224-34-07-4321\",\n\t\t}\n\n\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t{\n\t\t\tconst obj = this.data.objects[i];\n\t\t\t// ctx.fillStyle = \"#ffffff88\";\n\t\t\t// ctx.fillRect(...unwrapRect(obj));\n\t\t\tctx.fillStyle = obj.c;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (this.imgqr.complete && this.imgqr.naturalHeight != 0)\n\t\t\t\t\tctx.drawImage(this.imgqr, ...unwrapRect(obj));\n\t\t\t\telse\n\t\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\telse if (obj.type == \"name\" || obj.type == \"promo\" || obj.type == \"code\")\n\t\t\t{\n\t\t\t\tconst font = `font_${obj.f}, Arial`;\n\t\t\t\tctx.font = `${obj.h}px ${font}`;\n\t\t\t\tctx.fillText(texts[obj.type], obj.x, obj.y + obj.h * 0.8, obj.w);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\tif (this.selected == i)\n\t\t\t{\n\t\t\t\tctx.strokeStyle = \"orange\";\n\t\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\t\tctx.strokeRect(...unwrapRect(obj));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\tctx.strokeStyle = \"white\";\n\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\tlet w = this.drawing.ex - this.drawing.sx;\n\t\t\tlet h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (this.drawing.type == \"qr\")\n\t\t\t\th = w;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t\tctx.strokeStyle = \"black\";\n\t\t\tctx.lineWidth = 2 / this.transform.s;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.drawing.type = obj;\n\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t}\n\n\tpublic deleteSelectedObj()\n\t{\n\t\tif (this.selected < 0)\n\t\t\treturn false;\n\n\t\tconst obj = this.data.objects[this.selected];\n\t\tobj.x = 0;\n\t\tobj.y = 0;\n\t\tobj.w = 0;\n\t\tobj.h = 0;\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t\treturn true;\n\t}\n\n\tpublic resetZoom()\n\t{\n\t\tthis.transform.s = 1;\n\t\tthis.restrictView();\n\t}\n\n\tpublic mouseDown(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.sx = x;\n\t\tthis.moving.sy = y;\n\t\tif (button == 2)\n\t\t{\n\t\t\tthis.moving.vx = this.transform.x;\n\t\t\tthis.moving.vy = this.transform.y;\n\t\t\tthis.moving.mode = \"view\";\n\t\t\tthis.setCursor(\"move\");\n\t\t\treturn;\n\t\t}\n\t\tif (button == 0)\n\t\t{\n\t\t\tif (this.drawing.type)\n\t\t\t{\n\t\t\t\t[this.drawing.sx, this.drawing.sy] = this.pointToWorld(x, y);\n\t\t\t\tthis.drawing.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t\t{\n\t\t\t\tconst obj = this.data.objects[i];\n\t\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\t\tlet resize = false;\n\t\t\t\tif (this.selected == i)\n\t\t\t\t{\n\t\t\t\t\tthis.resizing.dir = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\t\t\tresize = this.resizing.dir[0] != 0 || this.resizing.dir[1] != 0;\n\t\t\t\t\tthis.resizing.aspect = obj.h / obj.w;\n\t\t\t\t\tthis.resizing.keepAspect = obj.type == \"qr\";\n\t\t\t\t}\n\t\t\t\tif (pointInRect(wx, wy, obj) || resize)\n\t\t\t\t{\n\t\t\t\t\tthis.selected = i;\n\t\t\t\t\tthis.setInspector(obj);\n\t\t\t\t\tthis.moving.vx = obj.x;\n\t\t\t\t\tthis.moving.vy = obj.y;\n\t\t\t\t\tthis.moving.vw = obj.w;\n\t\t\t\t\tthis.moving.vh = obj.h;\n\t\t\t\t\tthis.moving.mode = resize ? \"resize\" : \"obj\";\n\t\t\t\t\tthis.setCursor(resize ? resizeCursor(this.resizing.dir) : \"move\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst redraw = this.selected >= 0;\n\t\t\tthis.selected = -1;\n\t\t\tthis.setInspector(null);\n\t\t\treturn redraw;\n\t\t}\n\t}\n\n\tpublic mouseMove(x: number, y: number)\n\t{\n\t\tif (this.moving.mode == \"view\")\n\t\t{\n\t\t\tthis.transform.x = this.moving.vx + (x - this.moving.sx);\n\t\t\tthis.transform.y = this.moving.vy + (y - this.moving.sy);\n\t\t\tthis.restrictView();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"obj\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tobj.x = this.moving.vx + (x - this.moving.sx) / this.transform.s;\n\t\t\tobj.y = this.moving.vy + (y - this.moving.sy) / this.transform.s;\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"resize\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst dx = (x - this.moving.sx) / this.transform.s;\n\t\t\tconst dy = (y - this.moving.sy) / this.transform.s;\n\t\t\tconst [rx, ry] = this.resizing.dir;\n\t\t\tif (this.resizing.keepAspect)\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx == 0)\n\t\t\t\t{\n\t\t\t\t\tif (ry > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t\t}\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t\t}\n\t\t\t\t\tobj.w = obj.h / this.resizing.aspect;\n\t\t\t\t\tobj.x = this.moving.vx - (obj.w - this.moving.vw) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t}\n\t\t\t\tif (ry > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t}\n\t\t\t\tif (ry < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.w = Math.max(obj.w, 5);\n\t\t\tobj.h = Math.max(obj.h, 5);\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.selected >= 0)\n\t\t{\n\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst resize = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\tif (resize[0] != 0 || resize[1] != 0)\n\t\t\t\tthis.setCursor(resizeCursor(resize));\n\t\t\telse\n\t\t\t\tthis.setCursor(\"default\");\n\t\t}\n\t}\n\n\tpublic mouseUp(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.mode = null;\n\t\tthis.setCursor(\"default\");\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects.find(v => v.type == this.drawing.type);\n\t\t\tif (!obj)\n\t\t\t{\n\t\t\t\tconsole.error(\"Ticket editor: drawing obj not found\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tobj.x = this.drawing.sx;\n\t\t\tobj.y = this.drawing.sy;\n\t\t\tobj.w = this.drawing.ex - this.drawing.sx;\n\t\t\tobj.h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (obj.w < 0)\n\t\t\t{\n\t\t\t\tobj.x += obj.w;\n\t\t\t\tobj.w *= -1;\n\t\t\t}\n\t\t\tif (obj.h < 0)\n\t\t\t{\n\t\t\t\tobj.y += obj.h;\n\t\t\t\tobj.h *= -1;\n\t\t\t}\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.drawing.active = false;\n\t\t\tthis.drawing.type = null;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tobj.h = obj.w;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic wheel(x: number, y: number, d: number)\n\t{\n\t\tconst X = (x - this.transform.x) / this.transform.s;\n\t\tconst Y = (y - this.transform.y) / this.transform.s;\n\n\t\tif (d > 0)\n\t\t\tthis.transform.s /= 1.1;\n\t\telse\n\t\t\tthis.transform.s *= 1.1;\n\t\tconst m = 200;\n\t\tthis.transform.s = Math.max(this.transform.s, Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height));\n\n\t\tthis.transform.x = x - X * this.transform.s;\n\t\tthis.transform.y = y - Y * this.transform.s;\n\t\tthis.restrictView();\n\t\treturn true;\n\t}\n\n\tprivate restrictView()\n\t{\n\t\tconst m = 100;\n\t\tconst iw = this.img.width * this.transform.s\n\t\tconst ih = this.img.height * this.transform.s\n\t\tif (iw > this.canvasSize.w)\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + this.canvasSize.w - m), m);\n\t\telse\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + m), this.canvasSize.w - m);\n\t\tif (ih > this.canvasSize.h)\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + this.canvasSize.h - m), m);\n\t\telse\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + m), this.canvasSize.h - m);\n\t}\n\n\tprivate pointToWorld(x: number, y: number)\n\t{\n\t\treturn [(x - this.transform.x) / this.transform.s, (y - this.transform.y) / this.transform.s];\n\t}\n\tprivate pointToScreen(x: number, y: number)\n\t{\n\t\treturn [x * this.transform.s + this.transform.x, y * this.transform.s + this.transform.y];\n\t}\n}\n\ninterface Rect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\n\nfunction pointInRect(x: number, y: number, rect: Rect)\n{\n\treturn x > rect.x && x < rect.x + rect.w &&\n\t\ty > rect.y && y < rect.y + rect.h;\n}\n\ntype RectZone = [number, number];  // [x, y] 1 - bottom, right; -1 = top, left\nfunction rectZone(x: number, y: number, rect: Rect, border: number): RectZone\n{\n\tconst r = [0, 0] as RectZone;\n\n\tif (!pointInRect(x, y, { x: rect.x - border, y: rect.y - border, w: rect.w + border * 2, h: rect.h + border * 2 }))\n\t\treturn r;\n\n\tif (Math.abs(x - rect.x) <= border) r[0] = -1;\n\tif (Math.abs(x - (rect.x + rect.w)) <= border) r[0] = 1;\n\tif (Math.abs(y - rect.y) <= border) r[1] = -1;\n\tif (Math.abs(y - (rect.y + rect.h)) <= border) r[1] = 1;\n\n\treturn r;\n}\nfunction resizeCursor(direction: RectZone): Cursor\n{\n\tconst [x, y] = direction;\n\tif (x == 0)\n\t{\n\t\tif (y == 0) return \"default\"; // none\n\t\tif (y > 0) return \"n-resize\"; // down\n\t\treturn \"n-resize\"; // up\n\t}\n\tif (x > 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // right\n\t\tif (y > 0) return \"nw-resize\"; // down-right\n\t\treturn \"ne-resize\"; // up-right\n\t}\n\tif (x < 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // left\n\t\tif (y > 0) return \"ne-resize\"; // down-left\n\t\treturn \"nw-resize\"; // up-left\n\t}\n\treturn \"default\"; // none\n}\n\nfunction unwrapRect({ x, y, w, h }: Rect): [number, number, number, number]\n{\n\treturn [x, y, w, h];\n}\n","import { useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport type { TicketEditor, TicketPatternObject } from \"./editor\";\nimport classNames from \"../../utils/classNames\";\nimport { Font } from \"../../api/dataTypes\";\n\ntype E = React.ChangeEvent<HTMLInputElement>;\n\nexport function Inspector({ editor, fonts }: InspectorProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [obj, setObj] = useState<TicketPatternObject | null>(null);\n\tconst update = () => setUpdate(v => v + 1);\n\teditor.setInspector(obj =>\n\t{\n\t\tsetObj(obj);\n\t\tupdate();\n\t});\n\n\treturn (\n\t\t<div className={classNames(styles.inspector, obj && styles.inspector_open)}>\n\t\t\t<h2>{{\n\t\t\t\t\"qr\": \"QR код\",\n\t\t\t\t\"code\": \"Код билета\",\n\t\t\t\t\"name\": \"Посетитель\",\n\t\t\t\t\"promo\": \"Промокод\",\n\t\t\t\t\"\": \"\",\n\t\t\t}[obj?.type || \"\"]}</h2>\n\t\t\t<div className={styles.fields}>\n\t\t\t\t<label>\n\t\t\t\t\t<span>X:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.x || 0} onInput={(e: E) => { editor.inspectorInput(\"x\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Y:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.y || 0} onInput={(e: E) => { editor.inspectorInput(\"y\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Ширина:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.w || 0} onInput={(e: E) => { editor.inspectorInput(\"w\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Высота:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.h || 0} onInput={(e: E) => { editor.inspectorInput(\"h\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<label className={styles.colorInput}>\n\t\t\t\t<span>Цвет:</span>\n\t\t\t\t<input type=\"color\" value={obj?.c || \"#000000\"} onInput={(e: E) => { editor.inspectorInput(\"c\", e.target.value); update(); }} />\n\t\t\t</label>\n\t\t\t{obj?.type != \"qr\" &&\n\t\t\t\t<label className={styles.fontInput}>\n\t\t\t\t\t<span>Шрифт:</span>\n\t\t\t\t\t<select value={obj?.f || -1} onChange={e => { editor.inspectorInput(\"f\", parseInt(e.target.value) || -1); update(); }}>\n\t\t\t\t\t\t<option value={-1}>Arial</option>\n\t\t\t\t\t\t{fonts.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\ninterface InspectorProps\n{\n\teditor: TicketEditor,\n\tfonts: Font[],\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Font } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPostForm } from \"../utils/fetch\";\nimport { queryListAddItem } from \"../utils/query\";\n\nexport function useFonts()\n{\n\treturn useQuery(\"fonts\", async () =>\n\t\tawait fetchJsonGet<Font[]>(\"/api/fonts\")\n\t);\n}\n\nexport function useMutationNewFont(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (fontData: NewFontData) =>\n\t\t{\n\t\t\tconst formData = new FormData();\n\t\t\tformData.set(\"name\", fontData.name);\n\t\t\tformData.set(\"type\", fontData.type);\n\t\t\tformData.set(\"font\", fontData.file);\n\n\t\t\treturn await fetchPostForm<Font>(\"/api/fonts\", formData);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"fonts\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewFontData\n{\n\tname: string,\n\ttype: string,\n\tfile: File,\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateTicketType, useTicketType } from \"../../api/ticketTypes\";\nimport { FontTypes, TicketEditor } from \"./editor\";\nimport { Inspector } from \"./inspector\";\nimport { useFonts } from \"../../api/fonts\";\n\nexport default function TicketTypeEditor({ typeId, eventId, open, close }: EditTicketTypeFormProps)\n{\n\tconst editor = useEditor();\n\tconst mutation = useMutationUpdateTicketType(typeId, close);\n\tconst ttype = useTicketType(typeId);\n\tconst fonts = useFonts();\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\tconst [imageSelection, setImageSelection] = useState(false);\n\tconst [isNewImage, setIsNewImage] = useState(false);\n\tconst noImage = ttype.data?.imageId == null;\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetImageSelection(false);\n\t\t\tsetIsNewImage(false);\n\t\t\teditor.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\tsetImageSelection(!ttype.data?.imageId)\n\t\t}\n\t}, [ttype.data, open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактор билета\">\n\t\t\t{displayError(ttype)}\n\t\t\t{displayError(fonts)}\n\t\t\t{displayError(mutation)}\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.root}>\n\t\t\t\t<div className={styles.canvas}>\n\t\t\t\t\t<canvas ref={refCanvas} />\n\t\t\t\t\t<Inspector editor={editor} fonts={fonts.data || []} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.panel}>\n\t\t\t\t\t<span>Нарисовать объекты:</span>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"qr\")}>QR код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"code\")}>Код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"name\")}>Имя посетителя</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"promo\")}>Промокод</button>\n\t\t\t\t\t<span className={styles.br}></span>\n\t\t\t\t\t<button className=\"button icon\" onClick={() => editor.fitZoom()}>fit_screen</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.resetZoom()}>1:1</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{imageSelection ? <>\n\t\t\t\t\t\t\t{!noImage && <button className=\"button\" onClick={() => setImageSelection(false)}>Отмена</button>}\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={e =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files[0])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\teditor.setNewImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\t\tsetImageSelection(false);\n\t\t\t\t\t\t\t\t\t\tsetIsNewImage(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} accept=\"image/png, image/jpeg, image/gif\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => setImageSelection(true)}>Изменить картинку</button>\n\t\t\t\t\t\t\t{isNewImage && !noImage && <button className=\"button\" onClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetIsNewImage(false);\n\t\t\t\t\t\t\t\teditor.setImage(ttype.data?.imageId || null)\n\t\t\t\t\t\t\t}}>Отменить изменение картинки</button>}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => close?.()}>Отмена</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = await editor.getData(`ticket_${typeId}`, eventId);\n\t\t\t\t\t\t\tmutation.mutate(data);\n\t\t\t\t\t\t}}>Сохранить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport function useEditor(viewMode = false)\n{\n\tconst [_, setUpdate] = useState(0);\n\tconst fonts = useFonts();\n\tlet fontTypes: FontTypes | null = null;\n\tif (fonts.data)\n\t{\n\t\tfontTypes = {};\n\t\tfor (const font of fonts.data || [])\n\t\t\tfontTypes[font.id] = font.type;\n\t}\n\n\tconst editor = useRef(new TicketEditor(fontTypes, false, viewMode));\n\tuseEffect(() =>\n\t{\n\t\teditor.current = new TicketEditor(fontTypes, true, viewMode);\n\t\tsetUpdate(v => v + 1);\n\t\treturn () => editor.current.destroy();\n\t}, [viewMode, fonts.data]);\n\n\treturn editor.current;\n}\n\ninterface EditTicketTypeFormProps extends PopupProps\n{\n\teventId: number,\n\ttypeId: number,\n}\n","import { useEffect, useRef } from \"react\";\nimport { useEditor } from \".\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport Spinner from \"../Spinner\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function TicketViewer({ ticket }: TicketViewerProps)\n{\n\tconst editor = useEditor(true);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) editor.reset();\n\t}, [ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (ticket && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\teditor.setViewTicket(ticket);\n\t\t}\n\t}, [ttype.data, ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<div style={{ minWidth: 400, minHeight: 300 }}>\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{displayError(ttype)}\n\t\t\t<canvas ref={refCanvas} />\n\t\t</div>\n\t)\n}\n\ninterface TicketViewerProps\n{\n\tticket: Ticket | null,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicketSimple({ event, ticket, close }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={close} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}","import { useState } from \"react\";\nimport Popup from \"../Popup\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport TicketViewer from \"../TicketEditor/viewer\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport ViewTicketSimple from \"./simple\";\n\nexport default function ViewTicket({ ticket, event, close }: ViewTicketProps)\n{\n\tconst [simpleViewer, setSimpleViewer] = useState<Ticket | null>(null);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\n\treturn (<>\n\t\t<Popup open={!!ticket && !simpleViewer} close={close} title=\"Просмотр билета\">\n\t\t\t<TicketViewer ticket={ticket} />\n\t\t\t{ttype.data && !ttype.data.imageId && <div style={{ textAlign: \"center\" }}>\n\t\t\t\t<button className=\"button\" onClick={() => setSimpleViewer(ticket)}>Сгенерировать qr код</button>\n\t\t\t</div>}\n\t\t</Popup>\n\t\t<ViewTicketSimple ticket={simpleViewer} event={event} close={() => { setSimpleViewer(null); close() }} />\n\t</>\n\t)\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/staff\"),\n\t);\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(`/api/events/${eventId}/staff`),\n\t);\n}\n\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (staffData: StaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd[]>(`/api/events/${eventId}/staff`, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newStaffData: NewStaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/staff\", newStaffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/staff/\" + staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"events\", staffId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(`/api/staff/${staffId}/reset_password`),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\nimport { useTicketStats } from \"../../api/tickets\";\nimport TicketTypeEditor from \"../../components/TicketEditor\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editTypeFormOpen, setEditTypeFormOpen] = useState(-1);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst stats = useTicketStats(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\tconst stats_sum = (stats.data || []).reduce((p, v) =>\n\t{\n\t\tp.count += v.count;\n\t\tp.scanned += v.scanned;\n\t\tp.authOnPltf += v.authOnPltf;\n\t\treturn p;\n\t}, {\n\t\tcount: 0,\n\t\tscanned: 0,\n\t\tauthOnPltf: 0,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t\t<TicketTypeEditor typeId={editTypeFormOpen} eventId={parseInt(eventId)} open={editTypeFormOpen >= 0} close={() => setEditTypeFormOpen(-1)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t<div className={styles.ticketTypes}>\n\t\t\t\t\t\t\t\t{ticketTypes.data?.map(v =>\n\t\t\t\t\t\t\t\t\t<Fragment key={v.id}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button button_small icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: \"0.5em\", color: v.pattern ? \"green\" : \"\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditTypeFormOpen(v.id)}\n\t\t\t\t\t\t\t\t\t\t\t>edit_square</button>\n\t\t\t\t\t\t\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (!stats.data) return <><div></div><div></div><div></div></>;\n\t\t\t\t\t\t\t\t\t\t\tconst data = stats.data?.find(s => s.typeId == v.id);\n\t\t\t\t\t\t\t\t\t\t\tconst count = data?.count || 0;\n\t\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{count}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(count || 0, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.scanned || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.scanned || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.authOnPltf || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.authOnPltf || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{stats.data && <>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span>Всего</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.count}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.scanned}</span>\n\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.scanned, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.authOnPltf}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.authOnPltf, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{stats.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(stats, error => <div>{error}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n\nfunction calcPercent(v: number, all: number)\n{\n\tif (all == 0) return 0;\n\treturn Math.floor(v / all * 100);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"event\":\"styles_event__AM1vG\",\"title\":\"styles_title__Vipq0\",\"activeMark\":\"styles_activeMark__zBB4P\",\"toggle\":\"styles_toggle__1O26V\",\"toggleInp\":\"styles_toggleInp__s3up7\",\"eventInfo\":\"styles_eventInfo__GuWN-\",\"access\":\"styles_access__1bK7b\"};","import { useEventsFull, useMutationGetAccessToEvent } from \"../../api/events\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport { dateToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"События\");\n\tconst user = useUser();\n\tconst events = useEventsFull()\n\tconst getAccessToEvent = useMutationGetAccessToEvent();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{events.isLoading && <h3>Загрузка</h3>}\n\t\t\t{!events.isLoading && events.isFetching && <h3>Обновление</h3>}\n\t\t\t{getAccessToEvent.isLoading && <Spinner />}\n\t\t\t{displayError(events)}\n\t\t\t{displayError(getAccessToEvent)}\n\t\t\t{events.data?.map(v => <div className={styles.event} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{dateToString(v.date)}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<div className={styles.activeMark} style={{ backgroundColor: v.active ? \"green\" : \"tomato\" }} title=\"active\"></div>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.eventInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.access}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>\n\t\t\t\t\t\t\t\t<div>{o.login}</div>\n\t\t\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{o.id}</div>\n\t\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t\t<div>{o.name}</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!v.access.some(v => v.id == user.data?.id) &&\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button button_light button_small\"\n\t\t\t\t\t\t\tstyle={{ alignSelf: \"end\" }}\n\t\t\t\t\t\t\tonClick={() => getAccessToEvent.mutate(v.id)}\n\t\t\t\t\t\t>Get access</button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t\t}\n\t\t</Layout >\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName=\"button button_large space_between\"\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationNewFont } from \"../../api/fonts\";\n\nexport default function CreateFontForm({ open, close }: PopupProps)\n{\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_file = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewFont(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_file.current)\n\t\t{\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_file.current.value = \"\";\n\t\t}\n\t}, [open, inp_name, inp_file]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление шрифта\">\n\t\t\t{displayError(mutation, undefined, er => er.includes(\"already exist\") ? \"Шрифт с таким названием уже существует\" : er)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst file = inp_file.current?.files?.[0];\n\t\t\t\tif (name && file)\n\t\t\t\t\tmutation.mutate({ file, name, type: file.name.split(\".\").at(-1) || \"\" });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Файл\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={inp_file}\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".ttf,.otf,.woff,.woff2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst name = inp_name.current;\n\t\t\t\t\t\t\tconst file = inp_file.current;\n\t\t\t\t\t\t\tif (!name || !file) return;\n\t\t\t\t\t\t\tconst filename = file.files?.[0]?.name || \"\";\n\t\t\t\t\t\t\tconst splited = filename.split(\".\")\n\t\t\t\t\t\t\tconst fontName = splited.length == 1 ? splited : splited.slice(0, -1);\n\t\t\t\t\t\t\tname.value = fontName.join(\".\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { useState } from \"react\";\nimport { useFonts } from \"../../api/fonts\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateFontForm from \"../../components/create/CreateFontForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { Font } from \"../../api/dataTypes\";\nimport useFont from \"../../utils/useFont\";\n\nexport default function FontsPage()\n{\n\tuseTitle(\"Шрифты\");\n\tconst [createFontOpen, setCreateFontOpen] = useState(false);\n\tconst [exampleText, setExampleText] = useState(\"Мыши булочки жевали!\");\n\tconst fonts = useFonts();\n\n\treturn (\n\t\t<Layout centeredPage gap={12}>\n\t\t\t<h1>Шрифты</h1>\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{displayError(fonts)}\n\n\t\t\t<input type=\"text\" value={exampleText} onInput={e => setExampleText((e.target as HTMLInputElement).value)} />\n\n\t\t\t{fonts.data?.map(v => <FontPreview key={v.id} font={v} text={exampleText} />)}\n\n\t\t\t{useHasPermission(\"add_font\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFontOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateFontForm open={createFontOpen} close={() => setCreateFontOpen(false)} />\n\t\t</Layout>\n\t);\n}\n\nfunction FontPreview({ font, text }: { font: Font, text: string })\n{\n\tconst fontName = useFont(font);\n\treturn <div className=\"space_between\" style={{ fontFamily: fontName, fontSize: \"1.2rem\", gap: \"0 1rem\", flexWrap: \"wrap\" }}>\n\t\t<span>{font.name}</span>\n\t\t<span>{text}</span>\n\t</div>\n}\n","import { useQuery } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", async () =>\n\t{\n\t\tconst log = await fetchJsonGet<LogItemResponse[]>(\"/api/debug/log\");\n\t\treturn log.map(parseLogResponse);\n\t});\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className=\"button button_small\" onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__vi6jw\",\"login\":\"styles_login__rRIkN\",\"userTag\":\"styles_userTag__0uCj4\"};","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem } from \"../utils/query\";\n\n\nexport function useManagers()\n{\n\treturn useQuery(\"managers\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/managers\"),\n\t);\n}\n\nexport function useMutationNewManager(onSuccess?: (manager: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newManagerData: NewManagerData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/managers\", newManagerData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"managers\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewManagerData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteManager(managerId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/managers/\" + managerId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"managers\", managerId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\nimport { useMutationNewManager } from \"../../api/managers\";\n\nexport default function CreateManagerForm({ open, close }: PopupProps)\n{\n\tconst [newManager, setNewManager] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewManager(manager =>\n\t{\n\t\tsetNewManager(manager);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление организатора\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newManager} close={() => setNewManager(null)} title=\"Данные организатора\">\n\t\t\t<div>Логин: {newManager?.login}</div>\n\t\t\t<div>Пароль: {newManager?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useManagers, useMutationDeleteManager } from \"../../api/managers\";\nimport CreateManagerForm from \"../../components/create/CreateManagerForm\";\nimport useUser from \"../../api/user\";\n\nexport default function ManagersPage()\n{\n\tuseTitle(\"Организаторы\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionManager, setDeletionManager] = useState(-1);\n\tconst user = useUser();\n\tconst managers = useManagers();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Организаторы</h1>\n\t\t\t{managers.isLoading && <Spinner />}\n\t\t\t{displayError(managers)}\n\t\t\t{managers.data?.length == 0 && <h2>Организаторы отсутствуют</h2>}\n\t\t\t{managers.data?.map(v => <div className={styles.user + \" space_between\"} key={v.id}>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t<span className={styles.login}>{v.login}</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t{v.id != user.data?.id &&\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionManager(v.id)}>Удалить</button>\n\t\t\t\t\t}\n\t\t\t\t\t{v.id == user.data?.id &&\n\t\t\t\t\t\t<span className={styles.userTag}>Вы</span>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_manager\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateManagerForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionManager} title=\"Удаление организатора\" mutationFn={useMutationDeleteManager} open={deletionManager >= 0} close={() => setDeletionManager(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: isCorrectCodes ? \"5.4em\" : \"10.4em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"4em\" }}><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useMutation } from \"react-query\";\nimport { ApiError, CheckTicketResult, ResponseCheckTicket } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\nimport { fetchJsonPost } from \"../utils/fetch\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: TicketData) =>\n\t\t{\n\t\t\tconst apiResult = await fetchJsonPost<ResponseCheckTicket>(\"/api/check_ticket\", ticketData)\n\t\t\tconst result = apiResult as CheckTicketResult;\n\t\t\tif (apiResult.ticket)\n\t\t\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\t\t\tif (apiResult.event)\n\t\t\t\tresult.event = parseEventResponse(apiResult.event)\n\t\t\treturn result\n\t\t},\n\t\tonSuccess: onSuccess,\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionStaff, setDeletionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.isLoading && <Spinner/>}\n\t\t\t{displayError(staff)}\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={deletionStaff >= 0} close={() => setDeletionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\",\"table\":\"styles_table__46OhS\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\nimport { dateToString } from \"../../utils/dates\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst showAuthOnPlt = tickets.data?.some(v => v.authOnPltf);\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centered gap=\"1rem\" padding=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"10.5em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"2.6em\" }} title=\"Дата добавления\"><span className=\"icon\">note_add</span></th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"1.4em\" }} title=\"Билет использован\"><span className=\"icon\">login</span></th>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <th style={{ width: \"1.4em\" }} title=\"Вошёл в игру\"><span className=\"icon\">stadia_controller</span></th>}\n\t\t\t\t\t\t\t\t<th style={{ width: \"3.2em\" }}>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th style={{ width: \"2.3em\" }}>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{dateToString(v.createdDate, true, false)}</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <td className={styles.center}>{v.authOnPltf ? \"✓\" : \"✖\"}</td>}\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\n\nimport DebugPage from \"./pages/DebugPage\";\nimport EventPage from \"./pages/EventPage\";\nimport EventsFullPage from \"./pages/EventsFullPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport FontsPage from \"./pages/FontsPage\";\nimport LogPage from \"./pages/LogPage\";\nimport ManagersPage from \"./pages/ManagersPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport UsersPage from \"./pages/UsersPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_users\", \"/d/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_events\", \"/d/events\", <EventsFullPage />)}\n\t\t\t\t{ProtectedRoute(\"page_fonts\", \"/fonts\", <FontsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_managers\", \"/managers\", <ManagersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchWithJson","_x","_x2","_x3","_fetchWithJson","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","input","body","res","wrap","_context","prev","next","fetch","headers","undefined","JSON","stringify","sent","ok","t0","json","t1","msg","abrupt","stop","fetchPost","fetchDelete","fetchJson","_x4","_x5","_x6","_fetchJson","_callee2","data","_context2","fetchJsonGet","fetchJsonPost","fetchPostForm","_x7","_x8","_fetchPostForm","_callee3","_context3","useUser","useQuery","user","status","auth","id","login","roles","name","operations","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","length","names","Array","_key","filter","v","join","MessageFromBackend","_useState","useState","_useState2","_slicedToArray","setMessage","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","Spinner","_ref","zIndex","spinner","Header","backLink","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","setQueryData","_","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","padding","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","_mutationFn","authData","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Popup","_ref$open","open","_ref$title","popup","DebugPage","logErrors","setLogErrors","_useState3","_useState4","log","setLog","refLogErrors","refLog","text","setTimeout","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","queryStrKey","queryKey","map","queryInvalidate","invalidateQueries","exact","queryListAddItem","item","_queryClient$getQuery","getQueryState","items","queryListUpdateItem","_queryClient$getQuery2","queryListDeleteItem","itemId","_queryClient$getQuery3","parseEventResponse","responseEvent","event","date","Date","useEvent","eventId","useMutationDeleteEvent","_mutationFn3","_callee7","_context7","padNum","num","len","padStart","countWord","one","two","five","numS","dateToString","reverse","year","nums","getDate","getMonth","push","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","useTicketTypes","forEach","useTicketType","typeId","enabled","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","useTickets","tickets","useMutationDeleteTicket","_mutationFn2","_callee4","ticketId","_context4","CreateTicketForm","_ticketTypes$data3","_ticketTypes$data4","_ticketTypes$data5","setTicet","setTypeId","personName","setPersonName","_useState5","_useState6","personLink","setPersonLink","_useState7","_useState8","promocode","setPromocode","_useState9","_useState10","code","setCode","_useState11","_useState12","autocode","setAutocode","ticketData","useMutationNewTicket","ticketTypes","_ticketTypes$data","_ticketTypes$data$","reset","parseInt","onChange","_ticketTypes$data2","_ticketTypes$data2$e$","target","selectedIndex","checked","fontSize","imagefileToData","_imagefileToData","file","accessEventId","imgBase64","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","console","newFontFace","family","FontFace","fontTypes","otf","ttf","woff","woff2","TicketEditor","_this","init","viewMode","editor","img","imgQr","Image","qrLast","imgFile","width","height","objects","canvas","ctx","loadingImg","loadingFont","loadingFonts","fonts","listenerResize","draw","listenerKeydown","_this$editor","key","deleteSelectedObj","listenerMouseDown","_this$editor2","mouseDown","offsetX","offsetY","button","listenerMouseMove","_this$editor3","mouseMove","listenerMouseUp","_this$editor4","mouseUp","listenerContextMenu","listenerWheel","_this$editor5","wheel","deltaY","inspectorSet","inspectorInput","_this$editor6","loadFonts","this","get","image","loadImage","createNewData","f","find","x","y","w","h","c","reRenderQR","_this$editor7","setViewTicket","_this2","URL","revokeObjectURL","url","createObjectURL","removeCanvasListeners","getContext","_getData","imageName","t2","pattern","removeEventListener","obj","_this$editor8","drawObject","resetZoom","fitToView","_this3","_this4","reqFonts","i","font","delete","splice","_step","loadedFonts","_iterator","_createForOfIteratorHelper","_loop","add","load","then","indexOf","s","n","done","err","_this$data$objects$fi","_this$ticket","_this5","renderQRCode","setQr","cursor","parent","clientWidth","clientHeight","loading","fillStyle","fillRect","Editor","bind","setCursor","setCanvasSize","imageSmoothingEnabled","drawTextAtCenter","size","lines","split","dy","ddy","fillText","callback","QRCode","errorCorrectionLevel","scale","margin","light","dark","setInspector","imgqr","_this6","transform","moving","sx","sy","vx","vy","vw","vh","mode","drawing","ex","ey","active","resizing","dir","keepAspect","aspect","canvasSize","selected","selectionBorder","max","m","min","restrictView","qr","_this$ticket$personNa","_this$ticket2","_this$ticket$promocod","_this$ticket3","_this$ticket$code","_this$ticket4","save","translate","drawImage","texts","promo","complete","naturalHeight","unwrapRect","strokeStyle","lineWidth","strokeRect","restore","_this$pointToWorld","pointToWorld","_this$pointToWorld2","_this$pointToWorld3","_this$pointToWorld4","wx","wy","resize","rectZone","pointInRect","resizeCursor","redraw","round","dx","_this$resizing$dir","rx","ry","_this$pointToWorld5","_this$pointToWorld6","_this$pointToWorld7","_this$pointToWorld8","_this7","_this$pointToWorld9","_this$pointToWorld10","X","Y","iw","ih","rect","border","r","direction","_direction","Inspector","setUpdate","setObj","update","inspector","inspector_open","fields","onInput","valueAsNumber","colorInput","fontInput","useFonts","TicketTypeEditor","_ttype$data","useEditor","useMutationUpdateTicketType","ttype","refCanvas","imageSelection","setImageSelection","isNewImage","setIsNewImage","noImage","imageId","_ttype$data2","setData","parse","setCanvas","panel","br","fitZoom","footer","_Fragment","files","setNewImage","accept","_ttype$data3","setImage","getData","destroy","TicketViewer","minWidth","minHeight","ViewTicketSimple","setRes","qrcode","setQrcode","ticketRef","timeout","html2canvas","clearTimeout","center","marginTop","marginBottom","innerHTML","appendChild","ViewTicket","simpleViewer","setSimpleViewer","EditTicketTypesForm","_ticketTypes$data$fil","Map","changes","setChanges","newTypes","setNewTypes","inp","some","action","useMutationUpdateTicketTypes","from","values","_changes$get","_changes$get2","set","EditEventForm","_event$data","_event$data2","inp_title","inp_date","_callee6","eventData","_context6","useMutationUpdateEvent","_inp_title$current","_inp_date$current","defaultValue","toISOString","PopupConfirmDeletion","mutatateParams","useStaff","useStaffEvent","useMutationDeleteStaff","staffId","_callee5","_context5","useMutationResetStaffPassword","_mutationFn4","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","staff","setStaff","selectedStaff","setSelectedStaff","staffData","useMutationUpdateStaff","isSuccess","_staffAll$data","marginLeft","_staffAll$data5","PopupQrCode","EventPage","_staff$data","createFormOpen","setCreateFormOpen","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editTypeFormOpen","setEditTypeFormOpen","editStaffOpen","setEditStaffOpen","_useState13","_useState14","ticketOpen","setTicketOpen","_useState15","_useState16","qrcodeLinkOpen","setQrcodeLinkOpen","useParams","stats","useTicketStats","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","stats_sum","reduce","p","count","scanned","authOnPltf","card","card__header","card__body","line","href","Fragment","marginRight","_stats$data","calcPercent","fontWeight","right","all","UsersPage","_events$data","events","getAccessToEvent","_callee8","_context8","useMutationGetAccessToEvent","isFetching","toggleInp","htmlFor","deleted","activeMark","backgroundColor","toggle","eventInfo","access","o","alignSelf","CreateEventForm","useMutationNewEvent","EventsPage","_events$data$sort","useEvents","sort","a","b","CreateFontForm","inp_name","inp_file","fontData","formData","FormData","useMutationNewFont","er","_inp_name$current","_inp_file$current","_inp_file$current$fil","_file$files","_file$files$","splited","fontName","FontsPage","_fonts$data","createFontOpen","setCreateFontOpen","exampleText","setExampleText","FontPreview","myFont","useFont","fontFamily","flexWrap","parseLogResponse","responseLog","LogPage","_log$data","refetch","table","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","added","updated","restored","useMutationDeleteManager","managerId","CreateManagerForm","newManager","setNewManager","newManagerData","useMutationNewManager","manager","placeholder","replaceAll","ManagersPage","_managers$data","_managers$data2","deletionManager","setDeletionManager","managers","userTag","getTicketPrefix","toString","PrintTicketsPage","_useMemo","useMemo","codePref","every","startsWith","_useMemo2","isCorrectCodes","prefix","print","colSpan","_objectSpread","sortV","lastIndexOf","ChangePasswordForm","passwordRef","password2Ref","useMutationChangePassword","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","Scanner","_ref$active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","highlightScanRegion","maxScansPerSecond","old","start","catch","pause","ScannerHeader","onInputBtn","top","bottom","useSound","audio","Audio","preload","currentTime","play","ScannerPage","urlParams","qrScanResult","setQrScanResult","ticketCode","setTicketCode","checkTicketResult","setCheckTicketResult","startHintOpen","setStartHintOpen","inputOpen","setInputOpen","alreadyScanned","setAlreadyScanned","cameraError","setCameraError","inputRef","NaN","retry","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","focus","handleCloseInput","apiResult","useMutationCheckTicket","success","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","errorCode","_inputRef$current","CreateStaffForm","newStaff","setNewStaff","newStaffData","useMutationNewStaff","StaffPage","_staff$data2","deletionStaff","setDeletionStaff","resetPasswordStaff","setResetPasswordStaff","userInfo","EditTicketForm","setTicket","deletionOpen","setDeletionOpen","_postUpdateTicket","params","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","_tickets$data2","hasAddPermission","hasEditPermission","showAuthOnPlt","_users$data","users","_users$data$find","bossId","u","colorizeOperation","colors","page","change","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes","EventsFullPage"],"sourceRoot":""}
{"version":3,"file":"static/js/641.26374b53.chunk.js","mappings":"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","sources":["api/apiError.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","utils/fetchPost.ts","api/auth.ts","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","utils/nums.ts","utils/dates.ts","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","api/events.ts","utils/fetchDelete.ts","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","api/tickets.ts","api/checkTicket.ts","utils/useSound.ts","utils/getTicketPrefix.ts","pages/ScannerPage/index.tsx","webpack://ticket_system/./src/pages/EventsPage/styles.module.css?6236","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","api/ticketTypes.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/delete/DeleteEventForm.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","pages/PrintTicketsPage/index.tsx","pages/DebugPage/index.tsx","App.tsx"],"sourcesContent":["export default class ApiError extends Error {}","import { useQuery } from \"react-query\";\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_event: \"change_event\",\n\tdelete_event: \"delete_event\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)}>\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\"};","export default function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n","import { useMutation, useQueryClient } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button>Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)}>Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"}>\n\t\t\t\t\tВыйти\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\t\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\" className=\"button button_large\">{`</>`}</Link>}\n\t\t\t{/* {hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>} */}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined)\n{\n\tif (!date) return \"\";\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false)\n{\n\treturn dateToString(date) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { EventData, ResponseEvent, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\tconst query = useQuery(\"events\", getEvents, {\n\t\tonSuccess: data =>\n\t\t{\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v));\n\t\t}\n\t});\n\treturn query;\n}\n\nasync function getEvents(): Promise<EventData[]>\n{\n\tconst res = await fetch(\"/api/events\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tconst events = data as ResponseEvent[];\n\treturn events.map(parseEventResponse);\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getEvent(eventId));\n}\n\nasync function getEvent(eventId: number | string): Promise<EventData>\n{\n\tconst res = await fetch(\"/api/events/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getScannerEvent(eventId), { retry: 3 });\n}\n\nasync function getScannerEvent(eventId: number | string): Promise<EventData | typeof NaN>\n{\n\tconst res = await fetch(\"/api/scanner_event/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) return NaN;\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewEvent,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events, data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewEvent(eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event\", eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (eventData: NewEventData) => postUpdateEvent(eventId, eventData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events.filter(v => v.id != data.id), data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateEvent(eventId: number | string, eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event/\" + eventId, eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteEvent(eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.removeQueries([\"event\", `${eventId}`], { exact: true });\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? events.filter(v => v.id != eventId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteEvent(eventId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/event/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n}\n","export default function fetchDelete(input: RequestInfo | URL)\n{\n\treturn fetch(input, {\n\t\tmethod: \"DELETE\",\n\t});\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, ResponseTicket, Ticket } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", eventId], () => getTickets(eventId));\n}\n\nasync function getTickets(eventId: number | string): Promise<Ticket[]>\n{\n\tconst res = await fetch(\"/api/tickets/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn (data as ResponseTicket[]).map(parseTicketResponse);\n}\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets ? [...tickets, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewTicket(eventData: NewTicketData)\n{\n\tconst res = await fetchPost(\"/api/ticket\", eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n","import { useMutation } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { CheckTicketResult, ResponseCheckTicket, ResponseMsg } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postCheckTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\n\nasync function postCheckTicket(ticketData: TicketData): Promise<CheckTicketResult>\n{\n\tconst res = await fetchPost(\"/api/check_ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst apiResult = data as ResponseCheckTicket;\n\tconst result = data as CheckTicketResult;\n\tif (apiResult.ticket)\n\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\tif (apiResult.event)\n\t\tresult.event = parseEventResponse(apiResult.event)\n\treturn result\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"space_between\":\"styles_space_between__AD+M6\"};","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{mutation.isError && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>Ошибка</h3>}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{events.isError && <div>Ошибка</div>}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName={classNames(\"button button_large\", styles.space_between)}\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\n// import styles from \"./styles.module.css\"\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\n\treturn (\n\t\t<Layout centered>\n\t\t\tТут будет страница настройки сотрудников\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\"};","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, TicketType } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\treturn useQuery([\"ticket_types\", eventId], () => getTicketTypes(eventId));\n}\n\nasync function getTicketTypes(eventId: number | string): Promise<TicketType[]>\n{\n\tconst res = await fetch(\"/api/ticket_types/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (data: UpdateTicketTypesData[]) => postUpdateTicketTypes(eventId, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryClient.invalidateQueries([\"tickets\", `${eventId}`], { exact: true });\n\t\t\telse\n\t\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], () => data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicketTypes(eventId: number | string, updateTicketTypesData: UpdateTicketTypesData[])\n{\n\tconst res = await fetchPost(\"/api/ticket_types/\" + eventId, updateTicketTypesData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst inp_typeId = useRef<HTMLSelectElement>(null);\n\tconst inp_personName = useRef<HTMLInputElement>(null);\n\tconst inp_personLink = useRef<HTMLInputElement>(null);\n\tconst inp_promocode = useRef<HTMLInputElement>(null);\n\tconst inp_code = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_personName.current && inp_personLink.current && inp_promocode.current)\n\t\t{\n\t\t\tinp_personName.current.value = \"\";\n\t\t\tinp_personLink.current.value = \"\";\n\t\t\tinp_promocode.current.value = \"\";\n\t\t\t// inp_code.current.value = \"\";\n\t\t}\n\t}, [open, inp_personName, inp_personLink, inp_promocode]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{mutation.isError && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>Ошибка</h3>}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst typeId = inp_typeId.current?.value;\n\t\t\t\tconst personName = inp_personName.current?.value;\n\t\t\t\tconst personLink = inp_personLink.current?.value || \"\";\n\t\t\t\tconst promocode = inp_promocode.current?.value || \"\";\n\t\t\t\tconst code = inp_code.current?.value || \"\";\n\t\t\t\tif (typeId && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: parseInt(typeId, 10),\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select ref={inp_typeId} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input ref={inp_personName} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input ref={inp_personLink} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input ref={inp_promocode} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t{/* <FormField label=\"code\">\n\t\t\t\t\t<input ref={inp_code} type=\"text\" />\n\t\t\t\t</FormField> */}\n\t\t\t\t<button type=\"submit\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicket({ event, ticket, setTicket }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={() => setTicket(null)} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tsetTicket: (ticket: Ticket | null) => void,\n}","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{mutation.isError && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>Ошибка</h3>}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{mutation.isError && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>Ошибка</h3>}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationDeleteEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function DeleteEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst navigate = useNavigate()\n\tconst mutation = useMutationDeleteEvent(eventId, () =>\n\t{\n\t\tclose?.();\n\t\tnavigate(\"/events\");\n\t});\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Удаление меропрятия\">\n\t\t\t{mutation.isError && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>Ошибка</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate();\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport DeleteEventForm from \"../../components/delete/DeleteEventForm\";\nimport ApiError from \"../../api/apiError\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{event.isError && <Layout backLink={backLink} centered>Ошибка</Layout>}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{ticketTypes.isError && <div>Ошибка</div>}\n\t\t\t\t\t\t\t{ticketTypes.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<DeleteEventForm eventId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\"};","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ApiError from \"../../api/apiError\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{(event.isError || tickets.isError) && <Layout backLink={backLink} centered>Ошибка</Layout>}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t<th>Билет</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{(event.isError || tickets.isError) && <h1>Ошибка</h1>}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst [clearRes, setClearRes] = useState(\"\");\n\tconst [clearPopup, setClearPopup] = useState(0);\n\tconst clearEventIdInp = useRef<HTMLInputElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>log</button>\n\t\t\t<button className=\"button\" onClick={() => setClearPopup(1)}>Clear 'scanned'</button>\n\t\t\t<Popup title=\"Clear 'scanned'\" open={clearPopup > 0} close={() => setClearPopup(0)}>\n\t\t\t\t<div>\n\t\t\t\t\t<input ref={clearEventIdInp} type=\"number\" />\n\t\t\t\t</div>\n\t\t\t\t<button style={{ marginTop: \"2rem\" }} onClick={async () =>\n\t\t\t\t{\n\t\t\t\t\tif (!clearEventIdInp.current)\n\t\t\t\t\t\treturn\n\t\t\t\t\tif (clearPopup < 5)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetClearPopup(v => v + 1);\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tsetClearPopup(0);\n\t\t\t\t\tsetClearRes(\"Loading\")\n\t\t\t\t\tconst res = await fetch(\"/api/debug/clear_scanned/\" + clearEventIdInp.current.value);\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetClearRes(data);\n\t\t\t\t}}>Confirm</button>\n\t\t\t\t<span>Press {6 - clearPopup} times</span>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"Clear 'scanned'\" open={clearRes != \"\"} close={() => setClearRes(\"\")}>\n\t\t\t\t<pre>{clearRes}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport EventPage from \"./pages/EventPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport DebugPage from \"./pages/DebugPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{user.isError && \"Ошибка\"}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","useUser","useQuery","getUser","_getUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","user","wrap","_context","prev","next","fetch","sent","json","status","abrupt","auth","id","login","name","operations","ok","msg","stop","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","HeaderBack","navigate","useNavigate","_jsx","className","styles","root","children","onClick","classNames","_len","length","names","Array","_key","filter","v","join","fetchPost","input","body","method","headers","undefined","JSON","stringify","postAuth","_x","_postAuth","authData","postLogout","_postLogout","_callee2","_context2","Spinner","_ref","color","zIndex","_jsxs","spinner","style","Header","backLink","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useMutationLogout","block","Link","to","home","src","logo","alt","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","document","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","_useState","useState","_useState2","_slicedToArray","error","setError","inp_login","useRef","inp_password","onError","setQueryData","message","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Scanner","_ref$active","active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","result","highlightScanRegion","maxScansPerSecond","old","destroy","start","catch","pause","padNum","num","len","padStart","countWord","one","two","five","numS","at","dateToString","date","getDate","getMonth","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","relativeDate","nowBreak","now","Date","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","ScannerHeader","event","onInputBtn","top","bottom","getEvents","_getEvents","events","map","parseEventResponse","useEvent","eventId","_getEvent","getEvent","useScannerEvent","_x2","_getScannerEvent","getScannerEvent","retry","_callee3","_context3","NaN","responseEvent","postNewEvent","_x3","_postNewEvent","_callee4","eventData","_context4","useMutationUpdateEvent","_x4","_x5","_postUpdateEvent","postUpdateEvent","_queryClient$getQuery2","getQueryState","_callee5","_context5","useMutationDeleteEvent","_x6","_postDeleteEvent","postDeleteEvent","_queryClient$getQuery3","removeQueries","exact","_callee6","_context6","Popup","_ref$open","open","close","_ref$title","popup","useTickets","_getTickets","getTickets","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","postNewTicket","_postNewTicket","postCheckTicket","_postCheckTicket","ticketData","apiResult","useSound","url","audio","Audio","preload","currentTime","play","getTicketPrefix","toString","ScannerPage","urlParams","useParams","qrScanResult","setQrScanResult","_useState3","_useState4","ticketCode","setTicketCode","_useState5","_useState6","_useState7","_useState8","checkTicketResult","setCheckTicketResult","_useState9","_useState10","startHintOpen","setStartHintOpen","_useState11","_useState12","inputOpen","setInputOpen","_useState13","_useState14","alreadyScanned","setAlreadyScanned","_useState15","_useState16","cameraError","setCameraError","inputRef","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","setTimeout","focus","handleCloseInput","reset","useMutationCheckTicket","success","code","isSuccess","timeout","clearTimeout","_Fragment","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","personName","promocode","errorCode","marginTop","_inputRef$current","CreateEventForm","inp_title","inp_date","_queryClient$getQuery","useMutationNewEvent","isError","textAlign","_inp_title$current","_inp_date$current","EventsPage","_events$data","_events$data$sort","createFormOpen","setCreateFormOpen","forEach","useEvents","sort","a","b","space_between","StaffPage","useTicketTypes","_getTicketTypes","getTicketTypes","useMutationUpdateTicketTypes","_postUpdateTicketTypes","postUpdateTicketTypes","inp","some","action","updateTicketTypesData","CreateTicketForm","_ticketTypes$data","_ticketTypes$data2","_ticketTypes$data3","setTicet","inp_typeId","inp_personName","inp_personLink","inp_promocode","inp_code","tickets","useMutationNewTicket","ticketTypes","_inp_typeId$current","_inp_personName$curre","_inp_personLink$curre","_inp_promocode$curren","_inp_code$current","typeId","personLink","parseInt","ViewTicket","setTicket","setRes","qrcode","setQrcode","ticketRef","QRCode","errorCorrectionLevel","scale","html2canvas","then","canvas","visible","center","marginBottom","innerHTML","appendChild","EditTicketTypesForm","_ticketTypes$data$fil","setUpdate","Map","changes","setChanges","newTypes","setNewTypes","size","from","values","_changes$get","get","_changes$get2","onChange","set","target","i","push","EditEventForm","_event$data","_event$data2","defaultValue","toISOString","slice","DeleteEventForm","EventPage","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","ticketOpen","setTicketOpen","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasDeleteEventPermission","replace","card","card__header","card__body","right","TicketsPage","_tickets$data","hasAddPermission","width","href","startsWith","scanned","PrintTicketsPage","_useMemo","useMemo","codePref","every","_useMemo2","isCorrectCodes","prefix","print","table","colSpan","marginLeft","_objectSpread","sortV","lastIndexOf","DebugPage","logErrors","setLogErrors","log","setLog","clearRes","setClearRes","clearPopup","setClearPopup","clearEventIdInp","text","t0","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}
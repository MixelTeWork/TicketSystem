{"version":3,"file":"static/js/699.b7805eeb.chunk.js","mappings":"6PAEaA,EAAQ,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAAA,SAAAA,IAAA,OAAAK,EAAAA,EAAAA,GAAA,KAAAL,GAAAG,EAAAG,MAAA,KAAAC,UAAA,QAAAC,EAAAA,EAAAA,GAAAR,EAAA,GAAAS,E,QAAAA,GAASC,QCF2B,SAE1CC,EAAaC,EAAAC,EAAAC,GAAA,OAAAC,EAAAT,MAAC,KAADC,UAAA,UAAAQ,IAW3B,OAX2BA,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA5B,SAAAC,EAA6BC,EAAmCC,EAA0BC,GAAU,IAAAC,EAAA,OAAAN,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEjFC,MAAMP,EAAO,CAC9BD,OAAAA,EACAS,QAAS,CACR,eAAgB,oBAEjBP,UAAeQ,IAATR,EAAqB,KAAOS,KAAKC,UAAUV,KAC/C,KAAD,EANO,IAAHC,EAAGE,EAAAQ,MAOAC,GAAG,CAADT,EAAAE,KAAA,QAAoB,OAApBF,EAAAU,GAAYnC,EAAQyB,EAAAE,KAAA,EAAQJ,EAAIa,OAAM,OAAoB,MAApBX,EAAAY,GAAAZ,EAAAQ,KAAiBK,IAAG,IAAAb,EAAAU,GAAAV,EAAAY,IAAE,KAAF,SAAAZ,EAAAc,OAAA,SAC9DhB,GAAG,yBAAAE,EAAAe,OAAA,GAAArB,EAAA,MACVb,MAAA,KAAAC,UAAA,CAOM,SAASkC,EAAUpB,EAA0BC,GAEnD,OAAOX,EAAc,OAAQU,EAAOC,EACrC,CAEO,SAASoB,EAAYrB,EAA0BC,GAErD,OAAOX,EAAc,SAAUU,EAAOC,EACvC,CAAC,SAEcqB,EAASC,EAAAC,EAAAC,GAAA,OAAAC,EAAAzC,MAAA,KAAAC,UAAA,UAAAwC,IAKvB,OALuBA,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAxB,SAAA8B,EAA4B5B,EAAmCC,EAA0BC,GAAU,IAAAC,EAAA0B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAEhFhB,EAAcS,EAAQC,EAAOC,GAAM,KAAD,EAA3C,OAAHC,EAAG2B,EAAAjB,KAAAiB,EAAAvB,KAAA,EACUJ,EAAIa,OAAO,KAAD,EAAnB,OAAJa,EAAIC,EAAAjB,KAAAiB,EAAAX,OAAA,SACHU,GAAI,wBAAAC,EAAAV,OAAA,GAAAQ,EAAA,MACX1C,MAAA,KAAAC,UAAA,CAEM,SAAS4C,EAAgB9B,EAA0BC,GAEzD,OAAOqB,EAAa,MAAOtB,EAAOC,EACnC,CAEO,SAAS8B,EAAiB/B,EAA0BC,GAE1D,OAAOqB,EAAa,OAAQtB,EAAOC,EACpC,CAOO,SAAe+B,EAAaC,EAAAC,GAAA,OAAAC,EAAAlD,MAAA,KAAAC,UAAA,CASlC,SAAAiD,IAAA,OAAAA,GAAAxC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MATM,SAAAuC,EAAgCpC,EAA0BC,GAAc,IAAAC,EAAA0B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EAE5DC,MAAMP,EAAO,CAC9BD,OAAQ,OACRE,KAAAA,IACE,KAAD,EAHO,OAAHC,EAAGmC,EAAAzB,KAAAyB,EAAA/B,KAAA,EAIUJ,EAAIa,OAAO,KAAD,EAAnB,GAAJa,EAAIS,EAAAzB,KACLV,EAAIW,GAAG,CAADwB,EAAA/B,KAAA,cAAQ,IAAI3B,EAAUiD,EAAqBX,KAAK,KAAD,SAAAoB,EAAAnB,OAAA,SACnDU,GAAI,wBAAAS,EAAAlB,OAAA,GAAAiB,EAAA,MACXnD,MAAA,KAAAC,UAAA,CCnDc,SAASoD,IAEvB,OAAOC,EAAAA,EAAAA,UAAS,QAAM5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAI,EAAA0B,EAAAY,EAAA,OAAA5C,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAELC,MAAM,aAAa,KAAD,EAA3B,OAAHL,EAAGE,EAAAQ,KAAAR,EAAAE,KAAA,EACUJ,EAAIa,OAAO,KAAD,EAAnB,GAAJa,EAAIxB,EAAAQ,KAEQ,KAAdV,EAAIuC,OAAa,CAAArC,EAAAE,KAAA,eAAAF,EAAAc,OAAA,SAVf,CAAEwB,MAAM,EAAOC,IAAK,EAAGC,MAAO,GAAIC,MAAO,GAAIC,KAAM,GAAIC,WAAY,KAU1B,UAC1C7C,EAAIW,GAAG,CAADT,EAAAE,KAAA,eAAQ,IAAI3B,EAAUiD,EAAqBX,KAAK,KAAD,GAGzC,OADXuB,EAAOZ,GACRc,MAAO,EAAKtC,EAAAc,OAAA,SACVsB,GAAI,yBAAApC,EAAAe,OAAA,GAAArB,EAAA,KAEb,CCWe,SAASkD,EAAcR,EAAqCS,GAC1E,IAADC,EAAAC,EACC,QAAmB,QAATD,EAAAV,EAAKZ,YAAI,IAAAsB,IAATA,EAAWR,MAAiB,QAAbS,EAAIX,EAAKZ,YAAI,IAAAuB,IAATA,EAAWJ,WAAWK,SAASH,GAC7D,CAEO,SAASI,EAAiBJ,GAChC,IAADK,EAAAC,EACOf,EAAOF,IACb,QAAmB,QAATgB,EAAAd,EAAKZ,YAAI,IAAA0B,IAATA,EAAWZ,MAAiB,QAAba,EAAIf,EAAKZ,YAAI,IAAA2B,IAATA,EAAWR,WAAWK,SAASH,GAC7D,C,wBCzCe,SAASO,IAEvB,IAAQC,GAAaC,EAAAA,EAAAA,MAAbD,SAOR,OALAE,EAAAA,EAAAA,YAAU,WAETC,OAAOC,SAAS,EAAG,EACpB,GAAG,CAACJ,IAEG,IACR,C,aCTe,SAASK,EAAaC,EAA8EC,EAAuCC,GAEzJ,IAAKF,EAAWG,QAAS,OAAO,KAEhC,IAAMC,EAAQJ,EAAWI,iBAAiBxF,EAAWoF,EAAWI,MAAMC,QAAU,uCAIhF,OADiBJ,GAAUK,GAFfJ,EAAkBA,EAAgBE,GAASA,EAIxD,CAEA,SAASE,EAAcF,GAEtB,OACCG,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEC,MAAO,SAAUC,UAAW,UAAWC,SAAEP,GAExD,C,cCpBe,SAASQ,IACvB,IAAD,IAAAC,EAAA1F,UAAA2F,OADsCC,EAAK,IAAAC,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAALF,EAAKE,GAAA9F,UAAA8F,GAE1C,OAAOF,EAAMG,QAAO,SAAAC,GAAC,QAAMA,CAAC,IAAEC,KAAK,IACpC,CCFA,OAAgB,KAAO,qBAAqB,QAAU,wBAAwB,MAAQ,sBAAsB,QAAU,yBCItH,IAAIlE,EAAM,GACK,SAASmE,IAEvB,IAAAC,GAA8BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnCjB,EAAOmB,EAAA,GAAEE,EAAUF,EAAA,GAmB1B,OAjBA5B,EAAAA,EAAAA,YAAU,WAET,IAAM+B,EAAQC,aAAY,WAEzB,IAAMC,ECdM,SAAmB9C,GAEjC,IAAI+C,EAAUC,SAASC,OAAOC,MAAM,IAAIC,OACvC,WAAanD,EAAKoD,QAAQ,+BAAgC,QAAU,aAErE,OAAOL,EAAUM,mBAAmBN,EAAQ,SAAMpF,CACnD,CDyCQ2F,CAAU,uBAhCXR,GAAU3E,GAGbwE,EADAxE,EAAM2E,GAAU,GAGlB,GAAG,KACH,OAAO,WAENS,cAAcX,EACf,CACD,GAAG,CAACD,KAGHa,EAAAA,EAAAA,MAAA,OAAKC,UAAW5B,EAAW6B,EAAOC,KAAiB,IAAXrC,GAAiBoC,EAAOE,SAAShC,SAAA,EACxEJ,EAAAA,EAAAA,KAAA,UACCiC,UAAWC,EAAOG,MAClBC,QAAS,kBAAMnB,EAAW,GAAG,KAE9BnB,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,EAAOpC,QAAQM,SAAEmC,EAAWzC,OAG/C,CAEA,SAASyC,EAAWC,GAInB,MAFiB,KAAbA,EAAIC,GAAG,KAAWD,EAAMA,EAAIE,MAAM,IACpB,KAAdF,EAAIC,IAAI,KAAWD,EAAMA,EAAIE,MAAM,GAAI,IACpCF,CACR,CE1CA,OAAgB,KAAO,sBCER,SAASG,IAEvB,IAAMC,GAAWC,EAAAA,EAAAA,MACjB,OACC7C,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,EAAOC,KAAK/B,UAC3BJ,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAMM,GAAU,EAAE,EAAEX,UAAU,sBAAqB7B,SAAC,oCAKxE,C,cCZA,GAAgB,KAAO,qBAAqB,KAAO,qBAAqB,MAAQ,sBAAsB,KAAO,qBAAqB,YAAc,6B,+sCCAhJ,OAAgB,KAAO,qBAAqB,QAAU,wBAAwB,WAAW,0BCC1E,SAAS0C,EAAOC,GAC9B,IADiC7C,EAAK6C,EAAL7C,MAAO8C,EAAMD,EAANC,OAExC,OACChD,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,EAAOC,KAAK/B,UAC3B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOe,QAAShD,MAAO,CAAE,UAAWC,EAAO8C,OAAAA,GAAgC5C,SAAA,EAACJ,EAAAA,EAAAA,KAAA,WAAWA,EAAAA,EAAAA,KAAA,WAAWA,EAAAA,EAAAA,KAAA,WAAWA,EAAAA,EAAAA,KAAA,cAGhI,CCAe,SAASkD,EAAMH,GAC7B,IAADnE,EADiCuE,EAAQJ,EAARI,SAEhCpC,GAAgCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAxCqC,EAAQnC,EAAA,GAAEoC,EAAWpC,EAAA,GACtBqC,GAAWlE,EAAAA,EAAAA,MACXwD,GAAWC,EAAAA,EAAAA,MACXU,ECmBA,WAEN,IAAMC,GAAcC,EAAAA,EAAAA,kBAQpB,OAPiBC,EAAAA,EAAAA,aAAY,CAC5BC,WAAY,kBAAM7G,EAAU,cAAc,EAC1C8G,UAAW,WAEVJ,EAAYK,aAAa,QAAQ,SAACC,GAAQ,MdjCrC,CAAE1F,MAAM,EAAOC,IAAK,EAAGC,MAAO,GAAIC,MAAO,GAAIC,KAAM,GAAIC,WAAY,GciCR,GACjE,GAGF,CD9BkBsF,GACX7F,EAAOF,IAEb,OACCgE,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOC,KAAK/B,SAAA,EAC3B4B,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAO8B,MAAM5D,SAAA,EAC7BJ,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,IAAIjC,UAAWC,EAAOiC,KAAK/D,UACnCJ,EAAAA,EAAAA,KAAA,OAAKoE,IAAKC,EAAMC,IAAI,8DAEpBnB,IAAYnD,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAIf,EAAS/C,UAACJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,sBAAqB7B,SAAC,qCACnD,KAArBkD,EAASnE,WAAoBgE,IAAYnD,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAiBM,EAAXO,IAA0C,EAAE,EAAElB,UAAU,sBAAqB7B,SAAC,uCAEhJ4B,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAO8B,MAAM5D,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAMe,GAAY,SAAAzC,GAAC,OAAKA,CAAC,GAAC,EAAEqB,UAAU,sBAAqB7B,UAC3EJ,EAAAA,EAAAA,KAAA,QAAAI,SAAgB,QAAhBxB,EAAOV,EAAKZ,YAAI,IAAAsB,OAAA,EAATA,EAAWJ,UAEnBwD,EAAAA,EAAAA,MAAA,OAAKC,UAAW5B,EAAW6B,EAAOqC,KAAMnB,GAAYlB,EAAOsC,aAAapE,SAAA,EACvEJ,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAMM,EAAS,WAAW,EAAEX,UAAU,sBAAqB7B,SAAC,gDAG7EJ,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAMiB,EAASkB,QAAQ,EAAEC,SAA6B,QAAnBnB,EAASpF,OAAkB8D,UAAU,sBAAqB7B,SAAC,yCAK7F,QAAnBmD,EAASpF,SAAoB6B,EAAAA,EAAAA,KAAC8C,EAAO,MAGzC,CEzCA,OAAgB,KAAO,qBAAqB,KAAO,qBAAqB,cAAgB,8BAA8B,kBAAoB,mCCG3H,SAAS6B,EAAM5B,GAC7B,IADgC3C,EAAQ2C,EAAR3C,SAAU6B,EAASc,EAATd,UAAWkB,EAAQJ,EAARI,SAAQyB,EAAA7B,EAAE8B,SAAAA,OAAQ,IAAAD,GAAQA,EAAAE,EAAA/B,EAAEgC,aAAAA,OAAY,IAAAD,GAAQA,EAAAE,EAAAjC,EAAEkC,UAAAA,OAAS,IAAAD,GAAQA,EAAAE,EAAAnC,EAAEoC,IAAAA,OAAG,IAAAD,EAAG,EAACA,EAAEE,EAAOrC,EAAPqC,QAASC,EAAMtC,EAANsC,OAI5I,YAFelJ,IAAXkJ,IAAsBA,GAASrF,EAAAA,EAAAA,KAACkD,EAAM,CAACC,SAAUA,MAGpDnB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAOC,KAAMlC,MAAO,CAAEqF,UAAWL,EAAY,SAAW,IAAK7E,SAAA,CAC3EiF,IAAUrF,EAAAA,EAAAA,KAAA,WACXA,EAAAA,EAAAA,KAAA,OACCiC,UAAW5B,EACV6B,EAAOvG,KAAMsG,EACb4C,GAAY3C,EAAOqD,cACnBR,GAAgB7C,EAAOsD,mBAExBvF,MAAO,CAAEkF,IAAAA,EAAKG,UAAWL,EAAY,OAAS,GAAIG,QAAAA,GAAUhF,SAE3DA,MAIL,CCpBe,SAASqF,IAEvB,OACCzF,EAAAA,EAAAA,KAAC2E,EAAM,CAACE,UAAQ,EAACQ,QAAQrF,EAAAA,EAAAA,KAAC2C,EAAU,IAAIvC,SAAC,sGAI3C,CCPe,SAASsF,IAEvB,OACC1F,EAAAA,EAAAA,KAAC2E,EAAM,CAACE,UAAQ,EAACQ,QAAQrF,EAAAA,EAAAA,KAAC2C,EAAU,IAAIvC,SAAC,6QAI3C,CCTA,OAAgB,KAAO,sB,UCChB,SAASuF,EAASC,GACxB,IAD+EC,EAAMjL,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,GAAAA,UAAA,GAAG,+FAExFyE,EAAAA,EAAAA,YAAU,WAET,IAAMyG,EAAYtE,SAASoE,MACrBG,EAAoB,iBAATH,EAAoB,CAACA,GAASA,EAE/C,OADApE,SAASoE,MAAQ,CAACC,GAAMG,QAAAC,EAAAA,EAAAA,GAAKF,IAAGpF,QAAO,SAAAC,GAAC,QAAMA,CAAC,IAAEC,KAAK,OAC/C,WAAQW,SAASoE,MAAQE,CAAW,CAC5C,GAAG,CAACF,EAAOC,GACZ,CCVA,OAAgB,KAAO,qBAAqB,MAAQ,uBCE7C,SAASK,GAAInD,GACnB,IADsBd,EAASc,EAATd,UAAWhC,EAAK8C,EAAL9C,MAAOkG,EAAQpD,EAARoD,SAAU/F,EAAQ2C,EAAR3C,SAElD,OACCJ,EAAAA,EAAAA,KAAA,QACCiC,UAAW5B,EAAW6B,EAAOkE,KAAMnE,GACnChC,MAAOA,EACPkG,SAAU,SAAAE,GAETA,EAAEC,iBACFH,GACD,EAAE/F,SAEDA,GAGJ,CAUO,SAASmG,GAASC,GACxB,IAD2BC,EAAKD,EAALC,MAAOxE,EAASuE,EAATvE,UAAWhC,EAAKuG,EAALvG,MAAOG,EAAQoG,EAARpG,SAEpD,OACC4B,EAAAA,EAAAA,MAAA,SAAOC,UAAW5B,EAAW6B,EAAOwE,MAAOzE,GAAYhC,MAAOA,EAAMG,SAAA,EACnEJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOqG,IACNrG,IAGJ,CC5Be,SAASuG,KAEvBhB,EAAS,sEACT,IAAA5E,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BlB,EAAKoB,EAAA,GAAE2F,EAAQ3F,EAAA,GAChB4F,GAAYC,EAAAA,EAAAA,QAAyB,MACrCC,GAAeD,EAAAA,EAAAA,QAAyB,MACxCvD,ETTA,SAAyByD,GAE/B,IAAMxD,GAAcC,EAAAA,EAAAA,kBACpB,OAAOC,EAAAA,EAAAA,aAAY,CAClBC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,EAAO0L,GAAkB,IAAAhJ,EAAA,OAAA5C,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEjByB,EAAoB,YAAayJ,GAAU,KAAD,EAC5C,OADXhJ,EAAIpC,EAAAQ,MACL8B,MAAO,EAAKtC,EAAAc,OAAA,SACVsB,GAAI,wBAAApC,EAAAe,OAAA,GAAArB,EAAA,KACX,gBAAAP,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EALU,GAMXgJ,UAAW,SAACtG,GAEXkG,EAAYK,aAAa,QAAQ,kBAAMvG,CAAI,GAC5C,EACA0J,QAAS,SAACnH,GAEF,OAAPmH,QAAO,IAAPA,GAAAA,EAAUnH,aAAiBxF,EAAWwF,EAAMC,QAAU,kMACvD,GAEF,CSVkBqH,CAAgBP,GASjC,OACC5E,EAAAA,EAAAA,MAAC2C,EAAM,CAACU,OAAQ,KAAMR,UAAQ,EAACE,cAAY,EAACI,IAAI,MAAK/E,SAAA,EACpDJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,gGACHP,IAASG,EAAAA,EAAAA,KAAA,MAAAI,SAAKP,IACd0D,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACjE,UAAWC,EAAOkE,KAAMD,SAZhC,WACC,IAADkB,EAAAC,EACOhJ,GAAyB,QAAjB+I,EAAAR,EAAUU,eAAO,IAAAF,OAAA,EAAjBA,EAAmBG,QAAS,GACpCC,GAA+B,QAApBH,EAAAP,EAAaQ,eAAO,IAAAD,OAAA,EAApBA,EAAsBE,QAAS,GAChDjE,EAASkB,OAAO,CAAEnG,MAAAA,EAAOmJ,SAAAA,GAC1B,EAOmDrH,SAAA,EAChDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,iCAAOrG,UACvBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAKb,EAAWc,KAAK,OAAOnJ,KAAK,QAAQoJ,UAAQ,OAEzD5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,uCAAQrG,UACxBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAKX,EAAcY,KAAK,WAAWnJ,KAAK,WAAWoJ,UAAQ,OAEnE5H,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,mCAAmCyC,SAA6B,WAAnBnB,EAASpF,OAAoBiC,SAAC,uCAE5G4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,mTACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,2TAIT,CCtCe,SAASyH,KAEvB,IAAM3J,EAAOF,IAEb,OACCgE,EAAAA,EAAAA,MAAC2C,EAAM,CAACE,UAAQ,EAACM,IAAI,MAAK/E,SAAA,CACxB1B,EAAcR,EAAM,iBAAkB8B,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,UAAUjC,UAAU,sBAAqB7B,SAAC,uEACzF1B,EAAcR,EAAM,gBAAiB8B,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,SAASjC,UAAU,sBAAqB7B,SAAC,iEACvF1B,EAAcR,EAAM,gBAAiB8B,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,SAASjC,UAAU,sBAAqB7B,SAAC,yCACvF1B,EAAcR,EAAM,mBAAoB8B,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,YAAYjC,UAAU,sBAAqB7B,SAAC,6EAC7F1B,EAAcR,EAAM,gBAAiB8B,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,KAAKjC,UAAU,sBAAqB7B,SAAA,UAGtF,CCjBA,QAAgB,KAAO,qBAAqB,KAAO,qBAAqB,MAAQ,sBAAsB,OAAS,uBAAuB,MAAQ,sBAAsB,KAAO,sBCE5J,SAAS0H,GAAK/E,GAC5B,IAD+B3C,EAAQ2C,EAAR3C,SAAQ2H,EAAAhF,EAAEiF,KAAAA,OAAI,IAAAD,GAAQA,EAAE1F,EAAKU,EAALV,MAAK4F,EAAAlF,EAAE6C,MAAAA,OAAK,IAAAqC,EAAG,GAAEA,EAExE,OACCjI,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOC,KAAM6F,GAAQ9F,GAAO8F,MAAM5H,UAC5D4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgG,MAAM9H,SAAA,EAE1BwF,GAASvD,KACVL,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOmD,OAAOjF,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAKwF,IACJvD,IAASrC,EAAAA,EAAAA,KAAA,UAAQiC,UAAWC,GAAOG,MAAOC,QAASD,EAAMjC,SAAC,eAG7DJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOvG,KAAKyE,SAC1BA,QAKN,CCfe,SAAS+H,KAEvB,IAAApH,GAAkCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAvCqH,EAASnH,EAAA,GAAEoH,EAAYpH,EAAA,GAC9BqH,GAAsBtH,EAAAA,EAAAA,UAAS,IAAGuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA3BE,EAAGD,EAAA,GAAEE,EAAMF,EAAA,GACZG,GAAe5B,EAAAA,EAAAA,QAAuB,MACtC6B,GAAS7B,EAAAA,EAAAA,QAAuB,MAEtC,OACC9E,EAAAA,EAAAA,MAAC2C,EAAM,CAACE,UAAQ,EAACM,IAAI,OAAM/E,SAAA,CACzBrB,EAAiB,sBAAuBiB,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,WAAWjC,UAAU,SAAQ7B,SAAC,UAC/ErB,EAAiB,uBAAwBiB,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,YAAYjC,UAAU,SAAQ7B,SAAC,YAClFJ,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAG,SAASjC,UAAU,SAAQ7B,SAAC,SACrCJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,SAAOjH,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAI,EAAA0B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAEX,OAAxBqM,EAAa,WAAWvM,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGLC,MAAM,yBAAyB,KAAD,EAAvC,OAAHL,EAAGE,EAAAQ,KAAAR,EAAAE,KAAA,EACUJ,EAAIgN,OAAO,KAAD,EAAvBtL,EAAIxB,EAAAQ,KACV+L,EAAa/K,GACbuL,YAAW,eAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAA0B,QAA1BH,EAAMJ,EAAanB,eAAO,IAAAuB,GAAe,QAAfC,EAApBD,EAAsBI,qBAAa,IAAAH,OAAf,EAApBA,EAAqCxJ,SAAS,EAAuB,QAAtByJ,EAAEN,EAAanB,eAAO,IAAAyB,GAAe,QAAfC,EAApBD,EAAsBE,qBAAa,IAAAD,OAAf,EAApBA,EAAqCE,aAAa,GAAE,KAAKrN,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,SAEhHuM,EAAajM,KAAKC,UAASP,EAAAU,KAAK,yBAAAV,EAAAe,OAAA,GAAArB,EAAA,mBAC3C4E,SAAC,gBACHJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,SAAOjH,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,IAAA,IAAAzB,EAAA0B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,OAEjB,OAAlByM,EAAO,WAAWlL,EAAAxB,KAAA,EAAAwB,EAAAvB,KAAA,EAGCC,MAAM,uBAAuB,KAAD,EAArC,OAAHL,EAAG2B,EAAAjB,KAAAiB,EAAAvB,KAAA,EACUJ,EAAIgN,OAAO,KAAD,EAAvBtL,EAAIC,EAAAjB,KACVmM,EAAOnL,GACPuL,YAAW,eAAAO,EAAAC,EAAAC,EAAAC,EAAA,OAAoB,QAApBH,EAAMT,EAAOpB,eAAO,IAAA6B,GAAe,QAAfC,EAAdD,EAAgBF,qBAAa,IAAAG,OAAf,EAAdA,EAA+B9J,SAAS,EAAiB,QAAhB+J,EAAEX,EAAOpB,eAAO,IAAA+B,GAAe,QAAfC,EAAdD,EAAgBJ,qBAAa,IAAAK,OAAf,EAAdA,EAA+BJ,aAAa,GAAE,KAAK5L,EAAAvB,KAAA,iBAAAuB,EAAAxB,KAAA,GAAAwB,EAAAf,GAAAe,EAAA,SAEpGkL,EAAOrM,KAAKC,UAASkB,EAAAf,KAAK,yBAAAe,EAAAV,OAAA,GAAAQ,EAAA,mBACrC+C,SAAC,kBACHJ,EAAAA,EAAAA,KAAC8H,GAAK,CAAClC,MAAM,YAAYoC,KAAmB,IAAbI,EAAiB/F,MAAO,kBAAMgG,EAAa,GAAG,EAACjI,UAC7EJ,EAAAA,EAAAA,KAAA,OAAK0H,IAAKgB,EAAatI,SAAEgI,OAE1BpI,EAAAA,EAAAA,KAAC8H,GAAK,CAAClC,MAAM,MAAMoC,KAAa,IAAPQ,EAAWnG,MAAO,kBAAMoG,EAAO,GAAG,EAACrI,UAC3DJ,EAAAA,EAAAA,KAAA,OAAK0H,IAAKiB,EAAOvI,SAAEoI,QAIvB,CCjDA,QAAgB,KAAO,qBAAqB,aAAe,6BAA6B,WAAa,2BAA2B,IAAM,oBAAoB,MAAQ,sBAAsB,KAAO,qBAAqB,YAAc,6BCC3N,SAASgB,GAAYC,GAE3B,OAAOA,aAAoBhJ,MAAQgJ,EAASC,KAAI,SAAA9I,GAAC,SAAAoF,OAAOpF,EAAC,IAAG,GAAAoF,OAAMyD,EACnE,CAEO,SAASE,GAAgBnG,EAA0BiG,GAEzDA,EAAWD,GAAYC,GACvBjG,EAAYoG,kBAAkBH,EAAU,CAAEI,OAAO,GAClD,CAEO,SAASC,GAAoBtG,EAA0BiG,EAAoBM,GACjF,IAADC,EACCP,EAAWD,GAAYC,GAC4B,YAAZ,QAAnCO,EAAAxG,EAAYyG,cAAcR,UAAS,IAAAO,OAAA,EAAnCA,EAAqC7L,SACxCqF,EAAYK,aAAa4F,GAAU,SAACS,GAAW,OAAKA,EAAK,GAAAlE,QAAAC,EAAAA,EAAAA,GAAOiE,GAAK,CAAEH,IAAQ,CAACA,EAAK,GACvF,CAEO,SAASI,GAAyC3G,EAA0BiG,EAAoBM,GACtG,IAADK,EACCX,EAAWD,GAAYC,GAC4B,YAAZ,QAAnCW,EAAA5G,EAAYyG,cAAcR,UAAS,IAAAW,OAAA,EAAnCA,EAAqCjM,SACxCqF,EAAYK,aAAa4F,GAAU,SAACS,GAAW,OAAKA,EAAK,GAAAlE,QAAAC,EAAAA,EAAAA,GAAOiE,EAAMvJ,QAAO,SAAAC,GAAC,OAAIA,EAAEvC,IAAM0L,EAAK1L,EAAE,KAAC,CAAE0L,IAAQ,CAACA,EAAK,GACpH,CAEO,SAASM,GAAyC7G,EAA0BiG,EAAoBa,GACtG,IAADC,EACCd,EAAWD,GAAYC,GAC4B,YAAZ,QAAnCc,EAAA/G,EAAYyG,cAAcR,UAAS,IAAAc,OAAA,EAAnCA,EAAqCpM,SACxCqF,EAAYK,aAAa4F,GAAU,SAACS,GAAW,OAAKA,EAAQA,EAAMvJ,QAAO,SAAAC,GAAC,OAAIA,EAAEvC,IAAMiM,CAAM,IAAI,EAAE,GACpG,CC3BO,SAASE,GAAmBC,GAElC,IAAMC,EAAQD,EAEd,OADAC,EAAMC,KAAO,IAAIC,KAAKH,EAAcE,MAC7BD,CACR,CAwBO,SAASG,GAASC,GAExB,OAAO7M,EAAAA,EAAAA,UAAS,CAAC,QAAQ,GAAD+H,OAAK8E,KAAUzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,IAAA,IAAA4M,EAAA,OAAApP,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EAEpBwB,EAA4B,eAAiBsN,GAAS,KAAD,EAA9D,OAALJ,EAAK3M,EAAAzB,KAAAyB,EAAAnB,OAAA,SACJ4N,GAAmBE,IAAM,wBAAA3M,EAAAlB,OAAA,GAAAiB,EAAA,KAElC,CA6DO,SAASiN,GAAuBD,EAA0BlH,GAEhE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACpB,OAAOC,EAAAA,EAAAA,aAAY,CAClBC,WAAW,WAAD,IAAAqH,GAAA3P,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA0P,IAAA,OAAA3P,EAAAA,EAAAA,KAAAO,MAAA,SAAAqP,GAAA,cAAAA,EAAAnP,KAAAmP,EAAAlP,MAAA,cAAAkP,EAAAlP,KAAA,EACLe,EAAY,eAAiB+N,GAAQ,cAAAI,EAAAtO,OAAA,SAAAsO,EAAA5O,MAAA,wBAAA4O,EAAArO,OAAA,GAAAoO,EAAA,8BAAAD,EAAArQ,MAAA,KAAAC,UAAA,EADjC,GAEXgJ,UAAW,WAEV+F,GAAgBnG,EAAa,CAAC,QAASsH,IACvCT,GAAoB7G,EAAa,SAAUsH,GAClC,OAATlH,QAAS,IAATA,GAAAA,GACD,GAEF,CCnHO,SAASuH,GAAOC,EAAaC,GAEnC,MAAO,GAAArF,OAAGoF,GAAME,SAASD,EAAK,IAC/B,CAEO,SAASE,GAAUH,EAAaI,EAAaC,EAAaC,GAEhE,IAAMC,EAAI,GAAA3F,OAAMoF,GAChB,MAAmB,KAAfO,EAAKlJ,IAAI,IAA4B,KAAfkJ,EAAKlJ,IAAI,GAC3B+I,EACJ,CAAC,IAAK,IAAK,KAAK1M,SAAS6M,EAAKlJ,IAAI,IAAM,KAAsB,KAAfkJ,EAAKlJ,IAAI,GACpDgJ,EACDC,CACR,CCXO,SAASE,GAAajB,GAE5B,OAAKA,EAF6D/P,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,GAI3D,GAANoL,OAAU2E,EAAKkB,cAAa,KAAA7F,OAAImF,GAAOR,EAAKmB,WAAa,EAAG,GAAE,KAAA9F,OAAImF,GAAOR,EAAKoB,UAAW,IACpF,GAAN/F,OAAUmF,GAAOR,EAAKoB,UAAW,GAAE,KAAA/F,OAAImF,GAAOR,EAAKmB,WAAa,EAAG,GAAE,KAAA9F,OAAI2E,EAAKkB,eAH5D,EAInB,CAEO,SAASG,GAAarB,GAC5B,IADwCsB,EAAOrR,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,GAE3CsR,EAAO,GAAAlG,OAAMmF,GAAOR,EAAKwB,WAAY,GAAE,KAAAnG,OAAImF,GAAOR,EAAKyB,aAAc,IACzE,OAAIH,EAAgBC,EAAO,IAAAlG,OAAOmF,GAAOR,EAAK0B,aAAc,IACrDH,CACR,CAEO,SAASI,GAAiB3B,GAChC,IAD4CsB,EAAOrR,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,GAEnD,OAAOgR,GAAajB,EAFoD/P,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,IAE/B,IAAMoR,GAAarB,EAAMsB,EACnE,CAEO,SAASM,GAAa5B,GAC5B,IADwC6B,EAA8C5R,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,GAAAA,UAAA,GAAG,SAEnF6R,EAAM,IAAI7B,KAEV8B,EAAQ/B,EAAKgC,UAAYF,EAAIE,UAC/BC,EAAIC,KAAKC,MAAMD,KAAKE,IAAIL,GAAS,KAE/BM,EAAKH,KAAKC,MAAMF,EAAC,SAA8BA,GAAU,GAALI,EAAU,GAAK,GAAK,GAAK,GACnF,IAAMC,EAAKJ,KAAKC,MAAMF,EAAC,QAAyBA,GAAU,GAALK,EAAU,GAAK,GAAK,GACzE,IAAMC,EAAKL,KAAKC,MAAMF,EAAC,OAAoBA,GAAU,GAALM,EAAU,GAAK,GAC/D,IAAMC,EAAKN,KAAKC,MAAMF,EAAC,MAAgB,GAAIA,GAAU,GAALO,EAAU,GAC1D,IAAMC,EAAKP,KAAKC,MAAMF,EAAI,IAAM,GAC1BS,GAD8BT,GAAU,GAALQ,GAC1B,GAgBf,IAAAE,EAdA,WAEC,IAAMC,EAAK,SAAC3M,GAAS,MAAK,CAACA,EAAG,CAAC,GAAI,GAAI,IAAI,EAC3C,OAAU,GAANoM,EAAgB,CAACA,EAAI,CAAC,qBAAO,2BAAQ,uBAC/B,GAANC,EAAgB,CAACA,EAAI,CAAC,iCAAS,uCAAU,+CACnC,GAANC,EAAgB,CAACA,EAAI,CAAC,2BAAQ,qBAAO,6BACzB,OAAZV,EAA0Be,EAAG,8CACvB,GAANJ,EAAgB,CAACA,EAAI,CAAC,qBAAO,2BAAQ,mCACzB,QAAZX,EAA2Be,EAAG,wCACxB,GAANH,EAAgB,CAACA,EAAI,CAAC,uCAAU,uCAAU,mCAC9B,UAAZZ,EAA6Be,EAAG,wCAC1B,GAANF,EAAgB,CAACA,EAAI,CAAC,6CAAW,6CAAW,yCACzCE,EAAG,0DACX,CACwBC,GAAWC,GAAAvM,EAAAA,EAAAA,GAAAoM,EAAA,GAA9BI,EAAOD,EAAA,GAAEE,EAAMF,EAAA,GAEpB,GAAsB,iBAAXC,EACV,OAAOA,EAER,IAAIE,EAAQ,GAAA5H,OAAMuF,GAAS5Q,WAAC,EAAD,CAAC+S,GAAO1H,QAAAC,EAAAA,EAAAA,GAAK0H,MAKxC,OAJId,KAAKE,IAAIW,GAAW,IAAGE,EAAWf,KAAKE,IAAIW,GAAW,IAAME,GAC5DlB,EAAQ,EAAGkB,EAAW,kCAAWA,EAChCA,GAAY,kCAEVA,CACR,CCvDO,SAASC,GAAe/C,GAE9B,IAAMtH,GAAcC,EAAAA,EAAAA,kBACpB,OAAOxF,EAAAA,EAAAA,UAAS,CAAC,eAAgB6M,IAAQzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACpCwB,EAAY,eAAAwI,OAA8B8E,EAAO,kBAAgB,cAAAhP,EAAAc,OAAA,SAAAd,EAAAQ,MAAA,wBAAAR,EAAAe,OAAA,GAAArB,EAAA,KACvE,CACCoI,UAAW,SAAAtG,GAAI,OACdA,EAAKwQ,SAAQ,SAAAlN,GAAC,OAAI4C,EAAYK,aAAa,CAAC,cAAc,GAADmC,OAAKpF,EAAEvC,KAAOuC,EAAE,GAAC,GAE9E,CA6BO,SAASmN,GAAcC,GAE7B,OAAO/P,EAAAA,EAAAA,UAAS,CAAC,cAAc,GAAD+H,OAAKgI,KAAS3S,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,IAAA,OAAAxC,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EACvCwB,EAAyB,qBAAuBwQ,GAAO,cAAAjQ,EAAAnB,OAAA,SAAAmB,EAAAzB,MAAA,wBAAAyB,EAAAlB,OAAA,GAAAiB,EAAA,KAC7D,CAAEmQ,QAASD,GAAU,GAEvB,CC7CO,SAASE,GAAoBC,GAEnC,IAAMC,EAASD,EAKf,OAJIA,EAAeE,cAClBD,EAAOC,YAAc,IAAIzD,KAAKuD,EAAeE,cAC1CF,EAAeG,cAClBF,EAAOE,YAAc,IAAI1D,KAAKuD,EAAeG,cACvCF,CACR,CAEe,SAASG,GAAWzD,GAElC,OAAO7M,EAAAA,EAAAA,UAAS,CAAC,UAAU,GAAD+H,OAAK8E,KAAUzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAgT,EAAA,OAAAlT,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEpBwB,EAAY,eAAAwI,OAAkC8E,EAAO,aAAY,KAAD,EAAzE,OAAP0D,EAAO1S,EAAAQ,KAAAR,EAAAc,OAAA,SACN4R,EAAQ9E,IAAIwE,KAAoB,wBAAApS,EAAAe,OAAA,GAAArB,EAAA,KAEzC,CA8DO,SAASiT,GAAwB3D,EAA0BlH,GAEjE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAoT,EAAOC,GAAyB,OAAAtT,EAAAA,EAAAA,KAAAO,MAAA,SAAAgT,GAAA,cAAAA,EAAA9S,KAAA8S,EAAA7S,MAAA,cAAA6S,EAAA7S,KAAA,EACrCe,EAAY,gBAAkB6R,GAAS,cAAAC,EAAAjS,OAAA,SAAAiS,EAAAvS,MAAA,wBAAAuS,EAAAhS,OAAA,GAAA8R,EAAA,qBAAAxT,GAAA,OAAAuT,EAAA/T,MAAA,KAAAC,UAAA,EADnC,GAEXgJ,UAAW,SAACE,EAAG8K,GAEdvE,GAAoB7G,EAAa,CAAC,UAAWsH,GAAU8D,GAC9C,OAAThL,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CCxFe,SAASuL,GAAgB/L,GACvC,IAADgM,EAAAC,EAAAC,EAD2CjH,EAAIjF,EAAJiF,KAAM8C,EAAO/H,EAAP+H,QAASzI,EAAKU,EAALV,MAAO6M,EAAQnM,EAARmM,SAEhEnO,GAA4BC,EAAAA,EAAAA,WAAU,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjCiN,EAAM/M,EAAA,GAAEkO,EAASlO,EAAA,GACxBqH,GAAoCtH,EAAAA,EAAAA,UAAS,IAAGuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAzC8G,EAAU7G,EAAA,GAAE8G,EAAa9G,EAAA,GAChC+G,GAAoCtO,EAAAA,EAAAA,UAAS,IAAGuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAzCE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAAkC1O,EAAAA,EAAAA,UAAS,IAAG2O,GAAAzO,EAAAA,EAAAA,GAAAwO,EAAA,GAAvCE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAwB9O,EAAAA,EAAAA,UAAS,IAAG+O,GAAA7O,EAAAA,EAAAA,GAAA4O,EAAA,GAA7BE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GACpBG,GAAgClP,EAAAA,EAAAA,WAAS,GAAKmP,GAAAjP,EAAAA,EAAAA,GAAAgP,EAAA,GAAvCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GACtB5M,EDQA,SAA8BK,GAEpC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,EAAOiT,GAAyB,IAAAlC,EAAA,OAAA9S,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAEtByB,EAA8B,eAAgB6S,GAAY,KAAD,EAAlE,OAANlC,EAAM7Q,EAAAjB,KAAAiB,EAAAX,OAAA,SACLsR,GAAoBE,IAAO,wBAAA7Q,EAAAV,OAAA,GAAAQ,EAAA,KAClC,gBAAApC,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EAJU,GAKXgJ,UAAW,SAACtG,GAEXwM,GAAiBtG,EAAa,CAAC,UAAWlG,EAAKwN,SAAUxN,GAChD,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CCxBkBgN,EAAqB,SAAAnC,GAErCc,EAASd,GACJ,OAAL/L,QAAK,IAALA,GAAAA,GACD,IACMmO,EAAc3C,GAAe/C,GAiBnC,OAfAzL,EAAAA,EAAAA,YAAU,WAGR,IAADoR,EAAAC,EADK1I,IAEJqI,GAAY,GACZlB,GAA0B,QAAhBsB,EAAAD,EAAYlT,YAAI,IAAAmT,GAAK,QAALC,EAAhBD,EAAmB,UAAE,IAAAC,OAAL,EAAhBA,EAAuBrS,MAAO,GACxCgR,EAAc,IACdI,EAAc,IACdI,EAAa,IACbI,EAAQ,IACR1M,EAASoN,QAGX,GAAG,CAAC3I,EAAMwI,EAAYlT,QAGrB0E,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,oGAAmBxF,SAAA,CACxDZ,EAAa+D,GACbiN,EAAYpJ,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAClCd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WAEX6H,GAAU,GAAKoB,GAClB7L,EAASkB,OAAO,CACfqG,QAAS8F,SAAS,GAAD5K,OAAI8E,GAAW,IAChCkD,OAAQA,EACRoB,WAAAA,EACAI,WAAAA,EACAI,UAAAA,EACAI,KAAMI,EAAW,GAAKJ,GAEzB,EAAE5P,SAAA,EACD4B,EAAAA,EAAAA,MAACuE,GAAS,CAACE,MAAM,0DAAYrG,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,UAAQwH,MAAOwG,EAAQ6C,SAAU,SAAAxK,GAAC,IAAAyK,EAAAC,EAAA,OAAI5B,GAA0B,QAAhB2B,EAAAN,EAAYlT,YAAI,IAAAwT,GAA0B,QAA1BC,EAAhBD,EAAmBzK,EAAE2K,OAAOC,sBAAc,IAAAF,OAA1B,EAAhBA,EAA4C1S,MAAO,EAAE,EAAEqG,SAAsC,IAAZ,QAAhBqK,EAAAyB,EAAYlT,YAAI,IAAAyR,OAAA,EAAhBA,EAAkBxO,QAAaqH,UAAQ,EAAAxH,SACtI,QADsI4O,EACtJwB,EAAYlT,YAAI,IAAA0R,OAAA,EAAhBA,EAAkBtF,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAA,UAAmBwH,MAAO5G,EAAEvC,GAAG+B,SAAEQ,EAAEpC,MAAtBoC,EAAEvC,GAAkC,MAEjD,IAAZ,QAAhB4Q,EAAAuB,EAAYlT,YAAI,IAAA2R,OAAA,EAAhBA,EAAkB1O,UAAeP,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6HAEvCJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,+DAAYrG,UAC5BJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAO4H,EAAYyB,SAAU,SAAAxK,GAAC,OAAIgJ,EAAchJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,OAAOC,UAAQ,OAE7F5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,iHAAsBrG,UACtCJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAOgI,EAAYqB,SAAU,SAAAxK,GAAC,OAAIoJ,EAAcpJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,YAE9E3H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,mDAAUrG,UAC1BJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAOoI,EAAWiB,SAAU,SAAAxK,GAAC,OAAIwJ,EAAaxJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,YAE5E3F,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,WAAWuJ,QAASd,EAAUS,SAAU,SAAAxK,GAAC,OAAIgK,EAAYhK,EAAE2K,OAAOE,QAAQ,KACtFlR,EAAAA,EAAAA,KAAA,QAAMC,MAAO,CAAEC,MAAOkQ,EAAW,YAAc,WAAYhQ,SAAC,yFAE3DgQ,IACDpO,EAAAA,EAAAA,MAACuE,GAAS,CAACE,MAAM,0HAA0BrG,SAAA,EAC1CJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,UAAWiR,SAAU,UAAW/Q,SAAC,wLACtDJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAOwI,EAAMa,SAAU,SAAAxK,GAAC,OAAI4J,EAAQ5J,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,aAGnE3H,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsByC,UAAW8L,EAAYlT,MAAmC,GAA3BkT,EAAYlT,KAAKiD,OAAYH,SAAC,kDAEnHmD,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,MAGlC,C,eCpFA,IAAgB,KAAO,qBAAqB,OAAS,uBAAuB,UAAY,0BAA0B,eAAiB,+BAA+B,OAAS,uBAAuB,WAAa,2BAA2B,UAAY,0BAA0B,MAAQ,sBAAsB,GAAK,mBAAmB,OAAS,wBCChU,SAAesO,GAAenW,EAAAC,EAAAC,GAAA,OAAAkW,GAAA1W,MAAC,KAADC,UAAA,CAwB5C,SAAAyW,KAAA,OAAAA,IAAAhW,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAxBc,SAAAC,EAA+B8V,EAAY9S,EAAc+S,GAAsB,IAAAC,EAAA,OAAAlW,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAErE,IAAIyV,SAAQ,SAACC,GAEpC,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,iBAAiB,WAAW,SAAAxL,GAElCqL,EAAQ,CACPI,OAAQH,EAAOG,OACfjS,MAAO8R,EAAO9R,OAEhB,IACA8R,EAAOI,cAAcT,EACtB,IAAG,KAAD,EAXa,KAATE,EAAS1V,EAAAQ,MAYDuD,MAAM,CAAD/D,EAAAE,KAAA,QAEa,OAA/BgW,QAAQnS,MAAM2R,EAAU3R,OAAO/D,EAAAc,OAAA,SACxB,MAAI,cAAAd,EAAAc,OAAA,SAEL,CACNU,KAAMkU,EAAUM,OAChBtT,KAAAA,EACA+S,cAAAA,IACA,wBAAAzV,EAAAe,OAAA,GAAArB,EAAA,MACDb,MAAA,KAAAC,UAAA,C,cCRM,SAASqX,GAAYC,EAAgB7T,EAAYsJ,GAEvD,OAAO,IAAIwK,SAASD,EAAO,mBAADlM,OAAqB3H,EAAE,gBAAA2H,OAAeoM,GAAUzK,GAAK,MAChF,CAEA,IAAMyK,GAAY,CACjBC,IAAK,WACLC,IAAK,WACLC,KAAM,OACNC,MAAO,SCrBKC,GAAY,WAwBxB,SAAAA,EAAoBL,GACnB,IAADM,EAAA,KADiDC,IAAI/X,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,KAAAA,UAAA,GAAiBgY,EAAQhY,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,IAAQF,EAAAA,EAAAA,GAAA,KAAA+X,GAAA,KAAlEL,UAAAA,EAA2B,KAAuBQ,SAAAA,EAAQ,KAtBtEC,OAAwB,KAAK,KAC7BC,IAA+B,KAAK,KACpCC,MAAQ,IAAIC,MAAQ,KACpBC,QAAuB,KAAK,KAC5B3V,KAAsB,CAAE4V,MAAO,EAAGC,OAAQ,EAAGC,QAAS,IAAK,KAC3DC,OAAmC,KAAK,KACxCC,IAAuC,KAAK,KAC5CC,YAAa,EAAM,KACnBC,aAAc,EAAM,KACpBC,aAA2B,GAAG,KAE9BrF,OAAwB,KAAK,KAC7BsF,MAA0C,GAAG,KAC7CC,eAAiB,kBAAMjB,EAAKkB,MAAO,EAAD,KAClCC,gBAAkB,SAACxN,GAAsB,IAADyN,EAAe,UAATzN,EAAE0N,KAAgC,QAAfD,EAAIpB,EAAKG,cAAM,IAAAiB,GAAXA,EAAaE,qBAAqBtB,EAAKkB,MAAQ,EAAE,KACtHK,kBAAoB,SAAC5N,GAAmB,IAAD6N,EAAiB,QAAfA,EAAIxB,EAAKG,cAAM,IAAAqB,GAAXA,EAAaC,UAAU9N,EAAE+N,QAAS/N,EAAEgO,QAAShO,EAAEiO,SAAS5B,EAAKkB,MAAO,EAAE,KACnHW,kBAAoB,SAAClO,GAAmB,IAADmO,EAAiB,QAAfA,EAAI9B,EAAKG,cAAM,IAAA2B,GAAXA,EAAaC,UAAUpO,EAAE+N,QAAS/N,EAAEgO,UAAU3B,EAAKkB,MAAO,EAAE,KACzGc,gBAAkB,SAACrO,GAAmB,IAADsO,EAAiB,QAAfA,EAAIjC,EAAKG,cAAM,IAAA8B,GAAXA,EAAaC,QAAQvO,EAAE+N,QAAS/N,EAAEgO,QAAShO,EAAEiO,SAAS5B,EAAKkB,MAAO,EAAE,KAC/GiB,oBAAsB,SAACxO,GAAoBA,EAAEC,gBAAkB,EAAE,KACjEwO,cAAgB,SAACzO,GAAmB,IAAD0O,EAAE1O,EAAEC,iBAAiC,QAAfyO,EAAIrC,EAAKG,cAAM,IAAAkC,GAAXA,EAAaC,MAAM3O,EAAE+N,QAAS/N,EAAEgO,QAAShO,EAAE4O,SAASvC,EAAKkB,MAAO,EAAE,KAC/HsB,aAAiC,WAAQ,EAAE,KA2F5CC,eAAqC,SAAsCzO,EAAUc,GAC3F,IAAD4N,EACY,QAAXA,EAAA1C,EAAKG,cAAM,IAAAuC,GAAXA,EAAaD,eAAezO,EAAOc,GACtB,KAATd,GACHgM,EAAK2C,YACN3C,EAAKkB,MACN,EA7FMjB,IAAQC,IACbtT,OAAOuS,iBAAiB,SAAUyD,KAAK3B,gBACvCrU,OAAOuS,iBAAiB,UAAWyD,KAAKzB,iBACzC,CAcC,OAdAhZ,EAAAA,EAAAA,GAAA4X,EAAA,EAAAsB,IAAA,UAAAwB,IAjBD,WAAwB,OAAOD,KAAK/B,YAAc+B,KAAK9B,WAAa,GAAC,CAAAO,IAAA,UAAAvM,MAiCrE,SAAegO,EAAsBlY,GAEpCgY,KAAKxC,IAAM,KACXwC,KAAKrC,QAAU,KACF,MAATuC,GACHF,KAAKG,UAAUD,GAChBF,KAAKhY,KAAOA,GAAQgY,KAAKI,gBAGzBJ,KAAKhY,KAAK8V,QAAQtF,SAAQ,SAAAlN,GAAC,YAAWzE,GAAPyE,EAAE+U,EAAiB/U,EAAE+U,GAAK,EAAI,CAAC,CAAC,IAE1DL,KAAKhY,KAAK8V,QAAQwC,MAAK,SAAAhV,GAAC,MAAc,QAAVA,EAAE+G,IAAc,KAChD2N,KAAKhY,KAAK8V,QAAQyC,KAAK,CAAElO,KAAM,OAAQmO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,UAAWP,GAAI,IAElFL,KAAKzC,OAAS,KACdyC,KAAKa,aACLb,KAAKD,YACLC,KAAK1B,MACN,GAAC,CAAAG,IAAA,gBAAAvM,MACD,SAAqB4G,GACpB,IAADgI,EACCd,KAAKlH,OAASA,EACH,QAAXgI,EAAAd,KAAKzC,cAAM,IAAAuD,GAAXA,EAAaC,cAAcjI,GAC3BkH,KAAKa,aACLb,KAAK1B,MACN,GAAC,CAAAG,IAAA,cAAAvM,MACD,SAAmBgO,GAClB,IAADc,EAAA,KACChB,KAAKrC,QAAUuC,EACf,IAAM1C,EAAM,IAAIE,MAChBsC,KAAKxC,IAAMA,EACXwC,KAAKxC,IAAIjB,iBAAiB,QAAQ,WAEjC0E,IAAIC,gBAAgBC,GACpBH,EAAK/C,YAAa,EAClB+C,EAAKzD,OAAS,KACdyD,EAAK1C,MACN,IACA,IAAM6C,EAAMF,IAAIG,gBAAgBlB,GAChCF,KAAK/B,YAAa,EAClB+B,KAAKxC,IAAI1O,IAAMqS,CAChB,GAAC,CAAA1C,IAAA,WAAAvM,MACD,SAAgBgO,GAEfF,KAAKrC,QAAU,KACfqC,KAAKxC,IAAM,KACE,MAAT0C,GACHF,KAAKG,UAAUD,EACjB,GAAC,CAAAzB,IAAA,YAAAvM,MACD,SAAiB6L,GAEhBiC,KAAKqB,wBACLrB,KAAKjC,OAASA,EACdiC,KAAKhC,IAAMD,EAAOuD,WAAW,MAC7BtB,KAAK1B,OAED0B,KAAK1C,WAETS,EAAOxB,iBAAiB,YAAayD,KAAKrB,mBAC1CZ,EAAOxB,iBAAiB,YAAayD,KAAKf,mBAC1ClB,EAAOxB,iBAAiB,UAAWyD,KAAKZ,iBACxCrB,EAAOxB,iBAAiB,QAASyD,KAAKR,eACtCzB,EAAOxB,iBAAiB,cAAeyD,KAAKT,qBAC7C,GAAC,CAAAd,IAAA,eAAAvM,MACD,SAAoBmO,GAEnBL,KAAKJ,aAAeS,CACrB,GAAC,CAAA5B,IAAA,QAAAvM,MAQD,WAEC8N,KAAKzC,OAAS,KACdyC,KAAKxC,IAAM,KACXwC,KAAKvC,MAAQ,IAAIC,MACjBsC,KAAKrC,QAAU,KACfqC,KAAKhY,KAAO,CAAE4V,MAAO,EAAGC,OAAQ,EAAGC,QAAS,IAC5CkC,KAAK/B,YAAa,EAClB+B,KAAK9B,aAAc,EACnB8B,KAAKlH,OAAS,KACdkH,KAAKJ,aAAa,MAClBI,KAAK1B,MACN,GAAC,CAAAG,IAAA,UAAAvM,MAAA,eAAAqP,GAAAxb,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MACD,SAAAC,EAAqBsb,EAAmBhM,GAAe,OAAAxP,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAGnC,GAHmCF,EAAAU,GAG5C8Y,KAAKhY,MACTgY,KAAKrC,QAAO,CAAAnX,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAASoV,GAAgBkE,KAAKrC,QAAS6D,EAAWhM,GAAQ,OAAAhP,EAAAY,GAAAZ,EAAAQ,KAAAR,EAAAE,KAAA,eAAAF,EAAAY,GAAG,KAAI,cAAAZ,EAAAib,GAAAjb,EAAAY,GAAAZ,EAAAc,OAAA,UADlFoa,QAAOlb,EAAAU,GACPsW,IAAGhX,EAAAib,KAAA,yBAAAjb,EAAAe,OAAA,GAAArB,EAAA,UAEJ,gBAAAP,EAAAC,GAAA,OAAA2b,EAAAlc,MAAA,KAAAC,UAAA,EAPA,IAOA,CAAAmZ,IAAA,UAAAvM,MACD,WAEClI,OAAO2X,oBAAoB,SAAU3B,KAAK3B,gBAC1CrU,OAAO2X,oBAAoB,UAAW3B,KAAKzB,iBAC3CyB,KAAKqB,wBACLrB,KAAKJ,aAAa,KACnB,GAAC,CAAAnB,IAAA,aAAAvM,MACD,SAAkB0P,GACjB,IAADC,EACY,QAAXA,EAAA7B,KAAKzC,cAAM,IAAAsE,GAAXA,EAAaC,WAAWF,GACxB5B,KAAK1B,MACN,GAAC,CAAAG,IAAA,YAAAvM,MACD,WAEK8N,KAAKzC,SAERyC,KAAKzC,OAAOwE,YACZ/B,KAAK1B,OAEP,GAAC,CAAAG,IAAA,UAAAvM,MACD,WAEK8N,KAAKzC,SAERyC,KAAKzC,OAAOyE,YACZhC,KAAK1B,OAEP,GAAC,CAAAG,IAAA,wBAAAvM,MAED,WAEK8N,KAAKjC,SAERiC,KAAKjC,OAAO4D,oBAAoB,YAAa3B,KAAKrB,mBAClDqB,KAAKjC,OAAO4D,oBAAoB,YAAa3B,KAAKf,mBAClDe,KAAKjC,OAAO4D,oBAAoB,UAAW3B,KAAKZ,iBAChDY,KAAKjC,OAAO4D,oBAAoB,QAAS3B,KAAKR,eAC9CQ,KAAKjC,OAAO4D,oBAAoB,cAAe3B,KAAKT,qBAEtD,GAAC,CAAAd,IAAA,YAAAvM,MAED,SAAkBgO,GACjB,IAAD+B,EAAA,KACOzE,EAAM,IAAIE,MAChBsC,KAAKxC,IAAMA,EACXwC,KAAKxC,IAAIjB,iBAAiB,QAAQ,WAEjC0F,EAAKhE,YAAa,EAClBgE,EAAK1E,OAAS,KACd0E,EAAK3D,MACN,IACA0B,KAAK/B,YAAa,EAClB+B,KAAKxC,IAAI1O,IAAG,YAAA4B,OAAewP,EAC5B,GAAC,CAAAzB,IAAA,YAAAvM,MAED,WACC,IAADgQ,EAAA,KAEC,GADAlC,KAAK9B,aAAc,EACd8B,KAAKlD,UAAV,CAIA,IAFA,IAAMqF,EAAWnC,KAAKhY,KAAK8V,QAAQ1J,KAAI,SAAA9I,GAAC,OAAIA,EAAE+U,CAAC,IAEtC+B,EAAIpC,KAAK5B,MAAMnT,OAAS,EAAGmX,GAAK,EAAGA,IAC5C,CACC,IAAMC,EAAOrC,KAAK5B,MAAMgE,GACnBD,EAAS3Y,SAAS6Y,EAAKtZ,MAE3BmD,SAASkS,MAAMkE,OAAOD,EAAKA,MAC3BrC,KAAK5B,MAAMmE,OAAOH,EAAG,GAEvB,CAGA,IACmCI,EAD7BC,EAAczC,KAAK5B,MAAMhK,KAAI,SAAA9I,GAAC,OAAIA,EAAEvC,EAAE,IAAE2Z,GAAAC,EAAAA,GAAAA,GAC5B3C,KAAKhY,KAAK8V,SAAO,QAAA8E,EAAA,WAClC,IADUhB,EAAGY,EAAAtQ,MAEb,GAAI0P,EAAIvB,EAAI,GAAKoC,EAAYjZ,SAASoY,EAAIvB,GAAG,OAAD,EAE5C,IAAMgC,EAAO1F,GAAY,QAADjM,OAASkR,EAAIvB,GAAKuB,EAAIvB,EAAG6B,EAAKpF,UAAU8E,EAAIvB,IACpE6B,EAAK9D,MAAMmC,KAAK,CAAExX,GAAI6Y,EAAIvB,EAAGgC,KAAAA,IAC7BH,EAAK/D,aAAaoC,KAAK8B,GACvBnW,SAASkS,MAAMyE,IAAIR,GACnBA,EAAKS,OAAOC,MAAK,WAEhBb,EAAK/D,aAAaoE,OAAOL,EAAK/D,aAAa6E,QAAQX,GAAO,GAC1DH,EAAKhE,YAA0C,GAA5BgE,EAAK/D,aAAalT,OAChCiX,EAAKhE,aACTgE,EAAK5D,MACP,GACD,EAfA,IAAAoE,EAAAO,MAAAT,EAAAE,EAAAQ,KAAAC,MAAAP,GAeC,OAAAQ,GAAAV,EAAA3R,EAAAqS,EAAA,SAAAV,EAAArC,GAAA,CACDL,KAAK9B,YAA0C,GAA5B8B,KAAK7B,aAAalT,MAhCV,CAiC5B,GAAC,CAAAwT,IAAA,aAAAvM,MAED,WACC,IAADmR,EAAAC,EAAAC,EAAA,KACO3Y,GAAmD,QAA3CyY,EAAArD,KAAKhY,KAAK8V,QAAQwC,MAAK,SAAAhV,GAAC,MAAc,MAAVA,EAAE+G,IAAY,WAAC,IAAAgR,OAAA,EAA3CA,EAA6CzC,IAAK,UAChEzD,EAAaqG,cAAwB,QAAXF,EAAAtD,KAAKlH,cAAM,IAAAwK,OAAA,EAAXA,EAAa5I,OAAQ,sBAAuB9P,GAAO,SAAA4S,GAE5E+F,EAAK9F,MAAQD,EACT+F,EAAKhG,SAERgG,EAAKhG,OAAOkG,MAAMjG,GAClB+F,EAAKjF,OAEP,GACD,GAAC,CAAAG,IAAA,YAAAvM,MAED,SAAkBwR,GAEZ1D,KAAKjC,SACViC,KAAKjC,OAAOpT,MAAM+Y,OAASA,EAC5B,GAAC,CAAAjF,IAAA,OAAAvM,MAED,WAEC,GAAK8N,KAAKjC,OAAV,CACA,IAAM4F,EAAS3D,KAAKjC,OAAOnK,cAC3B,GAAK+P,EAAL,CAEA,IAAIjD,EAAIiD,EAAOC,YACXjD,EAAIgD,EAAOE,aAWf,GAVI7D,KAAK1C,UAAY0C,KAAKxC,MAAQwC,KAAK8D,UAEtCpD,EAAIV,KAAKhY,KAAK4V,MACd+C,EAAIX,KAAKhY,KAAK6V,QAEfmC,KAAKjC,OAAOH,MAAQ8C,EACpBV,KAAKjC,OAAOpT,MAAMiT,MAAK,GAAAlN,OAAMgQ,EAAC,MAC9BV,KAAKjC,OAAOF,OAAS8C,EACrBX,KAAKjC,OAAOpT,MAAMkT,OAAM,GAAAnN,OAAMiQ,EAAC,MAE1BX,KAAKhC,IAIV,GAHAgC,KAAKhC,IAAI+F,UAAY,YACrB/D,KAAKhC,IAAIgG,SAAS,EAAG,EAAGhE,KAAKjC,OAAOH,MAAOoC,KAAKjC,OAAOF,QAElDmC,KAAKxC,MAAOwC,KAAK8D,QAOjB9D,KAAKzC,SAETyC,KAAKzC,OAAS,IAAI0G,GAAOjE,KAAKxC,IAAKwC,KAAKhY,KAAMgY,KAAKa,WAAWqD,KAAKlE,MAAOA,KAAKmE,UAAUD,KAAKlE,MAAOA,KAAKJ,aAAcI,KAAKvC,MAAOuC,KAAK1C,UACzI0C,KAAKzC,OAAO6G,cAAc,CAAE1D,EAAAA,EAAGC,EAAAA,IAC/BX,KAAKzC,OAAOyE,aAEbhC,KAAKzC,OAAO6G,cAAc,CAAE1D,EAAAA,EAAGC,EAAAA,IAC/BX,KAAKhC,IAAIqG,uBAAwB,EAC7BrE,KAAKlH,QACRkH,KAAKzC,OAAOwD,cAAcf,KAAKlH,QAChCkH,KAAKzC,OAAOe,KAAK0B,KAAKhC,SAjBtB,CAECgC,KAAKhC,IAAI+F,UAAY,QACrB,IAAMzQ,EAAO0M,KAAK8D,QAAU,mDAAc9D,KAAK1C,SAAW,wJAAkC,0GAC5F0C,KAAKsE,iBAAiBhR,EAAM,GAE7B,CAxBmB,CAFK,CAsCzB,GAAC,CAAAmL,IAAA,mBAAAvM,MAED,SAAyBoB,EAAciR,GAEtC,GAAKvE,KAAKhC,KAAQgC,KAAKjC,OAAvB,CACA,IAAM2C,EAAIV,KAAKjC,OAAOH,MAChB+C,EAAIX,KAAKjC,OAAOF,OACtBmC,KAAKhC,IAAInT,UAAY,SACrBmV,KAAKhC,IAAIqE,KAAI,GAAA3R,OAAM6T,EAAI,YAIvB,IAHA,IAAMC,EAAQlR,EAAKmR,MAAM,MACnBC,GAAMF,EAAMvZ,OAASsZ,EAAO,GAAM,EAClCI,EAAMH,EAAMvZ,OAASsZ,EAAO,GACzBnC,EAAI,EAAGA,EAAIoC,EAAMvZ,OAAQmX,IACjCpC,KAAKhC,IAAI4G,SAASJ,EAAMpC,GAAI1B,EAAI,EAAGC,EAAI,EAAI+D,EAAKC,EAAMvC,EATlB,CAUtC,GAAC,CAAA3D,IAAA,gBAAAvM,MAED,WAEC,MAAO,CACN2L,OAAQ,EACRD,MAAO,EACPE,QAAS,CACR,CAAEzL,KAAM,KAAMmO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,UAAWP,GAAI,GACxD,CAAEhO,KAAM,OAAQmO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,UAAWP,GAAI,GAC1D,CAAEhO,KAAM,OAAQmO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,UAAWP,GAAI,GAC1D,CAAEhO,KAAM,QAASmO,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,UAAWP,GAAI,IAG9D,IAAC,EAAA5B,IAAA,eAAAvM,MAlSD,SAA2BwI,EAAc9P,EAAeia,GAEvDC,GAAAA,UAAiBpK,EAAM,CAAEqK,qBAAsB,IAAKC,MAAO,GAAIC,OAAQ,EAAGra,MAAO,CAAEsa,MAAO,YAAaC,KAAMva,KAAW,SAACmG,EAAGoQ,GAEvHpQ,GAAG2L,QAAQnS,MAAMwG,GACrB,IAAMyM,EAAM,IAAIE,MAChBF,EAAIjB,iBAAiB,QAAQ,WAE5BsI,EAASrH,EACV,IACAA,EAAI1O,IAAMqS,CACX,GACD,KAAChE,CAAA,CA3CuB,GAkWnB8G,GAAM,WAWX,SAAAA,EACSzG,EACAxV,EACA6Y,EACAsD,EACAiB,EACAC,EACA/H,GAER,IAADgI,EAAA,MAAAlgB,EAAAA,EAAAA,GAAA,KAAA6e,GAAA,KARSzG,IAAAA,EAAqB,KACrBxV,KAAAA,EAAmB,KACnB6Y,WAAAA,EAAsB,KACtBsD,UAAAA,EAAmC,KACnCiB,aAAAA,EAA8B,KAC9BC,MAAAA,EAAuB,KACvB/H,SAAAA,EAAiB,KAhBlBiI,UAAY,CAAE/E,EAAG,EAAGC,EAAG,EAAGwC,EAAG,GAAI,KACjCuC,OAAS,CAAEC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,KAAM,MAAmB,KAC9EC,QAAU,CAAEP,GAAI,EAAGC,GAAI,EAAGO,GAAI,EAAGC,GAAI,EAAGC,QAAQ,EAAO9T,KAAM,MAAyC,KACtG+T,SAAW,CAAEC,IAAK,CAAC,EAAG,GAAgBC,YAAY,EAAOC,OAAQ,GAAI,KACrEC,WAAa,CAAE9F,EAAG,EAAGC,EAAG,GAAI,KAC5B8F,UAAY,EAAE,KACLC,gBAAkB,GAAG,KAC9B5N,OAAwB,KAAK,KAwB9B+G,eAAqC,SAAsCzO,EAAUc,GAE3F,KAAIoT,EAAKmB,SAAW,GAApB,CACA,IAAM7E,EAAM0D,EAAKtd,KAAK8V,QAAQwH,EAAKmB,UAEnC,GADW,CAAC,IAAK,IAAK,IAAK,IAAK,KACzBjd,SAAS4H,GAChB,CACC,IAAMiP,EAAIjP,EACJ9F,EAAI4G,EACV0P,EAAIvB,GAAK9I,KAAKoP,IAAIrb,EAAG,GACL,MAAZsW,EAAIvP,OAEE,KAALgO,IAAUuB,EAAIjB,EAAIiB,EAAIlB,GACjB,KAALL,IAAUuB,EAAIlB,EAAIkB,EAAIjB,GAE5B,KACkB,KAATvP,IAERwQ,EAAIxQ,GAASc,EACG,MAAZ0P,EAAIvP,MACPiT,EAAKzE,aAlBsB,CAoB9B,EAlCC7Y,EAAK4V,MAAQJ,EAAII,MACjB5V,EAAK6V,OAASL,EAAIK,MACnB,CAyXC,OAzXAtY,EAAAA,EAAAA,GAAA0e,EAAA,EAAAxF,IAAA,YAAAvM,MAED,WAEC,IAAM0U,EAAI5G,KAAK1C,SAAW,EAAI,IAC9B0C,KAAKuF,UAAUtC,EAAI1L,KAAKsP,KAAK7G,KAAKwG,WAAW9F,EAAIkG,GAAK5G,KAAKxC,IAAII,OAAQoC,KAAKwG,WAAW7F,EAAIiG,GAAK5G,KAAKxC,IAAIK,QACzGmC,KAAKuF,UAAU/E,GAAKR,KAAKwG,WAAW9F,EAAIV,KAAKxC,IAAII,MAAQoC,KAAKuF,UAAUtC,GAAK,EAC7EjD,KAAKuF,UAAU9E,GAAKT,KAAKwG,WAAW7F,EAAIX,KAAKxC,IAAIK,OAASmC,KAAKuF,UAAUtC,GAAK,EAC9EjD,KAAK8G,cACN,GAAC,CAAArI,IAAA,gBAAAvM,MAwBD,SAAqBqS,GAEpBvE,KAAKwG,WAAajC,CACnB,GAAC,CAAA9F,IAAA,QAAAvM,MACD,SAAa6U,GAEZ/G,KAAKqF,MAAQ0B,CACd,GAAC,CAAAtI,IAAA,gBAAAvM,MACD,SAAqB4G,GAEpBkH,KAAKlH,OAASA,CACf,GAAC,CAAA2F,IAAA,OAAAvM,MAED,SAAY8L,GACX,IAADgJ,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACCrJ,EAAIsJ,OACJtJ,EAAIuJ,UAAUvH,KAAKuF,UAAU/E,EAAGR,KAAKuF,UAAU9E,GAC/CzC,EAAIgH,MAAMhF,KAAKuF,UAAUtC,EAAGjD,KAAKuF,UAAUtC,GAC3CjF,EAAI+F,UAAY,QAChB/F,EAAIgG,SAAS,EAAG,EAAGhE,KAAKxC,IAAII,MAAOoC,KAAKxC,IAAIK,QAC5CG,EAAIwJ,UAAUxH,KAAKxC,IAAK,EAAG,GAQ3B,IANA,IAAMiK,EAAQ,CACbve,KAA6B,QAAzB8d,EAAa,QAAbC,EAAEjH,KAAKlH,cAAM,IAAAmO,OAAA,EAAXA,EAAanN,kBAAU,IAAAkN,EAAAA,EAAI,8HACjCU,MAA6B,QAAxBR,EAAa,QAAbC,EAAEnH,KAAKlH,cAAM,IAAAqO,OAAA,EAAXA,EAAa7M,iBAAS,IAAA4M,EAAAA,EAAI,+DACjCxM,KAAuB,QAAnB0M,EAAa,QAAbC,EAAErH,KAAKlH,cAAM,IAAAuO,OAAA,EAAXA,EAAa3M,YAAI,IAAA0M,EAAAA,EAAI,uBAGnBhF,EAAI,EAAGA,EAAIpC,KAAKhY,KAAK8V,QAAQ7S,OAAQmX,IAC9C,CACC,IAAMR,EAAM5B,KAAKhY,KAAK8V,QAAQsE,GAI9B,GADApE,EAAI+F,UAAYnC,EAAIhB,EACJ,MAAZgB,EAAIvP,KAEH2N,KAAKqF,MAAMsC,UAAwC,GAA5B3H,KAAKqF,MAAMuC,cACrC5J,EAAIwJ,UAASniB,MAAb2Y,EAAG,CAAWgC,KAAKqF,OAAK3U,QAAAC,EAAAA,EAAAA,GAAKkX,GAAWjG,MAExC5D,EAAIgG,SAAQ3e,MAAZ2Y,GAAGrN,EAAAA,EAAAA,GAAakX,GAAWjG,UAExB,GAAgB,QAAZA,EAAIvP,MAA8B,SAAZuP,EAAIvP,MAA+B,QAAZuP,EAAIvP,KAC1D,CACC,IAAMgQ,EAAI,QAAA3R,OAAWkR,EAAIvB,EAAC,WAC1BrC,EAAIqE,KAAI,GAAA3R,OAAMkR,EAAIjB,EAAC,OAAAjQ,OAAM2R,GACzBrE,EAAI4G,SAAS6C,EAAM7F,EAAIvP,MAAOuP,EAAIpB,EAAGoB,EAAInB,EAAY,GAARmB,EAAIjB,EAASiB,EAAIlB,EAC/D,MAGC1C,EAAIgG,SAAQ3e,MAAZ2Y,GAAGrN,EAAAA,EAAAA,GAAakX,GAAWjG,KAExB5B,KAAKyG,UAAYrE,IAEpBpE,EAAI8J,YAAc,SAClB9J,EAAI+J,UAAY,EAAI/H,KAAKuF,UAAUtC,EACnCjF,EAAIgK,WAAU3iB,MAAd2Y,GAAGrN,EAAAA,EAAAA,GAAekX,GAAWjG,KAE/B,CAEA,GAAI5B,KAAKgG,QAAQG,OACjB,CACCnI,EAAI8J,YAAc,QAClB9J,EAAI+J,UAAY,EAAI/H,KAAKuF,UAAUtC,EACnC,IAAIvC,EAAIV,KAAKgG,QAAQC,GAAKjG,KAAKgG,QAAQP,GACnC9E,EAAIX,KAAKgG,QAAQE,GAAKlG,KAAKgG,QAAQN,GACd,MAArB1F,KAAKgG,QAAQ3T,OAChBsO,EAAID,GACL1C,EAAIgK,WAAWhI,KAAKgG,QAAQP,GAAIzF,KAAKgG,QAAQN,GAAIhF,EAAGC,GACpD3C,EAAI8J,YAAc,QAClB9J,EAAI+J,UAAY,EAAI/H,KAAKuF,UAAUtC,EACnCjF,EAAIgK,WAAWhI,KAAKgG,QAAQP,GAAIzF,KAAKgG,QAAQN,GAAIhF,EAAGC,EACrD,CAEA3C,EAAIiK,SACL,GAAC,CAAAxJ,IAAA,aAAAvM,MAED,SAAkB0P,GAEjB5B,KAAKgG,QAAQ3T,KAAOuP,EAEpB5B,KAAKyG,UAAY,EACjBzG,KAAKoF,aAAa,KACnB,GAAC,CAAA3G,IAAA,oBAAAvM,MAED,WAEC,GAAI8N,KAAKyG,SAAW,EACnB,OAAO,EAER,IAAM7E,EAAM5B,KAAKhY,KAAK8V,QAAQkC,KAAKyG,UAOnC,OANA7E,EAAIpB,EAAI,EACRoB,EAAInB,EAAI,EACRmB,EAAIlB,EAAI,EACRkB,EAAIjB,EAAI,EACRX,KAAKyG,UAAY,EACjBzG,KAAKoF,aAAa,OACX,CACR,GAAC,CAAA3G,IAAA,YAAAvM,MAED,WAEC8N,KAAKuF,UAAUtC,EAAI,EACnBjD,KAAK8G,cACN,GAAC,CAAArI,IAAA,YAAAvM,MAED,SAAiBsO,EAAWC,EAAWzB,GAItC,GAFAgB,KAAKwF,OAAOC,GAAKjF,EACjBR,KAAKwF,OAAOE,GAAKjF,EACH,GAAVzB,EAMH,OAJAgB,KAAKwF,OAAOG,GAAK3F,KAAKuF,UAAU/E,EAChCR,KAAKwF,OAAOI,GAAK5F,KAAKuF,UAAU9E,EAChCT,KAAKwF,OAAOO,KAAO,YACnB/F,KAAKmE,UAAU,QAGhB,GAAc,GAAVnF,EACJ,CACC,GAAIgB,KAAKgG,QAAQ3T,KACjB,CAAC,IAAD6V,EACsClI,KAAKmI,aAAa3H,EAAGC,GAAE2H,GAAAxc,EAAAA,EAAAA,GAAAsc,EAAA,GAE5D,OAFClI,KAAKgG,QAAQP,GAAE2C,EAAA,GAAEpI,KAAKgG,QAAQN,GAAE0C,EAAA,QACjCpI,KAAKgG,QAAQG,QAAS,EAEvB,CACA,IAAK,IAAI/D,EAAI,EAAGA,EAAIpC,KAAKhY,KAAK8V,QAAQ7S,OAAQmX,IAC9C,CACC,IAAMR,EAAM5B,KAAKhY,KAAK8V,QAAQsE,GAC9BiG,EAAiBrI,KAAKmI,aAAa3H,EAAGC,GAAE6H,GAAA1c,EAAAA,EAAAA,GAAAyc,EAAA,GAAjCE,EAAED,EAAA,GAAEE,EAAEF,EAAA,GACTG,GAAS,EAQb,GAPIzI,KAAKyG,UAAYrE,IAEpBpC,KAAKoG,SAASC,IAAMqC,GAASH,EAAIC,EAAI5G,EAAK5B,KAAK0G,gBAAkB1G,KAAKuF,UAAUtC,GAChFwF,EAAiC,GAAxBzI,KAAKoG,SAASC,IAAI,IAAmC,GAAxBrG,KAAKoG,SAASC,IAAI,GACxDrG,KAAKoG,SAASG,OAAS3E,EAAIjB,EAAIiB,EAAIlB,EACnCV,KAAKoG,SAASE,WAAyB,MAAZ1E,EAAIvP,MAE5BsW,GAAYJ,EAAIC,EAAI5G,IAAQ6G,EAU/B,OARAzI,KAAKyG,SAAWrE,EAChBpC,KAAKoF,aAAaxD,GAClB5B,KAAKwF,OAAOG,GAAK/D,EAAIpB,EACrBR,KAAKwF,OAAOI,GAAKhE,EAAInB,EACrBT,KAAKwF,OAAOK,GAAKjE,EAAIlB,EACrBV,KAAKwF,OAAOM,GAAKlE,EAAIjB,EACrBX,KAAKwF,OAAOO,KAAO0C,EAAS,SAAW,MACvCzI,KAAKmE,UAAUsE,EAASG,GAAa5I,KAAKoG,SAASC,KAAO,SACnD,CAET,CACA,IAAMwC,EAAS7I,KAAKyG,UAAY,EAGhC,OAFAzG,KAAKyG,UAAY,EACjBzG,KAAKoF,aAAa,MACXyD,CACR,CACD,GAAC,CAAApK,IAAA,YAAAvM,MAED,SAAiBsO,EAAWC,GAE3B,GAAwB,QAApBT,KAAKwF,OAAOO,KAKf,OAHA/F,KAAKuF,UAAU/E,EAAIR,KAAKwF,OAAOG,IAAMnF,EAAIR,KAAKwF,OAAOC,IACrDzF,KAAKuF,UAAU9E,EAAIT,KAAKwF,OAAOI,IAAMnF,EAAIT,KAAKwF,OAAOE,IACrD1F,KAAK8G,gBACE,EAER,GAAwB,OAApB9G,KAAKwF,OAAOO,MAAiB/F,KAAKyG,UAAY,EAClD,CACC,IAAM7E,EAAM5B,KAAKhY,KAAK8V,QAAQkC,KAAKyG,UAMnC,OALA7E,EAAIpB,EAAIR,KAAKwF,OAAOG,IAAMnF,EAAIR,KAAKwF,OAAOC,IAAMzF,KAAKuF,UAAUtC,EAC/DrB,EAAInB,EAAIT,KAAKwF,OAAOI,IAAMnF,EAAIT,KAAKwF,OAAOE,IAAM1F,KAAKuF,UAAUtC,EAC/DrB,EAAIpB,EAAIjJ,KAAKuR,MAAMlH,EAAIpB,GACvBoB,EAAInB,EAAIlJ,KAAKuR,MAAMlH,EAAInB,GACvBT,KAAKoF,aAAaxD,IACX,CACR,CACA,GAAwB,UAApB5B,KAAKwF,OAAOO,MAAoB/F,KAAKyG,UAAY,EACrD,CACC,IAAM7E,EAAM5B,KAAKhY,KAAK8V,QAAQkC,KAAKyG,UAC7BsC,GAAMvI,EAAIR,KAAKwF,OAAOC,IAAMzF,KAAKuF,UAAUtC,EAC3CyB,GAAMjE,EAAIT,KAAKwF,OAAOE,IAAM1F,KAAKuF,UAAUtC,EACjD+F,GAAApd,EAAAA,EAAAA,GAAiBoU,KAAKoG,SAASC,IAAG,GAA3B4C,EAAED,EAAA,GAAEE,EAAEF,EAAA,GAiEb,OAhEIhJ,KAAKoG,SAASE,YAEb2C,EAAK,IAERrH,EAAIlB,EAAIV,KAAKwF,OAAOK,GAAKkD,EACzBnH,EAAIjB,EAAIiB,EAAIlB,EAAIV,KAAKoG,SAASG,OAC1B2C,EAAK,IACRtH,EAAInB,EAAIT,KAAKwF,OAAOI,IAAMhE,EAAIjB,EAAIX,KAAKwF,OAAOM,KACrC,GAANoD,IACHtH,EAAInB,EAAIT,KAAKwF,OAAOI,IAAMhE,EAAIjB,EAAIX,KAAKwF,OAAOM,IAAM,IAElDmD,EAAK,IAERrH,EAAIpB,EAAIR,KAAKwF,OAAOG,GAAKoD,EACzBnH,EAAIlB,EAAIV,KAAKwF,OAAOK,GAAKkD,EACzBnH,EAAIjB,EAAIiB,EAAIlB,EAAIV,KAAKoG,SAASG,OAC1B2C,EAAK,IACRtH,EAAInB,EAAIT,KAAKwF,OAAOI,IAAMhE,EAAIjB,EAAIX,KAAKwF,OAAOM,KACrC,GAANoD,IACHtH,EAAInB,EAAIT,KAAKwF,OAAOI,IAAMhE,EAAIjB,EAAIX,KAAKwF,OAAOM,IAAM,IAE5C,GAANmD,IAECC,EAAK,IAERtH,EAAIjB,EAAIX,KAAKwF,OAAOM,GAAKpB,GAEtBwE,EAAK,IAERtH,EAAInB,EAAIT,KAAKwF,OAAOI,GAAKlB,EACzB9C,EAAIjB,EAAIX,KAAKwF,OAAOM,GAAKpB,GAE1B9C,EAAIlB,EAAIkB,EAAIjB,EAAIX,KAAKoG,SAASG,OAC9B3E,EAAIpB,EAAIR,KAAKwF,OAAOG,IAAM/D,EAAIlB,EAAIV,KAAKwF,OAAOK,IAAM,KAKjDoD,EAAK,IAERrH,EAAIlB,EAAIV,KAAKwF,OAAOK,GAAKkD,GAEtBE,EAAK,IAERrH,EAAIpB,EAAIR,KAAKwF,OAAOG,GAAKoD,EACzBnH,EAAIlB,EAAIV,KAAKwF,OAAOK,GAAKkD,GAEtBG,EAAK,IAERtH,EAAIjB,EAAIX,KAAKwF,OAAOM,GAAKpB,GAEtBwE,EAAK,IAERtH,EAAInB,EAAIT,KAAKwF,OAAOI,GAAKlB,EACzB9C,EAAIjB,EAAIX,KAAKwF,OAAOM,GAAKpB,IAG3B9C,EAAIlB,EAAInJ,KAAKoP,IAAI/E,EAAIlB,EAAG,GACxBkB,EAAIjB,EAAIpJ,KAAKoP,IAAI/E,EAAIjB,EAAG,GACxBiB,EAAIpB,EAAIjJ,KAAKuR,MAAMlH,EAAIpB,GACvBoB,EAAInB,EAAIlJ,KAAKuR,MAAMlH,EAAInB,GACvBmB,EAAIlB,EAAInJ,KAAKuR,MAAMlH,EAAIlB,GACvBkB,EAAIjB,EAAIpJ,KAAKuR,MAAMlH,EAAIjB,GACvBX,KAAKoF,aAAaxD,IACX,CACR,CACA,GAAI5B,KAAKgG,QAAQG,OACjB,CAAC,IAADgD,EACsCnJ,KAAKmI,aAAa3H,EAAGC,GAAE2I,GAAAxd,EAAAA,EAAAA,GAAAud,EAAA,GAC5D,OADCnJ,KAAKgG,QAAQC,GAAEmD,EAAA,GAAEpJ,KAAKgG,QAAQE,GAAEkD,EAAA,IAC1B,CACR,CACA,GAAIpJ,KAAKyG,UAAY,EACrB,CACC,IAAA4C,EAAiBrJ,KAAKmI,aAAa3H,EAAGC,GAAE6I,GAAA1d,EAAAA,EAAAA,GAAAyd,EAAA,GAElCZ,EAASC,GAFNY,EAAA,GAAIA,EAAA,GACDtJ,KAAKhY,KAAK8V,QAAQkC,KAAKyG,UACEzG,KAAK0G,gBAAkB1G,KAAKuF,UAAUtC,GAC1D,GAAbwF,EAAO,IAAwB,GAAbA,EAAO,GAC5BzI,KAAKmE,UAAUyE,GAAaH,IAE5BzI,KAAKmE,UAAU,UACjB,CACD,GAAC,CAAA1F,IAAA,UAAAvM,MAED,SAAesO,EAAWC,EAAWzB,GACpC,IAADuK,EAAA,KAGC,GAFAvJ,KAAKwF,OAAOO,KAAO,KACnB/F,KAAKmE,UAAU,WACXnE,KAAKgG,QAAQG,OACjB,CAAC,IAADqD,EACsCxJ,KAAKmI,aAAa3H,EAAGC,GAAEgJ,GAAA7d,EAAAA,EAAAA,GAAA4d,EAAA,GAA3DxJ,KAAKgG,QAAQC,GAAEwD,EAAA,GAAEzJ,KAAKgG,QAAQE,GAAEuD,EAAA,GACjC,IAAM7H,EAAM5B,KAAKhY,KAAK8V,QAAQwC,MAAK,SAAAhV,GAAC,OAAIA,EAAE+G,MAAQkX,EAAKvD,QAAQ3T,IAAI,IACnE,OAAKuP,GAKLA,EAAIpB,EAAIR,KAAKgG,QAAQP,GACrB7D,EAAInB,EAAIT,KAAKgG,QAAQN,GACrB9D,EAAIlB,EAAIV,KAAKgG,QAAQC,GAAKjG,KAAKgG,QAAQP,GACvC7D,EAAIjB,EAAIX,KAAKgG,QAAQE,GAAKlG,KAAKgG,QAAQN,GACnC9D,EAAIlB,EAAI,IAEXkB,EAAIpB,GAAKoB,EAAIlB,EACbkB,EAAIlB,IAAM,GAEPkB,EAAIjB,EAAI,IAEXiB,EAAInB,GAAKmB,EAAIjB,EACbiB,EAAIjB,IAAM,GAEXiB,EAAIpB,EAAIjJ,KAAKuR,MAAMlH,EAAIpB,GACvBoB,EAAInB,EAAIlJ,KAAKuR,MAAMlH,EAAInB,GACvBmB,EAAIlB,EAAInJ,KAAKuR,MAAMlH,EAAIlB,GACvBkB,EAAIjB,EAAIpJ,KAAKuR,MAAMlH,EAAIjB,GACvBX,KAAKgG,QAAQG,QAAS,EACtBnG,KAAKgG,QAAQ3T,KAAO,KACJ,MAAZuP,EAAIvP,OACPuP,EAAIjB,EAAIiB,EAAIlB,IACN,IAzBNhE,QAAQnS,MAAM,yCACP,EAyBT,CACD,GAAC,CAAAkU,IAAA,QAAAvM,MAED,SAAasO,EAAWC,EAAWnJ,GAElC,IAAMoS,GAAKlJ,EAAIR,KAAKuF,UAAU/E,GAAKR,KAAKuF,UAAUtC,EAC5C0G,GAAKlJ,EAAIT,KAAKuF,UAAU9E,GAAKT,KAAKuF,UAAUtC,EAE9C3L,EAAI,EACP0I,KAAKuF,UAAUtC,GAAK,IAEpBjD,KAAKuF,UAAUtC,GAAK,IAOrB,OALAjD,KAAKuF,UAAUtC,EAAI1L,KAAKoP,IAAI3G,KAAKuF,UAAUtC,EAAG1L,KAAKsP,KAAK7G,KAAKwG,WAAW9F,EAD9D,KACuEV,KAAKxC,IAAII,OAAQoC,KAAKwG,WAAW7F,EADxG,KACiHX,KAAKxC,IAAIK,SAEpImC,KAAKuF,UAAU/E,EAAIA,EAAIkJ,EAAI1J,KAAKuF,UAAUtC,EAC1CjD,KAAKuF,UAAU9E,EAAIA,EAAIkJ,EAAI3J,KAAKuF,UAAUtC,EAC1CjD,KAAK8G,gBACE,CACR,GAAC,CAAArI,IAAA,eAAAvM,MAED,WAEC,IAAM0U,EAAI,IACJgD,EAAK5J,KAAKxC,IAAII,MAAQoC,KAAKuF,UAAUtC,EACrC4G,EAAK7J,KAAKxC,IAAIK,OAASmC,KAAKuF,UAAUtC,EACxC2G,EAAK5J,KAAKwG,WAAW9F,EACxBV,KAAKuF,UAAU/E,EAAIjJ,KAAKsP,IAAItP,KAAKoP,IAAI3G,KAAKuF,UAAU/E,GAAIoJ,EAAK5J,KAAKwG,WAAW9F,EAAIkG,GAAIA,GAErF5G,KAAKuF,UAAU/E,EAAIjJ,KAAKsP,IAAItP,KAAKoP,IAAI3G,KAAKuF,UAAU/E,GAAIoJ,EAAKhD,GAAI5G,KAAKwG,WAAW9F,EAAIkG,GAClFiD,EAAK7J,KAAKwG,WAAW7F,EACxBX,KAAKuF,UAAU9E,EAAIlJ,KAAKsP,IAAItP,KAAKoP,IAAI3G,KAAKuF,UAAU9E,GAAIoJ,EAAK7J,KAAKwG,WAAW7F,EAAIiG,GAAIA,GAErF5G,KAAKuF,UAAU9E,EAAIlJ,KAAKsP,IAAItP,KAAKoP,IAAI3G,KAAKuF,UAAU9E,GAAIoJ,EAAKjD,GAAI5G,KAAKwG,WAAW7F,EAAIiG,EACvF,GAAC,CAAAnI,IAAA,eAAAvM,MAED,SAAqBsO,EAAWC,GAE/B,MAAO,EAAED,EAAIR,KAAKuF,UAAU/E,GAAKR,KAAKuF,UAAUtC,GAAIxC,EAAIT,KAAKuF,UAAU9E,GAAKT,KAAKuF,UAAUtC,EAC5F,GAAC,CAAAxE,IAAA,gBAAAvM,MACD,SAAsBsO,EAAWC,GAEhC,MAAO,CAACD,EAAIR,KAAKuF,UAAUtC,EAAIjD,KAAKuF,UAAU/E,EAAGC,EAAIT,KAAKuF,UAAUtC,EAAIjD,KAAKuF,UAAU9E,EACxF,KAACwD,CAAA,CAhZU,GA2ZZ,SAAS0E,GAAYnI,EAAWC,EAAWqJ,GAE1C,OAAOtJ,EAAIsJ,EAAKtJ,GAAKA,EAAIsJ,EAAKtJ,EAAIsJ,EAAKpJ,GACtCD,EAAIqJ,EAAKrJ,GAAKA,EAAIqJ,EAAKrJ,EAAIqJ,EAAKnJ,CAClC,CAGA,SAAS+H,GAASlI,EAAWC,EAAWqJ,EAAYC,GAEnD,IAAMC,EAAI,CAAC,EAAG,GAEd,OAAKrB,GAAYnI,EAAGC,EAAG,CAAED,EAAGsJ,EAAKtJ,EAAIuJ,EAAQtJ,EAAGqJ,EAAKrJ,EAAIsJ,EAAQrJ,EAAGoJ,EAAKpJ,EAAa,EAATqJ,EAAYpJ,EAAGmJ,EAAKnJ,EAAa,EAAToJ,KAGjGxS,KAAKE,IAAI+I,EAAIsJ,EAAKtJ,IAAMuJ,IAAQC,EAAE,IAAM,GACxCzS,KAAKE,IAAI+I,GAAKsJ,EAAKtJ,EAAIsJ,EAAKpJ,KAAOqJ,IAAQC,EAAE,GAAK,GAClDzS,KAAKE,IAAIgJ,EAAIqJ,EAAKrJ,IAAMsJ,IAAQC,EAAE,IAAM,GACxCzS,KAAKE,IAAIgJ,GAAKqJ,EAAKrJ,EAAIqJ,EAAKnJ,KAAOoJ,IAAQC,EAAE,GAAK,GAE/CA,GAPCA,CAQT,CACA,SAASpB,GAAaqB,GAErB,IAAAC,GAAAte,EAAAA,EAAAA,GAAeqe,EAAS,GAAjBzJ,EAAC0J,EAAA,GAAEzJ,EAACyJ,EAAA,GACX,OAAS,GAAL1J,EAEM,GAALC,EAAe,UACD,WAGfD,EAAI,EAEE,GAALC,EAAe,WACfA,EAAI,EAAU,YACX,YAEJD,EAAI,EAEE,GAALC,EAAe,WACfA,EAAI,EAAU,YACX,YAED,SACR,CAEA,SAASoH,GAAUpa,GAElB,MAAO,CAFeA,EAAD+S,EAAI/S,EAADgT,EAAIhT,EAADiT,EAAIjT,EAADkT,EAG/B,CC3yBO,SAASwJ,GAAS1c,GACxB,IAD2B8P,EAAM9P,EAAN8P,OAAQa,EAAK3Q,EAAL2Q,MAEnC3S,GAAsBC,EAAAA,EAAAA,UAAS,GAAtB0e,GAAwBxe,EAAAA,EAAAA,GAAAH,EAAA,GAAf,GAClBuH,GAAsBtH,EAAAA,EAAAA,UAAqC,MAAKuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAzD4O,EAAG3O,EAAA,GAAEoX,EAAMpX,EAAA,GACZqX,EAAS,WAAH,OAASF,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GAAE,EAO3C,OANAiS,EAAO6H,cAAa,SAAAxD,GAEnByI,EAAOzI,GACP0I,GACD,KAGC5d,EAAAA,EAAAA,MAAA,OAAKC,UAAW5B,EAAW6B,GAAO2d,UAAW3I,GAAOhV,GAAO4d,gBAAgB1f,SAAA,EAC1EJ,EAAAA,EAAAA,KAAA,MAAAI,SAAK,CACJ,GAAM,wBACN,KAAQ,0DACR,KAAQ,+DACR,MAAS,mDACT,GAAI,KACA,OAAH8W,QAAG,IAAHA,OAAG,EAAHA,EAAKvP,OAAQ,OACf3F,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO6d,OAAO3f,SAAA,EAC7B4B,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,QACNJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,SAASH,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKpB,IAAK,EAAGkK,QAAS,SAAC3Z,GAAWwM,EAAOsC,eAAe,IAAK9O,EAAE2K,OAAOiP,eAAgBL,GAAU,QAE7H5d,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,QACNJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,SAASH,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKnB,IAAK,EAAGiK,QAAS,SAAC3Z,GAAWwM,EAAOsC,eAAe,IAAK9O,EAAE2K,OAAOiP,eAAgBL,GAAU,QAE7H5d,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,2CACNJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,SAASH,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKlB,IAAK,EAAGgK,QAAS,SAAC3Z,GAAWwM,EAAOsC,eAAe,IAAK9O,EAAE2K,OAAOiP,eAAgBL,GAAU,QAE7H5d,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,2CACNJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,SAASH,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKjB,IAAK,EAAG+J,QAAS,SAAC3Z,GAAWwM,EAAOsC,eAAe,IAAK9O,EAAE2K,OAAOiP,eAAgBL,GAAU,WAG9H5d,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAOge,WAAW9f,SAAA,EACnCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,+BACNJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,QAAQH,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKhB,IAAK,UAAW8J,QAAS,SAAC3Z,GAAWwM,EAAOsC,eAAe,IAAK9O,EAAE2K,OAAOxJ,OAAQoY,GAAU,OAE9G,OAAV,OAAH1I,QAAG,IAAHA,OAAG,EAAHA,EAAKvP,QACL3F,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAOie,UAAU/f,SAAA,EAClCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,qCACN4B,EAAAA,EAAAA,MAAA,UAAQwF,OAAU,OAAH0P,QAAG,IAAHA,OAAG,EAAHA,EAAKvB,KAAM,EAAG9E,SAAU,SAAAxK,GAAOwM,EAAOsC,eAAe,IAAKvE,SAASvK,EAAE2K,OAAOxJ,SAAW,GAAIoY,GAAU,EAAExf,SAAA,EACrHJ,EAAAA,EAAAA,KAAA,UAAQwH,OAAQ,EAAEpH,SAAC,UAClBsT,EAAMhK,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAA,UAAmBwH,MAAO5G,EAAEvC,GAAG+B,SAAEQ,EAAEpC,MAAtBoC,EAAEvC,GAAkC,YAMvE,CCxDO,SAAS+hB,KAEf,OAAOniB,EAAAA,EAAAA,UAAS,SAAO5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAClBwB,EAAqB,cAAa,cAAA1B,EAAAc,OAAA,SAAAd,EAAAQ,MAAA,wBAAAR,EAAAe,OAAA,GAAArB,EAAA,KAE1C,CCAe,SAAS6kB,GAAgBtd,GACvC,IAADud,EAD2CtS,EAAMjL,EAANiL,OAAQlD,EAAO/H,EAAP+H,QAAS9C,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAE3DwQ,EAAS0N,KACThd,ETuCA,SAAqCyK,EAAyBpK,GAEpE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAoT,EAAOrR,GAA0B,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAgT,GAAA,cAAAA,EAAA9S,KAAA8S,EAAA7S,MAAA,cAAA6S,EAAA7S,KAAA,EACtCyB,EAA0B,qBAAuBuQ,EAAQ1Q,GAAK,cAAAuR,EAAAjS,OAAA,SAAAiS,EAAAvS,MAAA,wBAAAuS,EAAAhS,OAAA,GAAA8R,EAAA,qBAAAzT,GAAA,OAAAwT,EAAA/T,MAAA,KAAAC,UAAA,EAD1D,GAEXgJ,UAAW,SAACtG,GAEXkG,EAAYK,aAAa,CAAC,cAAc,GAADmC,OAAKgI,IAAW1Q,GACvD6M,GAAoB3G,EAAa,CAAC,eAAgBwK,GAAS1Q,GAClD,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CSrDkBid,CAA4BxS,EAAQ3L,GAC/Coe,EAAQ1S,GAAcC,GACtB0F,EAAQ0M,KACRM,GAAY5Z,EAAAA,EAAAA,QAA0B,MAC5C/F,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD4f,EAAc1f,EAAA,GAAE2f,EAAiB3f,EAAA,GACxCqH,GAAoCtH,EAAAA,EAAAA,WAAS,GAAMuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA5CuY,EAAUtY,EAAA,GAAEuY,EAAavY,EAAA,GAC1BwY,EAAiC,OAAb,QAAVT,EAAAG,EAAMnjB,YAAI,IAAAgjB,OAAA,EAAVA,EAAYU,SA6B5B,OA3BA3hB,EAAAA,EAAAA,YAAU,WAEJ2I,IAEJzE,EAASoN,QACTiQ,GAAkB,GAClBE,GAAc,GACdjO,EAAOlC,QAGT,GAAG,CAAC3I,EAAM6K,KAEVxT,EAAAA,EAAAA,YAAU,WAGR,IAAD4hB,EADIjZ,GAAQyY,EAAMnjB,OAEjBuV,EAAOqO,QAAQT,EAAMnjB,KAAK0jB,QAAS5kB,KAAK+kB,MAAM/kB,KAAKC,UAAUokB,EAAMnjB,KAAK0Z,WACxE4J,IAA6B,QAAXK,EAACR,EAAMnjB,YAAI,IAAA2jB,GAAVA,EAAYD,UAEjC,GAAG,CAACP,EAAMnjB,KAAM0K,EAAM6K,KAEtBxT,EAAAA,EAAAA,YAAU,WAELqhB,EAAUnZ,SACbsL,EAAOuO,UAAUV,EAAUnZ,QAC7B,GAAG,CAACmZ,EAAW7N,KAGd7Q,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,wFAAiBxF,SAAA,CACtDZ,EAAaihB,GACbjhB,EAAakU,GACblU,EAAa+D,GACbkd,EAAMrZ,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3B4Q,EAAMtM,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3BS,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOC,KAAK/B,SAAA,EAC3B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOmR,OAAOjT,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,UAAQ0H,IAAKgZ,KACb1gB,EAAAA,EAAAA,KAACyf,GAAS,CAAC5M,OAAQA,EAAQa,MAAOA,EAAMpW,MAAQ,SAEjD0E,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOmf,MAAMjhB,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,8GACNJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMuQ,EAAOuE,WAAW,KAAK,EAAChX,SAAC,2BACnEJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMuQ,EAAOuE,WAAW,OAAO,EAAChX,SAAC,wBACrEJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMuQ,EAAOuE,WAAW,OAAO,EAAChX,SAAC,qFACrEJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMuQ,EAAOuE,WAAW,QAAQ,EAAChX,SAAC,sDACtEJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAWC,GAAOof,MACxBthB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,cAAcK,QAAS,kBAAMuQ,EAAO0O,SAAS,EAACnhB,SAAC,gBACjEJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMuQ,EAAOwE,WAAW,EAACjX,SAAC,YAE/D4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOsf,OAAOphB,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,OAAAI,SACEugB,GAAiB3e,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACf2gB,IAAW/gB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMse,GAAkB,EAAM,EAACxgB,SAAC,0CACjFJ,EAAAA,EAAAA,KAAA,SAAAI,UACCJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOkJ,SAAU,SAAAxK,GAExBA,EAAE2K,OAAO0Q,OAASrb,EAAE2K,OAAO0Q,MAAM,KAEpC7O,EAAO8O,YAAYtb,EAAE2K,OAAO0Q,MAAM,IAClCd,GAAkB,GAClBE,GAAc,GAEhB,EAAGc,OAAO,2CAEN5f,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACLJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMse,GAAkB,EAAK,EAACxgB,SAAC,sGAClEygB,IAAeE,IAAW/gB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,WAC9D,IAADuf,EACCf,GAAc,GACdjO,EAAOiP,UAAmB,QAAVD,EAAApB,EAAMnjB,YAAI,IAAAukB,OAAA,EAAVA,EAAYb,UAAW,KACxC,EAAE5gB,SAAC,mKAGL4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAW,OAALD,QAAK,IAALA,OAAK,EAALA,GAAS,EAACjC,SAAC,0CACrDJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,SAAOjH,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAA8B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEhB6W,EAAOkP,QAAQ,UAAD/b,OAAWgI,GAAUlD,GAAS,KAAD,EAAxDxN,EAAIxB,EAAAQ,KACViH,EAASkB,OAAOnH,GAAM,wBAAAxB,EAAAe,OAAA,GAAArB,EAAA,KACrB4E,SAAC,sEAMT,CAEO,SAASmgB,KACf,IADyB3N,EAAQhY,UAAA2F,OAAA,QAAApE,IAAAvB,UAAA,IAAAA,UAAA,GAEjC0U,GAAuBtO,EAAAA,EAAAA,UAAS,GAAEuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAxBoQ,GAAFnQ,EAAA,GAAWA,EAAA,IACbmE,EAAQ0M,KACVhO,EAA8B,KAClC,GAAIsB,EAAMpW,KACV,CACC8U,EAAY,CAAC,EAAE,IACoB0F,EADpBE,GAAAC,EAAAA,GAAAA,GACIvE,EAAMpW,MAAQ,IAAE,IAAnC,IAAA0a,EAAAO,MAAAT,EAAAE,EAAAQ,KAAAC,MACC,KADUd,EAAIG,EAAAtQ,MACd4K,EAAUuF,EAAKtZ,IAAMsZ,EAAKhQ,IAAK,QAAA+Q,GAAAV,EAAA3R,EAAAqS,EAAA,SAAAV,EAAArC,GAAA,CACjC,CAEA,IAAM9C,GAAS/L,EAAAA,EAAAA,QAAO,IAAI2L,GAAaL,GAAW,EAAOQ,IAQzD,OAPAvT,EAAAA,EAAAA,YAAU,WAIT,OAFAwT,EAAOtL,QAAU,IAAIkL,GAAaL,GAAW,EAAMQ,GACnD8M,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,IACb,kBAAMiS,EAAOtL,QAAQya,SAAU,CACvC,GAAG,CAACpP,EAAUc,EAAMpW,OAEbuV,EAAOtL,OACf,CC3He,SAAS0a,GAAYlf,GACnC,IADsCqL,EAAMrL,EAANqL,OAEhCyE,EAAS0N,IAAU,GACnBE,EAAQ1S,IAAoB,OAANK,QAAM,IAANA,OAAM,EAANA,EAAQJ,UAAW,GACzC0S,GAAY5Z,EAAAA,EAAAA,QAA0B,MAsB5C,OApBAzH,EAAAA,EAAAA,YAAU,WAEJ+O,GAAQyE,EAAOlC,OACrB,GAAG,CAACvC,EAAQyE,KAEZxT,EAAAA,EAAAA,YAAU,WAEL+O,GAAUqS,EAAMnjB,OAEnBuV,EAAOqO,QAAQT,EAAMnjB,KAAK0jB,QAAS5kB,KAAK+kB,MAAM/kB,KAAKC,UAAUokB,EAAMnjB,KAAK0Z,WACxEnE,EAAOwD,cAAcjI,GAEvB,GAAG,CAACqS,EAAMnjB,KAAM8Q,EAAQyE,KAExBxT,EAAAA,EAAAA,YAAU,WAELqhB,EAAUnZ,SACbsL,EAAOuO,UAAUV,EAAUnZ,QAC7B,GAAG,CAACmZ,EAAW7N,KAGd7Q,EAAAA,EAAAA,MAAA,OAAK/B,MAAO,CAAEiiB,SAAU,IAAKC,UAAW,KAAM/hB,SAAA,CAC5CqgB,EAAMrZ,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3BtD,EAAaihB,IACdzgB,EAAAA,EAAAA,KAAA,UAAQ0H,IAAKgZ,MAGhB,CCvCA,QAAgB,KAAO,qBAAqB,QAAU,wBAAwB,OAAS,wB,sBCQxE,SAAS0B,GAAgBrf,GACvC,IAD0C2H,EAAK3H,EAAL2H,MAAO0D,EAAMrL,EAANqL,OAAQ/L,EAAKU,EAALV,MAEzDtB,GAAsBC,EAAAA,EAAAA,UAAmC,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAvDnF,EAAGqF,EAAA,GAAEohB,EAAMphB,EAAA,GAClBqH,GAA4BtH,EAAAA,EAAAA,UAAS,IAAGuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAjCga,EAAM/Z,EAAA,GAAEga,EAASha,EAAA,GAClBia,GAAY1b,EAAAA,EAAAA,QAAuB,MAoBzC,OAnBAzH,EAAAA,EAAAA,YAAU,WAEJ+O,IACLiU,EAAO,MACPE,EAAU,IACVnI,GAAAA,UAAiBhM,EAAO4B,KAAM,CAAEqK,qBAAsB,IAAKC,MAAO,IAAK,SAACjU,EAAGoQ,GAAG,OAAK8L,EAAU9L,EAAI,IAClG,GAAG,CAACrI,KAEJ/O,EAAAA,EAAAA,YAAU,WAET,GAAKijB,GAAWE,EAAUjb,QAA1B,CACA,IAAMkb,EAAU5Z,YAAW,WAErByZ,GAAWE,EAAUjb,SAC1Bmb,KAAYF,EAAUjb,SAAS8Q,MAAK,SAAAhF,GAAM,OAAIgP,EAAOhP,EAAO,GAC7D,GAAG,IACH,OAAO,kBAAMsP,aAAaF,EAAS,CANM,CAO1C,GAAG,CAACH,EAAQE,KAGXxgB,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,OAAQoG,EAAQ/L,MAAOA,EAAOuD,MAAM,wFAAiBxF,SAAA,EAC3D4B,EAAAA,EAAAA,MAAA,OAAK0F,IAAK8a,EAAWvgB,UAAW5B,EAAW6B,GAAOC,MAAOvG,GAAOsG,GAAOE,SAAShC,SAAA,EAC/EJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,oCACJJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAO0gB,OAAQ3iB,MAAO,CAAE4iB,UAAW,QAASziB,UAC3DJ,EAAAA,EAAAA,KAAA,OAAKoE,IAAKke,EAAQhe,IAAW,OAAN8J,QAAM,IAANA,OAAM,EAANA,EAAQ4B,UAEhChQ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAO0gB,OAAQ3iB,MAAO,CAAE6iB,aAAc,QAAS1iB,SAAQ,OAANgO,QAAM,IAANA,OAAM,EAANA,EAAQ4B,QACzEhO,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACC4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,uEAAmB,OAALsK,QAAK,IAALA,OAAK,EAALA,EAAOlM,SAC1BwD,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,6BAAOwL,GAAkB,OAALlB,QAAK,IAALA,OAAK,EAALA,EAAOC,UAChC3I,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,4DAAmB,OAANgO,QAAM,IAANA,OAAM,EAANA,EAAQzG,SAC1B3F,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,iEAAmB,OAANgO,QAAM,IAANA,OAAM,EAANA,EAAQgB,oBAG3BxT,IAAOoE,EAAAA,EAAAA,KAAA,OAAK0H,IAAK,SAAAA,GAEZA,IACLA,EAAIqb,UAAY,GAChBrb,EAAIsb,YAAYpnB,GACjB,IACCA,IAAOoE,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAO0gB,OAAOxiB,SAAC,uKAG1C,CClDe,SAAS6iB,GAAUlgB,GACjC,IADoCqL,EAAMrL,EAANqL,OAAQ1D,EAAK3H,EAAL2H,MAAOrI,EAAKU,EAALV,MAEnDtB,GAAwCC,EAAAA,EAAAA,UAAwB,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA9DmiB,EAAYjiB,EAAA,GAAEkiB,EAAeliB,EAAA,GAC9Bwf,EAAQ1S,IAAoB,OAANK,QAAM,IAANA,OAAM,EAANA,EAAQJ,UAAW,GAE/C,OAAQhM,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACP4B,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,OAAQoG,IAAW8U,EAAc7gB,MAAOA,EAAOuD,MAAM,wFAAiBxF,SAAA,EAC5EJ,EAAAA,EAAAA,KAACiiB,GAAY,CAAC7T,OAAQA,IACrBqS,EAAMnjB,OAASmjB,EAAMnjB,KAAK0jB,UAAWhhB,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEE,UAAW,UAAWC,UACzEJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAM6gB,EAAgB/U,EAAO,EAAChO,SAAC,+GAGrEJ,EAAAA,EAAAA,KAACoiB,GAAgB,CAAChU,OAAQ8U,EAAcxY,MAAOA,EAAOrI,MAAO,WAAQ8gB,EAAgB,MAAO9gB,GAAQ,MAGtG,CCfe,SAAS+gB,GAAmBrgB,GAC1C,IAAD0N,EAAA4S,EAD8CvY,EAAO/H,EAAP+H,QAAS9C,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAE5DtB,GAAsBC,EAAAA,EAAAA,UAAS,GAAtB0e,GAAwBxe,EAAAA,EAAAA,GAAAH,EAAA,GAAf,GAClBuH,GAA8BtH,EAAAA,EAAAA,UAA6C,IAAIsiB,KAAM/a,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA9Eib,EAAOhb,EAAA,GAAEib,EAAUjb,EAAA,GAC1B+G,GAAgCtO,EAAAA,EAAAA,UAAkC,IAAGuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAA9DmU,EAAQlU,EAAA,GAAEmU,EAAWnU,EAAA,GACtBiB,EAAc3C,GAAe/C,GAC7BvH,EdIA,SAAsCuH,EAA0BlH,GAEtE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,EAAOC,GAA6B,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EACzCyB,EAAa,eAAAuI,OAA8B8E,EAAO,iBAAiBxN,GAAK,cAAAC,EAAAX,OAAA,SAAAW,EAAAjB,MAAA,wBAAAiB,EAAAV,OAAA,GAAAQ,EAAA,qBAAApC,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EADpE,GAEXgJ,UAAW,SAACtG,EAAMqmB,GAEOA,EAAIC,MAAK,SAAAhjB,GAAC,MAAgB,UAAZA,EAAEijB,QAAkC,UAAZjjB,EAAEijB,MAAkB,KAEjFla,GAAgBnG,EAAa,CAAC,UAAWsH,IAC1CtH,EAAYK,aAAa,CAAC,eAAe,GAADmC,OAAK8E,IAAYxN,GACzDA,EAAKwQ,SAAQ,SAAAlN,GAAC,OAAI4C,EAAYK,aAAa,CAAC,cAAc,GAADmC,OAAKpF,EAAEvC,KAAOuC,EAAE,IAChE,OAATgD,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CcrBkBugB,CAA6BhZ,EAASzI,GAYvD,OAVAhD,EAAAA,EAAAA,YAAU,WAETmkB,EAAW,IAAIF,KACfI,EAAY,IACZhE,EAAU,GACL1X,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,KAGHhG,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,mIAAyBxF,SAAA,CAC9DZ,EAAa+D,GACbiN,EAAYpJ,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IACjCS,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,YAEXod,EAAQ1J,KAAO,GAAK4J,EAASljB,OAAS,IACzCgD,EAASkB,OAAO,GAADuB,QAAAC,EAAAA,EAAAA,GAAKwd,EAAS9iB,QAAO,SAAAC,GAAC,MAAgB,OAAZA,EAAEijB,MAAe,MAAC5d,EAAAA,EAAAA,GAAKxF,MAAMsjB,KAAKR,EAAQS,YACrF,EAAE5jB,SAAA,CACgB,QADhBqQ,EACAD,EAAYlT,YAAI,IAAAmT,GAAoD,QAApD4S,EAAhB5S,EAAkB9P,QAAO,SAAAC,GAAC,IAAAqjB,EAAA,MAAiC,WAAZ,QAAjBA,EAAAV,EAAQhO,IAAI3U,EAAEvC,WAAG,IAAA4lB,OAAA,EAAjBA,EAAmBJ,OAAkB,WAAC,IAAAR,OAApD,EAAhBA,EAAsE3Z,KAAI,SAAA9I,GAAC,IAAAsjB,EAAA,OAC3EliB,EAAAA,EAAAA,MAACuE,GAAS,CAAAnG,SAAA,EACTJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOC,UAAQ,EAACJ,OAAwB,QAAjB0c,EAAAX,EAAQhO,IAAI3U,EAAEvC,WAAG,IAAA6lB,OAAA,EAAjBA,EAAmB1lB,OAAQoC,EAAEpC,KAAMqS,SAAU,SAAAxK,GAE/Ekd,EAAQY,IAAIvjB,EAAEvC,GAAI,CAAEA,GAAIuC,EAAEvC,GAAIG,KAAM6H,EAAE2K,OAAOxJ,MAAOqc,OAAQ,WAC5DnE,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GACrB,KACAZ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsBK,QAAS,WAE9DihB,EAAQY,IAAIvjB,EAAEvC,GAAI,CAAEA,GAAIuC,EAAEvC,GAAIG,KAAM,GAAIqlB,OAAQ,WAChDnE,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GACrB,EAAER,SAAC,iDAVYQ,EAAEvC,GAWN,IAEZolB,EAAS9iB,QAAO,SAAAC,GAAC,MAAgB,OAAZA,EAAEijB,MAAe,IAAEna,KAAI,SAAC9I,EAAG8W,GAAC,OACjD1V,EAAAA,EAAAA,MAACuE,GAAS,CAAAnG,SAAA,EACTJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOC,UAAQ,EAACiJ,SAAU,SAAAxK,GAErCod,EAAS/L,GAAGlZ,KAAO6H,EAAE2K,OAAOxJ,MAC5BkY,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GACrB,KACAZ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsBK,QAAS,WAE9DmhB,EAAS/L,GAAGmM,OAAS,SACrBnE,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GACrB,EAAER,SAAC,iDAVY,MAAQsX,EAWZ,KAEb1X,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsBK,QAAS,WAE9DmhB,EAAS5N,KAAK,CAAErX,KAAM,GAAIqlB,OAAQ,QAClCnE,GAAU,SAAA9e,GAAC,OAAIA,EAAI,CAAC,GACrB,EAAER,SAAC,sDACHJ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,4EAI1D,CCjEe,SAASgkB,GAAarhB,GACpC,IAADshB,EAAAC,EADwCxZ,EAAO/H,EAAP+H,QAAS9C,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAEhDkiB,GAAYzd,EAAAA,EAAAA,QAAyB,MACrC0d,GAAW1d,EAAAA,EAAAA,QAAyB,MACpCvD,ElByEA,SAAgCuH,EAA0BlH,GAEhE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACpB,OAAOC,EAAAA,EAAAA,aAAY,CAClBC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAkpB,EAAOC,GAAuB,IAAAha,EAAA,OAAApP,EAAAA,EAAAA,KAAAO,MAAA,SAAA8oB,GAAA,cAAAA,EAAA5oB,KAAA4oB,EAAA3oB,MAAA,cAAA2oB,EAAA3oB,KAAA,EAErByB,EAA6B,eAAiBqN,EAAS4Z,GAAW,KAAD,EAA1E,OAALha,EAAKia,EAAAroB,KAAAqoB,EAAA/nB,OAAA,SACJ4N,GAAmBE,IAAM,wBAAAia,EAAA9nB,OAAA,GAAA4nB,EAAA,KAChC,gBAAAvpB,GAAA,OAAAwT,EAAA/T,MAAA,KAAAC,UAAA,EAJU,GAKXgJ,UAAW,SAACtG,GAEXkG,EAAYK,aAAa,CAAC,QAAQ,GAADmC,OAAK1I,EAAKe,KAAOf,GAClD6M,GAAoB3G,EAAa,SAAUlG,GAClC,OAATsG,QAAS,IAATA,GAAAA,GACD,GAEF,CkBzFkBghB,CAAuB9Z,EAASzI,GAC3CqI,EAAQG,GAASC,GASvB,OAPAzL,EAAAA,EAAAA,YAAU,WAEJ2I,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,KAGHhG,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,sHAAsBxF,SAAA,CAC3DZ,EAAa+D,GACbmH,EAAMtD,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3BS,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAAD0e,EAAAC,EACOlf,EAAyB,QAApBif,EAAGN,EAAUhd,eAAO,IAAAsd,OAAA,EAAjBA,EAAmBrd,MAC3BmD,EAAuB,QAAnBma,EAAGN,EAASjd,eAAO,IAAAud,OAAA,EAAhBA,EAAkBtd,MAC3B5B,GAAS+E,GACZpH,EAASkB,OAAO,CAAEkG,KAAMA,EAAMnM,KAAMoH,GACtC,EAAExF,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,mDAAUrG,UAC1BJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK6c,EAAW5c,KAAK,OAAOC,UAAQ,EAACmd,aAAwB,QAAZV,EAAE3Z,EAAMpN,YAAI,IAAA+mB,OAAA,EAAVA,EAAY7lB,UAEvEwB,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,2BAAMrG,UACtBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK8c,EAAU7c,KAAK,iBAAiBC,UAAQ,EAACmd,aAAwB,QAAZT,EAAE5Z,EAAMpN,YAAI,IAAAgnB,OAAA,EAAVA,EAAY3Z,KAAKqa,cAActiB,MAAM,GAAI,QAE7G1C,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,4EAI1D,CCpCe,SAAS6kB,GAAoBliB,GAC3C,IADoD6C,EAAK7C,EAAL6C,MAAOjC,EAAUZ,EAAVY,WAAYuhB,EAAcniB,EAAdmiB,eAAgB5a,EAAMvH,EAANuH,OAAQ1G,EAASb,EAATa,UAAWoE,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAE1GkB,EAAWI,EAAW2G,GAAQ,SAACP,GAE/B,OAAL1H,QAAK,IAALA,GAAAA,IACS,OAATuB,QAAS,IAATA,GAAAA,EAAYmG,EACb,IASA,OAPA1K,EAAAA,EAAAA,YAAU,WAEJ2I,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,KAGHhG,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAOA,EAAMxF,SAAA,CAC5CZ,EAAa+D,GACbA,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WAEf5C,EAASkB,OAAOygB,EACjB,EAAE9kB,SAAA,EACDJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,8DACJJ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,4EAI1D,CC7BO,SAAS+kB,KAEf,OAAOlnB,EAAAA,EAAAA,UAAS,SAAO5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAClBwB,EAA4B,cAAa,cAAA1B,EAAAc,OAAA,SAAAd,EAAAQ,MAAA,wBAAAR,EAAAe,OAAA,GAAArB,EAAA,KAEjD,CAEO,SAAS4pB,GAActa,GAE7B,OAAO7M,EAAAA,EAAAA,UAAS,CAAC,QAAQ,GAAD+H,OAAK8E,KAAUzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,IAAA,OAAA/B,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAClCwB,EAAY,eAAAwI,OAA+B8E,EAAO,WAAS,cAAAvN,EAAAX,OAAA,SAAAW,EAAAjB,MAAA,wBAAAiB,EAAAV,OAAA,GAAAQ,EAAA,KAEnE,CAwCO,SAASgoB,GAAuBC,EAA0B1hB,GAEhE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAqH,GAAA3P,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAgqB,IAAA,OAAAjqB,EAAAA,EAAAA,KAAAO,MAAA,SAAA2pB,GAAA,cAAAA,EAAAzpB,KAAAypB,EAAAxpB,MAAA,cAAAwpB,EAAAxpB,KAAA,EACLe,EAAY,cAAgBuoB,GAAQ,cAAAE,EAAA5oB,OAAA,SAAA4oB,EAAAlpB,MAAA,wBAAAkpB,EAAA3oB,OAAA,GAAA0oB,EAAA,8BAAAva,EAAArQ,MAAA,KAAAC,UAAA,EADhC,GAEXgJ,UAAW,WAEVyG,GAAoB7G,EAAa,SAAU8hB,GAClC,OAAT1hB,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CAEO,SAASkiB,GAA8BH,EAA0B1hB,GAEvE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+hB,GAAArqB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAkpB,IAAA,OAAAnpB,EAAAA,EAAAA,KAAAO,MAAA,SAAA8oB,GAAA,cAAAA,EAAA5oB,KAAA4oB,EAAA3oB,MAAA,cAAA2oB,EAAA3oB,KAAA,EACLyB,EAAa,cAAAuI,OAA4Bsf,EAAO,oBAAkB,cAAAX,EAAA/nB,OAAA,SAAA+nB,EAAAroB,MAAA,wBAAAqoB,EAAA9nB,OAAA,GAAA4nB,EAAA,8BAAAiB,EAAA/qB,MAAA,KAAAC,UAAA,EAD9D,GAEXgJ,UAAW,SAACtG,GAEX6M,GAAoB3G,EAAa,QAASlG,GACjC,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CC9Ee,SAASoiB,GAAa5iB,GACpC,IAAD6iB,EAAAC,EAAAC,EADwChb,EAAO/H,EAAP+H,QAAS9C,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAEhD0jB,EAAeX,GAActa,GAC7Bkb,EAAWb,KACjBpkB,GAA0BC,EAAAA,EAAAA,UAAmB,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAzCklB,EAAKhlB,EAAA,GAAEilB,EAAQjlB,EAAA,GACtBqH,GAA0CtH,EAAAA,EAAAA,WAAU,GAAEuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA/C6d,EAAa5d,EAAA,GAAE6d,EAAgB7d,EAAA,GAChChF,EDOA,SAAgCuH,EAA0BlH,GAEhE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,EAAOuoB,GAAoB,OAAA/qB,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EAChCyB,EAAa,eAAAuI,OAA+B8E,EAAO,UAAUub,GAAU,cAAAtoB,EAAAnB,OAAA,SAAAmB,EAAAzB,MAAA,wBAAAyB,EAAAlB,OAAA,GAAAiB,EAAA,qBAAA7C,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EADnE,GAEXgJ,UAAW,SAACtG,GAEXkG,EAAYK,aAAa,CAAC,QAAQ,GAADmC,OAAK8E,IAAYxN,GACzC,OAATsG,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CCpBkB+iB,CAAuBxb,EAASzI,GAmBjD,OAjBAhD,EAAAA,EAAAA,YAAU,WAEL0mB,EAAaQ,WAChBL,EAASH,EAAazoB,KAAKoM,KAAI,SAAA9I,GAAC,OAAIA,EAAEvC,EAAE,IAC1C,GAAG,CAAC0nB,EAAaQ,UAAWR,EAAazoB,QAEzC+B,EAAAA,EAAAA,YAAU,WAEL2I,GAAQ+d,EAAaQ,WACxBL,EAASH,EAAazoB,KAAKoM,KAAI,SAAA9I,GAAC,OAAIA,EAAEvC,EAAE,KACrC2J,GACHoe,GAAkB,GACdpe,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,EAAM+d,EAAaQ,UAAWR,EAAazoB,QAG9C0E,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,+IAA2BxF,SAAA,CAChEZ,EAAaumB,GACbvmB,EAAawmB,GACbxmB,EAAa+D,GACbwiB,EAAa3e,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAClCkjB,EAAS5e,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC9BS,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WAEf5C,EAASkB,OAAOwhB,EACjB,EAAE7lB,SAAA,CACA6lB,EAAMvc,KAAI,SAAArL,GACV,IAADmoB,EACO5lB,EAAiB,QAAhB4lB,EAAGR,EAAS1oB,YAAI,IAAAkpB,OAAA,EAAbA,EAAe5Q,MAAK,SAAAhV,GAAC,OAAIA,EAAEvC,IAAMA,CAAE,IAC7C,OAAO2D,EAAAA,EAAAA,MAACuE,GAAS,CAAAnG,SAAA,EAChB4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAQ,OAADQ,QAAC,IAADA,OAAC,EAADA,EAAGpC,QACVwD,EAAAA,EAAAA,MAAA,QAAM/B,MAAO,CAAEwmB,WAAY,MAAOvmB,MAAO,QAASE,SAAA,CAAC,IAAG,OAADQ,QAAC,IAADA,OAAC,EAADA,EAAGtC,MAAM,WAE/D0B,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsBK,QAAS,WAE9D4jB,GAAS,SAAAD,GAAK,OAAIA,EAAMtlB,QAAO,SAAAC,GAAC,OAAIA,GAAKvC,CAAE,GAAC,GAC7C,EAAE+B,SAAC,sFARmB/B,EAUxB,KACA2D,EAAAA,EAAAA,MAAA,UAAQ6O,SAAU,SAAAxK,GAAC,OAAI+f,EAAiBxV,SAASvK,EAAE2K,OAAOxJ,OAAO,EAACpH,SAAA,EACjEJ,EAAAA,EAAAA,KAAA,UAAQwH,MAAM,KAAIpH,SAAC,0FACL,QAD6BwlB,EAC1CI,EAAS1oB,YAAI,IAAAsoB,OAAA,EAAbA,EAAejlB,QAAO,SAAAC,GAAC,OAAKqlB,EAAMnnB,SAAS8B,EAAEvC,GAAG,IAAEqL,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAA,UAAQwH,MAAO5G,EAAEvC,GAAG+B,SAAaQ,EAAEpC,MAAToC,EAAEvC,GAAqB,QAE9G2B,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsByC,SAAsE,IAA/C,QAAbmhB,EAAAG,EAAS1oB,YAAI,IAAAuoB,OAAA,EAAbA,EAAellB,QAAO,SAAAC,GAAC,OAAKqlB,EAAMnnB,SAAS8B,EAAEvC,GAAG,IAAEkC,QAAa+B,QAAS,WAEnI6jB,GAAiB,IAEpBD,GAAS,SAAAD,GAAK,SAAAjgB,QAAAC,EAAAA,EAAAA,GAAQggB,GAAK,CAAEE,GAAgB,IAC7CC,GAAkB,GAEpB,EAAEhmB,SAAC,2FACHJ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsByC,SAAsE,IAA/C,QAAbohB,EAAAE,EAAS1oB,YAAI,IAAAwoB,OAAA,EAAbA,EAAenlB,QAAO,SAAAC,GAAC,OAAKqlB,EAAMnnB,SAAS8B,EAAEvC,GAAG,IAAEkC,QAAc+B,QAAS,WAExI4jB,GAAS,SAAAD,GAAK,IAAAS,EAAA,OAAiB,QAAbA,EAAAV,EAAS1oB,YAAI,IAAAopB,OAAA,EAAbA,EAAehd,KAAI,SAAA9I,GAAC,OAAIA,EAAEvC,EAAE,MAAK4nB,CAAK,GACzD,EAAE7lB,SAAC,+EACHJ,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,4EAI1D,CC3Ee,SAASumB,GAAW5jB,GAClC,IADqCiN,EAAIjN,EAAJiN,KAAMC,EAAOlN,EAAPkN,QAASrK,EAAK7C,EAAL6C,MAEpD7E,GAA4BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjCuhB,EAAMrhB,EAAA,GAAEshB,EAASthB,EAAA,GAQxB,OAPA5B,EAAAA,EAAAA,YAAU,WAEJ2Q,IACLuS,EAAU,IACVnI,GAAAA,UAAiBpK,EAAM,CAAEqK,qBAAsB,IAAKC,MAAO,KAAM,SAACjU,EAAGoQ,GAAG,OAAK8L,EAAU9L,EAAI,IAC5F,GAAG,CAACzG,KAGHhQ,EAAAA,EAAAA,KAAC8H,GAAK,CAACE,OAAQgI,EAAM3N,MAAO,kBAAM4N,EAAQ,GAAG,EAAErK,MAAOA,EAAMxF,UAC3DJ,EAAAA,EAAAA,KAAA,OAAKoE,IAAKke,EAAQhe,IAAK0L,EAAM/P,MAAO,CAAEiT,MAAO,WAGhD,CCKe,SAAS0T,KACvB,IAADvC,EAAA5T,EAAAoW,EACC9lB,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+lB,EAAc7lB,EAAA,GAAE8lB,EAAiB9lB,EAAA,GACxCqH,GAA4CtH,EAAAA,EAAAA,WAAS,GAAMuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAApD0e,EAAcze,EAAA,GAAE0e,EAAiB1e,EAAA,GACxC+G,GAAwCtO,EAAAA,EAAAA,WAAS,GAAMuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAhD4X,EAAY3X,EAAA,GAAE4X,EAAe5X,EAAA,GACpCG,GAAkD1O,EAAAA,EAAAA,WAAS,GAAM2O,GAAAzO,EAAAA,EAAAA,GAAAwO,EAAA,GAA1D0X,EAAiBzX,EAAA,GAAE0X,EAAoB1X,EAAA,GAC9CG,GAAgD9O,EAAAA,EAAAA,WAAU,GAAE+O,GAAA7O,EAAAA,EAAAA,GAAA4O,EAAA,GAArDwX,EAAgBvX,EAAA,GAAEwX,EAAmBxX,EAAA,GAC5CG,GAA0ClP,EAAAA,EAAAA,WAAS,GAAMmP,GAAAjP,EAAAA,EAAAA,GAAAgP,EAAA,GAAlDsX,EAAarX,EAAA,GAAEsX,EAAgBtX,EAAA,GACtCuX,GAAoC1mB,EAAAA,EAAAA,UAAwB,MAAK2mB,GAAAzmB,EAAAA,EAAAA,GAAAwmB,EAAA,GAA1DE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAA4C9mB,EAAAA,EAAAA,UAAS,IAAG+mB,GAAA7mB,EAAAA,EAAAA,GAAA4mB,EAAA,GAAjDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAClCnlB,GAAWC,EAAAA,EAAAA,MAEXiI,GADYod,EAAAA,EAAAA,MACiB,QAC7Bxd,EAAQG,GAASC,GACjB0F,EAAc3C,GAAe/C,GAC7Bmb,GAAQb,GAActa,GACtBqd,GnB2DA,SAAwBrd,GAE9B,OAAO7M,EAAAA,EAAAA,UAAS,CAAC,eAAe,GAAD+H,OAAK8E,KAAUzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAgqB,IAAA,OAAAjqB,EAAAA,EAAAA,KAAAO,MAAA,SAAA2pB,GAAA,cAAAA,EAAAzpB,KAAAypB,EAAAxpB,MAAA,cAAAwpB,EAAAxpB,KAAA,EACzCwB,EAAY,eAAAwI,OAA+B8E,EAAO,mBAAiB,cAAA0a,EAAA5oB,OAAA,SAAA4oB,EAAAlpB,MAAA,wBAAAkpB,EAAA3oB,OAAA,GAAA0oB,EAAA,KAE3E,CmBhEe6C,CAAetd,GACvBud,GAAyBtpB,EAAiB,cAC1CupB,GAAyBvpB,EAAiB,uBAC1CwpB,GAAyBxpB,EAAiB,gBAC1CypB,GAAyBzpB,EAAiB,mBAC1C0pB,GAAyB1pB,EAAiB,sBAC1C2pB,GAA2B3pB,EAAiB,gBAClD4G,GAAmB,QAAV0e,EAAA3Z,EAAMpN,YAAI,IAAA+mB,OAAA,EAAVA,EAAY7lB,OAAQ,uEAE7Ba,EAAAA,EAAAA,YAAU,WAELqL,EAAM7K,iBAAiBxF,GAAYqQ,EAAM7K,MAAMC,QAAQhB,SAAS,cACnE8D,EAAS,aAAc,CAAEhB,SAAS,GACpC,GAAG,CAAC8I,EAAM7K,MAAO+C,IAEjB,IAAMO,GAAW,UACXwlB,IAAaR,GAAM7qB,MAAQ,IAAIsrB,QAAO,SAACC,EAAGjoB,GAK/C,OAHAioB,EAAEC,OAASloB,EAAEkoB,MACbD,EAAEE,SAAWnoB,EAAEmoB,QACfF,EAAEG,YAAcpoB,EAAEooB,WACXH,CACR,GAAG,CACFC,MAAO,EACPC,QAAS,EACTC,WAAY,IAGb,OACChnB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,CACEsK,EAAMtD,YAAapH,EAAAA,EAAAA,KAAC2E,EAAM,CAACxB,SAAUA,GAAS/C,UAACJ,EAAAA,EAAAA,KAAC8C,EAAO,MACvDtD,EAAakL,GAAO,SAAA7K,GAAK,OAAIG,EAAAA,EAAAA,KAAC2E,EAAM,CAACxB,SAAUA,GAAU0B,UAAQ,EAAAzE,SAAEP,GAAe,IAClF6K,EAAMpN,OACN0E,EAAAA,EAAAA,MAAC2C,EAAM,CAACxB,SAAUA,GAAU4B,cAAY,EAACI,IAAI,OAAM/E,SAAA,EAClD4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,CAAI,uEAAcsK,EAAMpN,KAAKkB,SAC7BwD,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO+mB,KAAK7oB,SAAA,EAC3B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgnB,aAAa9oB,SAAA,EACnCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,uEACHmoB,KAA0BvoB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAM6kB,GAAgB,EAAK,EAAC/mB,SAAC,oFAC5FJ,EAAAA,EAAAA,KAACokB,GAAa,CAACtZ,QAASA,EAAS9C,KAAMkf,EAAc7kB,MAAO,kBAAM8kB,GAAgB,EAAM,QAEzFnlB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOinB,WAAW/oB,SAAA,EACjC4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,qDAAWsK,EAAMpN,KAAKkB,SAC3BwD,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,0FAAkBwL,GAAalB,EAAMpN,KAAKqN,gBAIjD3I,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOknB,KAAKhpB,SAAA,EAC3BJ,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAE,YAAA8B,OAAc8E,GAAW7I,UAAU,SAAQ7B,SAAC,4FACpDJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAM2lB,EAAkB,IAAI1R,IAAI,YAADvQ,OAAa8E,GAAWxL,OAAOgE,SAAS+lB,MAAMA,KAAK,EAACjpB,SAAC,6EACxHJ,EAAAA,EAAAA,KAAC2mB,GAAW,CAAC/gB,MAAM,yFAAmBoK,KAAMgY,EAAgB/X,QAASgY,OAGrEI,KAA0BroB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMykB,GAAkB,EAAK,EAAC3mB,SAAC,qFAC9FJ,EAAAA,EAAAA,KAAC8O,GAAgB,CAAChE,QAASA,EAAS9C,KAAM8e,EAAgBzkB,MAAO,kBAAM0kB,GAAkB,EAAM,EAAE7X,SAAU2Y,KAC3G7nB,EAAAA,EAAAA,KAACijB,GAAU,CAAC7U,OAAQwZ,EAAYld,MAAOA,EAAMpN,KAAM+E,MAAO,kBAAMwlB,EAAc,KAAK,KAEnF7nB,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAACC,GAAE,WAAA8B,OAAa8E,EAAO,YAAY7I,UAAU,SAAQ7B,SAAC,qFAE3D4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO+mB,KAAK7oB,SAAA,EAC3B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgnB,aAAa9oB,SAAA,EACnCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,wEACHkoB,KAA0BtoB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAM+kB,GAAqB,EAAK,EAACjnB,SAAC,oFACjGJ,EAAAA,EAAAA,KAACojB,GAAmB,CAACtY,QAASA,EAAS9C,KAAMof,EAAmB/kB,MAAO,kBAAMglB,GAAqB,EAAM,KACxGrnB,EAAAA,EAAAA,KAACqgB,GAAgB,CAACrS,OAAQsZ,EAAkBxc,QAAS8F,SAAS9F,GAAU9C,KAAMsf,GAAoB,EAAGjlB,MAAO,kBAAMklB,GAAqB,EAAE,QAE1IvlB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOinB,WAAW/oB,SAAA,CAChCoQ,EAAYpJ,YAAapH,EAAAA,EAAAA,KAAA,OAAAI,SAAK,qDAC9BZ,EAAagR,GAAa,SAAA3Q,GAAK,OAAIG,EAAAA,EAAAA,KAAA,OAAAI,SAAMP,GAAY,KACtDmC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOsO,YAAYpQ,SAAA,CACjB,QADiBqQ,EACjCD,EAAYlT,YAAI,IAAAmT,OAAA,EAAhBA,EAAkB/G,KAAI,SAAA9I,GAAC,OACvBoB,EAAAA,EAAAA,MAACsnB,EAAAA,SAAQ,CAAAlpB,SAAA,EACR4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,UACCiC,UAAU,2BACVhC,MAAO,CAAEspB,YAAa,QAASrpB,MAAOU,EAAEoW,QAAU,QAAU,IAC5D1U,QAAS,kBAAMilB,EAAoB3mB,EAAEvC,GAAG,EAAC+B,SACzC,iBACDJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOQ,EAAEpC,UAER,SAAAgrB,GAED,IAAKrB,GAAM7qB,KAAM,OAAO0E,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAAEJ,EAAAA,EAAAA,KAAA,WAAWA,EAAAA,EAAAA,KAAA,WAAWA,EAAAA,EAAAA,KAAA,aAChD,IAAM1C,EAAiB,QAAbksB,EAAGrB,GAAM7qB,YAAI,IAAAksB,OAAA,EAAVA,EAAY5T,MAAK,SAAA2C,GAAC,OAAIA,EAAEvK,QAAUpN,EAAEvC,EAAE,IAC7CyqB,GAAY,OAAJxrB,QAAI,IAAJA,OAAI,EAAJA,EAAMwrB,QAAS,EAC7B,OAAO9mB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACN4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,WACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAO0oB,KACP9mB,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAM,KAAGqpB,GAAYX,GAAS,EAAGH,GAAUG,OAAO,YAEnD9mB,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,WACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAW,OAAJ9C,QAAI,IAAJA,OAAI,EAAJA,EAAMyrB,WACb/mB,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAM,KAAGqpB,IAAgB,OAAJnsB,QAAI,IAAJA,OAAI,EAAJA,EAAMyrB,UAAW,EAAGD,GAAO,YAEjD9oB,EAAAA,EAAAA,KAAA,OAAAI,SACEuoB,GAAUK,WAAa,IAAKhnB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,uBACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAW,OAAJ9C,QAAI,IAAJA,OAAI,EAAJA,EAAM0rB,cACbhnB,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAM,KAAGqpB,IAAgB,OAAJnsB,QAAI,IAAJA,OAAI,EAAJA,EAAM0rB,aAAc,EAAGF,GAAO,eAIvD,CAxBE,KATYloB,EAAEvC,GAkCN,IAEX8pB,GAAM7qB,OAAQ0E,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACdJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEypB,WAAY,QAAStpB,UAClCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,sCAEP4B,EAAAA,EAAAA,MAAA,OAAK/B,MAAO,CAAEypB,WAAY,QAAStpB,SAAA,EAClCJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,WACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOuoB,GAAUG,YAElB9mB,EAAAA,EAAAA,MAAA,OAAK/B,MAAO,CAAEypB,WAAY,QAAStpB,SAAA,EAClCJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,WACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOuoB,GAAUI,WACjB/mB,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAM,KAAGqpB,GAAYd,GAAUI,QAASJ,GAAUG,OAAO,YAE1D9oB,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEypB,WAAY,QAAStpB,SACjCuoB,GAAUK,WAAa,IAAKhnB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAU,OAAM7B,SAAC,uBACvBJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOuoB,GAAUK,cACjBhnB,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAM,KAAGqpB,GAAYd,GAAUK,WAAYL,GAAUG,OAAO,mBAK/DX,GAAM/gB,YAAapH,EAAAA,EAAAA,KAAA,OAAAI,SAAK,qDACxBZ,EAAa2oB,IAAO,SAAAtoB,GAAK,OAAIG,EAAAA,EAAAA,KAAA,OAAAI,SAAMP,GAAY,UAGjD2oB,KACAxmB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO+mB,KAAK7oB,SAAA,EAC3B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgnB,aAAa9oB,SAAA,EACnCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,yCACHqoB,KAA0BzoB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMmlB,GAAiB,EAAK,EAACrnB,SAAC,oFAC7FJ,EAAAA,EAAAA,KAAC2lB,GAAa,CAAC7a,QAASA,EAAS9C,KAAMwf,EAAenlB,MAAO,kBAAMolB,GAAiB,EAAM,QAE3FzlB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOinB,WAAW/oB,SAAA,CAChC6lB,GAAM7e,YAAapH,EAAAA,EAAAA,KAAA,OAAAI,SAAK,qDACxBZ,EAAaymB,IAAO,SAAApmB,GAAK,OAAIG,EAAAA,EAAAA,KAAA,OAAAI,SAAMP,GAAY,IACrC,QADsCgnB,EAChDZ,GAAM3oB,YAAI,IAAAupB,OAAA,EAAVA,EAAYnd,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAA,OAAAI,SAAiBQ,EAAEpC,MAAToC,EAAEvC,GAAkB,WAGvD2B,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOiD,OACvBnF,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOynB,MAAMvpB,SAC3BsoB,KAA4B1oB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAM2kB,GAAkB,EAAK,EAAC7mB,SAAC,kDAEjGJ,EAAAA,EAAAA,KAACilB,GAAoB,CAACrf,MAAM,gHAAsBhC,UAAW,kBAAMhB,EAAS,UAAU,EAAEe,WAAYoH,GAAwBT,OAAQQ,EAAS9C,KAAMgf,EAAgB3kB,MAAO,kBAAM4kB,GAAkB,EAAM,SAK7M,CAEA,SAASwC,GAAY7oB,EAAWgpB,GAE/B,OAAW,GAAPA,EAAiB,EACd/c,KAAKC,MAAMlM,EAAIgpB,EAAM,IAC7B,CCxMA,QAAgB,MAAQ,sBAAsB,MAAQ,sBAAsB,WAAa,2BAA2B,OAAS,uBAAuB,UAAY,0BAA0B,UAAY,0BAA0B,OAAS,wBCQ1N,SAASC,KACvB,IAADC,EACCnkB,EAAS,8CACT,IAAMzH,EAAOF,IACP+rB,GzBcC9rB,EAAAA,EAAAA,UAAS,eAAa5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,IAAA,IAAA0sB,EAAA,OAAAzuB,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAETwB,EAA8B,oBAAoB,KAAD,EAA1D,OAANusB,EAAMxsB,EAAAjB,KAAAiB,EAAAX,OAAA,SACLmtB,EAAOrgB,IAAIc,KAAmB,wBAAAjN,EAAAV,OAAA,GAAAQ,EAAA,MyBhBhC2sB,EzBuGA,WAEN,IAAMxmB,GAAcC,EAAAA,EAAAA,kBACpB,OAAOC,EAAAA,EAAAA,aAAY,CAClBC,WAAW,WAAD,IAAA+hB,GAAArqB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA0uB,EAAOnf,GAAwB,OAAAxP,EAAAA,EAAAA,KAAAO,MAAA,SAAAquB,GAAA,cAAAA,EAAAnuB,KAAAmuB,EAAAluB,MAAA,cAAAkuB,EAAAluB,KAAA,EACpCc,EAAU,eAADkJ,OAAgB8E,EAAO,gBAAc,cAAAof,EAAAttB,OAAA,SAAAstB,EAAA5tB,MAAA,wBAAA4tB,EAAArtB,OAAA,GAAAotB,EAAA,qBAAA9uB,GAAA,OAAAuqB,EAAA/qB,MAAA,KAAAC,UAAA,EAD1C,GAEXgJ,UAAW,WAEV+F,GAAgBnG,EAAa,UAC7BmG,GAAgBnG,EAAa,cAC9B,GAEF,CyBnH0B2mB,GAEzB,OACCnoB,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAACI,IAAK,EAAE/E,SAAA,CAC1B2pB,EAAO3iB,YAAapH,EAAAA,EAAAA,KAAA,MAAAI,SAAI,sDACvB2pB,EAAO3iB,WAAa2iB,EAAOK,aAAcpqB,EAAAA,EAAAA,KAAA,MAAAI,SAAI,iEAC9C4pB,EAAiB5iB,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IACtCtD,EAAauqB,GACbvqB,EAAawqB,GACF,QADmBF,EAC9BC,EAAOzsB,YAAI,IAAAwsB,OAAA,EAAXA,EAAapgB,KAAI,SAAA9I,GAAC,OAAIoB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOwI,MAAMtK,SAAA,EACnDJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,WAAW1F,UAAWC,GAAOmoB,UAAWhsB,GAAE,OAAA2H,OAASpF,EAAEvC,OACjE2D,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAO0D,MAAO0kB,QAAO,OAAAtkB,OAASpF,EAAEvC,IAAK+B,SAAA,EACtD4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,QAASE,SAAEQ,EAAEvC,MAClC2B,EAAAA,EAAAA,KAAA,OAAAI,SAAK,OACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMwL,GAAahL,EAAE+J,SACrB3K,EAAAA,EAAAA,KAAA,OAAAI,SAAK,OACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMQ,EAAEpC,WAETwD,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CACEQ,EAAE2pB,UAAWvoB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACbJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,UAAWE,SAAC,aACjCJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,UAENJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOsoB,WAAYvqB,MAAO,CAAEwqB,gBAAiB7pB,EAAE6a,OAAS,QAAU,UAAY7V,MAAM,YACpG5F,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOwoB,gBAGzB1oB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOyoB,UAAUvqB,SAAA,EAChC4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,YACJJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAO0oB,OAAOxqB,SAC5BQ,EAAEgqB,OAAOlhB,KAAI,SAACmhB,EAAGnT,GAAC,OAAK1V,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACvBJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMyqB,EAAEvsB,SACR0B,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,QAASE,SAAEyqB,EAAExsB,MAClC2B,EAAAA,EAAAA,KAAA,OAAAI,SAAK,OACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMyqB,EAAErsB,SAJyBkZ,EAK5B,UAGN9W,EAAEgqB,OAAOhH,MAAK,SAAAhjB,GAAC,IAAAhC,EAAA,OAAIgC,EAAEvC,KAAe,QAAbO,EAAIV,EAAKZ,YAAI,IAAAsB,OAAA,EAATA,EAAWP,GAAE,MACzC2B,EAAAA,EAAAA,KAAA,UACCiC,UAAU,mCACVhC,MAAO,CAAE6qB,UAAW,OACpBxoB,QAAS,kBAAM0nB,EAAiBvlB,OAAO7D,EAAEvC,GAAG,EAAC+B,SAC7C,oBApCsDQ,EAAEvC,GAuCtD,MAIT,CC3De,SAAS0sB,GAAehoB,GACtC,IADyCiF,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAEzCkiB,GAAYzd,EAAAA,EAAAA,QAAyB,MACrC0d,GAAW1d,EAAAA,EAAAA,QAAyB,MACpCvD,E1BiDA,SAA6BK,GAEnC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACpB,OAAOC,EAAAA,EAAAA,aAAY,CAClBC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAgqB,EAAOb,GAAuB,IAAAha,EAAA,OAAApP,EAAAA,EAAAA,KAAAO,MAAA,SAAA2pB,GAAA,cAAAA,EAAAzpB,KAAAypB,EAAAxpB,MAAA,cAAAwpB,EAAAxpB,KAAA,EAErByB,EAA6B,cAAeinB,GAAW,KAAD,EAA/D,OAALha,EAAK8a,EAAAlpB,KAAAkpB,EAAA5oB,OAAA,SACJ4N,GAAmBE,IAAM,wBAAA8a,EAAA3oB,OAAA,GAAA0oB,EAAA,KAChC,gBAAAtqB,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EAJU,GAKXgJ,UAAW,SAACtG,GAEXkG,EAAYK,aAAa,CAAC,QAAQ,GAADmC,OAAK1I,EAAKe,KAAOf,GAClDwM,GAAiBtG,EAAa,SAAUlG,GAC/B,OAATsG,QAAS,IAATA,GAAAA,GACD,GAEF,C0BjEkBonB,CAAoB3oB,GAkBrC,OAhBAhD,EAAAA,EAAAA,YAAU,YAEJ2I,GAAQuc,EAAUhd,SAAWid,EAASjd,UAE1Cgd,EAAUhd,QAAQC,MAAQ,GAC1Bgd,EAASjd,QAAQC,MAAQ,GAE3B,GAAG,CAACQ,EAAMuc,EAAWC,KAErBnlB,EAAAA,EAAAA,YAAU,WAEJ2I,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,KAGHhG,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,4HAAuBxF,SAAA,CAC5DZ,EAAa+D,IACdvB,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAAD0e,EAAAC,EACOlf,EAAyB,QAApBif,EAAGN,EAAUhd,eAAO,IAAAsd,OAAA,EAAjBA,EAAmBrd,MAC3BmD,EAAuB,QAAnBma,EAAGN,EAASjd,eAAO,IAAAud,OAAA,EAAhBA,EAAkBtd,MAC3B5B,GAAS+E,GACZpH,EAASkB,OAAO,CAAEkG,KAAMA,EAAMnM,KAAMoH,GACtC,EAAExF,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,mDAAUrG,UAC1BJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK6c,EAAW5c,KAAK,OAAOC,UAAQ,OAE5C5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,2BAAMrG,UACtBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK8c,EAAU7c,KAAK,iBAAiBC,UAAQ,OAErD5H,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,kDAEtDmD,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,MAGlC,CCvCe,SAASmoB,KACvB,IAADnB,EAAAoB,EACCvlB,EAAS,sEACT,IAAA5E,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+lB,EAAc7lB,EAAA,GAAE8lB,EAAiB9lB,EAAA,GAClC8oB,E3BHA,WAEN,IAAMvmB,GAAcC,EAAAA,EAAAA,kBACpB,OAAOxF,EAAAA,EAAAA,UAAS,UAAQ5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAuuB,EAAA,OAAAzuB,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEJwB,EAA8B,eAAe,KAAD,EAArD,OAANusB,EAAMjuB,EAAAQ,KAAAR,EAAAc,OAAA,SACLmtB,EAAOrgB,IAAIc,KAAmB,wBAAA1O,EAAAe,OAAA,GAAArB,EAAA,KACnC,CACFoI,UAAW,SAAAtG,GAAI,OACdA,EAAKwQ,SAAQ,SAAAlN,GAAC,OAAI4C,EAAYK,aAAa,CAAC,QAAQ,GAADmC,OAAKpF,EAAEvC,KAAOuC,EAAE,GAAC,GAEvE,C2BRgBuqB,GAEf,OACCnpB,EAAAA,EAAAA,MAAC2C,EAAM,CAACxB,SAAS,IAAI4B,cAAY,EAACI,IAAI,OAAM/E,SAAA,EAC3CJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,uEACH2pB,EAAO3iB,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC5BtD,EAAauqB,GACF,QADSD,EACpBC,EAAOzsB,YAAI,IAAAwsB,GAA0C,QAA1CoB,EAAXpB,EAAasB,MAAK,SAACC,EAAGC,GAAC,OAAKD,EAAE1gB,KAAO2gB,EAAE3gB,KAAO,GAAK,CAAC,WAAC,IAAAugB,OAA1C,EAAXA,EAAuDxhB,KAAI,SAAArD,GAAC,OAC5DrE,EAAAA,EAAAA,MAACiC,EAAAA,GAAI,CACJC,GAAE,WAAA8B,OAAaK,EAAEhI,IACjB4D,UAAU,oCAAmC7B,SAAA,EAG7CJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOiG,EAAE7H,QACTwB,EAAAA,EAAAA,KAAA,QAAAI,SAAOwL,GAAavF,EAAEsE,UAHjBtE,EAAEhI,GAID,IAEPU,EAAiB,eACjBiD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAe7B,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,YACAA,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMykB,GAAkB,EAAK,EAAC3mB,SAAC,yDAGrEJ,EAAAA,EAAAA,KAAC+qB,GAAe,CAAC/iB,KAAM8e,EAAgBzkB,MAAO,kBAAM0kB,GAAkB,EAAM,MAG/E,CClCe,SAASwE,GAAcxoB,GACrC,IADwCiF,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAExCmpB,GAAW1kB,EAAAA,EAAAA,QAAyB,MACpC2kB,GAAW3kB,EAAAA,EAAAA,QAAyB,MACpCvD,EjBCA,SAA4BK,GAElC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,EAAOquB,GAAqB,IAAAC,EAAA,OAAArwB,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,OAKH,OAH9B2vB,EAAW,IAAIC,UACZzH,IAAI,OAAQuH,EAASltB,MAC9BmtB,EAASxH,IAAI,OAAQuH,EAAS/jB,MAC9BgkB,EAASxH,IAAI,OAAQuH,EAASpa,MAAM/T,EAAAvB,KAAA,EAEvB0B,EAAoB,aAAciuB,GAAU,KAAD,SAAApuB,EAAAX,OAAA,SAAAW,EAAAjB,MAAA,wBAAAiB,EAAAV,OAAA,GAAAQ,EAAA,KACxD,gBAAApC,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EARU,GASXgJ,UAAW,SAACtG,GAEXwM,GAAiBtG,EAAa,QAASlG,GAC9B,OAATsG,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CiBrBkBsoB,CAAmBxpB,GAkBpC,OAhBAhD,EAAAA,EAAAA,YAAU,YAEJ2I,GAAQwjB,EAASjkB,SAAWkkB,EAASlkB,UAEzCikB,EAASjkB,QAAQC,MAAQ,GACzBikB,EAASlkB,QAAQC,MAAQ,GAE3B,GAAG,CAACQ,EAAMwjB,EAAUC,KAEpBpsB,EAAAA,EAAAA,YAAU,WAEJ2I,GACJzE,EAASoN,OAEX,GAAG,CAAC3I,KAGHhG,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,oGAAmBxF,SAAA,CACxDZ,EAAa+D,OAAUpH,GAAW,SAAA2vB,GAAE,OAAIA,EAAGhtB,SAAS,iBAAmB,8MAA2CgtB,CAAE,KACrH9pB,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAAD4lB,EAAAC,EAAAC,EACOztB,EAAuB,QAAnButB,EAAGP,EAASjkB,eAAO,IAAAwkB,OAAA,EAAhBA,EAAkBvkB,MACzB8J,EAAuB,QAAnB0a,EAAGP,EAASlkB,eAAO,IAAAykB,GAAO,QAAPC,EAAhBD,EAAkBtK,aAAK,IAAAuK,OAAP,EAAhBA,EAA0B,GACnCztB,GAAQ8S,GACX/N,EAASkB,OAAO,CAAE6M,KAAAA,EAAM9S,KAAAA,EAAMmJ,KAAM2J,EAAK9S,KAAKub,MAAM,KAAKtX,IAAI,IAAM,IACrE,EAAErC,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,2BAAMrG,UACtBJ,EAAAA,EAAAA,KAAA,SACC0H,IAAK+jB,EACL9jB,KAAK,OACLia,OAAO,yBACPha,UAAQ,EACRiJ,SAAU,WACT,IAADqb,EAAAC,EACO3tB,EAAOgtB,EAASjkB,QAChB+J,EAAOma,EAASlkB,QACtB,GAAK/I,GAAS8S,EAAd,CACA,IACM8a,IADqB,QAAVF,EAAA5a,EAAKoQ,aAAK,IAAAwK,GAAK,QAALC,EAAVD,EAAa,UAAE,IAAAC,OAAL,EAAVA,EAAiB3tB,OAAQ,IACjBub,MAAM,KACzBsS,EAA6B,GAAlBD,EAAQ7rB,OAAc6rB,EAAUA,EAAQ1pB,MAAM,GAAI,GACnElE,EAAKgJ,MAAQ6kB,EAASxrB,KAAK,IAJD,CAK3B,OAGFb,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,mDAAUrG,UAC1BJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK8jB,EAAU7jB,KAAK,OAAOC,UAAQ,OAE3C5H,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,kDAEtDmD,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,MAGlC,CCtDe,SAASwpB,KACvB,IAADC,EACC5mB,EAAS,wCACT,IAAA5E,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApDyrB,EAAcvrB,EAAA,GAAEwrB,EAAiBxrB,EAAA,GACxCqH,GAAsCtH,EAAAA,EAAAA,UAAS,6GAAuBuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA/DokB,EAAWnkB,EAAA,GAAEokB,EAAcpkB,EAAA,GAC5BmL,EAAQ0M,KAEd,OACCpe,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAACI,IAAK,GAAG/E,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,yCACHsT,EAAMtM,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3BtD,EAAakU,IAEd1T,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOH,MAAOklB,EAAa1M,QAAS,SAAA3Z,GAAC,OAAIsmB,EAAgBtmB,EAAE2K,OAA4BxJ,MAAM,IAE9F,QAFkG+kB,EAE5G7Y,EAAMpW,YAAI,IAAAivB,OAAA,EAAVA,EAAY7iB,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAC4sB,GAAW,CAAYjV,KAAM/W,EAAGgI,KAAM8jB,GAArB9rB,EAAEvC,GAAkC,IAE3EU,EAAiB,cACjBiD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAe7B,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,YACAA,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMmqB,GAAkB,EAAK,EAACrsB,SAAC,yDAGrEJ,EAAAA,EAAAA,KAACurB,GAAc,CAACvjB,KAAMwkB,EAAgBnqB,MAAO,kBAAMoqB,GAAkB,EAAM,MAG9E,CAEA,SAASG,GAAW7pB,GACnB,IADsB4U,EAAI5U,EAAJ4U,KAAM/O,EAAI7F,EAAJ6F,KAEtByjB,ErBtCQ,SAAiB1U,GAE/B,IAAM0U,EAAQ,GAAArmB,OAAM2R,EAAKtZ,GAAE,KAAA2H,OAAI2R,EAAKnZ,MAUpC,OATAa,EAAAA,EAAAA,YAAU,WAET,IAAMwtB,EAAS5a,GAAYoa,EAAU1U,EAAKtZ,GAAIsZ,EAAKhQ,MAEnD,OADAnG,SAASkS,MAAMyE,IAAI0U,GACZ,WAENrrB,SAASkS,MAAMkE,OAAOiV,EACvB,CACD,GAAG,IACG,IAAN7mB,OAAWqmB,EAAQ,IACpB,CqByBkBS,CAAQnV,GACzB,OAAO3V,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAgBhC,MAAO,CAAE8sB,WAAYV,EAAUlb,SAAU,SAAUhM,IAAK,SAAU6nB,SAAU,QAAS5sB,SAAA,EAC1HJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOuX,EAAKnZ,QACZwB,EAAAA,EAAAA,KAAA,QAAAI,SAAOwI,MAET,CCjCO,SAASqkB,GAAiBC,GAEhC,IAAM1kB,EAAM0kB,EAEZ,OADA1kB,EAAImC,KAAO,IAAIC,KAAKsiB,EAAYviB,MACzBnC,CACR,CCjBA,QAAgB,MAAQ,sBAAsB,YAAc,4BAA4B,QAAU,yBCMnF,SAAS2kB,KACvB,IAADC,EACCznB,EAAS,OACT,IAAM6C,GFJCvK,EAAAA,EAAAA,UAAS,OAAK5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAgN,EAAA,OAAAlN,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEJwB,EAAgC,kBAAkB,KAAD,EAA1D,OAAHgL,EAAG1M,EAAAQ,KAAAR,EAAAc,OAAA,SACF4L,EAAIkB,IAAIujB,KAAiB,wBAAAnxB,EAAAe,OAAA,GAAArB,EAAA,MEGjC,OAAOwG,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAAA3E,SAAA,CACzBoI,EAAI4hB,aAAcpqB,EAAAA,EAAAA,KAAA,MAAAI,SAAI,qDACtBZ,EAAagJ,IACZA,EAAI4hB,aAAcpqB,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,sBAAsBK,QAAS,kBAAMkG,EAAI6kB,SAAS,EAACjtB,SAAC,YAC1F4B,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAOorB,MAAMltB,SAAA,EAC9BJ,EAAAA,EAAAA,KAAA,SAAAI,UACC4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiiB,SAAU,SAAU9hB,SAAC,UAClCJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiiB,SAAU,OAAQ9hB,SAAC,YAChCJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiiB,SAAU,SAAU9hB,SAAC,eAClCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,cACJJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiT,MAAO,QAAS9S,SAAC,kBAGhCJ,EAAAA,EAAAA,KAAA,SAAAI,SACU,QADVgtB,EACE5kB,EAAIlL,YAAI,IAAA8vB,OAAA,EAARA,EAAU1jB,KAAI,SAAAK,GAAI,OAAI/H,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACtBJ,EAAAA,EAAAA,KAAA,MAAAI,SAAKkM,GAAiBvC,EAAKY,MAAM,GAAM,MACvC3K,EAAAA,EAAAA,KAAA,MAAAI,SAAKmtB,GAAexjB,EAAKyjB,eACzBxrB,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,CAAK2J,EAAK0jB,UAAU,IAAE1jB,EAAK2jB,SAAS,QACpC1rB,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,CAAK2J,EAAK4jB,SAAS,KAAG5jB,EAAK6jB,OAAO,QAClC5tB,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO2rB,YAAYztB,UACjC4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOqhB,QAAQnjB,SAAA,EAC9BJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,WAAW1F,UAAWC,GAAOmoB,UAAWhsB,GAAE,OAAA2H,OAAS+D,EAAK1L,OACpE2B,EAAAA,EAAAA,KAAA,OAAAI,SACE2J,EAAKwZ,QAAQ7Z,KAAI,SAAA9I,GAAC,OAAIoB,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAiBQ,EAAE,GAAG,KAAGxE,KAAKC,UAAUuE,EAAE,IAAI,IAAE,KAAK,IAAExE,KAAKC,UAAUuE,EAAE,MAA9DA,EAAE,GAAsE,MAEzGmJ,EAAKwZ,QAAQhjB,OAAS,IACtBP,EAAAA,EAAAA,KAAA,SAAOiC,UAAU,sBAAsBqoB,QAAO,OAAAtkB,OAAS+D,EAAK1L,IAAK+B,SAAE2J,EAAKwZ,QAAQhjB,gBAZpDwJ,EAAK1L,GAgBhC,WAIT,CAEA,SAASkvB,GAAe1J,GAQvB,OAAO7jB,EAAAA,EAAAA,KAAA,QAAMC,MAAO,CAAEC,MANqC,CAC1D4tB,MAAO,UACPvD,QAAS,UACTwD,QAAS,UACTC,SAAU,WAEyBnK,IAAUzjB,SAAEyjB,GACjD,CCzDA,QAAgB,KAAO,qBAAqB,MAAQ,sBAAsB,QAAU,yBCkC7E,SAASoK,GAAyBC,EAA4BtqB,GAEpE,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,IAAA,OAAAxC,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EACLe,EAAY,iBAAmBmxB,GAAU,cAAAnwB,EAAAnB,OAAA,SAAAmB,EAAAzB,MAAA,wBAAAyB,EAAAlB,OAAA,GAAAiB,EAAA,8BAAA4Q,EAAA/T,MAAA,KAAAC,UAAA,EADrC,GAEXgJ,UAAW,WAEVyG,GAAoB7G,EAAa,WAAY0qB,GACpC,OAATtqB,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CCxCe,SAAS4qB,GAAiBprB,GACxC,IAD2CiF,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAEjDtB,GAAoCC,EAAAA,EAAAA,UAA6B,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/DqtB,EAAUntB,EAAA,GAAEotB,EAAaptB,EAAA,GAC1BuqB,GAAW1kB,EAAAA,EAAAA,QAAyB,MACpCD,GAAYC,EAAAA,EAAAA,QAAyB,MACrCvD,EDAA,SAA+BK,GAErC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,EAAOixB,GAA8B,OAAAhzB,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAC1CyB,EAA2B,gBAAiB6wB,GAAe,cAAA/wB,EAAAX,OAAA,SAAAW,EAAAjB,MAAA,wBAAAiB,EAAAV,OAAA,GAAAQ,EAAA,qBAAApC,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EADvD,GAEXgJ,UAAW,SAACtG,GAEXwM,GAAiBtG,EAAa,WAAYlG,GACjC,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CCbkBgrB,EAAsB,SAAAC,GAEtCH,EAAcG,GACT,OAALnsB,QAAK,IAALA,GAAAA,GACD,IAaA,OAXAhD,EAAAA,EAAAA,YAAU,YAEJ2I,GAAQwjB,EAASjkB,SAAWV,EAAUU,UAE1ChE,EAASoN,QACT6a,EAASjkB,QAAQC,MAAQ,GACzBX,EAAUU,QAAQC,MAAQ,GAG5B,GAAG,CAACQ,EAAMwjB,EAAU3kB,KAEb7E,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACN4B,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,wIAAyBxF,SAAA,CAC9DZ,EAAa+D,IACdvB,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAAD4lB,EAAA1kB,EACO7I,EAAuB,QAAnButB,EAAGP,EAASjkB,eAAO,IAAAwkB,OAAA,EAAhBA,EAAkBvkB,MACzBlJ,EAAyB,QAApB+I,EAAGR,EAAUU,eAAO,IAAAF,OAAA,EAAjBA,EAAmBG,MAC7BhJ,GAAQF,GACXiF,EAASkB,OAAO,CAAEjG,KAAAA,EAAMF,MAAAA,GAC1B,EAAE8B,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,qBAAKrG,UACrBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK8jB,EAAU7jB,KAAK,OAAOC,UAAQ,OAE3C5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,iCAAOrG,UACvBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAKb,EAAW4nB,YAAY,oGAAyB9mB,KAAK,OAAOC,UAAQ,EAC/EoY,QAAS,SAAA3Z,GAEJQ,EAAUU,UACbV,EAAUU,QAAQC,MAAQX,EAAUU,QAAQC,MAAMknB,WAAW,aAAc,IAC7E,OAGF1uB,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,wDAEtDmD,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,QAEhCd,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,OAAQomB,EAAY/rB,MAAO,kBAAMgsB,EAAc,KAAK,EAAEzoB,MAAM,gHAAqBxF,SAAA,EACvF4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,mCAAkB,OAAVguB,QAAU,IAAVA,OAAU,EAAVA,EAAY9vB,UACzB0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,yCAAmB,OAAVguB,QAAU,IAAVA,OAAU,EAAVA,EAAY3mB,aAC1BzH,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAE4iB,UAAW,GAAIziB,SAAC,qLAGhC,CChDe,SAASuuB,KACvB,IAADC,EAAAC,EACClpB,EAAS,4EACT,IAAA5E,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+lB,EAAc7lB,EAAA,GAAE8lB,EAAiB9lB,EAAA,GACxCqH,GAA8CtH,EAAAA,EAAAA,WAAU,GAAEuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAnDwmB,EAAevmB,EAAA,GAAEwmB,EAAkBxmB,EAAA,GACpCrK,EAAOF,IACPgxB,GFZC/wB,EAAAA,EAAAA,UAAS,YAAU5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACrBwB,EAA4B,iBAAgB,cAAA1B,EAAAc,OAAA,SAAAd,EAAAQ,MAAA,wBAAAR,EAAAe,OAAA,GAAArB,EAAA,MEanD,OACCwG,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAACI,IAAK,EAAE/E,SAAA,EAC3BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6EACH4uB,EAAS5nB,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC9BtD,EAAawvB,GACY,IAAZ,QAAbJ,EAAAI,EAAS1xB,YAAI,IAAAsxB,OAAA,EAAbA,EAAeruB,UAAeP,EAAAA,EAAAA,KAAA,MAAAI,SAAI,gJACrB,QADkDyuB,EAC/DG,EAAS1xB,YAAI,IAAAuxB,OAAA,EAAbA,EAAenlB,KAAI,SAAA9I,GAAC,IAAAhC,EAAAC,EAAA,OAAImD,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOhE,KAAO,iBAAiBkC,SAAA,EACvE4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOQ,EAAEpC,QACTwB,EAAAA,EAAAA,KAAA,QAAMiC,UAAWC,GAAO5D,MAAM8B,SAAEQ,EAAEtC,YAEnC0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOQ,EAAErC,MAAMsC,KAAK,QACnBD,EAAEvC,KAAe,QAAbO,EAAIV,EAAKZ,YAAI,IAAAsB,OAAA,EAATA,EAAWP,MACnB2B,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,oCAAoCK,QAAS,kBAAMysB,EAAmBnuB,EAAEvC,GAAG,EAAC+B,SAAC,+CAE/FQ,EAAEvC,KAAe,QAAbQ,EAAIX,EAAKZ,YAAI,IAAAuB,OAAA,EAATA,EAAWR,MACnB2B,EAAAA,EAAAA,KAAA,QAAMiC,UAAWC,GAAO+sB,QAAQ7uB,SAAC,sBAX0CQ,EAAEvC,GAc1E,IACLU,EAAiB,iBACjBiD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAe7B,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,YACAA,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMykB,GAAkB,EAAK,EAAC3mB,SAAC,yDAGrEJ,EAAAA,EAAAA,KAACmuB,GAAiB,CAACnmB,KAAM8e,EAAgBzkB,MAAO,kBAAM0kB,GAAkB,EAAM,KAC9E/mB,EAAAA,EAAAA,KAACilB,GAAoB,CAAC3a,OAAQwkB,EAAiBlpB,MAAM,4HAAwBjC,WAAYsqB,GAA0BjmB,KAAM8mB,GAAmB,EAAGzsB,MAAO,kBAAM0sB,GAAoB,EAAE,MAGrL,CCpDA,QAAgB,KAAO,qBAAqB,MAAQ,sBAAsB,OAAS,uBAAuB,KAAO,sBCClG,SAASG,GAAgB7wB,EAAYsM,GAEnD,MAAM,GAAN3E,OAAUmF,GAAO9M,EAAI,GAAE,KAAA2H,OAAI2E,EAAKkB,cAAcsjB,WAAW1sB,IAAI,IAAEuD,OAAGmF,GAAOR,EAAKmB,WAAa,EAAG,IAAE9F,OAAGmF,GAAOR,EAAKoB,UAAW,GAAE,IAC7H,CCKe,SAASqjB,KACvB,IAAD/K,EAEOvZ,GADYod,EAAAA,EAAAA,MACiB,QAC7Bxd,EAAQG,GAASC,GACjB0D,EAAUD,GAAWzD,GAC3BnF,EAAS,CAAW,QAAX0e,EAAC3Z,EAAMpN,YAAI,IAAA+mB,OAAA,EAAVA,EAAY7lB,KAAM,yCAE5B,IAAA6wB,GAAiCC,EAAAA,EAAAA,UAAQ,WAExC,IAAK9gB,EAAQlR,OAASoN,EAAMpN,KAAM,MAAO,EAAC,EAAO,IACjD,IAAMiyB,EAAWL,GAAgBxkB,EAAMpN,KAAKe,GAAIqM,EAAMpN,KAAKqN,MAC3D,MAAO,CAAC6D,EAAQlR,KAAKkyB,OAAM,SAAA5uB,GAAC,OAAIA,EAAEoP,KAAKyf,WAAWF,EAAS,IAAGA,EAC/D,GAAG,CAAC/gB,EAAQlR,KAAMoN,EAAMpN,OAAMoyB,GAAAxuB,EAAAA,EAAAA,GAAAmuB,EAAA,GALvBM,EAAcD,EAAA,GAAEE,EAAMF,EAAA,GAgB7B,OATArwB,EAAAA,EAAAA,YAAU,WAET,GAAIqL,EAAM6b,WAAa/X,EAAQ+X,UAC/B,CACC,IAAM9D,EAAU5Z,YAAW,kBAAMvJ,OAAOuwB,OAAO,GAAE,KACjD,OAAO,kBAAMlN,aAAaF,EAAS,CACpC,CACD,GAAG,CAAC/X,EAAM6b,UAAW/X,EAAQ+X,aAG5BvkB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACGsK,EAAMtD,WAAaoH,EAAQpH,aAAcpH,EAAAA,EAAAA,KAAC8C,EAAO,IAClDtD,EAAakL,GACblL,EAAagP,GACb9D,EAAM6b,WAAa/X,EAAQ+X,YAC3BvmB,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOC,KAAK/B,UAC3B4B,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAOorB,MAAMltB,SAAA,EAC9B4B,EAAAA,EAAAA,MAAA,SAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,UACC4B,EAAAA,EAAAA,MAAA,MAAI8tB,QAAS,EAAE1vB,SAAA,EACdJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOsK,EAAMpN,KAAKkB,OACjBmxB,IAAkB3vB,EAAAA,EAAAA,KAAA,QAAMC,MAAO,CAAEwmB,WAAY,QAASrmB,SAAC,MACvDuvB,IAAkB3tB,EAAAA,EAAAA,MAAA,QAAM/B,MAAO,CAAEwmB,WAAY,QAASrmB,SAAA,CAAC,kJAA6BwvB,WAGvF5tB,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,wBACJJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,kEACJJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6DACJJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,sDACJ4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EAAIJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,0CAAYJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,6CAG5BJ,EAAAA,EAAAA,KAAA,SAAAI,SACEoO,EAAQlR,KACPoM,KAAI,SAAA9I,GAAC,OAAI+uB,GAAcI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAChBnvB,GAAC,IAAEoP,KAAMpP,EAAEoP,KAAKtN,MAAMktB,EAAOrvB,QAASyvB,MAAOpvB,EAAEoP,KAAKtN,MAAM9B,EAAEoP,KAAKigB,YAAY,SAAKF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAClFnvB,GAAC,IAAEovB,MAAOpvB,EAAEoP,MAAM,IACzBob,MAAK,SAACC,EAAGC,GAAC,OAAKD,EAAE2E,MAAQ1E,EAAE0E,MAAQ,GAAK,CAAC,IACzCtmB,KAAI,SAAA9I,GAAC,OAAIoB,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACTJ,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAEoP,QACPhQ,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAEwO,cACPpP,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAE+G,KAAK8nB,WAAW,0CAAc7uB,EAAE+G,KAAKjF,MAAM,GAAK9B,EAAE+G,QACzD3H,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAEgP,aACP5P,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO0gB,OAAOxiB,UAACJ,EAAAA,EAAAA,KAAA,QAAMiC,UAAWC,GAAO3G,KAAK6E,SAAEQ,EAAEmoB,SAAW,eALxDnoB,EAAEvC,GAMhB,aAQb,CC7EA,QAAgB,KAAO,qBAAqB,MAAQ,sBAAsB,SAAW,0BCMtE,SAAS6xB,GAAkBntB,GACzC,IAD4CiF,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAElDtB,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BlB,EAAKoB,EAAA,GAAE2F,EAAQ3F,EAAA,GAChBkvB,GAAcrpB,EAAAA,EAAAA,QAAyB,MACvCspB,GAAetpB,EAAAA,EAAAA,QAAyB,MACxCvD,EvEsBA,SAAmCK,GAEzC,IAAML,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,EAAOR,GAAwB,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EACpCc,EAAU,4BAA6BQ,GAAK,cAAAS,EAAAnB,OAAA,SAAAmB,EAAAzB,MAAA,wBAAAyB,EAAAlB,OAAA,GAAAiB,EAAA,qBAAA7C,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EADxC,GAEXgJ,UAAWA,IAEZ,OAAOL,CACR,CuE9BkB8sB,CAA0BhuB,GAc3C,OAZAhD,EAAAA,EAAAA,YAAU,YAEJ2I,GAAQmoB,EAAY5oB,SAAW6oB,EAAa7oB,UAEhDhE,EAASoN,QACT/J,EAAS,IACTupB,EAAY5oB,QAAQC,MAAQ,GAC5B4oB,EAAa7oB,QAAQC,MAAQ,GAG/B,GAAG,CAACQ,EAAMmoB,EAAaC,KAGtBpuB,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,8FAAkBxF,SAAA,CACvDZ,EAAa+D,GACbA,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAADmqB,EAAAC,EACO9oB,EAA8B,QAAtB6oB,EAAGH,EAAY5oB,eAAO,IAAA+oB,OAAA,EAAnBA,EAAqB9oB,MAChCgpB,EAAgC,QAAvBD,EAAGH,EAAa7oB,eAAO,IAAAgpB,OAAA,EAApBA,EAAsB/oB,MAExC,OAAKC,GAAYA,EAASlH,QAAU,EAAUqG,EAAS,yFACnDa,GAAY+oB,EAAkB5pB,EAAS,iHAE3CrD,EAASkB,OAAO,CAAEgD,SAAAA,GACnB,EAAErH,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,sEAAcrG,UAC9BJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAKyoB,EAAaxoB,KAAK,WAAWC,UAAQ,OAElD5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,wCAASrG,UACzBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK0oB,EAAczoB,KAAK,WAAWC,UAAQ,MAEzC,IAAT/H,IAAeG,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEC,MAAO,UAAWE,SAAEP,KACjDG,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,4EAI1D,CC3Ce,SAASqwB,KACvB,IAAD7xB,EAAAI,EAAAC,EACOf,EAAOF,IACP0yB,GAAU5pB,EAAAA,EAAAA,QAAyB,MACzC/F,GAA8CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtD4vB,EAAe1vB,EAAA,GAAE2vB,EAAkB3vB,EAAA,GAC1CqH,GAA8CtH,EAAAA,EAAAA,WAAS,GAAMuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAtDuoB,EAAetoB,EAAA,GAAEuoB,EAAkBvoB,EAAA,GACpCwoB,ExEmCA,SAA+BntB,GAErC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAoT,EAAOrR,GAAoB,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAgT,GAAA,cAAAA,EAAA9S,KAAA8S,EAAA7S,MAAA,cAAA6S,EAAA7S,KAAA,EAChCc,EAAU,wBAAyBQ,GAAK,cAAAuR,EAAAjS,OAAA,SAAAiS,EAAAvS,MAAA,wBAAAuS,EAAAhS,OAAA,GAAA8R,EAAA,qBAAAzT,GAAA,OAAAwT,EAAA/T,MAAA,KAAAC,UAAA,EADpC,GAEXgJ,UAAW,SAACE,EAAGxG,GACd,IAAD0M,EACkD,YAAZ,QAAjCA,EAAAxG,EAAYyG,cAAc,eAAO,IAAAD,OAAA,EAAjCA,EAAmC7L,SACtCqF,EAAYK,aAAa,QAAQ,SAAC3F,GAAW,OAAA6xB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAW7xB,GAAI,IAAGM,KAAMlB,EAAKkB,MAAI,IACtE,OAAToF,QAAS,IAATA,GAAAA,GACD,IAED,OAAOL,CACR,CwEjDsBytB,GAErB,OACChvB,EAAAA,EAAAA,MAAC2C,EAAM,CAACE,UAAQ,EAACM,IAAI,OAAM/E,SAAA,EAC1B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOC,KAAK/B,SAAA,CAC1BZ,EAAauxB,GACbA,EAAa3pB,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KACnCd,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,wBACJJ,EAAAA,EAAAA,KAAA,OAAAI,UACCJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOD,IAAKgpB,EAAS3L,aAAuB,QAAXnmB,EAAEV,EAAKZ,YAAI,IAAAsB,OAAA,EAATA,EAAWJ,KAAMkG,UAAWisB,EAAiB1uB,UAAWC,GAAOxG,WAE/GsG,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACGuwB,IAAmB3wB,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,kBAAMsuB,GAAmB,EAAK,EAAE3uB,UAAU,sBAAqB7B,SAAC,qDACrGuwB,IAAmB3wB,EAAAA,EAAAA,KAAA,UAAQsC,QAAS,WACpC,IAADzD,EACC+xB,GAAmB,GACfF,EAAQnpB,UACXmpB,EAAQnpB,QAAQC,OAAiB,QAAT3I,EAAAX,EAAKZ,YAAI,IAAAuB,OAAA,EAATA,EAAWL,OAAQ,GAC7C,EACCyD,UAAU,sBAAqB7B,SAC/B,yCAGAuwB,IAAmB3wB,EAAAA,EAAAA,KAAA,UACnBsC,QAAS,WAERsuB,GAAmB,GACfF,EAAQnpB,SACXwpB,EAAatsB,OAAO,CAAEjG,KAAMkyB,EAAQnpB,QAAQC,OAC9C,EACAvF,UAAU,sBAAqB7B,SAC/B,kEAKH4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,mCACM,QADIpB,EACbd,EAAKZ,YAAI,IAAA0B,OAAA,EAATA,EAAWV,UAEb0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6BACM,QADGnB,EACZf,EAAKZ,YAAI,IAAA2B,OAAA,EAATA,EAAWV,MAAMmL,KAAI,SAAC9I,EAAG8W,GAAC,OAAK1X,EAAAA,EAAAA,KAAA,OAAAI,SAAcQ,GAAJ8W,EAAY,QAEvD1X,EAAAA,EAAAA,KAAA,OAAAI,UACCJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMwuB,GAAmB,EAAK,EAAC1wB,SAAC,0FAGtEJ,EAAAA,EAAAA,KAACkwB,GAAkB,CAACloB,KAAM6oB,EAAiBxuB,MAAO,kBAAMyuB,GAAmB,EAAM,MAGpF,CCjEA,QAAgB,QAAU,wBAAwB,YAAc,4BAA4B,aAAe,6BAA6B,gBAAkB,gCAAgC,aAAe,6BAA6B,WAAa,2BAA2B,IAAM,oBAAoB,QAAU,wBAAwB,YAAc,4BAA4B,MAAQ,sBAAsB,eAAiB,+BAA+B,uBAAyB,wCCA3d,IAAgB,KAAO,sB,WCKR,SAASG,GAAOluB,GAC9B,IAADmuB,EAAAnuB,EADkC0Y,OAAAA,OAAM,IAAAyV,GAAOA,EAAEjvB,EAASc,EAATd,UAAWkvB,EAAMpuB,EAANouB,OAAQC,EAAaruB,EAAbquB,cAEnErwB,GAAkCC,EAAAA,EAAAA,YAAqBC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAhDswB,EAASpwB,EAAA,GAAEqwB,EAAYrwB,EAAA,GACxBswB,GAAWzqB,EAAAA,EAAAA,QAAgC,MAmCjD,OAjCAzH,EAAAA,EAAAA,YAAU,WAET,GAAKkyB,EAAShqB,QAAd,CACA,IAAMiqB,EAAU,IAAIC,GAAAA,EACnBF,EAAShqB,SACT,SAAAuK,GAAM,OAAIqf,EAAOrf,EAAOxU,KAAK,GAC7B,CACCo0B,qBAAqB,EACrBC,kBAAmB,KAWrB,OARAL,GAAa,SAACM,GAIb,OAFG,OAAHA,QAAG,IAAHA,GAAAA,EAAK/0B,OACF,OAAH+0B,QAAG,IAAHA,GAAAA,EAAK5P,UACEwP,CACR,IACAA,EAAQK,QAAQC,OAAM,kBAAMV,GAAe,IAEpC,WAENI,EAAQ30B,OACR20B,EAAQxP,SACT,CArB6B,CAsB9B,GAAG,CAACuP,EAAUJ,KAEd9xB,EAAAA,EAAAA,YAAU,WAEJgyB,IACD5V,EAAQ4V,EAAUQ,QAAQC,OAAM,kBAAMV,GAAe,IACpDC,EAAUU,OAAM,GACtB,GAAG,CAACtW,EAAQ4V,KAGXrxB,EAAAA,EAAAA,KAAA,SAAOiC,UAAW5B,EAAW6B,GAAOC,KAAMF,GAAYyF,IAAK6pB,GAE7D,CC9CA,QAAgB,KAAO,qBAAqB,IAAM,oBAAoB,OAAS,wBCGhE,SAASS,GAAajvB,GACpC,IADuC2H,EAAK3H,EAAL2H,MAAOunB,EAAUlvB,EAAVkvB,WAE9C,OACCjwB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOC,KAAK/B,SAAA,EAC3BJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOgwB,IAAI9xB,UAC1BJ,EAAAA,EAAAA,KAAA,UAAQsC,QAAS2vB,EAAW7xB,SAAC,qEAE9B4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOiwB,OAAO/xB,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOsK,EAAMlM,QACbwB,EAAAA,EAAAA,KAAA,QAAAI,SAAM,OACNJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOwL,GAAalB,EAAMC,aAI9B,CChBe,SAASynB,GAAS3b,GAEhC,IAAA1V,GAAgBC,EAAAA,EAAAA,WAAS,WAExB,IAAMqxB,EAAQ,IAAIC,MAAM7b,GAExB,OADA4b,EAAME,QAAU,OACTF,CACR,IALOA,GAKLnxB,EAAAA,EAAAA,GAAAH,EAAA,GALU,GAaZ,MAAO,CANM,WAEZsxB,EAAMG,YAAc,EACpBH,EAAMI,MACP,EAGD,C,iHCCe,SAASC,KAEvB/sB,EAAS,wCACT,IjDqB+BmF,EEoBJH,E+CzCrBgoB,GAAYzK,EAAAA,EAAAA,MAClBnnB,GAAwCC,EAAAA,EAAAA,UAAwB,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA9D6xB,EAAY3xB,EAAA,GAAE4xB,EAAe5xB,EAAA,GACpCqH,GAAoCtH,EAAAA,EAAAA,UAAwB,MAAKuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA1DwqB,EAAUvqB,EAAA,GAAEwqB,EAAaxqB,EAAA,GAChC+G,GAA0BtO,EAAAA,EAAAA,UAAwB,MAAKuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAhDzP,EAAK0P,EAAA,GAAE3I,EAAQ2I,EAAA,GACtBG,GAAkD1O,EAAAA,EAAAA,UAAmC,MAAK2O,GAAAzO,EAAAA,EAAAA,GAAAwO,EAAA,GAAnFsjB,EAAiBrjB,EAAA,GAAEsjB,EAAoBtjB,EAAA,GAC9CG,GAA0C9O,EAAAA,EAAAA,WAAS,GAAK+O,GAAA7O,EAAAA,EAAAA,GAAA4O,EAAA,GAAjDojB,EAAanjB,EAAA,GAAEojB,EAAgBpjB,EAAA,GACtCG,GAAkClP,EAAAA,EAAAA,WAAS,GAAMmP,GAAAjP,EAAAA,EAAAA,GAAAgP,EAAA,GAA1CkjB,EAASjjB,EAAA,GAAEkjB,EAAYljB,EAAA,GAC9BuX,GAA4C1mB,EAAAA,EAAAA,WAAS,GAAM2mB,GAAAzmB,EAAAA,EAAAA,GAAAwmB,EAAA,GAApD4L,EAAc3L,EAAA,GAAE4L,EAAiB5L,EAAA,GACxCG,GAAsC9mB,EAAAA,EAAAA,WAAS,GAAM+mB,GAAA7mB,EAAAA,EAAAA,GAAA4mB,EAAA,GAA9C0L,EAAWzL,EAAA,GAAE0L,EAAc1L,EAAA,GAC5B2L,GAAW5sB,EAAAA,EAAAA,QAAyB,MACpC4D,GjDWyBI,EiDXD6nB,EAAmB,SjDa1C10B,EAAAA,EAAAA,UAAS,CAAC,QAAQ,GAAD+H,OAAK8E,KAAUzP,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAoT,IAAA,IAAA/S,EAAA0B,EAAA,OAAAhC,EAAAA,EAAAA,KAAAO,MAAA,SAAAgT,GAAA,cAAAA,EAAA9S,KAAA8S,EAAA7S,MAAA,cAAA6S,EAAA7S,KAAA,EAEtBC,MAAM,uBAAyB6O,GAAS,KAAD,EAAhD,OAAHlP,EAAGiT,EAAAvS,KAAAuS,EAAA7S,KAAA,EACUJ,EAAIa,OAAO,KAAD,EAAnB,GAAJa,EAAIuR,EAAAvS,KACLV,EAAIW,GAAG,CAADsS,EAAA7S,KAAA,YAEQ,KAAdJ,EAAIuC,OAAa,CAAA0Q,EAAA7S,KAAA,eAAA6S,EAAAjS,OAAA,SACb+2B,KAAG,OACO,OADP9kB,EAAArS,GACDnC,EAAQwU,EAAA7S,KAAA,GAAQJ,EAAIa,OAAM,QAAoB,MAApBoS,EAAAnS,GAAAmS,EAAAvS,KAAiBK,IAAG,IAAAkS,EAAArS,GAAAqS,EAAAnS,IAAE,KAAF,UAAAmS,EAAAjS,OAAA,SAElD4N,GAAmBlN,IAAsB,yBAAAuR,EAAAhS,OAAA,GAAA8R,EAAA,KAC9C,CAAEilB,MAAO,KiDtBZC,EAAmBzB,GAAS0B,IAArBC,GAA0B7yB,EAAAA,EAAAA,GAAA2yB,EAAA,GAAlB,GACfG,EAAwB5B,GAAS6B,IAA1BC,GAAoChzB,EAAAA,EAAAA,GAAA8yB,EAAA,GAAvB,GAEdG,IAAaC,EAAAA,EAAAA,cAAY,SAACx4B,GAAW,OAAKi3B,EAAgBj3B,EAAI,GAAE,IAChEy4B,IAAkBD,EAAAA,EAAAA,cAAY,WAEnCf,GAAa,GACTK,EAASnsB,SAAWmD,EAAMpN,MAA6B,iBAAdoN,EAAMpN,OAElDuL,YAAW,WAEN6qB,EAASnsB,SACZmsB,EAASnsB,QAAQ+sB,OACnB,GAAG,IACHZ,EAASnsB,QAAQC,MAAQ0nB,GAAgBxkB,EAAMpN,KAAKe,GAAIqM,EAAMpN,KAAKqN,MAErE,GAAG,CAAC+oB,EAAUhpB,EAAMpN,OACdi3B,IAAmBH,EAAAA,EAAAA,cAAY,kBAAMf,GAAa,EAAM,GAAE,IAE1D9vB,GC9CQ,SAAgCK,EAA8CoD,GAE5F,IAAMzD,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAAsD,GAAA5L,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,EAAO8U,GAAsB,IAAAkkB,EAAA1iB,EAAA,OAAAxW,EAAAA,EAAAA,KAAAO,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAEhByB,EAAmC,oBAAqB6S,GAAW,OAKxC,OAL7CkkB,EAAS14B,EAAAQ,KACTwV,EAAS0iB,EACXA,EAAUpmB,SACb0D,EAAO1D,OAASF,GAAoBsmB,EAAUpmB,SAC3ComB,EAAU9pB,QACboH,EAAOpH,MAAQF,GAAmBgqB,EAAU9pB,QAAM5O,EAAAc,OAAA,SAC5CkV,GAAM,wBAAAhW,EAAAe,OAAA,GAAArB,EAAA,KACb,gBAAAP,GAAA,OAAAgM,EAAAtM,MAAA,KAAAC,UAAA,EATU,GAUXgJ,UAAWA,EACXoD,QAAS,SAACnH,GAEF,OAAPmH,QAAO,IAAPA,GAAAA,EAAUnH,aAAiBxF,EAAWwF,EAAMC,QAAU,+FACtDyD,EAASoN,OACV,IAED,OAAOpN,CACR,CDyBkBkxB,EAChB,SAAA3iB,GAECmhB,EAAqBnhB,GAChBA,EAAO4iB,SAASR,GACtB,IACA,SAAAr0B,GAECozB,EAAqB,MACrBrsB,EAAS/G,EACV,IA4CD,OAzCAR,EAAAA,EAAAA,YAAU,WAET,GAAIuzB,GAAgBloB,EAAMpN,MAA2B,QAAnBiG,GAASpF,QAAyC,iBAAduM,EAAMpN,KAC5E,CAEC,GADAy2B,IACIjB,GAAcF,IAAiB/yB,EAIlC,OAFAgzB,EAAgB,WAChBU,GAAkB,GAInBV,EAAgB,MAChBU,GAAkB,GAClBR,EAAcH,GACdhsB,EAAS,MACTqsB,EAAqB,MACrB1vB,GAASkB,OAAO,CAAEuL,KAAM4iB,EAAc9nB,QAASJ,EAAMpN,KAAKe,IAC3D,CAED,GAAG,CAACu0B,EAAcloB,EAAMpN,KAAMiG,GAASpF,UAEvCkB,EAAAA,EAAAA,YAAU,WAET,GAAKkE,GAASgjB,UAAd,CACA,IAAM9D,EAAU5Z,YAAW,WAE1BgqB,EAAgB,MAChBtvB,GAASoN,OACV,GAAG,KACH,OAAO,kBAAMgS,aAAaF,EAAS,CANJ,CAQhC,GAAG,CAAClf,GAASgjB,aAEblnB,EAAAA,EAAAA,YAAU,WAET,GAAKi0B,EAAL,CACA,IAAM7Q,EAAU5Z,YAAW,kBAAM0qB,GAAkB,EAAM,GAAE,KAC3D,OAAO,kBAAM5Q,aAAaF,EAAS,CAFR,CAG5B,GAAG,CAAC6Q,KAGHtxB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,CACEsK,EAAMtD,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3B4H,EAAM7K,QAASG,EAAAA,EAAAA,KAAC2E,EAAM,CAACE,UAAQ,EAACM,IAAI,MAAME,OAAQ,KAAKjF,SAAC,gGACnC,iBAAdsK,EAAMpN,OAAoB0E,EAAAA,EAAAA,MAAC2C,EAAM,CAACE,UAAQ,EAACE,cAAY,EAACI,IAAI,MAAME,OAAQ,KAAKjF,SAAA,EACtFJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,iPACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,uTAEgB,iBAAdsK,EAAMpN,MAAoBoN,EAAMpN,OACvC0E,EAAAA,EAAAA,MAAC2C,EAAM,CAACM,WAAS,EAACI,QAAQrF,EAAAA,EAAAA,KAACgyB,GAAa,CAACtnB,MAAOA,EAAMpN,KAAM20B,WAAYoC,KAAoBj0B,SAAA,EAC3FJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOsvB,SAAUjuB,GAASoxB,QAAUzyB,GAAO0yB,iBAAiBx0B,UACtFJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAO2yB,YAAYz0B,UAClCJ,EAAAA,EAAAA,KAACixB,GAAO,CAACE,OAAQgD,GAAY/C,cAAe,kBAAMqC,GAAe,EAAK,EAAExxB,UAAWC,GAAO4yB,oBAI5F9yB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO6yB,WAAW30B,SAAA,EACjCJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOoxB,eAAgBA,GAAkBpxB,GAAO8yB,wBAAwB50B,SAAC,mEACnG0yB,IAAc9wB,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,4DAAa0yB,KAChCjzB,IAASG,EAAAA,EAAAA,KAAA,OAAAI,SAAMP,KACE,OAAjBmzB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmB0B,WAAW1yB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAC9BJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOwyB,QAASxyB,GAAO+yB,KAAK70B,SAAC,8EACxD4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgzB,YAAY90B,SAAA,EAClC4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,iEAAa4yB,EAAkB5kB,OAAOgB,eAC3CpN,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,4DAAa4yB,EAAkB5kB,OAAOzG,SAC3C3F,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,qDAAW4yB,EAAkB5kB,OAAOwB,mBAGV,aAAf,OAAjBojB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBmC,aAA2Bn1B,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOrC,MAAOqC,GAAO+yB,KAAK70B,SAAC,sDACpE,UAAf,OAAjB4yB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBmC,aAAwBnzB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAC3CJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOrC,MAAOqC,GAAO+yB,KAAK70B,SAAC,6GACtD4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgzB,YAAY90B,SAAA,EAG1B4B,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACN4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,uEAAc4yB,EAAkBtoB,MAAMlM,SAC3CwD,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,gDAAWwL,GAAaonB,EAAkBtoB,MAAMC,MAAM,KAAG4B,GAAaymB,EAAkBtoB,MAAMC,KAAM,OAAO,WAGlH3I,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,iEAAa4yB,EAAkB5kB,OAAOgB,oBAGZ,YAAf,OAAjB4jB,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBmC,aAA0BnzB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EAC7CJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAW5B,EAAW6B,GAAOrC,MAAOqC,GAAO+yB,KAAK70B,SAAC,0FACtD4B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOgzB,YAAY90B,SAAA,EAWlC4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,sCACN4B,EAAAA,EAAAA,MAAA,QAAA5B,SAAA,CAAO4L,GAAagnB,EAAkB5kB,OAAOC,aAAa,GAAM,QAChErM,EAAAA,EAAAA,MAAA,QACCC,UAAW5B,G/CvGOsK,E+CuGgBqoB,EAAkB5kB,OAAOC,c/CrGxD,IAAIzD,MACJ+B,UAAYhC,EAAKgC,WAAa,I+CoGyC,IAAMzK,GAAOrC,QAAOO,SAAA,CAC9F,IAAEmM,GAAaymB,EAAkB5kB,OAAOC,aAAa,WAEvDrM,EAAAA,EAAAA,MAAA,OAAK/B,MAAO,CAAE4iB,UAAW,UAAWziB,SAAA,CAAC,iEAAa4yB,EAAkB5kB,OAAOgB,eAC3EpN,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,4DAAa4yB,EAAkB5kB,OAAOzG,SAC3C3F,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,qDAAW4yB,EAAkB5kB,OAAOwB,uBAI5C5N,EAAAA,EAAAA,MAAC8F,GAAK,CAAClC,MAAM,qGAAqBoC,KAAMorB,EAAW/wB,MAAOkyB,GAAiBn0B,SAAA,EAC1EJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,OAAOD,IAAKgsB,KACxB1zB,EAAAA,EAAAA,KAAA,UAAQ0E,SAA6B,QAAnBnB,GAASpF,OAAkBmE,QAAS,WACrD,IAAD8yB,EACK1B,EAASnsB,SACZsrB,EAAgC,QAAjBuC,EAAC1B,EAASnsB,eAAO,IAAA6tB,OAAA,EAAhBA,EAAkB5tB,OACnC+sB,IACD,EAAEn0B,SAAC,+DAEJ4B,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMwrB,EAAYpzB,SAAA,EACxBJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,+GACJJ,EAAAA,EAAAA,KAAA,KAAAI,SAAG,6ZACHJ,EAAAA,EAAAA,KAAA,KAAAI,SAAG,wKAEJ4B,EAAAA,EAAAA,MAAC8F,GAAK,CAAClC,MAAM,kFAAiBoC,KAAMkrB,EAAe7wB,MAAO,kBAAM8wB,GAAiB,EAAM,EAAC/yB,SAAA,EACvFJ,EAAAA,EAAAA,KAAA,MAAAI,SAAKsK,EAAMpN,KAAKkB,QAChBwB,EAAAA,EAAAA,KAAA,KAAAI,SAAG,odACH4B,EAAAA,EAAAA,MAAA,KAAA5B,SAAA,EAAGJ,EAAAA,EAAAA,KAAA,UAAAI,SAAQ,8EAAuB,2NAMxC,CErMA,QAAgB,KAAO,qBAAqB,MAAQ,sBAAsB,OAAS,uBAAuB,UAAY,0BAA0B,SAAW,0BCO5I,SAASi1B,GAAetyB,GACtC,IADyCiF,EAAIjF,EAAJiF,KAAM3F,EAAKU,EAALV,MAE/CtB,GAAgCC,EAAAA,EAAAA,UAA6B,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3Du0B,EAAQr0B,EAAA,GAAEs0B,EAAWt0B,EAAA,GACtBuqB,GAAW1kB,EAAAA,EAAAA,QAAyB,MACpCD,GAAYC,EAAAA,EAAAA,QAAyB,MACrCvD,EhCwBA,SAA6BK,GAEnC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA+K,GAAArT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAoT,EAAO6mB,GAA0B,OAAAl6B,EAAAA,EAAAA,KAAAO,MAAA,SAAAgT,GAAA,cAAAA,EAAA9S,KAAA8S,EAAA7S,MAAA,cAAA6S,EAAA7S,KAAA,EACtCyB,EAA2B,aAAc+3B,GAAa,cAAA3mB,EAAAjS,OAAA,SAAAiS,EAAAvS,MAAA,wBAAAuS,EAAAhS,OAAA,GAAA8R,EAAA,qBAAAzT,GAAA,OAAAwT,EAAA/T,MAAA,KAAAC,UAAA,EADlD,GAEXgJ,UAAW,SAACtG,GAEXwM,GAAiBtG,EAAa,QAASlG,GAC9B,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CgCrCkBkyB,EAAoB,SAAAxP,GAEpCsP,EAAYtP,GACP,OAAL5jB,QAAK,IAALA,GAAAA,GACD,IAaA,OAXAhD,EAAAA,EAAAA,YAAU,YAEJ2I,GAAQwjB,EAASjkB,SAAWV,EAAUU,UAE1ChE,EAASoN,QACT6a,EAASjkB,QAAQC,MAAQ,GACzBX,EAAUU,QAAQC,MAAQ,GAG5B,GAAG,CAACQ,EAAMwjB,EAAU3kB,KAEb7E,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACN4B,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,4HAAuBxF,SAAA,CAC5DZ,EAAa+D,IACdvB,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WACf,IAAD4lB,EAAA1kB,EACO7I,EAAuB,QAAnButB,EAAGP,EAASjkB,eAAO,IAAAwkB,OAAA,EAAhBA,EAAkBvkB,MACzBlJ,EAAyB,QAApB+I,EAAGR,EAAUU,eAAO,IAAAF,OAAA,EAAjBA,EAAmBG,MAC7BhJ,GAAQF,GACXiF,EAASkB,OAAO,CAAEjG,KAAAA,EAAMF,MAAAA,GAC1B,EAAE8B,SAAA,EACDJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,qBAAKrG,UACrBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAK8jB,EAAU7jB,KAAK,OAAOC,UAAQ,OAE3C5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,iCAAOrG,UACvBJ,EAAAA,EAAAA,KAAA,SAAO0H,IAAKb,EAAW4nB,YAAY,oGAAyB9mB,KAAK,OAAOC,UAAQ,EAC/EoY,QAAS,SAAA3Z,GAEJQ,EAAUU,UACbV,EAAUU,QAAQC,MAAQX,EAAUU,QAAQC,MAAMknB,WAAW,aAAc,IAC7E,OAGF1uB,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAqB7B,SAAC,wDAEtDmD,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,QAEhCd,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,OAAQstB,EAAUjzB,MAAO,kBAAMkzB,EAAY,KAAK,EAAE3vB,MAAM,oGAAmBxF,SAAA,EACjF4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,mCAAgB,OAARk1B,QAAQ,IAARA,OAAQ,EAARA,EAAUh3B,UACvB0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,yCAAiB,OAARk1B,QAAQ,IAARA,OAAQ,EAARA,EAAU7tB,aACxBzH,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAE4iB,UAAW,GAAIziB,SAAC,qLAGhC,CCnDe,SAASs1B,KACvB,IAAD7O,EAAA8O,EACChwB,EAAS,gEACT,IAAA5E,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+lB,EAAc7lB,EAAA,GAAE8lB,EAAiB9lB,EAAA,GACxCqH,GAA0CtH,EAAAA,EAAAA,WAAU,GAAEuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA/CstB,EAAartB,EAAA,GAAEstB,EAAgBttB,EAAA,GACtC+G,GAAoDtO,EAAAA,EAAAA,WAAU,GAAEuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAzDwmB,EAAkBvmB,EAAA,GAAEwmB,EAAqBxmB,EAAA,GAC1C0W,EAAQd,KAEd,OACCnjB,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAACI,IAAK,EAAE/E,SAAA,EAC3BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,iEACH6lB,EAAM7e,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IAC3BtD,EAAaymB,GACS,IAAZ,QAAVY,EAAAZ,EAAM3oB,YAAI,IAAAupB,OAAA,EAAVA,EAAYtmB,UAAeP,EAAAA,EAAAA,KAAA,MAAAI,SAAI,oHACrB,QAD+Cu1B,EACzD1P,EAAM3oB,YAAI,IAAAq4B,OAAA,EAAVA,EAAYjsB,KAAI,SAAA9I,GAAC,OAAIoB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOhE,KAAKkC,SAAA,EACjDJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,WAAW1F,UAAWC,GAAOmoB,UAAWhsB,GAAE,OAAA2H,OAASpF,EAAEvC,OACjE2D,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAO0D,MAAO0kB,QAAO,OAAAtkB,OAASpF,EAAEvC,IAAK+B,SAAA,EACtDJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMQ,EAAEpC,QACRwD,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOQ,EAAErC,MAAMsC,KAAK,SACpBb,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOwoB,gBAGzB1oB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO8zB,SAAS51B,SAAA,EAC/B4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CAAK,mCAAQQ,EAAEtC,UACf0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,QAAAI,SAAM,2CACLQ,EAAE6G,WAAYzH,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,mCAAmCK,QAAS,kBAAMyzB,EAAsBn1B,EAAEvC,GAAG,EAAC+B,SAAC,8FAEjH4B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAe7B,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,YACAA,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,oCAAoCK,QAAS,kBAAMuzB,EAAiBj1B,EAAEvC,GAAG,EAAC+B,SAAC,uDAjBxCQ,EAAEvC,GAoBpD,IACLU,EAAiB,eACjBiD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAe7B,SAAA,EAC7BJ,EAAAA,EAAAA,KAAA,YACAA,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMykB,GAAkB,EAAK,EAAC3mB,SAAC,yDAGrEJ,EAAAA,EAAAA,KAACq1B,GAAe,CAACrtB,KAAM8e,EAAgBzkB,MAAO,kBAAM0kB,GAAkB,EAAM,KAC5E/mB,EAAAA,EAAAA,KAACilB,GAAoB,CAAC3a,OAAQsrB,EAAehwB,MAAM,4HAAwBjC,WAAY0hB,GAAwBrd,KAAM4tB,GAAiB,EAAGvzB,MAAO,kBAAMwzB,GAAkB,EAAE,KAC1K71B,EAAAA,EAAAA,KAACilB,GAAoB,CAAC3a,OAAQwrB,EAAoBlwB,MAAM,mIAA0BjC,WAAY8hB,GAA+Bzd,KAAM8tB,GAAsB,EAAGzzB,MAAO,kBAAM0zB,GAAuB,EAAE,MAGrM,CCxDA,QAAgB,OAAS,uBAAuB,MAAQ,sBAAsB,MAAQ,uBCUvE,SAASE,GAAclzB,GACrC,IAADgM,EAAAC,EAAAC,EADyCb,EAAMrL,EAANqL,OAAQtD,EAAO/H,EAAP+H,QAASzI,EAAKU,EAALV,MAAO6zB,EAASnzB,EAATmzB,UAEhEn1B,GAAwCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAhDo1B,EAAYl1B,EAAA,GAAEm1B,EAAen1B,EAAA,GACpCqH,GAA4BtH,EAAAA,EAAAA,WAAU,GAAEuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAAjC0F,EAAMzF,EAAA,GAAE4G,EAAS5G,EAAA,GACxB+G,GAAoCtO,EAAAA,EAAAA,UAAS,IAAGuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAAzCF,EAAUG,EAAA,GAAEF,EAAaE,EAAA,GAChCG,GAAoC1O,EAAAA,EAAAA,UAAS,IAAG2O,GAAAzO,EAAAA,EAAAA,GAAAwO,EAAA,GAAzCF,EAAUG,EAAA,GAAEF,EAAaE,EAAA,GAChCG,GAAkC9O,EAAAA,EAAAA,UAAS,IAAG+O,GAAA7O,EAAAA,EAAAA,GAAA4O,EAAA,GAAvCF,EAASG,EAAA,GAAEF,EAAYE,EAAA,GACxBxM,EnDmCA,SAAiCK,GAEvC,IAAMJ,GAAcC,EAAAA,EAAAA,kBACdF,GAAWG,EAAAA,EAAAA,aAAY,CAC5BC,WAAW,WAAD,IAAA0yB,GAAAh7B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAuC,EAAgCw4B,GAA0B,IAAAloB,EAAA,OAAA9S,EAAAA,EAAAA,KAAAO,MAAA,SAAAkC,GAAA,cAAAA,EAAAhC,KAAAgC,EAAA/B,MAAA,cAAA+B,EAAA/B,KAAA,EAEhDyB,EAA8B,gBAAkB64B,EAAO1nB,SAAU0nB,EAAOh5B,MAAM,KAAD,EAAtF,OAAN8Q,EAAMrQ,EAAAzB,KAAAyB,EAAAnB,OAAA,SACLsR,GAAoBE,IAAO,wBAAArQ,EAAAlB,OAAA,GAAAiB,EAAA,KAHQ,OAI1C,SAJ0C5C,GAAA,OAAAm7B,EAAA17B,MAAC,KAADC,UAAA,EAAhC,GAKXgJ,UAAW,SAACtG,GAEX6M,GAAoB3G,EAAa,CAAC,UAAWlG,EAAKwN,SAAUxN,GACnD,OAATsG,QAAS,IAATA,GAAAA,EAAYtG,EACb,IAED,OAAOiG,CACR,CmDnDkBgzB,EAAwB,SAAAnoB,GAExC8nB,EAAU9nB,GACV/L,GACD,IACMmO,EAAc3C,GAAe/C,GAC7B0rB,EAAsBz3B,EAAiB,iBAEvCiJ,IAASoG,EAkBf,OAhBA/O,EAAAA,EAAAA,YAAU,WAGR,IAADoR,EAAAgmB,EADIzuB,GAEHmH,GAA0B,QAAhBsB,EAAAD,EAAYlT,YAAI,IAAAmT,GAAkC,QAAlCgmB,EAAhBhmB,EAAkBmF,MAAK,SAAAhV,GAAC,OAAIA,EAAEpC,MAAQ4P,EAAOzG,IAAI,WAAC,IAAA8uB,OAAlC,EAAhBA,EAAoDp4B,MAAO,GACrEgR,EAAcjB,EAAOgB,YAAc,IACnCK,EAAcrB,EAAOoB,YAAc,IACnCK,EAAazB,EAAOwB,WAAa,KAIjCrM,EAASoN,OAGX,GAAG,CAAC3I,EAAMoG,EAAQoC,EAAYlT,QAG7B0E,EAAAA,EAAAA,MAAC8F,GAAK,CAACE,KAAMA,EAAM3F,MAAOA,EAAOuD,MAAM,4HAAuBxF,SAAA,CAC5DoQ,EAAYpJ,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,IACjCtD,EAAa+D,GACbA,EAAS6D,YAAapH,EAAAA,EAAAA,KAAC8C,EAAO,KAC/Bd,EAAAA,EAAAA,MAACkE,GAAI,CAACC,SAAU,WAEXiI,GAAUJ,GAAU,GAAKoB,GAC5B7L,EAASkB,OAAO,CACfmK,SAAUR,EAAO/P,GACjBf,KAAM,CACL0Q,OAAAA,EACAoB,WAAAA,EACAI,WAAAA,EACAI,UAAAA,IAGJ,EAAExP,SAAA,EACD4B,EAAAA,EAAAA,MAACuE,GAAS,CAACE,MAAM,0DAAYrG,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,UAAQwH,MAAOwG,EAAQ6C,SAAU,SAAAxK,GAAC,IAAAyK,EAAAC,EAAA,OAAI5B,GAA0B,QAAhB2B,EAAAN,EAAYlT,YAAI,IAAAwT,GAA0B,QAA1BC,EAAhBD,EAAmBzK,EAAE2K,OAAOC,sBAAc,IAAAF,OAA1B,EAAhBA,EAA4C1S,MAAO,EAAE,EAAEqG,SAAsC,IAAZ,QAAhBqK,EAAAyB,EAAYlT,YAAI,IAAAyR,OAAA,EAAhBA,EAAkBxO,QAAaqH,UAAQ,EAAAxH,SACtI,QADsI4O,EACtJwB,EAAYlT,YAAI,IAAA0R,OAAA,EAAhBA,EAAkBtF,KAAI,SAAA9I,GAAC,OAAIZ,EAAAA,EAAAA,KAAA,UAAmBwH,MAAO5G,EAAEvC,GAAG+B,SAAEQ,EAAEpC,MAAtBoC,EAAEvC,GAAkC,MAEjD,IAAZ,QAAhB4Q,EAAAuB,EAAYlT,YAAI,IAAA2R,OAAA,EAAhBA,EAAkB1O,UAAeP,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6HAEvCJ,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,+DAAYrG,UAC5BJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAO4H,EAAYyB,SAAU,SAAAxK,GAAC,OAAIgJ,EAAchJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,OAAOC,UAAQ,OAE7F5H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,iHAAsBrG,UACtCJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAOgI,EAAYqB,SAAU,SAAAxK,GAAC,OAAIoJ,EAAcpJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,YAE9E3H,EAAAA,EAAAA,KAACuG,GAAS,CAACE,MAAM,mDAAUrG,UAC1BJ,EAAAA,EAAAA,KAAA,SAAOwH,MAAOoI,EAAWiB,SAAU,SAAAxK,GAAC,OAAIwJ,EAAaxJ,EAAE2K,OAAOxJ,MAAM,EAAEG,KAAK,YAE5E3H,EAAAA,EAAAA,KAAA,UAAQ2H,KAAK,SAAS1F,UAAU,sBAAsByC,SAAUnB,EAAS6D,YAAcoJ,EAAYlT,MAAmC,GAA3BkT,EAAYlT,KAAKiD,OAAYH,SAAC,0EAEzIo2B,IAAuBx2B,EAAAA,EAAAA,KAAA,UACvBiC,UAAU,oCACVK,QAAS,kBAAM8zB,GAAgB,EAAK,EAACh2B,SACrC,+EACDJ,EAAAA,EAAAA,KAACilB,GAAoB,CAAC3a,OAAQQ,EAASoa,gBAAsB,OAAN9W,QAAM,IAANA,OAAM,EAANA,EAAQ/P,KAAM,EAAGuH,MAAM,wFAAkBhC,UAAWvB,EAAOsB,WAAY8K,GAAyBzG,KAAMmuB,EAAc9zB,MAAO,kBAAM+zB,GAAgB,EAAM,MAGjN,CCtEe,SAASM,KACvB,IAADrS,EAAAsS,EAAAC,EACC71B,GAA4CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+lB,EAAc7lB,EAAA,GAAE8lB,EAAiB9lB,EAAA,GACxCqH,GAAoCtH,EAAAA,EAAAA,UAAwB,MAAKuH,GAAArH,EAAAA,EAAAA,GAAAoH,EAAA,GAA1Dsf,EAAUrf,EAAA,GAAEsf,EAAatf,EAAA,GAChC+G,GAAwCtO,EAAAA,EAAAA,UAAwB,MAAKuO,GAAArO,EAAAA,EAAAA,GAAAoO,EAAA,GAA9D4X,EAAY3X,EAAA,GAAE4X,EAAe5X,EAAA,GAC9B3M,GAAWC,EAAAA,EAAAA,MAEXiI,GADYod,EAAAA,EAAAA,MACiB,QAC7Bxd,EAAQG,GAASC,GACjB0D,EAAUD,GAAWzD,GACrB+rB,EAAmB93B,EAAiB,cACpC+3B,EAAoB/3B,EAAiB,iBAC3C4G,EAAS,CAAW,QAAX0e,EAAC3Z,EAAMpN,YAAI,IAAA+mB,OAAA,EAAVA,EAAY7lB,KAAM,0CAE5Ba,EAAAA,EAAAA,YAAU,WAELqL,EAAM7K,iBAAiBxF,GAAYqQ,EAAM7K,MAAMC,QAAQhB,SAAS,cACnE8D,EAAS,aAAc,CAAEhB,SAAS,GACpC,GAAG,CAAC8I,EAAM7K,MAAO+C,IAEjB,IAAMm0B,EAA4B,QAAfJ,EAAGnoB,EAAQlR,YAAI,IAAAq5B,OAAA,EAAZA,EAAc/S,MAAK,SAAAhjB,GAAC,OAAIA,EAAEooB,UAAU,IACpD7lB,EAAQ,WAAA6C,OAAc8E,GAE5B,OACC9I,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACGsK,EAAMtD,WAAaoH,EAAQpH,aAAcpH,EAAAA,EAAAA,KAAC2E,EAAM,CAACxB,SAAUA,EAAS/C,UAACJ,EAAAA,EAAAA,KAAC8C,EAAO,MAC9EtD,EAAakL,GACblL,EAAagP,GACb9D,EAAMpN,MAAQkR,EAAQ+X,YACtBvkB,EAAAA,EAAAA,MAAC2C,EAAM,CAACxB,SAAUA,EAAU0B,UAAQ,EAACM,IAAI,OAAOC,QAAQ,OAAMhF,SAAA,EAC7D4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,CAAI,yCAASsK,EAAMpN,KAAKkB,SACxBwD,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOynB,MAAMvpB,SAAA,EAC5BJ,EAAAA,EAAAA,KAACiE,EAAAA,GAAI,CAAC+M,OAAO,SAAS9M,GAAE,WAAA8B,OAAa8E,EAAO,kBAAkB7I,UAAU,SAAQ7B,SAAC,uEAChFy2B,IAAoB72B,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,SAASK,QAAS,kBAAMykB,GAAkB,EAAK,EAAC3mB,SAAC,sDACxFJ,EAAAA,EAAAA,KAAC8O,GAAgB,CAAChE,QAASA,EAAS9C,KAAM8e,EAAgBzkB,MAAO,kBAAM0kB,GAAkB,EAAM,EAAE7X,SAAU2Y,QAE5G7lB,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAOorB,MAAMltB,SAAA,EAC9BJ,EAAAA,EAAAA,KAAA,SAAAI,UACC4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiT,MAAO,QAAS9S,SAAC,wBAC9BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,kEACJJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,6DACJJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,sDACJ4B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EAAIJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,0CAAYJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,sCACzB22B,IAAiB/0B,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EAAIJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,oCAAWJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,wCAC3CJ,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiT,MAAO,SAAU9S,SAAC,mCAC9B02B,IAAqB92B,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEiT,MAAO,SAAU9S,SAAC,6BAGvDJ,EAAAA,EAAAA,KAAA,SAAAI,SACc,QADdw2B,EACEpoB,EAAQlR,YAAI,IAAAs5B,OAAA,EAAZA,EAAcltB,KAAI,SAAA9I,GAAC,OAAIoB,EAAAA,EAAAA,MAAA,MAAA5B,SAAA,EACvBJ,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAEoP,QACPhQ,EAAAA,EAAAA,KAAA,MAAAI,SACEQ,EAAE4O,YAAaxP,EAAAA,EAAAA,KAAA,KAAGqpB,KAAMzoB,EAAE4O,WAAWpP,SAAEQ,EAAEwO,aAAkBxO,EAAEwO,cAE/DpP,EAAAA,EAAAA,KAAA,MAAIC,MAAO,CAAEC,MAAOU,EAAE+G,KAAK8nB,WAAW,0CAAc,MAAQ,IAAKrvB,SAAEQ,EAAE+G,QACrE3H,EAAAA,EAAAA,KAAA,MAAAI,SAAKQ,EAAEgP,aACP5P,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO0gB,OAAOxiB,SAAEQ,EAAEmoB,QAAU,SAAM,WAChDgO,IAAiB/2B,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO0gB,OAAOxiB,SAAEQ,EAAEooB,WAAa,SAAM,YACtEhpB,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO0gB,OAAOxiB,UAC5BJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,sBAAsBK,QAAS,kBAAMulB,EAAcjnB,EAAE,EAACR,SAAC,qCAEzE02B,IACA92B,EAAAA,EAAAA,KAAA,MAAIiC,UAAWC,GAAO0gB,OAAOxiB,UAC5BJ,EAAAA,EAAAA,KAAA,UAAQiC,UAAU,sBAAsBK,QAAS,kBAAM6kB,EAAgBvmB,EAAE,EAACR,SAAC,2BAd7CQ,EAAEvC,GAiB9B,UAGP2B,EAAAA,EAAAA,KAACijB,GAAU,CAAC7U,OAAQwZ,EAAYld,MAAOA,EAAMpN,KAAM+E,MAAO,kBAAMwlB,EAAc,KAAK,KACnF7nB,EAAAA,EAAAA,KAACi2B,GAAc,CAAC7nB,OAAQ8Y,EAAcpc,QAASA,EAASzI,MAAO,kBAAM8kB,EAAgB,KAAK,EAAE+O,UAAWrO,SAK5G,CC3FA,QAAgB,KAAO,qBAAqB,MAAQ,sBAAsB,OAAS,uBAAuB,UAAY,0BAA0B,SAAW,yBAAyB,WAAa,4BCKlL,SAASgC,KACvB,IAADmN,EACCrxB,EAAS,4EACT,IAAMsxB,GxFmBCh5B,EAAAA,EAAAA,UAAS,SAAO5C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAA8B,IAAA,OAAA/B,EAAAA,EAAAA,KAAAO,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EAClBwB,EAAyB,cAAa,cAAAD,EAAAX,OAAA,SAAAW,EAAAjB,MAAA,wBAAAiB,EAAAV,OAAA,GAAAQ,EAAA,MwFlB7C,OACC2E,EAAAA,EAAAA,MAAC2C,EAAM,CAACI,cAAY,EAACI,IAAK,EAAE/E,SAAA,CAC1B62B,EAAM7vB,YAAapH,EAAAA,EAAAA,KAAA,MAAAI,SAAI,qDACvBZ,EAAay3B,GACH,QADSD,EACnBC,EAAM35B,YAAI,IAAA05B,OAAA,EAAVA,EAAYttB,KAAI,SAAA9I,GAAC,IAAAs2B,EAAA,OAAIl1B,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAOhE,KAAKkC,SAAA,EACjDJ,EAAAA,EAAAA,KAAA,SAAO2H,KAAK,WAAW1F,UAAWC,GAAOmoB,UAAWhsB,GAAE,OAAA2H,OAASpF,EAAEvC,OACjE2D,EAAAA,EAAAA,MAAA,SAAOC,UAAWC,GAAO0D,MAAO0kB,QAAO,OAAAtkB,OAASpF,EAAEvC,IAAK+B,SAAA,EACtD4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMQ,EAAEtC,SACR0B,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,QAASE,SAAEQ,EAAEvC,MAClC2B,EAAAA,EAAAA,KAAA,OAAAI,SAAK,OACLJ,EAAAA,EAAAA,KAAA,OAAAI,SAAMQ,EAAEpC,OACK,MAAZoC,EAAEu2B,SAAkBn1B,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACpBJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,OACLJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,WAAYE,SAAwC,QAAxC82B,EAAED,EAAM35B,KAAKsY,MAAK,SAAAwhB,GAAC,OAAIA,EAAE/4B,IAAMuC,EAAEu2B,MAAM,WAAC,IAAAD,OAAA,EAAtCA,EAAwC54B,eAG7E0D,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,CACEQ,EAAE2pB,UAAWvoB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACbJ,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,MAAO,UAAWE,SAAC,aACjCJ,EAAAA,EAAAA,KAAA,OAAAI,SAAK,UAENJ,EAAAA,EAAAA,KAAA,QAAAI,SAAOQ,EAAErC,MAAMsC,KAAK,SACpBb,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOwoB,gBAGzB1oB,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,GAAO8zB,SAAS51B,SAAA,EAC/B4B,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,gBACJJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOzD,WAAW2B,SAChCQ,EAAEnC,WAAWiL,KAAI,SAACmhB,EAAGnT,GAAC,OAAK1X,EAAAA,EAAAA,KAAA,OAAAI,SAAci3B,GAAkBxM,IAAtBnT,EAA+B,UAGvE1V,EAAAA,EAAAA,MAAA,OAAA5B,SAAA,EACCJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,YACJJ,EAAAA,EAAAA,KAAA,OAAKiC,UAAWC,GAAOzD,WAAW2B,SAChCQ,EAAEgqB,OAAOlhB,KAAI,SAACmhB,EAAGnT,GAAC,OAAK1X,EAAAA,EAAAA,KAAA,OAAAI,SAAcyqB,GAAJnT,EAAY,cAhCM9W,EAAEvC,GAoCpD,MAGT,CAEA,SAASg5B,GAAkB14B,GAE1B,IAAM24B,EAAS,CACdC,KAAM,UACNpf,IAAK,UACL5C,IAAK,UACLiiB,OAAQ,UACR5f,OAAQ,WAET,IAAK,IAAMgY,KAAU0H,EAEpB,GAAI34B,EAAU8wB,WAAWG,GACxB,OAAO5tB,EAAAA,EAAAA,MAAAyf,EAAAA,SAAA,CAAArhB,SAAA,EACNJ,EAAAA,EAAAA,KAAA,QAAMC,MAAO,CAAEC,MAAOo3B,EAAO1H,IAAiCxvB,SAAEwvB,KAChE5vB,EAAAA,EAAAA,KAAA,QAAAI,SAAOzB,EAAU+D,MAAMktB,EAAOrvB,aAGjC,OAAOP,EAAAA,EAAAA,KAAA,QAAAI,SAAOzB,GACf,CC9Ce,SAAS84B,KACvB,IAAD54B,EACOX,EAAOF,IAEb,SAAS05B,EAAeC,EAA8BC,EAAcC,GACnE,IAADj5B,EACC,OAAOoB,EAAAA,EAAAA,KAAC83B,EAAAA,GAAK,CAACF,KAAMA,EAAMC,QACf,QAAVj5B,EAACV,EAAKZ,YAAI,IAAAsB,GAATA,EAAWR,KACG,MAAdu5B,GAAsBj5B,EAAcR,EAAMy5B,GAAcE,GAAU73B,EAAAA,EAAAA,KAAC0F,EAAgB,KADjE1F,EAAAA,EAAAA,KAAC+3B,EAAAA,GAAQ,CAAC7zB,GAAG,WAIlC,CAEA,OAAOlC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAM7B,SAAA,EAC3BJ,EAAAA,EAAAA,KAACd,EAAW,KACZc,EAAAA,EAAAA,KAACc,EAAkB,IAElB5C,EAAKkJ,YAAapH,EAAAA,EAAAA,KAACg4B,EAAAA,EAAS,IAC5Bx4B,EAAatB,GACbA,EAAKqoB,YACLvkB,EAAAA,EAAAA,MAACi2B,EAAAA,GAAM,CAAA73B,SAAA,EACNJ,EAAAA,EAAAA,KAAC83B,EAAAA,GAAK,CAACF,KAAK,QAAQC,QAAmB,QAAVh5B,EAACX,EAAKZ,YAAI,IAAAuB,GAATA,EAAWT,MAAsB4B,EAAAA,EAAAA,KAAC+3B,EAAAA,GAAQ,CAAC7zB,GAAG,OAA5BlE,EAAAA,EAAAA,KAAC2G,GAAQ,OACzD3G,EAAAA,EAAAA,KAAC83B,EAAAA,GAAK,CAACF,KAAK,oBAAoBC,SAAS73B,EAAAA,EAAAA,KAAC0yB,GAAW,MACpDgF,EAAe,KAAM,KAAK13B,EAAAA,EAAAA,KAAC6H,GAAS,KACpC6vB,EAAe,KAAM,YAAY13B,EAAAA,EAAAA,KAACywB,GAAW,KAC7CiH,EAAe,cAAe,WAAW13B,EAAAA,EAAAA,KAACirB,GAAU,KACpDyM,EAAe,cAAe,oBAAoB13B,EAAAA,EAAAA,KAAC4mB,GAAS,KAC5D8Q,EAAe,cAAe,4BAA4B13B,EAAAA,EAAAA,KAAC02B,GAAW,KACtEgB,EAAe,cAAe,kCAAkC13B,EAAAA,EAAAA,KAACovB,GAAgB,KACjFsI,EAAe,aAAc,UAAU13B,EAAAA,EAAAA,KAAC01B,GAAS,KACjDgC,EAAe,aAAc,MAAM13B,EAAAA,EAAAA,KAACmI,GAAS,KAC7CuvB,EAAe,aAAc,UAAU13B,EAAAA,EAAAA,KAACmtB,GAAO,KAC/CuK,EAAe,mBAAoB,YAAY13B,EAAAA,EAAAA,KAAC6pB,GAAS,KACzD6N,EAAe,oBAAqB,aAAa13B,EAAAA,EAAAA,KAACk4B,GAAc,KAChER,EAAe,aAAc,UAAU13B,EAAAA,EAAAA,KAACssB,GAAS,KACjDoL,EAAe,gBAAiB,aAAa13B,EAAAA,EAAAA,KAAC2uB,GAAY,KAC1D+I,EAAe,KAAM,KAAK13B,EAAAA,EAAAA,KAACyF,EAAY,UAI5C,C","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","api/auth.ts","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","utils/query.ts","api/events.ts","utils/nums.ts","utils/dates.ts","api/ticketTypes.ts","api/tickets.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/TicketEditor/styles.module.css?35f4","utils/imagefileToData.ts","utils/useFont.ts","components/TicketEditor/editor.ts","components/TicketEditor/inspector.tsx","api/fonts.ts","components/TicketEditor/index.tsx","components/TicketEditor/viewer.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/simple.tsx","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/PopupConfirmDeletion/index.tsx","api/staff.ts","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/EventsFullPage/styles.module.css?dfe7","pages/EventsFullPage/index.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","components/create/CreateFontForm.tsx","pages/FontsPage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://ticket_system/./src/pages/ManagersPage/styles.module.css?b9cc","api/managers.ts","components/create/CreateManagerForm.tsx","pages/ManagersPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","utils/getTicketPrefix.ts","pages/PrintTicketsPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/useSound.ts","pages/ScannerPage/index.tsx","api/checkTicket.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","App.tsx"],"sourcesContent":["import type { TicketPattern } from \"../components/TicketEditor/editor\";\n\nexport class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface User\n{\n\tauth: boolean,\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\toperations: string[],\n}\n\nexport interface UserFull\n{\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\tbossId: number | null,\n\tdeleted: boolean,\n\taccess: string[],\n\toperations: string[],\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string,\n}\n\nexport interface ImgData\n{\n\tdata: string,\n\tname: string,\n\taccessEventId: number,\n}\n\nexport interface ResponseEvent\n{\n\tid: number,\n\tname: string,\n\tdate: string,\n}\n\nexport interface EventData\n{\n\tid: number,\n\tname: string,\n\tdate: Date,\n}\nexport interface EventDataFull\n{\n\tid: number,\n\tdeleted: boolean,\n\tname: string,\n\tdate: Date,\n\tactive: boolean,\n\taccess: User[],\n}\n\nexport interface ResponseCheckTicket\n{\n\tsuccess: boolean,\n\terrorCode: null | \"event\" | \"scanned\" | \"notExist\",\n\tticket: ResponseTicket | null,\n\tevent: ResponseEvent | null,\n}\n\nexport interface ResponseTicket\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\teventId: number,\n\tcreatedDate: string,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: string,\n\tauthOnPltf: boolean,\n}\n\nexport type CheckTicketResult = CheckTicketResult_success | CheckTicketResult_event | CheckTicketResult_scanned | CheckTicketResult_notExist;\n\ninterface CheckTicketResult_success\n{\n\tsuccess: true,\n\terrorCode: null,\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_event\n{\n\tsuccess: boolean,\n\terrorCode: \"event\",\n\tticket: Ticket,\n\tevent: EventData,\n}\n\ninterface CheckTicketResult_scanned\n{\n\tsuccess: false,\n\terrorCode: \"scanned\",\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_notExist\n{\n\tsuccess: false,\n\terrorCode: \"notExist\",\n\tticket: null,\n\tevent: null,\n}\n\nexport type Ticket = Ticket_common | Ticket_scanned;\n\ninterface Ticket_common\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: Date,\n\tauthOnPltf: boolean,\n}\n\ninterface Ticket_scanned\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy: string,\n\tscannedById: number,\n\tscannedDate: Date,\n\tauthOnPltf: boolean,\n}\n\nexport interface TicketType\n{\n\tid: number,\n\tname: string,\n\timageId: number | null,\n\tpattern: TicketPattern,\n}\n\nexport interface TicketStats\n{\n\ttypeId: number,\n\tcount: number,\n\tscanned: number,\n\tauthOnPltf: number,\n}\n\nexport interface Font\n{\n\tid: number,\n\tname: string,\n\ttype: \"ttf\" | \"otf\" | \"woff\" | \"woff2\",\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"GET\", input, body);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"GET\", input, body);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n\nexport async function fetchPostForm<T>(input: RequestInfo | URL, body: FormData)\n{\n\tconst res = await fetch(input, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t});\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as T;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError } from \"./dataTypes\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPost } from \"../utils/fetch\";\n\nexport function createEmptyUser(): User\n{\n\treturn { auth: false, id: -1, login: \"\", roles: [], name: \"\", operations: [] };\n}\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", async () =>\n\t{\n\t\tconst res = await fetch(\"/api/user\");\n\t\tconst data = await res.json();\n\n\t\tif (res.status == 401) return createEmptyUser();\n\t\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\t\tconst user = data as User;\n\t\tuser.auth = true;\n\t\treturn user;\n\t});\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\"),\n\t);\n}\n\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeNameData) =>\n\t\t\tawait fetchPost(\"/api/user/change_name\", data),\n\t\tonSuccess: (_, data: ChangeNameData) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeNameData\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_debug_events: \"page_debug_events\",\n\tpage_debug_users: \"page_debug_users\",\n\tpage_fonts: \"page_fonts\",\n\tpage_managers: \"page_managers\",\n\n\tget_staff_event: \"get_staff_event\",\n\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tadd_font: \"add_font\",\n\tadd_manager: \"add_manager\",\n\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n\tdelete_manager: \"delete_manager\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","import { useMutation, useQueryClient } from \"react-query\";\nimport { ApiError, User } from \"./dataTypes\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { createEmptyUser } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (authData: AuthData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => fetchPost(\"/api/logout\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", (_?: User) => createEmptyUser());\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, padding, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\", padding }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tpadding?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_fonts\") && <Link to=\"/fonts\" className=\"button button_large\">Шрифты</Link>}\n\t\t\t{hasPermission(user, \"page_managers\") && <Link to=\"/managers\" className=\"button button_large\">Организаторы</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/d\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t{useHasPermission(\"page_debug_users\") && <Link to=\"/d/users\" className=\"button\">Users</Link>}\n\t\t\t{useHasPermission(\"page_debug_events\") && <Link to=\"/d/events\" className=\"button\">Events</Link>}\n\t\t\t<Link to=\"/d/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\",\"ticketTypes\":\"styles_ticketTypes__FIDHq\"};","import type { QueryClient, QueryKey } from \"react-query\";\n\nexport function queryStrKey(queryKey: QueryKey)\n{\n\treturn queryKey instanceof Array ? queryKey.map(v => `${v}`) : `${queryKey}`;\n}\n\nexport function queryInvalidate(queryClient: QueryClient, queryKey: QueryKey)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tqueryClient.invalidateQueries(queryKey, { exact: true });\n}\n\nexport function queryListAddItem<T>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items, item] : [item]);\n}\n\nexport function queryListUpdateItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items.filter(v => v.id != item.id), item] : [item]);\n}\n\nexport function queryListDeleteItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, itemId: number | string)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? items.filter(v => v.id != itemId) : []);\n}\n\ninterface ObjWithId\n{\n\tid: number | string,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, EventData, ResponseEvent, ResponseMsg, type EventDataFull } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem, queryInvalidate } from \"../utils/query\";\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery(\"events\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events\");\n\t\treturn events.map(parseEventResponse);\n\t}, {\n\t\tonSuccess: data =>\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v)),\n\t});\n}\n\nexport function useEventsFull()\n{\n\treturn useQuery(\"events_full\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events_full\");\n\t\treturn events.map(parseEventResponse) as EventDataFull[];\n\t});\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst event = await fetchJsonGet<ResponseEvent>(\"/api/events/\" + eventId);\n\t\treturn parseEventResponse(event);\n\t});\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst res = await fetch(\"/api/scanner_events/\" + eventId);\n\t\tconst data = await res.json();\n\t\tif (!res.ok)\n\t\t{\n\t\t\tif (res.status == 403)\n\t\t\t\treturn NaN;\n\t\t\tthrow new ApiError((await res.json() as ResponseMsg).msg);\n\t\t}\n\t\treturn parseEventResponse(data as ResponseEvent);\n\t}, { retry: 3 });\n}\n\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events\", eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListAddItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events/\" + eventId, eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListUpdateItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/events/\" + eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, [\"event\", eventId]);\n\t\t\tqueryListDeleteItem(queryClient, \"events\", eventId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationGetAccessToEvent()\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventId: number | string) =>\n\t\t\tawait fetchPost(`/api/events/${eventId}/add_access`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, \"events\");\n\t\t\tqueryInvalidate(queryClient, \"events_full\");\n\t\t},\n\t});\n}\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport type { ImgData, TicketType } from \"./dataTypes\";\nimport type { TicketPattern } from \"../components/TicketEditor/editor\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryInvalidate, queryListUpdateItem } from \"../utils/query\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery([\"ticket_types\", eventId], async () =>\n\t\tawait fetchJsonGet<TicketType[]>(`/api/events/${eventId}/ticket_types`),\n\t\t{\n\t\t\tonSuccess: data =>\n\t\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v)),\n\t\t});\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypesData[]) =>\n\t\t\tawait fetchJsonPost<TicketType[]>(`/api/events/${eventId}/ticket_types`, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryInvalidate(queryClient, [\"tickets\", eventId])\n\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], data);\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n\n\nexport function useTicketType(typeId: number)\n{\n\treturn useQuery([\"ticket_type\", `${typeId}`], async () =>\n\t\tawait fetchJsonGet<TicketType>(\"/api/ticket_types/\" + typeId),\n\t\t{ enabled: typeId >= 0 }\n\t);\n}\n\nexport function useMutationUpdateTicketType(typeId: number | string, onSuccess?: (ticket: TicketType) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypeData) =>\n\t\t\tawait fetchJsonPost<TicketType>(\"/api/ticket_types/\" + typeId, data),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"ticket_type\", `${typeId}`], data);\n\t\t\tqueryListUpdateItem(queryClient, [\"ticket_types\", typeId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypeData\n{\n\timg: ImgData | null,\n\tpattern: TicketPattern,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseTicket, Ticket, TicketStats } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", `${eventId}`], async () =>\n\t{\n\t\tconst tickets = await fetchJsonGet<ResponseTicket[]>(`/api/events/${eventId}/tickets`);\n\t\treturn tickets.map(parseTicketResponse);\n\t});\n}\n\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: NewTicketData) =>\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets\", ticketData);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async function postUpdateTicket(params: UpdateTicketParams)\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets/\" + params.ticketId, params.data);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketId: number | string) =>\n\t\t\tawait fetchDelete(\"/api/tickets/\" + ticketId),\n\t\tonSuccess: (_, ticketId) =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, [\"tickets\", eventId], ticketId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useTicketStats(eventId: number | string)\n{\n\treturn useQuery([\"ticket_stats\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<TicketStats[]>(`/api/events/${eventId}/tickets_stats`),\n\t);\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(ticketTypes.data?.[0]?.id || -1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__+QOp3\",\"canvas\":\"styles_canvas__wzjs3\",\"inspector\":\"styles_inspector__TrPRu\",\"inspector_open\":\"styles_inspector_open__h5KZj\",\"fields\":\"styles_fields__fz+aE\",\"colorInput\":\"styles_colorInput__8Ty5B\",\"fontInput\":\"styles_fontInput__zF4OQ\",\"panel\":\"styles_panel__yLWcU\",\"br\":\"styles_br__7BTyB\",\"footer\":\"styles_footer__ADD9E\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string, accessEventId?: number)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t\taccessEventId,\n\t} as ImgData\n}","import { useEffect } from \"react\";\nimport { Font } from \"../api/dataTypes\";\n\nexport default function useFont(font: Font)\n{\n\tconst fontName = `${font.id}_${font.name}`;\n\tuseEffect(() =>\n\t{\n\t\tconst myFont = newFontFace(fontName, font.id, font.type);\n\t\tdocument.fonts.add(myFont);\n\t\treturn () =>\n\t\t{\n\t\t\tdocument.fonts.delete(myFont);\n\t\t}\n\t}, []);\n\treturn `\"${fontName}\"`;\n}\n\nexport function newFontFace(family: string, id: number, type: keyof typeof fontTypes)\n{\n\treturn new FontFace(family, `url(\"/api/fonts/${id}\")  format(\"${fontTypes[type]}\")`);\n}\n\nconst fontTypes = {\n\totf: \"opentype\",\n\tttf: \"truetype\",\n\twoff: \"woff\",\n\twoff2: \"woff2\",\n}\n","import { Font, Ticket } from \"../../api/dataTypes\";\nimport type { UpdateTicketTypeData } from \"../../api/ticketTypes\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport QRCode from \"qrcode\"\nimport { newFontFace } from \"../../utils/useFont\";\n\nexport class TicketEditor\n{\n\tprivate editor: Editor | null = null;\n\tprivate img: HTMLImageElement | null = null;\n\tprivate imgQr = new Image();\n\tprivate imgFile: File | null = null;\n\tprivate data: TicketPattern = { width: 0, height: 0, objects: [] };\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate loadingImg = false;\n\tprivate loadingFont = false;\n\tprivate loadingFonts: FontFace[] = [];\n\tprivate get loading() { return this.loadingImg || this.loadingFont; }\n\tprivate ticket: Ticket | null = null;\n\tprivate fonts: { id: number, font: FontFace }[] = [];\n\tprivate listenerResize = () => this.draw();\n\tprivate listenerKeydown = (e: KeyboardEvent) => { if (e.key == \"Delete\") if (this.editor?.deleteSelectedObj()) this.draw(); };\n\tprivate listenerMouseDown = (e: MouseEvent) => { if (this.editor?.mouseDown(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerMouseMove = (e: MouseEvent) => { if (this.editor?.mouseMove(e.offsetX, e.offsetY)) this.draw() };\n\tprivate listenerMouseUp = (e: MouseEvent) => { if (this.editor?.mouseUp(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerContextMenu = (e: MouseEvent) => { e.preventDefault(); };\n\tprivate listenerWheel = (e: WheelEvent) => { e.preventDefault(); if (this.editor?.wheel(e.offsetX, e.offsetY, e.deltaY)) this.draw() };\n\tprivate inspectorSet: InspectorSetFunc = () => { };\n\n\tconstructor(private fontTypes: FontTypes | null, init = true, private viewMode = false)\n\t{\n\t\tif (!init || viewMode) return;\n\t\twindow.addEventListener(\"resize\", this.listenerResize);\n\t\twindow.addEventListener(\"keydown\", this.listenerKeydown);\n\t}\n\n\tpublic static renderQRCode(code: string, color: string, callback: (img: HTMLImageElement) => void)\n\t{\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10, margin: 2, color: { light: \"#ffffff00\", dark: color } }, (e, url) =>\n\t\t{\n\t\t\tif (e) console.error(e);\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener(\"load\", () =>\n\t\t\t{\n\t\t\t\tcallback(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tpublic setData(image: number | null, data: TicketPattern)\n\t{\n\t\tthis.img = null;\n\t\tthis.imgFile = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t\tthis.data = data || this.createNewData();\n\n\t\t// update data from prev version\n\t\tthis.data.objects.forEach(v => v.f == undefined ? v.f = -1 : {});\n\n\t\tif (!this.data.objects.find(v => v.type == \"code\"))\n\t\t\tthis.data.objects.push({ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 });\n\n\t\tthis.editor = null;\n\t\tthis.reRenderQR();\n\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t\tthis.editor?.setViewTicket(ticket);\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setNewImage(image: File)\n\t{\n\t\tthis.imgFile = image;\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tURL.revokeObjectURL(url);\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tconst url = URL.createObjectURL(image)\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = url;\n\t}\n\tpublic setImage(image: number | null)\n\t{\n\t\tthis.imgFile = null;\n\t\tthis.img = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t}\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.removeCanvasListeners();\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\n\t\tif (this.viewMode) return;\n\n\t\tcanvas.addEventListener(\"mousedown\", this.listenerMouseDown);\n\t\tcanvas.addEventListener(\"mousemove\", this.listenerMouseMove);\n\t\tcanvas.addEventListener(\"mouseup\", this.listenerMouseUp);\n\t\tcanvas.addEventListener(\"wheel\", this.listenerWheel);\n\t\tcanvas.addEventListener(\"contextmenu\", this.listenerContextMenu);\n\t}\n\tpublic setInspector(f: InspectorSetFunc)\n\t{\n\t\tthis.inspectorSet = f;\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tthis.editor?.inspectorInput(field, value);\n\t\tif (field == \"f\")\n\t\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic reset()\n\t{\n\t\tthis.editor = null;\n\t\tthis.img = null;\n\t\tthis.imgQr = new Image();\n\t\tthis.imgFile = null;\n\t\tthis.data = { width: 0, height: 0, objects: [] };\n\t\tthis.loadingImg = false;\n\t\tthis.loadingFont = false;\n\t\tthis.ticket = null;\n\t\tthis.inspectorSet(null);\n\t\tthis.draw();\n\t}\n\tpublic async getData(imageName: string, eventId: number)\n\t{\n\t\treturn {\n\t\t\tpattern: this.data,\n\t\t\timg: this.imgFile ? await imagefileToData(this.imgFile, imageName, eventId) : null,\n\t\t} as UpdateTicketTypeData\n\t}\n\tpublic destroy()\n\t{\n\t\twindow.removeEventListener(\"resize\", this.listenerResize);\n\t\twindow.removeEventListener(\"keydown\", this.listenerKeydown);\n\t\tthis.removeCanvasListeners();\n\t\tthis.inspectorSet(null);\n\t}\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.editor?.drawObject(obj);\n\t\tthis.draw();\n\t}\n\tpublic resetZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.resetZoom();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\tpublic fitZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.fitToView();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners()\n\t{\n\t\tif (this.canvas)\n\t\t{\n\t\t\tthis.canvas.removeEventListener(\"mousedown\", this.listenerMouseDown);\n\t\t\tthis.canvas.removeEventListener(\"mousemove\", this.listenerMouseMove);\n\t\t\tthis.canvas.removeEventListener(\"mouseup\", this.listenerMouseUp);\n\t\t\tthis.canvas.removeEventListener(\"wheel\", this.listenerWheel);\n\t\t\tthis.canvas.removeEventListener(\"contextmenu\", this.listenerContextMenu);\n\t\t}\n\t}\n\n\tprivate loadImage(image: number)\n\t{\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = `/api/img/${image}`;\n\t}\n\n\tprivate loadFonts()\n\t{\n\t\tthis.loadingFont = true;\n\t\tif (!this.fontTypes) return;\n\n\t\tconst reqFonts = this.data.objects.map(v => v.f);\n\t\t// delete unused fonts\n\t\tfor (let i = this.fonts.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst font = this.fonts[i];\n\t\t\tif (!reqFonts.includes(font.id))\n\t\t\t{\n\t\t\t\tdocument.fonts.delete(font.font);\n\t\t\t\tthis.fonts.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t// load new fonts\n\n\t\tconst loadedFonts = this.fonts.map(v => v.id);\n\t\tfor (const obj of this.data.objects)\n\t\t{\n\t\t\tif (obj.f < 0 || loadedFonts.includes(obj.f))\n\t\t\t\tcontinue\n\t\t\tconst font = newFontFace(`font_${obj.f}`, obj.f, this.fontTypes[obj.f]);\n\t\t\tthis.fonts.push({ id: obj.f, font });\n\t\t\tthis.loadingFonts.push(font);\n\t\t\tdocument.fonts.add(font);\n\t\t\tfont.load().then(() =>\n\t\t\t{\n\t\t\t\tthis.loadingFonts.splice(this.loadingFonts.indexOf(font), 1)\n\t\t\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t\t\t\tif (!this.loadingFont)\n\t\t\t\t\tthis.draw();\n\t\t\t});\n\t\t}\n\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t}\n\n\tprivate reRenderQR()\n\t{\n\t\tconst color = this.data.objects.find(v => v.type == \"qr\")?.c || \"#000000\";\n\t\tTicketEditor.renderQRCode(this.ticket?.code || \"23-31224-34-07-4321\", color, img =>\n\t\t{\n\t\t\tthis.imgQr = img;\n\t\t\tif (this.editor)\n\t\t\t{\n\t\t\t\tthis.editor.setQr(img);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setCursor(cursor: Cursor)\n\t{\n\t\tif (!this.canvas) return;\n\t\tthis.canvas.style.cursor = cursor;\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas) return;\n\t\tconst parent = this.canvas.parentElement;\n\t\tif (!parent) return;\n\n\t\tlet w = parent.clientWidth;\n\t\tlet h = parent.clientHeight;\n\t\tif (this.viewMode && this.img && !this.loading)\n\t\t{\n\t\t\tw = this.data.width;\n\t\t\th = this.data.height;\n\t\t}\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.style.width = `${w}px`;\n\t\tthis.canvas.height = h;\n\t\tthis.canvas.style.height = `${h}px`;\n\n\t\tif (!this.ctx) return;\n\t\tthis.ctx.fillStyle = \"#00000033\";\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (!this.img || this.loading)\n\t\t{\n\t\t\tthis.ctx.fillStyle = \"black\";\n\t\t\tconst text = this.loading ? \"Загрузка\" : (this.viewMode ? \"Этот тип билетов\\nне настроен\" : \"Загрузите картинку\");\n\t\t\tthis.drawTextAtCenter(text, 32);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor)\n\t\t{\n\t\t\tthis.editor = new Editor(this.img, this.data, this.reRenderQR.bind(this), this.setCursor.bind(this), this.inspectorSet, this.imgQr, this.viewMode)\n\t\t\tthis.editor.setCanvasSize({ w, h });\n\t\t\tthis.editor.fitToView();\n\t\t}\n\t\tthis.editor.setCanvasSize({ w, h });\n\t\tthis.ctx.imageSmoothingEnabled = false;\n\t\tif (this.ticket)\n\t\t\tthis.editor.setViewTicket(this.ticket);\n\t\tthis.editor.draw(this.ctx)\n\t}\n\n\tprivate drawTextAtCenter(text: string, size: number)\n\t{\n\t\tif (!this.ctx || !this.canvas) return;\n\t\tconst w = this.canvas.width;\n\t\tconst h = this.canvas.height;\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.font = `${size}px Arial`;\n\t\tconst lines = text.split(\"\\n\");\n\t\tconst dy = -lines.length * size * 0.8 / 2;\n\t\tconst ddy = lines.length * size * 0.8;\n\t\tfor (let i = 0; i < lines.length; i++)\n\t\t\tthis.ctx.fillText(lines[i], w / 2, h / 2 + dy + ddy * i);\n\t}\n\n\tprivate createNewData()\n\t{\n\t\treturn {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tobjects: [\n\t\t\t\t{ type: \"qr\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"name\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"promo\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t],\n\t\t} as TicketPattern;\n\t}\n}\n\nexport interface FontTypes\n{\n\t[id: number]: Font[\"type\"];\n}\n\nexport interface TicketPattern\n{\n\twidth: number,\n\theight: number,\n\tobjects: TicketPatternObject[],\n}\nexport interface TicketPatternObject\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tc: string, // color\n\tf: number, // font\n\ttype: TicketPatternObjectType,\n}\ntype TicketPatternObjectType = \"qr\" | \"name\" | \"promo\" | \"code\";\n\ntype InspectorSetFunc = (obj: TicketPatternObject | null) => void;\ntype InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) => void;\n\ntype MoveMode = null | \"view\" | \"obj\" | \"resize\";\ntype Cursor = \"default\" | \"move\" | \"n-resize\" | \"e-resize\" | \"ne-resize\" | \"nw-resize\";\n\n\nclass Editor\n{\n\tprivate transform = { x: 0, y: 0, s: 1 };\n\tprivate moving = { sx: 0, sy: 0, vx: 0, vy: 0, vw: 0, vh: 0, mode: null as MoveMode };\n\tprivate drawing = { sx: 0, sy: 0, ex: 0, ey: 0, active: false, type: null as TicketPatternObjectType | null };\n\tprivate resizing = { dir: [0, 0] as RectZone, keepAspect: false, aspect: 1 };\n\tprivate canvasSize = { w: 0, h: 0 };\n\tprivate selected = -1;\n\tprivate readonly selectionBorder = 16;\n\tprivate ticket: Ticket | null = null;\n\n\tconstructor(\n\t\tprivate img: HTMLImageElement,\n\t\tprivate data: TicketPattern,\n\t\tprivate reRenderQR: () => void,\n\t\tprivate setCursor: (cursor: Cursor) => void,\n\t\tprivate setInspector: InspectorSetFunc,\n\t\tprivate imgqr: HTMLImageElement,\n\t\tprivate viewMode: boolean,\n\t)\n\t{\n\t\tdata.width = img.width;\n\t\tdata.height = img.height;\n\t}\n\n\tpublic fitToView()\n\t{\n\t\tconst m = this.viewMode ? 0 : 100;\n\t\tthis.transform.s = Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height);\n\t\tthis.transform.x = (this.canvasSize.w - this.img.width * this.transform.s) / 2;\n\t\tthis.transform.y = (this.canvasSize.h - this.img.height * this.transform.s) / 2;\n\t\tthis.restrictView();\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tif (this.selected < 0) return;\n\t\tconst obj = this.data.objects[this.selected]\n\t\tconst fs = [\"x\", \"y\", \"w\", \"h\", \"f\"] as const;\n\t\tif (fs.includes(field as any))\n\t\t{\n\t\t\tconst f = field as typeof fs[number];\n\t\t\tconst v = value as number;\n\t\t\tobj[f] = Math.max(v, 0);\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (f == \"w\") obj.h = obj.w;\n\t\t\t\tif (f == \"h\") obj.w = obj.h;\n\t\t\t}\n\t\t}\n\t\telse if (field == \"c\")\n\t\t{\n\t\t\tobj[field] = value;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tthis.reRenderQR();\n\t\t}\n\t}\n\tpublic setCanvasSize(size: { w: number, h: number })\n\t{\n\t\tthis.canvasSize = size;\n\t}\n\tpublic setQr(qr: HTMLImageElement)\n\t{\n\t\tthis.imgqr = qr;\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.x, this.transform.y);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tctx.fillStyle = \"black\"\n\t\tctx.fillRect(0, 0, this.img.width, this.img.height);\n\t\tctx.drawImage(this.img, 0, 0);\n\n\t\tconst texts = {\n\t\t\tname: this.ticket?.personName ?? \"Иванов Иван Иванович 太阳\",\n\t\t\tpromo: this.ticket?.promocode ?? \"Неутомимый\",\n\t\t\tcode: this.ticket?.code ?? \"23-31224-34-07-4321\",\n\t\t}\n\n\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t{\n\t\t\tconst obj = this.data.objects[i];\n\t\t\t// ctx.fillStyle = \"#ffffff88\";\n\t\t\t// ctx.fillRect(...unwrapRect(obj));\n\t\t\tctx.fillStyle = obj.c;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (this.imgqr.complete && this.imgqr.naturalHeight != 0)\n\t\t\t\t\tctx.drawImage(this.imgqr, ...unwrapRect(obj));\n\t\t\t\telse\n\t\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\telse if (obj.type == \"name\" || obj.type == \"promo\" || obj.type == \"code\")\n\t\t\t{\n\t\t\t\tconst font = `font_${obj.f}, Arial`;\n\t\t\t\tctx.font = `${obj.h}px ${font}`;\n\t\t\t\tctx.fillText(texts[obj.type], obj.x, obj.y + obj.h * 0.8, obj.w);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\tif (this.selected == i)\n\t\t\t{\n\t\t\t\tctx.strokeStyle = \"orange\";\n\t\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\t\tctx.strokeRect(...unwrapRect(obj));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\tctx.strokeStyle = \"white\";\n\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\tlet w = this.drawing.ex - this.drawing.sx;\n\t\t\tlet h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (this.drawing.type == \"qr\")\n\t\t\t\th = w;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t\tctx.strokeStyle = \"black\";\n\t\t\tctx.lineWidth = 2 / this.transform.s;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.drawing.type = obj;\n\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t}\n\n\tpublic deleteSelectedObj()\n\t{\n\t\tif (this.selected < 0)\n\t\t\treturn false;\n\n\t\tconst obj = this.data.objects[this.selected];\n\t\tobj.x = 0;\n\t\tobj.y = 0;\n\t\tobj.w = 0;\n\t\tobj.h = 0;\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t\treturn true;\n\t}\n\n\tpublic resetZoom()\n\t{\n\t\tthis.transform.s = 1;\n\t\tthis.restrictView();\n\t}\n\n\tpublic mouseDown(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.sx = x;\n\t\tthis.moving.sy = y;\n\t\tif (button == 2)\n\t\t{\n\t\t\tthis.moving.vx = this.transform.x;\n\t\t\tthis.moving.vy = this.transform.y;\n\t\t\tthis.moving.mode = \"view\";\n\t\t\tthis.setCursor(\"move\");\n\t\t\treturn;\n\t\t}\n\t\tif (button == 0)\n\t\t{\n\t\t\tif (this.drawing.type)\n\t\t\t{\n\t\t\t\t[this.drawing.sx, this.drawing.sy] = this.pointToWorld(x, y);\n\t\t\t\tthis.drawing.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t\t{\n\t\t\t\tconst obj = this.data.objects[i];\n\t\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\t\tlet resize = false;\n\t\t\t\tif (this.selected == i)\n\t\t\t\t{\n\t\t\t\t\tthis.resizing.dir = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\t\t\tresize = this.resizing.dir[0] != 0 || this.resizing.dir[1] != 0;\n\t\t\t\t\tthis.resizing.aspect = obj.h / obj.w;\n\t\t\t\t\tthis.resizing.keepAspect = obj.type == \"qr\";\n\t\t\t\t}\n\t\t\t\tif (pointInRect(wx, wy, obj) || resize)\n\t\t\t\t{\n\t\t\t\t\tthis.selected = i;\n\t\t\t\t\tthis.setInspector(obj);\n\t\t\t\t\tthis.moving.vx = obj.x;\n\t\t\t\t\tthis.moving.vy = obj.y;\n\t\t\t\t\tthis.moving.vw = obj.w;\n\t\t\t\t\tthis.moving.vh = obj.h;\n\t\t\t\t\tthis.moving.mode = resize ? \"resize\" : \"obj\";\n\t\t\t\t\tthis.setCursor(resize ? resizeCursor(this.resizing.dir) : \"move\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst redraw = this.selected >= 0;\n\t\t\tthis.selected = -1;\n\t\t\tthis.setInspector(null);\n\t\t\treturn redraw;\n\t\t}\n\t}\n\n\tpublic mouseMove(x: number, y: number)\n\t{\n\t\tif (this.moving.mode == \"view\")\n\t\t{\n\t\t\tthis.transform.x = this.moving.vx + (x - this.moving.sx);\n\t\t\tthis.transform.y = this.moving.vy + (y - this.moving.sy);\n\t\t\tthis.restrictView();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"obj\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tobj.x = this.moving.vx + (x - this.moving.sx) / this.transform.s;\n\t\t\tobj.y = this.moving.vy + (y - this.moving.sy) / this.transform.s;\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"resize\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst dx = (x - this.moving.sx) / this.transform.s;\n\t\t\tconst dy = (y - this.moving.sy) / this.transform.s;\n\t\t\tconst [rx, ry] = this.resizing.dir;\n\t\t\tif (this.resizing.keepAspect)\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx == 0)\n\t\t\t\t{\n\t\t\t\t\tif (ry > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t\t}\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t\t}\n\t\t\t\t\tobj.w = obj.h / this.resizing.aspect;\n\t\t\t\t\tobj.x = this.moving.vx - (obj.w - this.moving.vw) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t}\n\t\t\t\tif (ry > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t}\n\t\t\t\tif (ry < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.w = Math.max(obj.w, 5);\n\t\t\tobj.h = Math.max(obj.h, 5);\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.selected >= 0)\n\t\t{\n\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst resize = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\tif (resize[0] != 0 || resize[1] != 0)\n\t\t\t\tthis.setCursor(resizeCursor(resize));\n\t\t\telse\n\t\t\t\tthis.setCursor(\"default\");\n\t\t}\n\t}\n\n\tpublic mouseUp(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.mode = null;\n\t\tthis.setCursor(\"default\");\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects.find(v => v.type == this.drawing.type);\n\t\t\tif (!obj)\n\t\t\t{\n\t\t\t\tconsole.error(\"Ticket editor: drawing obj not found\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tobj.x = this.drawing.sx;\n\t\t\tobj.y = this.drawing.sy;\n\t\t\tobj.w = this.drawing.ex - this.drawing.sx;\n\t\t\tobj.h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (obj.w < 0)\n\t\t\t{\n\t\t\t\tobj.x += obj.w;\n\t\t\t\tobj.w *= -1;\n\t\t\t}\n\t\t\tif (obj.h < 0)\n\t\t\t{\n\t\t\t\tobj.y += obj.h;\n\t\t\t\tobj.h *= -1;\n\t\t\t}\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.drawing.active = false;\n\t\t\tthis.drawing.type = null;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tobj.h = obj.w;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic wheel(x: number, y: number, d: number)\n\t{\n\t\tconst X = (x - this.transform.x) / this.transform.s;\n\t\tconst Y = (y - this.transform.y) / this.transform.s;\n\n\t\tif (d > 0)\n\t\t\tthis.transform.s /= 1.1;\n\t\telse\n\t\t\tthis.transform.s *= 1.1;\n\t\tconst m = 200;\n\t\tthis.transform.s = Math.max(this.transform.s, Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height));\n\n\t\tthis.transform.x = x - X * this.transform.s;\n\t\tthis.transform.y = y - Y * this.transform.s;\n\t\tthis.restrictView();\n\t\treturn true;\n\t}\n\n\tprivate restrictView()\n\t{\n\t\tconst m = 100;\n\t\tconst iw = this.img.width * this.transform.s\n\t\tconst ih = this.img.height * this.transform.s\n\t\tif (iw > this.canvasSize.w)\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + this.canvasSize.w - m), m);\n\t\telse\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + m), this.canvasSize.w - m);\n\t\tif (ih > this.canvasSize.h)\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + this.canvasSize.h - m), m);\n\t\telse\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + m), this.canvasSize.h - m);\n\t}\n\n\tprivate pointToWorld(x: number, y: number)\n\t{\n\t\treturn [(x - this.transform.x) / this.transform.s, (y - this.transform.y) / this.transform.s];\n\t}\n\tprivate pointToScreen(x: number, y: number)\n\t{\n\t\treturn [x * this.transform.s + this.transform.x, y * this.transform.s + this.transform.y];\n\t}\n}\n\ninterface Rect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\n\nfunction pointInRect(x: number, y: number, rect: Rect)\n{\n\treturn x > rect.x && x < rect.x + rect.w &&\n\t\ty > rect.y && y < rect.y + rect.h;\n}\n\ntype RectZone = [number, number];  // [x, y] 1 - bottom, right; -1 = top, left\nfunction rectZone(x: number, y: number, rect: Rect, border: number): RectZone\n{\n\tconst r = [0, 0] as RectZone;\n\n\tif (!pointInRect(x, y, { x: rect.x - border, y: rect.y - border, w: rect.w + border * 2, h: rect.h + border * 2 }))\n\t\treturn r;\n\n\tif (Math.abs(x - rect.x) <= border) r[0] = -1;\n\tif (Math.abs(x - (rect.x + rect.w)) <= border) r[0] = 1;\n\tif (Math.abs(y - rect.y) <= border) r[1] = -1;\n\tif (Math.abs(y - (rect.y + rect.h)) <= border) r[1] = 1;\n\n\treturn r;\n}\nfunction resizeCursor(direction: RectZone): Cursor\n{\n\tconst [x, y] = direction;\n\tif (x == 0)\n\t{\n\t\tif (y == 0) return \"default\"; // none\n\t\tif (y > 0) return \"n-resize\"; // down\n\t\treturn \"n-resize\"; // up\n\t}\n\tif (x > 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // right\n\t\tif (y > 0) return \"nw-resize\"; // down-right\n\t\treturn \"ne-resize\"; // up-right\n\t}\n\tif (x < 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // left\n\t\tif (y > 0) return \"ne-resize\"; // down-left\n\t\treturn \"nw-resize\"; // up-left\n\t}\n\treturn \"default\"; // none\n}\n\nfunction unwrapRect({ x, y, w, h }: Rect): [number, number, number, number]\n{\n\treturn [x, y, w, h];\n}\n","import { useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport type { TicketEditor, TicketPatternObject } from \"./editor\";\nimport classNames from \"../../utils/classNames\";\nimport { Font } from \"../../api/dataTypes\";\n\ntype E = React.ChangeEvent<HTMLInputElement>;\n\nexport function Inspector({ editor, fonts }: InspectorProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [obj, setObj] = useState<TicketPatternObject | null>(null);\n\tconst update = () => setUpdate(v => v + 1);\n\teditor.setInspector(obj =>\n\t{\n\t\tsetObj(obj);\n\t\tupdate();\n\t});\n\n\treturn (\n\t\t<div className={classNames(styles.inspector, obj && styles.inspector_open)}>\n\t\t\t<h2>{{\n\t\t\t\t\"qr\": \"QR код\",\n\t\t\t\t\"code\": \"Код билета\",\n\t\t\t\t\"name\": \"Посетитель\",\n\t\t\t\t\"promo\": \"Промокод\",\n\t\t\t\t\"\": \"\",\n\t\t\t}[obj?.type || \"\"]}</h2>\n\t\t\t<div className={styles.fields}>\n\t\t\t\t<label>\n\t\t\t\t\t<span>X:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.x || 0} onInput={(e: E) => { editor.inspectorInput(\"x\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Y:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.y || 0} onInput={(e: E) => { editor.inspectorInput(\"y\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Ширина:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.w || 0} onInput={(e: E) => { editor.inspectorInput(\"w\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Высота:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.h || 0} onInput={(e: E) => { editor.inspectorInput(\"h\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<label className={styles.colorInput}>\n\t\t\t\t<span>Цвет:</span>\n\t\t\t\t<input type=\"color\" value={obj?.c || \"#000000\"} onInput={(e: E) => { editor.inspectorInput(\"c\", e.target.value); update(); }} />\n\t\t\t</label>\n\t\t\t{obj?.type != \"qr\" &&\n\t\t\t\t<label className={styles.fontInput}>\n\t\t\t\t\t<span>Шрифт:</span>\n\t\t\t\t\t<select value={obj?.f || -1} onChange={e => { editor.inspectorInput(\"f\", parseInt(e.target.value) || -1); update(); }}>\n\t\t\t\t\t\t<option value={-1}>Arial</option>\n\t\t\t\t\t\t{fonts.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\ninterface InspectorProps\n{\n\teditor: TicketEditor,\n\tfonts: Font[],\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Font } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPostForm } from \"../utils/fetch\";\nimport { queryListAddItem } from \"../utils/query\";\n\nexport function useFonts()\n{\n\treturn useQuery(\"fonts\", async () =>\n\t\tawait fetchJsonGet<Font[]>(\"/api/fonts\")\n\t);\n}\n\nexport function useMutationNewFont(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (fontData: NewFontData) =>\n\t\t{\n\t\t\tconst formData = new FormData();\n\t\t\tformData.set(\"name\", fontData.name);\n\t\t\tformData.set(\"type\", fontData.type);\n\t\t\tformData.set(\"font\", fontData.file);\n\n\t\t\treturn await fetchPostForm<Font>(\"/api/fonts\", formData);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"fonts\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewFontData\n{\n\tname: string,\n\ttype: string,\n\tfile: File,\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateTicketType, useTicketType } from \"../../api/ticketTypes\";\nimport { FontTypes, TicketEditor } from \"./editor\";\nimport { Inspector } from \"./inspector\";\nimport { useFonts } from \"../../api/fonts\";\n\nexport default function TicketTypeEditor({ typeId, eventId, open, close }: EditTicketTypeFormProps)\n{\n\tconst editor = useEditor();\n\tconst mutation = useMutationUpdateTicketType(typeId, close);\n\tconst ttype = useTicketType(typeId);\n\tconst fonts = useFonts();\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\tconst [imageSelection, setImageSelection] = useState(false);\n\tconst [isNewImage, setIsNewImage] = useState(false);\n\tconst noImage = ttype.data?.imageId == null;\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetImageSelection(false);\n\t\t\tsetIsNewImage(false);\n\t\t\teditor.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\tsetImageSelection(!ttype.data?.imageId)\n\t\t}\n\t}, [ttype.data, open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактор билета\">\n\t\t\t{displayError(ttype)}\n\t\t\t{displayError(fonts)}\n\t\t\t{displayError(mutation)}\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.root}>\n\t\t\t\t<div className={styles.canvas}>\n\t\t\t\t\t<canvas ref={refCanvas} />\n\t\t\t\t\t<Inspector editor={editor} fonts={fonts.data || []} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.panel}>\n\t\t\t\t\t<span>Нарисовать объекты:</span>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"qr\")}>QR код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"code\")}>Код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"name\")}>Имя посетителя</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"promo\")}>Промокод</button>\n\t\t\t\t\t<span className={styles.br}></span>\n\t\t\t\t\t<button className=\"button icon\" onClick={() => editor.fitZoom()}>fit_screen</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.resetZoom()}>1:1</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{imageSelection ? <>\n\t\t\t\t\t\t\t{!noImage && <button className=\"button\" onClick={() => setImageSelection(false)}>Отмена</button>}\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={e =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files[0])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\teditor.setNewImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\t\tsetImageSelection(false);\n\t\t\t\t\t\t\t\t\t\tsetIsNewImage(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} accept=\"image/png, image/jpeg, image/gif\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => setImageSelection(true)}>Изменить картинку</button>\n\t\t\t\t\t\t\t{isNewImage && !noImage && <button className=\"button\" onClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetIsNewImage(false);\n\t\t\t\t\t\t\t\teditor.setImage(ttype.data?.imageId || null)\n\t\t\t\t\t\t\t}}>Отменить изменение картинки</button>}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => close?.()}>Отмена</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = await editor.getData(`ticket_${typeId}`, eventId);\n\t\t\t\t\t\t\tmutation.mutate(data);\n\t\t\t\t\t\t}}>Сохранить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport function useEditor(viewMode = false)\n{\n\tconst [_, setUpdate] = useState(0);\n\tconst fonts = useFonts();\n\tlet fontTypes: FontTypes | null = null;\n\tif (fonts.data)\n\t{\n\t\tfontTypes = {};\n\t\tfor (const font of fonts.data || [])\n\t\t\tfontTypes[font.id] = font.type;\n\t}\n\n\tconst editor = useRef(new TicketEditor(fontTypes, false, viewMode));\n\tuseEffect(() =>\n\t{\n\t\teditor.current = new TicketEditor(fontTypes, true, viewMode);\n\t\tsetUpdate(v => v + 1);\n\t\treturn () => editor.current.destroy();\n\t}, [viewMode, fonts.data]);\n\n\treturn editor.current;\n}\n\ninterface EditTicketTypeFormProps extends PopupProps\n{\n\teventId: number,\n\ttypeId: number,\n}\n","import { useEffect, useRef } from \"react\";\nimport { useEditor } from \".\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport Spinner from \"../Spinner\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function TicketViewer({ ticket }: TicketViewerProps)\n{\n\tconst editor = useEditor(true);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) editor.reset();\n\t}, [ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (ticket && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\teditor.setViewTicket(ticket);\n\t\t}\n\t}, [ttype.data, ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<div style={{ minWidth: 400, minHeight: 300 }}>\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{displayError(ttype)}\n\t\t\t<canvas ref={refCanvas} />\n\t\t</div>\n\t)\n}\n\ninterface TicketViewerProps\n{\n\tticket: Ticket | null,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicketSimple({ event, ticket, close }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={close} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}","import { useState } from \"react\";\nimport Popup from \"../Popup\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport TicketViewer from \"../TicketEditor/viewer\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport ViewTicketSimple from \"./simple\";\n\nexport default function ViewTicket({ ticket, event, close }: ViewTicketProps)\n{\n\tconst [simpleViewer, setSimpleViewer] = useState<Ticket | null>(null);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\n\treturn (<>\n\t\t<Popup open={!!ticket && !simpleViewer} close={close} title=\"Просмотр билета\">\n\t\t\t<TicketViewer ticket={ticket} />\n\t\t\t{ttype.data && !ttype.data.imageId && <div style={{ textAlign: \"center\" }}>\n\t\t\t\t<button className=\"button\" onClick={() => setSimpleViewer(ticket)}>Сгенерировать qr код</button>\n\t\t\t</div>}\n\t\t</Popup>\n\t\t<ViewTicketSimple ticket={simpleViewer} event={event} close={() => { setSimpleViewer(null); close() }} />\n\t</>\n\t)\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/staff\"),\n\t);\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(`/api/events/${eventId}/staff`),\n\t);\n}\n\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (staffData: StaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd[]>(`/api/events/${eventId}/staff`, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newStaffData: NewStaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/staff\", newStaffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/staff/\" + staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"events\", staffId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(`/api/staff/${staffId}/reset_password`),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\nimport { useTicketStats } from \"../../api/tickets\";\nimport TicketTypeEditor from \"../../components/TicketEditor\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editTypeFormOpen, setEditTypeFormOpen] = useState(-1);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst stats = useTicketStats(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\tconst stats_sum = (stats.data || []).reduce((p, v) =>\n\t{\n\t\tp.count += v.count;\n\t\tp.scanned += v.scanned;\n\t\tp.authOnPltf += v.authOnPltf;\n\t\treturn p;\n\t}, {\n\t\tcount: 0,\n\t\tscanned: 0,\n\t\tauthOnPltf: 0,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t\t<TicketTypeEditor typeId={editTypeFormOpen} eventId={parseInt(eventId)} open={editTypeFormOpen >= 0} close={() => setEditTypeFormOpen(-1)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t<div className={styles.ticketTypes}>\n\t\t\t\t\t\t\t\t{ticketTypes.data?.map(v =>\n\t\t\t\t\t\t\t\t\t<Fragment key={v.id}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button button_small icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: \"0.5em\", color: v.pattern ? \"green\" : \"\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditTypeFormOpen(v.id)}\n\t\t\t\t\t\t\t\t\t\t\t>edit_square</button>\n\t\t\t\t\t\t\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (!stats.data) return <><div></div><div></div><div></div></>;\n\t\t\t\t\t\t\t\t\t\t\tconst data = stats.data?.find(s => s.typeId == v.id);\n\t\t\t\t\t\t\t\t\t\t\tconst count = data?.count || 0;\n\t\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{count}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(count || 0, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.scanned}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.scanned || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.authOnPltf}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.authOnPltf || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{stats.data && <>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span>Всего</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.count}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.scanned}</span>\n\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.scanned, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.authOnPltf}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.authOnPltf, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{stats.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(stats, error => <div>{error}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n\nfunction calcPercent(v: number, all: number)\n{\n\tif (all == 0) return 0;\n\treturn Math.floor(v / all * 100);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"event\":\"styles_event__AM1vG\",\"title\":\"styles_title__Vipq0\",\"activeMark\":\"styles_activeMark__zBB4P\",\"toggle\":\"styles_toggle__1O26V\",\"toggleInp\":\"styles_toggleInp__s3up7\",\"eventInfo\":\"styles_eventInfo__GuWN-\",\"access\":\"styles_access__1bK7b\"};","import { useEventsFull, useMutationGetAccessToEvent } from \"../../api/events\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport { dateToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"События\");\n\tconst user = useUser();\n\tconst events = useEventsFull()\n\tconst getAccessToEvent = useMutationGetAccessToEvent();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{events.isLoading && <h3>Загрузка</h3>}\n\t\t\t{!events.isLoading && events.isFetching && <h3>Обновление</h3>}\n\t\t\t{getAccessToEvent.isLoading && <Spinner />}\n\t\t\t{displayError(events)}\n\t\t\t{displayError(getAccessToEvent)}\n\t\t\t{events.data?.map(v => <div className={styles.event} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{dateToString(v.date)}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<div className={styles.activeMark} style={{ backgroundColor: v.active ? \"green\" : \"tomato\" }} title=\"active\"></div>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.eventInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.access}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>\n\t\t\t\t\t\t\t\t<div>{o.login}</div>\n\t\t\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{o.id}</div>\n\t\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t\t<div>{o.name}</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!v.access.some(v => v.id == user.data?.id) &&\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button button_light button_small\"\n\t\t\t\t\t\t\tstyle={{ alignSelf: \"end\" }}\n\t\t\t\t\t\t\tonClick={() => getAccessToEvent.mutate(v.id)}\n\t\t\t\t\t\t>Get access</button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t\t}\n\t\t</Layout >\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName=\"button button_large space_between\"\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationNewFont } from \"../../api/fonts\";\n\nexport default function CreateFontForm({ open, close }: PopupProps)\n{\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_file = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewFont(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_file.current)\n\t\t{\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_file.current.value = \"\";\n\t\t}\n\t}, [open, inp_name, inp_file]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление шрифта\">\n\t\t\t{displayError(mutation, undefined, er => er.includes(\"already exist\") ? \"Шрифт с таким названием уже существует\" : er)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst file = inp_file.current?.files?.[0];\n\t\t\t\tif (name && file)\n\t\t\t\t\tmutation.mutate({ file, name, type: file.name.split(\".\").at(-1) || \"\" });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Файл\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={inp_file}\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".ttf,.otf,.woff,.woff2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst name = inp_name.current;\n\t\t\t\t\t\t\tconst file = inp_file.current;\n\t\t\t\t\t\t\tif (!name || !file) return;\n\t\t\t\t\t\t\tconst filename = file.files?.[0]?.name || \"\";\n\t\t\t\t\t\t\tconst splited = filename.split(\".\")\n\t\t\t\t\t\t\tconst fontName = splited.length == 1 ? splited : splited.slice(0, -1);\n\t\t\t\t\t\t\tname.value = fontName.join(\".\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { useState } from \"react\";\nimport { useFonts } from \"../../api/fonts\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateFontForm from \"../../components/create/CreateFontForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { Font } from \"../../api/dataTypes\";\nimport useFont from \"../../utils/useFont\";\n\nexport default function FontsPage()\n{\n\tuseTitle(\"Шрифты\");\n\tconst [createFontOpen, setCreateFontOpen] = useState(false);\n\tconst [exampleText, setExampleText] = useState(\"Мыши булочки жевали!\");\n\tconst fonts = useFonts();\n\n\treturn (\n\t\t<Layout centeredPage gap={12}>\n\t\t\t<h1>Шрифты</h1>\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{displayError(fonts)}\n\n\t\t\t<input type=\"text\" value={exampleText} onInput={e => setExampleText((e.target as HTMLInputElement).value)} />\n\n\t\t\t{fonts.data?.map(v => <FontPreview key={v.id} font={v} text={exampleText} />)}\n\n\t\t\t{useHasPermission(\"add_font\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFontOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateFontForm open={createFontOpen} close={() => setCreateFontOpen(false)} />\n\t\t</Layout>\n\t);\n}\n\nfunction FontPreview({ font, text }: { font: Font, text: string })\n{\n\tconst fontName = useFont(font);\n\treturn <div className=\"space_between\" style={{ fontFamily: fontName, fontSize: \"1.2rem\", gap: \"0 1rem\", flexWrap: \"wrap\" }}>\n\t\t<span>{font.name}</span>\n\t\t<span>{text}</span>\n\t</div>\n}\n","import { useQuery } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", async () =>\n\t{\n\t\tconst log = await fetchJsonGet<LogItemResponse[]>(\"/api/debug/log\");\n\t\treturn log.map(parseLogResponse);\n\t});\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className=\"button button_small\" onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__vi6jw\",\"login\":\"styles_login__rRIkN\",\"userTag\":\"styles_userTag__0uCj4\"};","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem } from \"../utils/query\";\n\n\nexport function useManagers()\n{\n\treturn useQuery(\"managers\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/managers\"),\n\t);\n}\n\nexport function useMutationNewManager(onSuccess?: (manager: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newManagerData: NewManagerData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/managers\", newManagerData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"managers\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewManagerData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteManager(managerId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/managers/\" + managerId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"managers\", managerId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\nimport { useMutationNewManager } from \"../../api/managers\";\n\nexport default function CreateManagerForm({ open, close }: PopupProps)\n{\n\tconst [newManager, setNewManager] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewManager(manager =>\n\t{\n\t\tsetNewManager(manager);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление организатора\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newManager} close={() => setNewManager(null)} title=\"Данные организатора\">\n\t\t\t<div>Логин: {newManager?.login}</div>\n\t\t\t<div>Пароль: {newManager?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useManagers, useMutationDeleteManager } from \"../../api/managers\";\nimport CreateManagerForm from \"../../components/create/CreateManagerForm\";\nimport useUser from \"../../api/user\";\n\nexport default function ManagersPage()\n{\n\tuseTitle(\"Организаторы\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionManager, setDeletionManager] = useState(-1);\n\tconst user = useUser();\n\tconst managers = useManagers();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Организаторы</h1>\n\t\t\t{managers.isLoading && <Spinner />}\n\t\t\t{displayError(managers)}\n\t\t\t{managers.data?.length == 0 && <h2>Организаторы отсутствуют</h2>}\n\t\t\t{managers.data?.map(v => <div className={styles.user + \" space_between\"} key={v.id}>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t<span className={styles.login}>{v.login}</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t{v.id != user.data?.id &&\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionManager(v.id)}>Удалить</button>\n\t\t\t\t\t}\n\t\t\t\t\t{v.id == user.data?.id &&\n\t\t\t\t\t\t<span className={styles.userTag}>Вы</span>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_manager\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateManagerForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionManager} title=\"Удаление организатора\" mutationFn={useMutationDeleteManager} open={deletionManager >= 0} close={() => setDeletionManager(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useMutation } from \"react-query\";\nimport { ApiError, CheckTicketResult, ResponseCheckTicket } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\nimport { fetchJsonPost } from \"../utils/fetch\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: TicketData) =>\n\t\t{\n\t\t\tconst apiResult = await fetchJsonPost<ResponseCheckTicket>(\"/api/check_ticket\", ticketData)\n\t\t\tconst result = apiResult as CheckTicketResult;\n\t\t\tif (apiResult.ticket)\n\t\t\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\t\t\tif (apiResult.event)\n\t\t\t\tresult.event = parseEventResponse(apiResult.event)\n\t\t\treturn result\n\t\t},\n\t\tonSuccess: onSuccess,\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionStaff, setDeletionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.isLoading && <Spinner/>}\n\t\t\t{displayError(staff)}\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={deletionStaff >= 0} close={() => setDeletionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\",\"table\":\"styles_table__46OhS\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst showAuthOnPlt = tickets.data?.some(v => v.authOnPltf);\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centered gap=\"1rem\" padding=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <th><div>Вошёл</div><div>в игру</div></th>}\n\t\t\t\t\t\t\t\t<th style={{ width: \"3.2em\" }}>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th style={{ width: \"2.3em\" }}>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <td className={styles.center}>{v.authOnPltf ? \"✓\" : \"✖\"}</td>}\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\n\nimport DebugPage from \"./pages/DebugPage\";\nimport EventPage from \"./pages/EventPage\";\nimport EventsFullPage from \"./pages/EventsFullPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport FontsPage from \"./pages/FontsPage\";\nimport LogPage from \"./pages/LogPage\";\nimport ManagersPage from \"./pages/ManagersPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport UsersPage from \"./pages/UsersPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_users\", \"/d/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_events\", \"/d/events\", <EventsFullPage />)}\n\t\t\t\t{ProtectedRoute(\"page_fonts\", \"/fonts\", <FontsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_managers\", \"/managers\", <ManagersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchWithJson","_x","_x2","_x3","_fetchWithJson","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","input","body","res","wrap","_context","prev","next","fetch","headers","undefined","JSON","stringify","sent","ok","t0","json","t1","msg","abrupt","stop","fetchPost","fetchDelete","fetchJson","_x4","_x5","_x6","_fetchJson","_callee2","data","_context2","fetchJsonGet","fetchJsonPost","fetchPostForm","_x7","_x8","_fetchPostForm","_callee3","_context3","useUser","useQuery","user","status","auth","id","login","roles","name","operations","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","length","names","Array","_key","filter","v","join","MessageFromBackend","_useState","useState","_useState2","_slicedToArray","setMessage","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","Spinner","_ref","zIndex","spinner","Header","backLink","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","setQueryData","_","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","padding","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","_mutationFn","authData","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Popup","_ref$open","open","_ref$title","popup","DebugPage","logErrors","setLogErrors","_useState3","_useState4","log","setLog","refLogErrors","refLog","text","setTimeout","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","queryStrKey","queryKey","map","queryInvalidate","invalidateQueries","exact","queryListAddItem","item","_queryClient$getQuery","getQueryState","items","queryListUpdateItem","_queryClient$getQuery2","queryListDeleteItem","itemId","_queryClient$getQuery3","parseEventResponse","responseEvent","event","date","Date","useEvent","eventId","useMutationDeleteEvent","_mutationFn3","_callee7","_context7","padNum","num","len","padStart","countWord","one","two","five","numS","dateToString","getFullYear","getMonth","getDate","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","useTicketTypes","forEach","useTicketType","typeId","enabled","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","useTickets","tickets","useMutationDeleteTicket","_mutationFn2","_callee4","ticketId","_context4","CreateTicketForm","_ticketTypes$data3","_ticketTypes$data4","_ticketTypes$data5","setTicet","setTypeId","personName","setPersonName","_useState5","_useState6","personLink","setPersonLink","_useState7","_useState8","promocode","setPromocode","_useState9","_useState10","code","setCode","_useState11","_useState12","autocode","setAutocode","ticketData","useMutationNewTicket","ticketTypes","_ticketTypes$data","_ticketTypes$data$","reset","parseInt","onChange","_ticketTypes$data2","_ticketTypes$data2$e$","target","selectedIndex","checked","fontSize","imagefileToData","_imagefileToData","file","accessEventId","imgBase64","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","console","newFontFace","family","FontFace","fontTypes","otf","ttf","woff","woff2","TicketEditor","_this","init","viewMode","editor","img","imgQr","Image","imgFile","width","height","objects","canvas","ctx","loadingImg","loadingFont","loadingFonts","fonts","listenerResize","draw","listenerKeydown","_this$editor","key","deleteSelectedObj","listenerMouseDown","_this$editor2","mouseDown","offsetX","offsetY","button","listenerMouseMove","_this$editor3","mouseMove","listenerMouseUp","_this$editor4","mouseUp","listenerContextMenu","listenerWheel","_this$editor5","wheel","deltaY","inspectorSet","inspectorInput","_this$editor6","loadFonts","this","get","image","loadImage","createNewData","f","find","push","x","y","w","h","c","reRenderQR","_this$editor7","setViewTicket","_this2","URL","revokeObjectURL","url","createObjectURL","removeCanvasListeners","getContext","_getData","imageName","t2","pattern","removeEventListener","obj","_this$editor8","drawObject","resetZoom","fitToView","_this3","_this4","reqFonts","i","font","delete","splice","_step","loadedFonts","_iterator","_createForOfIteratorHelper","_loop","add","load","then","indexOf","s","n","done","err","_this$data$objects$fi","_this$ticket","_this5","renderQRCode","setQr","cursor","parent","clientWidth","clientHeight","loading","fillStyle","fillRect","Editor","bind","setCursor","setCanvasSize","imageSmoothingEnabled","drawTextAtCenter","size","lines","split","dy","ddy","fillText","callback","QRCode","errorCorrectionLevel","scale","margin","light","dark","setInspector","imgqr","_this6","transform","moving","sx","sy","vx","vy","vw","vh","mode","drawing","ex","ey","active","resizing","dir","keepAspect","aspect","canvasSize","selected","selectionBorder","max","m","min","restrictView","qr","_this$ticket$personNa","_this$ticket2","_this$ticket$promocod","_this$ticket3","_this$ticket$code","_this$ticket4","save","translate","drawImage","texts","promo","complete","naturalHeight","unwrapRect","strokeStyle","lineWidth","strokeRect","restore","_this$pointToWorld","pointToWorld","_this$pointToWorld2","_this$pointToWorld3","_this$pointToWorld4","wx","wy","resize","rectZone","pointInRect","resizeCursor","redraw","round","dx","_this$resizing$dir","rx","ry","_this$pointToWorld5","_this$pointToWorld6","_this$pointToWorld7","_this$pointToWorld8","_this7","_this$pointToWorld9","_this$pointToWorld10","X","Y","iw","ih","rect","border","r","direction","_direction","Inspector","setUpdate","setObj","update","inspector","inspector_open","fields","onInput","valueAsNumber","colorInput","fontInput","useFonts","TicketTypeEditor","_ttype$data","useEditor","useMutationUpdateTicketType","ttype","refCanvas","imageSelection","setImageSelection","isNewImage","setIsNewImage","noImage","imageId","_ttype$data2","setData","parse","setCanvas","panel","br","fitZoom","footer","_Fragment","files","setNewImage","accept","_ttype$data3","setImage","getData","destroy","TicketViewer","minWidth","minHeight","ViewTicketSimple","setRes","qrcode","setQrcode","ticketRef","timeout","html2canvas","clearTimeout","center","marginTop","marginBottom","innerHTML","appendChild","ViewTicket","simpleViewer","setSimpleViewer","EditTicketTypesForm","_ticketTypes$data$fil","Map","changes","setChanges","newTypes","setNewTypes","inp","some","action","useMutationUpdateTicketTypes","from","values","_changes$get","_changes$get2","set","EditEventForm","_event$data","_event$data2","inp_title","inp_date","_callee6","eventData","_context6","useMutationUpdateEvent","_inp_title$current","_inp_date$current","defaultValue","toISOString","PopupConfirmDeletion","mutatateParams","useStaff","useStaffEvent","useMutationDeleteStaff","staffId","_callee5","_context5","useMutationResetStaffPassword","_mutationFn4","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","staff","setStaff","selectedStaff","setSelectedStaff","staffData","useMutationUpdateStaff","isSuccess","_staffAll$data","marginLeft","_staffAll$data5","PopupQrCode","EventPage","_staff$data","createFormOpen","setCreateFormOpen","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editTypeFormOpen","setEditTypeFormOpen","editStaffOpen","setEditStaffOpen","_useState13","_useState14","ticketOpen","setTicketOpen","_useState15","_useState16","qrcodeLinkOpen","setQrcodeLinkOpen","useParams","stats","useTicketStats","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","stats_sum","reduce","p","count","scanned","authOnPltf","card","card__header","card__body","line","href","Fragment","marginRight","_stats$data","calcPercent","fontWeight","right","all","UsersPage","_events$data","events","getAccessToEvent","_callee8","_context8","useMutationGetAccessToEvent","isFetching","toggleInp","htmlFor","deleted","activeMark","backgroundColor","toggle","eventInfo","access","o","alignSelf","CreateEventForm","useMutationNewEvent","EventsPage","_events$data$sort","useEvents","sort","a","b","CreateFontForm","inp_name","inp_file","fontData","formData","FormData","useMutationNewFont","er","_inp_name$current","_inp_file$current","_inp_file$current$fil","_file$files","_file$files$","splited","fontName","FontsPage","_fonts$data","createFontOpen","setCreateFontOpen","exampleText","setExampleText","FontPreview","myFont","useFont","fontFamily","flexWrap","parseLogResponse","responseLog","LogPage","_log$data","refetch","table","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","added","updated","restored","useMutationDeleteManager","managerId","CreateManagerForm","newManager","setNewManager","newManagerData","useMutationNewManager","manager","placeholder","replaceAll","ManagersPage","_managers$data","_managers$data2","deletionManager","setDeletionManager","managers","userTag","getTicketPrefix","toString","PrintTicketsPage","_useMemo","useMemo","codePref","every","startsWith","_useMemo2","isCorrectCodes","prefix","print","colSpan","_objectSpread","sortV","lastIndexOf","ChangePasswordForm","passwordRef","password2Ref","useMutationChangePassword","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","Scanner","_ref$active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","highlightScanRegion","maxScansPerSecond","old","start","catch","pause","ScannerHeader","onInputBtn","top","bottom","useSound","audio","Audio","preload","currentTime","play","ScannerPage","urlParams","qrScanResult","setQrScanResult","ticketCode","setTicketCode","checkTicketResult","setCheckTicketResult","startHintOpen","setStartHintOpen","inputOpen","setInputOpen","alreadyScanned","setAlreadyScanned","cameraError","setCameraError","inputRef","NaN","retry","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","focus","handleCloseInput","apiResult","useMutationCheckTicket","success","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","errorCode","_inputRef$current","CreateStaffForm","newStaff","setNewStaff","newStaffData","useMutationNewStaff","StaffPage","_staff$data2","deletionStaff","setDeletionStaff","resetPasswordStaff","setResetPasswordStaff","userInfo","EditTicketForm","setTicket","deletionOpen","setDeletionOpen","_postUpdateTicket","params","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","_tickets$data2","hasAddPermission","hasEditPermission","showAuthOnPlt","_users$data","users","_users$data$find","bossId","u","colorizeOperation","colors","page","change","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes","EventsFullPage"],"sourceRoot":""}
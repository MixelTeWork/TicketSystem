{"version":3,"file":"static/js/758.c4d5e1bc.chunk.js","mappings":"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","sources":["api/apiError.ts","utils/fetchPost.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","utils/nums.ts","utils/dates.ts","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/fetchDelete.ts","api/events.ts","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","api/tickets.ts","api/checkTicket.ts","utils/useSound.ts","utils/getTicketPrefix.ts","pages/ScannerPage/index.tsx","webpack://ticket_system/./src/pages/EventsPage/styles.module.css?6236","utils/displayError.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","api/staff.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","components/PopupConfirmDeletion/index.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","api/ticketTypes.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","pages/PrintTicketsPage/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","App.tsx"],"sourcesContent":["export default class ApiError extends Error {}","export default function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", role: \"\", name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", getUsers);\n}\n\nasync function getUsers(): Promise<UserFull[]>\n{\n\tconst res = await fetch(\"/api/users\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as UserFull[];\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangePassword,\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\nasync function postChangePassword(data: ChangePasswordData)\n{\n\tconst res = await fetchPost(\"/api/user/change_password\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangeName,\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postChangeName(data: ChangeName)\n{\n\tconst res = await fetchPost(\"/api/user/change_name\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn data;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n\tget_staff_event: \"get_staff_event\",\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\t\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","export default function fetchDelete(input: RequestInfo | URL)\n{\n\treturn fetch(input, {\n\t\tmethod: \"DELETE\",\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { EventData, ResponseEvent, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\tconst query = useQuery(\"events\", getEvents, {\n\t\tonSuccess: data =>\n\t\t{\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v));\n\t\t}\n\t});\n\treturn query;\n}\n\nasync function getEvents(): Promise<EventData[]>\n{\n\tconst res = await fetch(\"/api/events\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tconst events = data as ResponseEvent[];\n\treturn events.map(parseEventResponse);\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getEvent(eventId));\n}\n\nasync function getEvent(eventId: number | string): Promise<EventData>\n{\n\tconst res = await fetch(\"/api/events/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getScannerEvent(eventId), { retry: 3 });\n}\n\nasync function getScannerEvent(eventId: number | string): Promise<EventData | typeof NaN>\n{\n\tconst res = await fetch(\"/api/scanner_event/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) return NaN;\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewEvent,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events, data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewEvent(eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event\", eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (eventData: NewEventData) => postUpdateEvent(eventId, eventData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events.filter(v => v.id != data.id), data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateEvent(eventId: number | string, eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event/\" + eventId, eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteEvent(eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.removeQueries([\"event\", `${eventId}`], { exact: true });\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? events.filter(v => v.id != eventId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteEvent(eventId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/event/\" + eventId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, ResponseTicket, Ticket } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", eventId], () => getTickets(eventId));\n}\n\nasync function getTickets(eventId: number | string): Promise<Ticket[]>\n{\n\tconst res = await fetch(\"/api/tickets/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn (data as ResponseTicket[]).map(parseTicketResponse);\n}\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets ? [...tickets, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewTicket(ticketData: NewTicketData)\n{\n\tconst res = await fetchPost(\"/api/ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postUpdateTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets?.map(v => v.id == data.id ? data : v) || []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicket(params: UpdateTicketParams)\n{\n\tconst res = await fetchPost(\"/api/ticket/\" + params.ticketId, params.data);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postDeleteTicket,\n\t\tonSuccess: (ticketId) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${eventId}`], (tickets?: Ticket[]) => tickets?.filter(v => v.id != ticketId) || []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteTicket(ticketId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/ticket/\" + ticketId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn ticketId\n}\n","import { useMutation } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { CheckTicketResult, ResponseCheckTicket, ResponseMsg } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postCheckTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\n\nasync function postCheckTicket(ticketData: TicketData): Promise<CheckTicketResult>\n{\n\tconst res = await fetchPost(\"/api/check_ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst apiResult = data as ResponseCheckTicket;\n\tconst result = data as CheckTicketResult;\n\tif (apiResult.ticket)\n\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\tif (apiResult.event)\n\t\tresult.event = parseEventResponse(apiResult.event)\n\treturn result\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"space_between\":\"styles_space_between__AD+M6\"};","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport ApiError from \"../api/apiError\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(error);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName={classNames(\"button button_large\", styles.space_between)}\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport fetchDelete from \"../utils/fetchDelete\";\nimport fetchPost from \"../utils/fetchPost\";\nimport ApiError from \"./apiError\";\nimport { Staff, ResponseMsg } from \"./dataTypes\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", getStaff);\n}\n\nasync function getStaff(): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/staff\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], () => getStaffEvent(eventId));\n}\n\nasync function getStaffEvent(eventId: number | string): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/event/staff/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (staffData: StaffData) => postStaff(eventId, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"staff\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postStaff(eventId: number | string, staffData: StaffData)\n{\n\tconst res = await fetchPost(\"/api/event/staff/\" + eventId, staffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewStaff,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? [...staff, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewStaff(newStaffData: NewStaffData)\n{\n\tconst res = await fetchPost(\"/api/staff\", newStaffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tif (data.exist) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteStaff(staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.filter(v => v.id != staffId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteStaff(staffId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/staff/\" + staffId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postResetStaffPassword(staffId),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.map(v => v.id != staffId ? v : data) : []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postResetStaffPassword(staffId: number | string)\n{\n\tconst res = await fetchPost(\"/api/staff/reset_password/\" + staffId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"space_between\":\"styles_space_between__Z0Ibu\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { Staff } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<Staff | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [delitionStaff, setDelitionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDelitionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={delitionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={delitionStaff >= 0} close={() => setDelitionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\"};","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, TicketType } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\treturn useQuery([\"ticket_types\", eventId], () => getTicketTypes(eventId));\n}\n\nasync function getTicketTypes(eventId: number | string): Promise<TicketType[]>\n{\n\tconst res = await fetch(\"/api/ticket_types/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (data: UpdateTicketTypesData[]) => postUpdateTicketTypes(eventId, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryClient.invalidateQueries([\"tickets\", `${eventId}`], { exact: true });\n\t\t\telse\n\t\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], () => data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicketTypes(eventId: number | string, updateTicketTypesData: UpdateTicketTypesData[])\n{\n\tconst res = await fetchPost(\"/api/ticket_types/\" + eventId, updateTicketTypesData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(-1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex].id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicket({ event, ticket, setTicket }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={() => setTicket(null)} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tsetTicket: (ticket: Ticket | null) => void,\n}","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport ApiError from \"../../api/apiError\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t{ticketTypes.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [hideCode, setHideCode] = useState(true);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t\tsetCode(ticket.code || \"\");\n\t\t}\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetHideCode(true);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t\tcode: hideCode ? ticket.code : code,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex].id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={!hideCode} onChange={e => setHideCode(!e.target.checked)} />\n\t\t\t\t\t<span style={{ color: hideCode ? \"gray\" : \"darkred\" }}>Изменить код</span>\n\t\t\t\t</label>\n\t\t\t\t{!hideCode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ApiError from \"../../api/apiError\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t<th>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<Link to=\"/users\" className=\"button\">Users</Link>\n\t\t\t<Link to=\"/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роль</h3>\n\t\t\t\t\t{user.data?.role}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useQuery } from \"react-query\";\nimport { Modify, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", getLog);\n}\n\nasync function getLog(): Promise<LogItem[]>\n{\n\tconst res = await fetch(\"/api/debug/log\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn (data as LogItemResponse[]).map(parseLogResponse);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changes\":\"styles_changes__EyS9f\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className=\"button button_small\" onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ width: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ width: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ width: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changes}>\n\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{item.changes.map(v => <div>{v[0]}: \"{v[1]}\" {\"->\"} \"{v[2]}\"</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport EventPage from \"./pages/EventPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport displayError from \"./utils/displayError\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport LogPage from \"./pages/LogPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchPost","input","body","fetch","method","headers","undefined","JSON","stringify","useUser","useQuery","getUser","_getUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","user","wrap","_context","prev","next","sent","json","status","abrupt","auth","id","login","role","name","operations","ok","msg","stop","getUsers","_getUsers","_callee2","_context2","postChangePassword","_x","_postChangePassword","_callee3","_context3","t0","t1","postChangeName","_x2","_postChangeName","_callee4","_context4","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","HeaderBack","navigate","useNavigate","_jsx","className","styles","root","children","onClick","classNames","_len","length","names","Array","_key","filter","v","join","postAuth","_postAuth","authData","postLogout","_postLogout","Spinner","_ref","color","zIndex","_jsxs","spinner","style","Header","backLink","_useState","useState","_useState2","_slicedToArray","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","document","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","error","setError","inp_login","useRef","inp_password","onError","setQueryData","message","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Scanner","_ref$active","active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","result","highlightScanRegion","maxScansPerSecond","old","destroy","start","catch","pause","padNum","num","len","padStart","countWord","one","two","five","numS","at","dateToString","date","getFullYear","getMonth","getDate","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","Date","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","ScannerHeader","event","onInputBtn","top","bottom","fetchDelete","getEvents","_getEvents","events","map","parseEventResponse","useEvent","eventId","_getEvent","getEvent","useScannerEvent","_getScannerEvent","getScannerEvent","retry","NaN","responseEvent","postNewEvent","_x3","_postNewEvent","eventData","useMutationUpdateEvent","_x4","_x5","_postUpdateEvent","postUpdateEvent","_queryClient$getQuery2","getQueryState","_callee5","_context5","useMutationDeleteEvent","_x6","_postDeleteEvent","postDeleteEvent","_queryClient$getQuery3","removeQueries","exact","_callee6","_context6","Popup","_ref$open","open","close","_ref$title","popup","useTickets","_getTickets","getTickets","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","postNewTicket","_postNewTicket","ticketData","postUpdateTicket","_postUpdateTicket","params","ticketId","useMutationDeleteTicket","postDeleteTicket","tickets","_postDeleteTicket","postCheckTicket","_postCheckTicket","apiResult","useSound","url","audio","Audio","preload","currentTime","play","getTicketPrefix","toString","ScannerPage","urlParams","useParams","qrScanResult","setQrScanResult","_useState3","_useState4","ticketCode","setTicketCode","_useState5","_useState6","_useState7","_useState8","checkTicketResult","setCheckTicketResult","_useState9","_useState10","startHintOpen","setStartHintOpen","_useState11","_useState12","inputOpen","setInputOpen","_useState13","_useState14","alreadyScanned","setAlreadyScanned","_useState15","_useState16","cameraError","setCameraError","inputRef","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","setTimeout","focus","handleCloseInput","reset","useMutationCheckTicket","success","code","isSuccess","timeout","clearTimeout","_Fragment","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","personName","promocode","errorCode","marginTop","_inputRef$current","displayError","requestRes","render","isError","defaultRender","textAlign","CreateEventForm","inp_title","inp_date","_queryClient$getQuery","useMutationNewEvent","_inp_title$current","_inp_date$current","EventsPage","_events$data","_events$data$sort","createFormOpen","setCreateFormOpen","forEach","useEvents","sort","a","b","space_between","useStaff","getStaff","_getStaff","useStaffEvent","_getStaffEvent","getStaffEvent","useMutationUpdateStaff","staffData","_postStaff","postStaff","postNewStaff","_postNewStaff","newStaffData","exist","useMutationDeleteStaff","staffId","_postDeleteStaff","postDeleteStaff","staff","useMutationResetStaffPassword","_postResetStaffPassword","postResetStaffPassword","_queryClient$getQuery4","CreateStaffForm","newStaff","setNewStaff","inp_name","useMutationNewStaff","_inp_name$current","placeholder","onInput","replaceAll","PopupConfirmDeletion","mutatateParams","itemId","item","StaffPage","_staff$data","_staff$data2","delitionStaff","setDelitionStaff","resetPasswordStaff","setResetPasswordStaff","toggleInp","htmlFor","toggle","userInfo","useTicketTypes","_getTicketTypes","getTicketTypes","useMutationUpdateTicketTypes","_postUpdateTicketTypes","postUpdateTicketTypes","inp","some","action","updateTicketTypesData","CreateTicketForm","_ticketTypes$data2","_ticketTypes$data3","_ticketTypes$data4","setTicet","typeId","setTypeId","setPersonName","personLink","setPersonLink","setPromocode","setCode","autocode","setAutocode","useMutationNewTicket","ticketTypes","parseInt","onChange","_ticketTypes$data","target","selectedIndex","checked","fontSize","ViewTicket","setTicket","setRes","qrcode","setQrcode","ticketRef","QRCode","errorCorrectionLevel","scale","html2canvas","then","canvas","visible","center","marginBottom","innerHTML","appendChild","EditTicketTypesForm","_ticketTypes$data$fil","setUpdate","Map","changes","setChanges","newTypes","setNewTypes","size","from","values","_changes$get","get","_changes$get2","set","i","push","EditEventForm","_event$data","_event$data2","defaultValue","toISOString","slice","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","setStaff","selectedStaff","setSelectedStaff","_staffAll$data","find","marginLeft","_staffAll$data5","PopupQrCode","width","EventPage","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editStaffOpen","setEditStaffOpen","ticketOpen","setTicketOpen","qrcodeLinkOpen","setQrcodeLinkOpen","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","replace","card","card__header","card__body","line","URL","href","right","EditTicketForm","_ticketTypes$data5","deletionOpen","setDeletionOpen","hideCode","setHideCode","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","hasAddPermission","hasEditPermission","startsWith","scanned","PrintTicketsPage","_useMemo","useMemo","codePref","every","_useMemo2","isCorrectCodes","prefix","print","table","colSpan","_objectSpread","sortV","lastIndexOf","DebugPage","logErrors","setLogErrors","log","setLog","refLogErrors","refLog","text","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","UsersPage","_users$data","users","_users$data$find","bossId","u","deleted","o","colorizeOperation","access","colors","page","add","change","delete","ChangePasswordForm","passwordRef","password2Ref","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","getLog","_getLog","parseLogResponse","responseLog","LogPage","_log$data","isFetching","refetch","colorizeAction","actionCode","tableName","recordId","userName","userId","added","updated","restored","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}
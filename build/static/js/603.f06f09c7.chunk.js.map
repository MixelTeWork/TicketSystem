{"version":3,"file":"static/js/603.f06f09c7.chunk.js","mappings":"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","sources":["api/apiError.ts","utils/fetchPost.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","utils/nums.ts","utils/dates.ts","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/fetchDelete.ts","api/events.ts","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","api/tickets.ts","api/checkTicket.ts","utils/useSound.ts","utils/getTicketPrefix.ts","pages/ScannerPage/index.tsx","webpack://ticket_system/./src/pages/EventsPage/styles.module.css?6236","utils/displayError.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","api/staff.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","components/PopupConfirmDeletion/index.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","api/ticketTypes.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/TicketEditor/styles.module.css?35f4","utils/imagefileToData.ts","components/TicketEditor/editor.ts","components/TicketEditor/inspector.tsx","components/TicketEditor/index.tsx","components/TicketEditor/viewer.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/simple.tsx","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","pages/PrintTicketsPage/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","App.tsx"],"sourcesContent":["export default class ApiError extends Error {}","export default function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", role: \"\", name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", getUsers);\n}\n\nasync function getUsers(): Promise<UserFull[]>\n{\n\tconst res = await fetch(\"/api/users\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as UserFull[];\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangePassword,\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\nasync function postChangePassword(data: ChangePasswordData)\n{\n\tconst res = await fetchPost(\"/api/user/change_password\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangeName,\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postChangeName(data: ChangeName)\n{\n\tconst res = await fetchPost(\"/api/user/change_name\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn data;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n\tget_staff_event: \"get_staff_event\",\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\t\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","export default function fetchDelete(input: RequestInfo | URL)\n{\n\treturn fetch(input, {\n\t\tmethod: \"DELETE\",\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { EventData, ResponseEvent, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\tconst query = useQuery(\"events\", getEvents, {\n\t\tonSuccess: data =>\n\t\t{\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v));\n\t\t}\n\t});\n\treturn query;\n}\n\nasync function getEvents(): Promise<EventData[]>\n{\n\tconst res = await fetch(\"/api/events\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tconst events = data as ResponseEvent[];\n\treturn events.map(parseEventResponse);\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getEvent(eventId));\n}\n\nasync function getEvent(eventId: number | string): Promise<EventData>\n{\n\tconst res = await fetch(\"/api/events/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getScannerEvent(eventId), { retry: 3 });\n}\n\nasync function getScannerEvent(eventId: number | string): Promise<EventData | typeof NaN>\n{\n\tconst res = await fetch(\"/api/scanner_event/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) return NaN;\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewEvent,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events, data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewEvent(eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event\", eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (eventData: NewEventData) => postUpdateEvent(eventId, eventData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events.filter(v => v.id != data.id), data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateEvent(eventId: number | string, eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event/\" + eventId, eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteEvent(eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.removeQueries([\"event\", `${eventId}`], { exact: true });\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? events.filter(v => v.id != eventId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteEvent(eventId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/event/\" + eventId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, ResponseTicket, Ticket, TicketStats } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", eventId], () => getTickets(eventId));\n}\n\nasync function getTickets(eventId: number | string): Promise<Ticket[]>\n{\n\tconst res = await fetch(\"/api/tickets/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn (data as ResponseTicket[]).map(parseTicketResponse);\n}\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets ? [...tickets, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewTicket(ticketData: NewTicketData)\n{\n\tconst res = await fetchPost(\"/api/ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postUpdateTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets?.map(v => v.id == data.id ? data : v) || []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicket(params: UpdateTicketParams)\n{\n\tconst res = await fetchPost(\"/api/ticket/\" + params.ticketId, params.data);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postDeleteTicket,\n\t\tonSuccess: (ticketId) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${eventId}`], (tickets?: Ticket[]) => tickets?.filter(v => v.id != ticketId) || []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteTicket(ticketId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/ticket/\" + ticketId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn ticketId\n}\n\nexport function useTicketStats(eventId: number | string)\n{\n\treturn useQuery([\"ticket_stats\", eventId], () => getTicketStats(eventId));\n}\n\nasync function getTicketStats(eventId: number | string): Promise<TicketStats[]>\n{\n\tconst res = await fetch(\"/api/tickets_stats/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as TicketStats[];\n}","import { useMutation } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { CheckTicketResult, ResponseCheckTicket, ResponseMsg } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postCheckTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\n\nasync function postCheckTicket(ticketData: TicketData): Promise<CheckTicketResult>\n{\n\tconst res = await fetchPost(\"/api/check_ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst apiResult = data as ResponseCheckTicket;\n\tconst result = data as CheckTicketResult;\n\tif (apiResult.ticket)\n\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\tif (apiResult.event)\n\t\tresult.event = parseEventResponse(apiResult.event)\n\treturn result\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"space_between\":\"styles_space_between__AD+M6\"};","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport ApiError from \"../api/apiError\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(error);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName={classNames(\"button button_large\", styles.space_between)}\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport fetchDelete from \"../utils/fetchDelete\";\nimport fetchPost from \"../utils/fetchPost\";\nimport ApiError from \"./apiError\";\nimport { Staff, ResponseMsg } from \"./dataTypes\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", getStaff);\n}\n\nasync function getStaff(): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/staff\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], () => getStaffEvent(eventId));\n}\n\nasync function getStaffEvent(eventId: number | string): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/event/staff/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (staffData: StaffData) => postStaff(eventId, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"staff\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postStaff(eventId: number | string, staffData: StaffData)\n{\n\tconst res = await fetchPost(\"/api/event/staff/\" + eventId, staffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewStaff,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? [...staff, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewStaff(newStaffData: NewStaffData)\n{\n\tconst res = await fetchPost(\"/api/staff\", newStaffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tif (data.exist) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteStaff(staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.filter(v => v.id != staffId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteStaff(staffId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/staff/\" + staffId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postResetStaffPassword(staffId),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.map(v => v.id != staffId ? v : data) : []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postResetStaffPassword(staffId: number | string)\n{\n\tconst res = await fetchPost(\"/api/staff/reset_password/\" + staffId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"space_between\":\"styles_space_between__Z0Ibu\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { Staff } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<Staff | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [delitionStaff, setDelitionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDelitionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={delitionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={delitionStaff >= 0} close={() => setDelitionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\"};","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport type { ImgData, ResponseMsg, TicketType } from \"./dataTypes\";\nimport type { TicketPattern } from \"../components/TicketEditor/editor\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\tconst queryClient = useQueryClient();\n\tconst query = useQuery([\"ticket_types\", eventId], () => getTicketTypes(eventId), {\n\t\tonSuccess: data =>\n\t\t{\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t}\n\t});\n\treturn query;\n}\n\nasync function getTicketTypes(eventId: number | string): Promise<TicketType[]>\n{\n\tconst res = await fetch(\"/api/ticket_types/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (data: UpdateTicketTypesData[]) => postUpdateTicketTypes(eventId, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryClient.invalidateQueries([\"tickets\", `${eventId}`], { exact: true });\n\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], () => data);\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicketTypes(eventId: number | string, updateTicketTypesData: UpdateTicketTypesData[])\n{\n\tconst res = await fetchPost(\"/api/ticket_types/\" + eventId, updateTicketTypesData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n\n\nexport function useTicketType(typeId: number)\n{\n\treturn useQuery([\"ticket_type\", `${typeId}`], () => getTicketType(typeId), { enabled: typeId >= 0 });\n}\n\nasync function getTicketType(typeId: number | string): Promise<TicketType>\n{\n\tconst res = await fetch(\"/api/ticket_type/\" + typeId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType;\n}\n\nexport function useMutationUpdateTicketType(typeId: number | string, onSuccess?: (ticket: TicketType) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (data: UpdateTicketTypeData) => postUpdateTicketType(typeId, data),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"ticket_type\", `${typeId}`], () => data);\n\t\t\tif (queryClient.getQueryState([\"ticket_types\", `${typeId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"ticket_types\", `${typeId}`], (types?: TicketType[]) => types ? [...types.filter(v => v.id != data.id), data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicketType(typeId: number | string, updateTicketTypeData: UpdateTicketTypeData)\n{\n\tconst res = await fetchPost(\"/api/ticket_type/\" + typeId, updateTicketTypeData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType;\n}\n\nexport interface UpdateTicketTypeData\n{\n\timg: ImgData | null,\n\tpattern: TicketPattern,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(ticketTypes.data?.[0]?.id || -1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__+QOp3\",\"canvas\":\"styles_canvas__wzjs3\",\"inspector\":\"styles_inspector__TrPRu\",\"inspector_open\":\"styles_inspector_open__h5KZj\",\"fields\":\"styles_fields__fz+aE\",\"colorInput\":\"styles_colorInput__8Ty5B\",\"panel\":\"styles_panel__yLWcU\",\"br\":\"styles_br__7BTyB\",\"footer\":\"styles_footer__ADD9E\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string, accessEventId?: number)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t\taccessEventId,\n\t} as ImgData\n}","import { Ticket } from \"../../api/dataTypes\";\nimport type { UpdateTicketTypeData } from \"../../api/ticketTypes\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport QRCode from \"qrcode\"\n\nexport class TicketEditor\n{\n\tprivate editor: Editor | null = null;\n\tprivate img: HTMLImageElement | null = null;\n\tprivate imgQr = new Image();\n\tprivate imgFile: File | null = null;\n\tprivate data: TicketPattern = { width: 0, height: 0, objects: [] };\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate loading = false;\n\tprivate ticket: Ticket | null = null;\n\tprivate listenerResize = () => this.draw();\n\tprivate listenerMouseDown = (e: MouseEvent) => { if (this.editor?.mouseDown(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerMouseMove = (e: MouseEvent) => { if (this.editor?.mouseMove(e.offsetX, e.offsetY)) this.draw() };\n\tprivate listenerMouseUp = (e: MouseEvent) => { if (this.editor?.mouseUp(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerContextMenu = (e: MouseEvent) => { e.preventDefault(); };\n\tprivate listenerWheel = (e: WheelEvent) => { if (this.editor?.wheel(e.offsetX, e.offsetY, e.deltaY)) this.draw() };\n\tprivate inspectorSet: InspectorSetFunc = () => { };\n\n\tconstructor(init = true, private viewMode = false)\n\t{\n\t\tif (!init || viewMode) return;\n\t\twindow.addEventListener(\"resize\", this.listenerResize);\n\t}\n\n\tpublic static renderQRCode(code: string, color: string, callback: (img: HTMLImageElement) => void)\n\t{\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10, margin: 2, color: { light: \"#ffffff00\", dark: color } }, (e, url) =>\n\t\t{\n\t\t\tif (e) console.error(e);\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener(\"load\", () =>\n\t\t\t{\n\t\t\t\tcallback(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tpublic setData(image: number | null, data: TicketPattern)\n\t{\n\t\tthis.img = null;\n\t\tthis.imgFile = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t\tthis.data = data || this.createNewData();\n\t\tthis.editor = null;\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t\tthis.editor?.setViewTicket(ticket);\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setNewImage(image: File)\n\t{\n\t\tthis.imgFile = image;\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tURL.revokeObjectURL(url);\n\t\t\tthis.loading = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tconst url = URL.createObjectURL(image)\n\t\tthis.loading = true;\n\t\tthis.img.src = url;\n\t}\n\tpublic setImage(image: number | null)\n\t{\n\t\tthis.imgFile = null;\n\t\tthis.img = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t}\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.removeCanvasListeners();\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\n\t\tif (this.viewMode) return;\n\n\t\tcanvas.addEventListener(\"mousedown\", this.listenerMouseDown);\n\t\tcanvas.addEventListener(\"mousemove\", this.listenerMouseMove);\n\t\tcanvas.addEventListener(\"mouseup\", this.listenerMouseUp);\n\t\tcanvas.addEventListener(\"wheel\", this.listenerWheel);\n\t\tcanvas.addEventListener(\"contextmenu\", this.listenerContextMenu);\n\t}\n\tpublic setInspector(f: InspectorSetFunc)\n\t{\n\t\tthis.inspectorSet = f;\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tthis.editor?.inspectorInput(field, value);\n\t\tthis.draw();\n\t}\n\tpublic reset()\n\t{\n\t\tthis.editor = null;\n\t\tthis.img = null;\n\t\tthis.imgQr = new Image();\n\t\tthis.imgFile = null;\n\t\tthis.data = { width: 0, height: 0, objects: [] };\n\t\tthis.loading = false;\n\t\tthis.ticket = null;\n\t\tthis.inspectorSet(null);\n\t\tthis.draw();\n\t}\n\tpublic async getData(imageName: string, eventId: number)\n\t{\n\t\treturn {\n\t\t\tpattern: this.data,\n\t\t\timg: this.imgFile ? await imagefileToData(this.imgFile, imageName, eventId) : null,\n\t\t} as UpdateTicketTypeData\n\t}\n\tpublic destroy()\n\t{\n\t\twindow.removeEventListener(\"resize\", this.listenerResize);\n\t\tthis.removeCanvasListeners();\n\t\tthis.inspectorSet(null);\n\t}\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.editor?.drawObject(obj);\n\t}\n\tpublic resetZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.resetZoom();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\tpublic fitZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.fitToView();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners()\n\t{\n\t\tif (this.canvas)\n\t\t{\n\t\t\tthis.canvas.removeEventListener(\"mousedown\", this.listenerMouseDown);\n\t\t\tthis.canvas.removeEventListener(\"mousemove\", this.listenerMouseMove);\n\t\t\tthis.canvas.removeEventListener(\"mouseup\", this.listenerMouseUp);\n\t\t\tthis.canvas.removeEventListener(\"wheel\", this.listenerWheel);\n\t\t\tthis.canvas.removeEventListener(\"contextmenu\", this.listenerContextMenu);\n\t\t}\n\t}\n\n\tprivate loadImage(image: number)\n\t{\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tthis.loading = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tthis.loading = true;\n\t\tthis.img.src = `/api/img/${image}`;\n\t}\n\n\tprivate reRenderQR()\n\t{\n\t\tconst color = this.data.objects.find(v => v.type == \"qr\")?.c || \"#000000\";\n\t\tTicketEditor.renderQRCode(this.ticket?.code || \"123-31224-34-07-4321\", color, img =>\n\t\t{\n\t\t\tthis.imgQr = img;\n\t\t\tif (this.editor)\n\t\t\t{\n\t\t\t\tthis.editor.setQr(img);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setCursor(cursor: Cursor)\n\t{\n\t\tif (!this.canvas) return;\n\t\tthis.canvas.style.cursor = cursor;\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas) return;\n\t\tconst parent = this.canvas.parentElement;\n\t\tif (!parent) return;\n\n\t\tlet w = parent.clientWidth;\n\t\tlet h = parent.clientHeight;\n\t\tif (this.viewMode && this.img && !this.loading)\n\t\t{\n\t\t\tw = this.data.width;\n\t\t\th = this.data.height;\n\t\t}\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.style.width = `${w}px`;\n\t\tthis.canvas.height = h;\n\t\tthis.canvas.style.height = `${h}px`;\n\n\t\tif (!this.ctx) return;\n\t\tthis.ctx.fillStyle = \"#00000033\";\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (!this.img || this.loading)\n\t\t{\n\t\t\tthis.ctx.fillStyle = \"black\";\n\t\t\tconst text = this.loading ? \"Загрузка\" : (this.viewMode ? \"Этот тип билетов\\nне настроен\" : \"Загрузите картинку\");\n\t\t\tthis.drawTextAtCenter(text, 32);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor)\n\t\t{\n\t\t\tthis.editor = new Editor(this.img, this.data, this.reRenderQR.bind(this), this.setCursor.bind(this), this.inspectorSet, this.imgQr, this.viewMode)\n\t\t\tthis.editor.setCanvasSize({ w, h });\n\t\t\tthis.editor.fitToView();\n\t\t}\n\t\tthis.editor.setCanvasSize({ w, h });\n\t\tthis.ctx.imageSmoothingEnabled = false;\n\t\tif (this.ticket)\n\t\t\tthis.editor.setViewTicket(this.ticket);\n\t\tthis.editor.draw(this.ctx)\n\t}\n\n\tprivate drawTextAtCenter(text: string, size: number)\n\t{\n\t\tif (!this.ctx || !this.canvas) return;\n\t\tconst w = this.canvas.width;\n\t\tconst h = this.canvas.height;\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.font = `${size}px Arial`;\n\t\tconst lines = text.split(\"\\n\");\n\t\tconst dy = -lines.length * size * 0.8 / 2;\n\t\tconst ddy = lines.length * size * 0.8;\n\t\tfor (let i = 0; i < lines.length; i++)\n\t\t\tthis.ctx.fillText(lines[i], w / 2, h / 2 + dy + ddy * i);\n\t}\n\n\tprivate createNewData()\n\t{\n\t\treturn {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tobjects: [\n\t\t\t\t{ type: \"qr\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\" },\n\t\t\t\t{ type: \"name\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\" },\n\t\t\t\t{ type: \"promo\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\" },\n\t\t\t],\n\t\t} as TicketPattern;\n\t}\n}\n\nexport interface TicketPattern\n{\n\twidth: number,\n\theight: number,\n\tobjects: TicketPatternObject[],\n}\nexport interface TicketPatternObject\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tc: string,\n\ttype: TicketPatternObjectType,\n}\ntype TicketPatternObjectType = \"qr\" | \"name\" | \"promo\";\n\ntype InspectorSetFunc = (obj: TicketPatternObject | null) => void;\ntype InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) => void;\n\ntype MoveMode = null | \"view\" | \"obj\" | \"resize\";\ntype Cursor = \"default\" | \"move\" | \"n-resize\" | \"e-resize\" | \"ne-resize\" | \"nw-resize\";\n\n\nclass Editor\n{\n\tprivate transform = { x: 0, y: 0, s: 1 };\n\tprivate moving = { sx: 0, sy: 0, vx: 0, vy: 0, vw: 0, vh: 0, mode: null as MoveMode };\n\tprivate drawing = { sx: 0, sy: 0, ex: 0, ey: 0, active: false, type: null as TicketPatternObjectType | null };\n\tprivate resizing = { dir: [0, 0] as RectZone, keepAspect: false, aspect: 1 };\n\tprivate canvasSize = { w: 0, h: 0 };\n\tprivate selected = -1;\n\tprivate readonly selectionBorder = 16;\n\tprivate ticket: Ticket | null = null;\n\n\tconstructor(\n\t\tprivate img: HTMLImageElement,\n\t\tprivate data: TicketPattern,\n\t\tprivate reRenderQR: () => void,\n\t\tprivate setCursor: (cursor: Cursor) => void,\n\t\tprivate setInspector: InspectorSetFunc,\n\t\tprivate imgqr: HTMLImageElement,\n\t\tprivate viewMode: boolean,\n\t)\n\t{\n\t\tdata.width = img.width;\n\t\tdata.height = img.height;\n\t}\n\n\tpublic fitToView()\n\t{\n\t\tconst m = this.viewMode ? 0 : 100;\n\t\tthis.transform.s = Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height);\n\t\tthis.transform.x = (this.canvasSize.w - this.img.width * this.transform.s) / 2;\n\t\tthis.transform.y = (this.canvasSize.h - this.img.height * this.transform.s) / 2;\n\t\tthis.restrictView();\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tif (this.selected < 0) return;\n\t\tconst obj = this.data.objects[this.selected]\n\t\tif ([\"x\", \"y\", \"w\", \"h\"].includes(field))\n\t\t{\n\t\t\tconst f = field as \"x\" | \"y\" | \"w\" | \"h\";\n\t\t\tconst v = value as number;\n\t\t\tobj[f] = Math.max(v, 0);\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (f == \"w\") obj.h = obj.w;\n\t\t\t\tif (f == \"h\") obj.w = obj.h;\n\t\t\t}\n\t\t}\n\t\telse if (field == \"c\")\n\t\t{\n\t\t\tobj[field] = value;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tthis.reRenderQR();\n\t\t}\n\t}\n\tpublic setCanvasSize(size: { w: number, h: number })\n\t{\n\t\tthis.canvasSize = size;\n\t}\n\tpublic setQr(qr: HTMLImageElement)\n\t{\n\t\tthis.imgqr = qr;\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.x, this.transform.y);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tctx.fillStyle = \"black\"\n\t\tctx.fillRect(0, 0, this.img.width, this.img.height);\n\t\tctx.drawImage(this.img, 0, 0);\n\n\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t{\n\t\t\tconst obj = this.data.objects[i];\n\t\t\t// ctx.fillStyle = \"#ffffff88\";\n\t\t\t// ctx.fillRect(...unwrapRect(obj));\n\t\t\tctx.fillStyle = obj.c;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (this.imgqr.complete && this.imgqr.naturalHeight != 0)\n\t\t\t\t\tctx.drawImage(this.imgqr, ...unwrapRect(obj));\n\t\t\t\telse\n\t\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\telse if (obj.type == \"name\" || obj.type == \"promo\")\n\t\t\t{\n\t\t\t\tctx.font = `${obj.h}px Arial`;\n\t\t\t\tconst text = this.ticket\n\t\t\t\t\t? obj.type == \"name\" ? this.ticket.personName || \"\" : this.ticket.promocode || \"\"\n\t\t\t\t\t: obj.type == \"name\" ? \"Иванов Иван Иванович 太阳\" : \"Неутомимый\";\n\t\t\t\tctx.fillText(text, obj.x, obj.y + obj.h * 0.8, obj.w);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\tif (this.selected == i)\n\t\t\t{\n\t\t\t\tctx.strokeStyle = \"orange\";\n\t\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\t\tctx.strokeRect(...unwrapRect(obj));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\tctx.strokeStyle = \"white\";\n\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\tlet w = this.drawing.ex - this.drawing.sx;\n\t\t\tlet h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (this.drawing.type == \"qr\")\n\t\t\t\th = w;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t\tctx.strokeStyle = \"black\";\n\t\t\tctx.lineWidth = 2 / this.transform.s;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.drawing.type = obj;\n\t}\n\n\tpublic resetZoom()\n\t{\n\t\tthis.transform.s = 1;\n\t\tthis.restrictView();\n\t}\n\n\tpublic mouseDown(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.sx = x;\n\t\tthis.moving.sy = y;\n\t\tif (button == 2)\n\t\t{\n\t\t\tthis.moving.vx = this.transform.x;\n\t\t\tthis.moving.vy = this.transform.y;\n\t\t\tthis.moving.mode = \"view\";\n\t\t\tthis.setCursor(\"move\");\n\t\t\treturn;\n\t\t}\n\t\tif (button == 0)\n\t\t{\n\t\t\tif (this.drawing.type)\n\t\t\t{\n\t\t\t\t[this.drawing.sx, this.drawing.sy] = this.pointToWorld(x, y);\n\t\t\t\tthis.drawing.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t\t{\n\t\t\t\tconst obj = this.data.objects[i];\n\t\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\t\tlet resize = false;\n\t\t\t\tif (this.selected == i)\n\t\t\t\t{\n\t\t\t\t\tthis.resizing.dir = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\t\t\tresize = this.resizing.dir[0] != 0 || this.resizing.dir[1] != 0;\n\t\t\t\t\tthis.resizing.aspect = obj.h / obj.w;\n\t\t\t\t\tthis.resizing.keepAspect = obj.type == \"qr\";\n\t\t\t\t}\n\t\t\t\tif (pointInRect(wx, wy, obj) || resize)\n\t\t\t\t{\n\t\t\t\t\tthis.selected = i;\n\t\t\t\t\tthis.setInspector(obj);\n\t\t\t\t\tthis.moving.vx = obj.x;\n\t\t\t\t\tthis.moving.vy = obj.y;\n\t\t\t\t\tthis.moving.vw = obj.w;\n\t\t\t\t\tthis.moving.vh = obj.h;\n\t\t\t\t\tthis.moving.mode = resize ? \"resize\" : \"obj\";\n\t\t\t\t\tthis.setCursor(resize ? resizeCursor(this.resizing.dir) : \"move\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst redraw = this.selected >= 0;\n\t\t\tthis.selected = -1;\n\t\t\tthis.setInspector(null);\n\t\t\treturn redraw;\n\t\t}\n\t}\n\n\tpublic mouseMove(x: number, y: number)\n\t{\n\t\tif (this.moving.mode == \"view\")\n\t\t{\n\t\t\tthis.transform.x = this.moving.vx + (x - this.moving.sx);\n\t\t\tthis.transform.y = this.moving.vy + (y - this.moving.sy);\n\t\t\tthis.restrictView();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"obj\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tobj.x = this.moving.vx + (x - this.moving.sx) / this.transform.s;\n\t\t\tobj.y = this.moving.vy + (y - this.moving.sy) / this.transform.s;\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"resize\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst dx = (x - this.moving.sx) / this.transform.s;\n\t\t\tconst dy = (y - this.moving.sy) / this.transform.s;\n\t\t\tconst [rx, ry] = this.resizing.dir;\n\t\t\tif (this.resizing.keepAspect)\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx == 0)\n\t\t\t\t{\n\t\t\t\t\tif (ry > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t\t}\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t\t}\n\t\t\t\t\tobj.w = obj.h / this.resizing.aspect;\n\t\t\t\t\tobj.x = this.moving.vx - (obj.w - this.moving.vw) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t}\n\t\t\t\tif (ry > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t}\n\t\t\t\tif (ry < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.w = Math.max(obj.w, 5);\n\t\t\tobj.h = Math.max(obj.h, 5);\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.selected >= 0)\n\t\t{\n\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst resize = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\tif (resize[0] != 0 || resize[1] != 0)\n\t\t\t\tthis.setCursor(resizeCursor(resize));\n\t\t\telse\n\t\t\t\tthis.setCursor(\"default\");\n\t\t}\n\t}\n\n\tpublic mouseUp(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.mode = null;\n\t\tthis.setCursor(\"default\");\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects.find(v => v.type == this.drawing.type);\n\t\t\tif (!obj) return false;\n\t\t\tobj.x = this.drawing.sx;\n\t\t\tobj.y = this.drawing.sy;\n\t\t\tobj.w = this.drawing.ex - this.drawing.sx;\n\t\t\tobj.h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (obj.w < 0)\n\t\t\t{\n\t\t\t\tobj.x += obj.w;\n\t\t\t\tobj.w *= -1;\n\t\t\t}\n\t\t\tif (obj.h < 0)\n\t\t\t{\n\t\t\t\tobj.y += obj.h;\n\t\t\t\tobj.h *= -1;\n\t\t\t}\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.drawing.active = false;\n\t\t\tthis.drawing.type = null;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tobj.h = obj.w;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic wheel(x: number, y: number, d: number)\n\t{\n\t\tconst X = (x - this.transform.x) / this.transform.s;\n\t\tconst Y = (y - this.transform.y) / this.transform.s;\n\n\t\tif (d > 0)\n\t\t\tthis.transform.s /= 1.1;\n\t\telse\n\t\t\tthis.transform.s *= 1.1;\n\t\tconst m = 200;\n\t\tthis.transform.s = Math.max(this.transform.s, Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height));\n\n\t\tthis.transform.x = x - X * this.transform.s;\n\t\tthis.transform.y = y - Y * this.transform.s;\n\t\tthis.restrictView();\n\t\treturn true;\n\t}\n\n\tprivate restrictView()\n\t{\n\t\tconst m = 100;\n\t\tconst iw = this.img.width * this.transform.s\n\t\tconst ih = this.img.height * this.transform.s\n\t\tif (iw > this.canvasSize.w)\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + this.canvasSize.w - m), m);\n\t\telse\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + m), this.canvasSize.w - m);\n\t\tif (ih > this.canvasSize.h)\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + this.canvasSize.h - m), m);\n\t\telse\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + m), this.canvasSize.h - m);\n\t}\n\n\tprivate pointToWorld(x: number, y: number)\n\t{\n\t\treturn [(x - this.transform.x) / this.transform.s, (y - this.transform.y) / this.transform.s];\n\t}\n\tprivate pointToScreen(x: number, y: number)\n\t{\n\t\treturn [x * this.transform.s + this.transform.x, y * this.transform.s + this.transform.y];\n\t}\n}\n\ninterface Rect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\n\nfunction pointInRect(x: number, y: number, rect: Rect)\n{\n\treturn x > rect.x && x < rect.x + rect.w &&\n\t\ty > rect.y && y < rect.y + rect.h;\n}\n\ntype RectZone = [number, number];  // [x, y] 1 - bottom, right; -1 = top, left\nfunction rectZone(x: number, y: number, rect: Rect, border: number): RectZone\n{\n\tconst r = [0, 0] as RectZone;\n\n\tif (!pointInRect(x, y, { x: rect.x - border, y: rect.y - border, w: rect.w + border * 2, h: rect.h + border * 2 }))\n\t\treturn r;\n\n\tif (Math.abs(x - rect.x) <= border) r[0] = -1;\n\tif (Math.abs(x - (rect.x + rect.w)) <= border) r[0] = 1;\n\tif (Math.abs(y - rect.y) <= border) r[1] = -1;\n\tif (Math.abs(y - (rect.y + rect.h)) <= border) r[1] = 1;\n\n\treturn r;\n}\nfunction resizeCursor(direction: RectZone): Cursor\n{\n\tconst [x, y] = direction;\n\tif (x == 0)\n\t{\n\t\tif (y == 0) return \"default\"; // none\n\t\tif (y > 0) return \"n-resize\"; // down\n\t\treturn \"n-resize\"; // up\n\t}\n\tif (x > 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // right\n\t\tif (y > 0) return \"nw-resize\"; // down-right\n\t\treturn \"ne-resize\"; // up-right\n\t}\n\tif (x < 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // left\n\t\tif (y > 0) return \"ne-resize\"; // down-left\n\t\treturn \"nw-resize\"; // up-left\n\t}\n\treturn \"default\"; // none\n}\n\nfunction unwrapRect({ x, y, w, h }: Rect): [number, number, number, number]\n{\n\treturn [x, y, w, h];\n}\n","import { useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport type { TicketEditor, TicketPatternObject } from \"./editor\";\nimport classNames from \"../../utils/classNames\";\n\ntype E = React.ChangeEvent<HTMLInputElement>;\n\nexport function Inspector({ editor }: InspectorProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [obj, setObj] = useState<TicketPatternObject | null>(null);\n\tconst update = () => setUpdate(v => v + 1);\n\teditor.setInspector(obj =>\n\t{\n\t\tsetObj(obj);\n\t\tupdate();\n\t});\n\n\treturn (\n\t\t<div className={classNames(styles.inspector, obj && styles.inspector_open)}>\n\t\t\t<h2>{{\n\t\t\t\t\"qr\": \"QR код\",\n\t\t\t\t\"name\": \"Посетитель\",\n\t\t\t\t\"promo\": \"Промокод\",\n\t\t\t\t\"\": \"\",\n\t\t\t}[obj?.type || \"\"]}</h2>\n\t\t\t<div className={styles.fields}>\n\t\t\t\t<label>\n\t\t\t\t\t<span>X:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.x || 0} onInput={(e: E) => {editor.inspectorInput(\"x\", e.target.valueAsNumber); update();}} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Y:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.y || 0} onInput={(e: E) => {editor.inspectorInput(\"y\", e.target.valueAsNumber); update();}} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Ширина:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.w || 0} onInput={(e: E) => {editor.inspectorInput(\"w\", e.target.valueAsNumber); update();}} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Высота:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.h || 0} onInput={(e: E) => {editor.inspectorInput(\"h\", e.target.valueAsNumber); update();}} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<label className={styles.colorInput}>\n\t\t\t\t<span>Цвет:</span>\n\t\t\t\t<input type=\"color\" value={obj?.c || \"#000000\"} onInput={(e: E) => {editor.inspectorInput(\"c\", e.target.value); update();}} />\n\t\t\t</label>\n\t\t</div>\n\t)\n}\n\ninterface InspectorProps\n{\n\teditor: TicketEditor,\n}","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateTicketType, useTicketType } from \"../../api/ticketTypes\";\nimport { TicketEditor } from \"./editor\";\nimport { Inspector } from \"./inspector\";\n\nexport default function TicketTypeEditor({ typeId, eventId, open, close }: EditTicketTypeFormProps)\n{\n\tconst editor = useEditor();\n\tconst mutation = useMutationUpdateTicketType(typeId, close);\n\tconst ttype = useTicketType(typeId);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\tconst [imageSelection, setImageSelection] = useState(false);\n\tconst [isNewImage, setIsNewImage] = useState(false);\n\tconst noImage = ttype.data?.imageId == null;\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetImageSelection(false);\n\t\t\tsetIsNewImage(false);\n\t\t\teditor.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\tsetImageSelection(!ttype.data?.imageId)\n\t\t}\n\t}, [ttype.data, open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактор билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.root}>\n\t\t\t\t<div className={styles.canvas}>\n\t\t\t\t\t<canvas ref={refCanvas} />\n\t\t\t\t\t<Inspector editor={editor} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.panel}>\n\t\t\t\t\t<span>Нарисовать объекты:</span>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"qr\")}>QR код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"name\")}>Имя посетителя</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"promo\")}>Промокод</button>\n\t\t\t\t\t<span className={styles.br}></span>\n\t\t\t\t\t<button className=\"button icon\" onClick={() => editor.fitZoom()}>fit_screen</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.resetZoom()}>1:1</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{imageSelection ? <>\n\t\t\t\t\t\t\t{!noImage && <button className=\"button\" onClick={() => setImageSelection(false)}>Отмена</button>}\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={e =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files[0])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\teditor.setNewImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\t\tsetImageSelection(false);\n\t\t\t\t\t\t\t\t\t\tsetIsNewImage(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} accept=\"image/png, image/jpeg, image/gif\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => setImageSelection(true)}>Изменить картинку</button>\n\t\t\t\t\t\t\t{isNewImage && !noImage && <button className=\"button\" onClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetIsNewImage(false);\n\t\t\t\t\t\t\t\teditor.setImage(ttype.data?.imageId || null)\n\t\t\t\t\t\t\t}}>Отменить изменение картинки</button>}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => close?.()}>Отмена</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = await editor.getData(`ticket_${typeId}`, eventId);\n\t\t\t\t\t\t\tmutation.mutate(data);\n\t\t\t\t\t\t}}>Сохранить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport function useEditor(viewMode = false)\n{\n\tconst editor = useRef(new TicketEditor(false, viewMode));\n\tuseEffect(() =>\n\t{\n\t\teditor.current = new TicketEditor(true, viewMode);\n\t\treturn () => editor.current.destroy();\n\t}, [viewMode]);\n\treturn editor.current;\n}\n\ninterface EditTicketTypeFormProps extends PopupProps\n{\n\teventId: number,\n\ttypeId: number,\n}\n","import { useEffect, useRef } from \"react\";\nimport { useEditor } from \".\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport Spinner from \"../Spinner\";\nimport { Ticket } from \"../../api/dataTypes\";\n\nexport default function TicketViewer({ ticket }: TicketViewerProps)\n{\n\tconst editor = useEditor(true);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) editor.reset();\n\t}, [ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (ticket && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\teditor.setViewTicket(ticket);\n\t\t}\n\t}, [ttype.data, ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<div style={{ minWidth: 400, minHeight: 300 }}>\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t<canvas ref={refCanvas} />\n\t\t</div>\n\t)\n}\n\ninterface TicketViewerProps\n{\n\tticket: Ticket | null,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicketSimple({ event, ticket, close }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={close} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}","import { useState } from \"react\";\nimport Popup from \"../Popup\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport TicketViewer from \"../TicketEditor/viewer\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport ViewTicketSimple from \"./simple\";\n\nexport default function ViewTicket({ ticket, event, close }: ViewTicketProps)\n{\n\tconst [simpleViewer, setSimpleViewer] = useState<Ticket | null>(null);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\n\treturn (<>\n\t\t<Popup open={!!ticket && !simpleViewer} close={close} title=\"Просмотр билета\">\n\t\t\t<TicketViewer ticket={ticket} />\n\t\t\t{ttype.data && !ttype.data.imageId && <div style={{ textAlign: \"center\" }}>\n\t\t\t\t<button className=\"button\" onClick={() => setSimpleViewer(ticket)}>Сгенерировать qr код</button>\n\t\t\t</div>}\n\t\t</Popup>\n\t\t<ViewTicketSimple ticket={simpleViewer} event={event} close={() => { setSimpleViewer(null); close() }} />\n\t</>\n\t)\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport ApiError from \"../../api/apiError\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\nimport { useTicketStats } from \"../../api/tickets\";\nimport TicketTypeEditor from \"../../components/TicketEditor\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editTypeFormOpen, setEditTypeFormOpen] = useState(-1);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst stats = useTicketStats(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t\t<TicketTypeEditor typeId={editTypeFormOpen} eventId={parseInt(eventId)} open={editTypeFormOpen >= 0} close={() => setEditTypeFormOpen(-1)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t{ticketTypes.data?.map(v =>\n\t\t\t\t\t\t\t\t<div key={v.id}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"button button_small icon\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: \"0.5em\" }}\n\t\t\t\t\t\t\t\t\t\tonClick={() => setEditTypeFormOpen(v.id)}\n\t\t\t\t\t\t\t\t\t>edit_square</button>\n\t\t\t\t\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t\t\t\t\t<span>{\" -> \"}</span>\n\t\t\t\t\t\t\t\t\t<span>{stats.data?.find(s => s.typeId == v.id)?.count || \"0\"}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{stats.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(stats, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t{stats.data &&\n\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t<span>{\"Всего -> \"}</span>\n\t\t\t\t\t\t\t\t\t<span>{stats.data.reduce((p, v) => p + v.count, 0)}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [hideCode, setHideCode] = useState(true);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t\tsetCode(ticket.code || \"\");\n\t\t}\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetHideCode(true);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t\tcode: hideCode ? ticket.code : code,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={!hideCode} onChange={e => setHideCode(!e.target.checked)} />\n\t\t\t\t\t<span style={{ color: hideCode ? \"gray\" : \"darkred\" }}>Изменить код</span>\n\t\t\t\t</label>\n\t\t\t\t{!hideCode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ApiError from \"../../api/apiError\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t<th>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<Link to=\"/users\" className=\"button\">Users</Link>\n\t\t\t<Link to=\"/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роль</h3>\n\t\t\t\t\t{user.data?.role}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useQuery } from \"react-query\";\nimport { Modify, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", getLog);\n}\n\nasync function getLog(): Promise<LogItem[]>\n{\n\tconst res = await fetch(\"/api/debug/log\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn (data as LogItemResponse[]).map(parseLogResponse);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changes\":\"styles_changes__EyS9f\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className=\"button button_small\" onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ width: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ width: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ width: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changes}>\n\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{item.changes.map(v => <div>{v[0]}: \"{v[1]}\" {\"->\"} \"{v[2]}\"</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport EventPage from \"./pages/EventPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport displayError from \"./utils/displayError\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport LogPage from \"./pages/LogPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchPost","input","body","fetch","method","headers","undefined","JSON","stringify","useUser","useQuery","getUser","_getUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","user","wrap","_context","prev","next","sent","json","status","abrupt","auth","id","login","role","name","operations","ok","msg","stop","getUsers","_getUsers","_callee2","_context2","postChangePassword","_x","_postChangePassword","_callee3","_context3","t0","t1","postChangeName","_x2","_postChangeName","_callee4","_context4","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","HeaderBack","navigate","useNavigate","_jsx","className","styles","root","children","onClick","classNames","_len","length","names","Array","_key","filter","v","join","postAuth","_postAuth","authData","postLogout","_postLogout","Spinner","_ref","color","zIndex","_jsxs","spinner","style","Header","backLink","_useState","useState","_useState2","_slicedToArray","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","document","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","error","setError","inp_login","useRef","inp_password","onError","setQueryData","message","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Scanner","_ref$active","active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","result","highlightScanRegion","maxScansPerSecond","old","destroy","start","catch","pause","padNum","num","len","padStart","countWord","one","two","five","numS","at","dateToString","date","getFullYear","getMonth","getDate","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","Date","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","ScannerHeader","event","onInputBtn","top","bottom","fetchDelete","getEvents","_getEvents","events","map","parseEventResponse","useEvent","eventId","_getEvent","getEvent","useScannerEvent","_getScannerEvent","getScannerEvent","retry","NaN","responseEvent","postNewEvent","_x3","_postNewEvent","eventData","useMutationUpdateEvent","_x4","_x5","_postUpdateEvent","postUpdateEvent","_queryClient$getQuery2","getQueryState","_callee5","_context5","useMutationDeleteEvent","_x6","_postDeleteEvent","postDeleteEvent","_queryClient$getQuery3","removeQueries","exact","_callee6","_context6","Popup","_ref$open","open","close","_ref$title","popup","useTickets","_getTickets","getTickets","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","postNewTicket","_postNewTicket","ticketData","postUpdateTicket","_postUpdateTicket","params","ticketId","useMutationDeleteTicket","postDeleteTicket","tickets","_postDeleteTicket","useTicketStats","_getTicketStats","getTicketStats","postCheckTicket","_postCheckTicket","apiResult","useSound","url","audio","Audio","preload","currentTime","play","getTicketPrefix","toString","ScannerPage","urlParams","useParams","qrScanResult","setQrScanResult","_useState3","_useState4","ticketCode","setTicketCode","_useState5","_useState6","_useState7","_useState8","checkTicketResult","setCheckTicketResult","_useState9","_useState10","startHintOpen","setStartHintOpen","_useState11","_useState12","inputOpen","setInputOpen","_useState13","_useState14","alreadyScanned","setAlreadyScanned","_useState15","_useState16","cameraError","setCameraError","inputRef","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","setTimeout","focus","handleCloseInput","reset","useMutationCheckTicket","success","code","isSuccess","timeout","clearTimeout","_Fragment","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","personName","promocode","errorCode","marginTop","_inputRef$current","displayError","requestRes","render","isError","defaultRender","textAlign","CreateEventForm","inp_title","inp_date","_queryClient$getQuery","useMutationNewEvent","_inp_title$current","_inp_date$current","EventsPage","_events$data","_events$data$sort","createFormOpen","setCreateFormOpen","forEach","useEvents","sort","a","b","space_between","useStaff","getStaff","_getStaff","useStaffEvent","_getStaffEvent","getStaffEvent","useMutationUpdateStaff","staffData","_postStaff","postStaff","postNewStaff","_postNewStaff","newStaffData","exist","useMutationDeleteStaff","staffId","_postDeleteStaff","postDeleteStaff","staff","useMutationResetStaffPassword","_postResetStaffPassword","postResetStaffPassword","_queryClient$getQuery4","CreateStaffForm","newStaff","setNewStaff","inp_name","useMutationNewStaff","_inp_name$current","placeholder","onInput","replaceAll","PopupConfirmDeletion","mutatateParams","itemId","item","StaffPage","_staff$data","_staff$data2","delitionStaff","setDelitionStaff","resetPasswordStaff","setResetPasswordStaff","toggleInp","htmlFor","toggle","userInfo","useTicketTypes","query","_getTicketTypes","getTicketTypes","useMutationUpdateTicketTypes","_postUpdateTicketTypes","postUpdateTicketTypes","inp","some","action","updateTicketTypesData","useTicketType","typeId","_getTicketType","getTicketType","enabled","useMutationUpdateTicketType","_postUpdateTicketType","postUpdateTicketType","types","updateTicketTypeData","CreateTicketForm","_ticketTypes$data3","_ticketTypes$data4","_ticketTypes$data5","setTicet","setTypeId","setPersonName","personLink","setPersonLink","setPromocode","setCode","autocode","setAutocode","useMutationNewTicket","ticketTypes","_ticketTypes$data","_ticketTypes$data$","parseInt","onChange","_ticketTypes$data2","_ticketTypes$data2$e$","target","selectedIndex","checked","fontSize","imagefileToData","_imagefileToData","file","accessEventId","imgBase64","Promise","resolve","reader","FileReader","addEventListener","readAsDataURL","console","TicketEditor","_this","init","viewMode","editor","img","imgQr","Image","imgFile","width","height","objects","canvas","ctx","loading","listenerResize","draw","listenerMouseDown","_this$editor","mouseDown","offsetX","offsetY","button","listenerMouseMove","_this$editor2","mouseMove","listenerMouseUp","_this$editor3","mouseUp","listenerContextMenu","listenerWheel","_this$editor4","wheel","deltaY","inspectorSet","inspectorInput","_this$editor5","this","key","image","loadImage","createNewData","reRenderQR","_this$editor6","setViewTicket","_this2","URL","revokeObjectURL","createObjectURL","removeCanvasListeners","getContext","f","_getData","imageName","t2","pattern","removeEventListener","obj","_this$editor7","drawObject","resetZoom","fitToView","_this3","_this$data$objects$fi","_this$ticket","_this4","find","c","renderQRCode","setQr","cursor","parent","parentElement","w","clientWidth","h","clientHeight","fillStyle","fillRect","Editor","bind","setCursor","setCanvasSize","imageSmoothingEnabled","text","drawTextAtCenter","size","font","lines","split","dy","ddy","i","fillText","x","y","callback","QRCode","errorCorrectionLevel","scale","margin","light","dark","setInspector","imgqr","_this5","transform","s","moving","sx","sy","vx","vy","vw","vh","mode","drawing","ex","ey","resizing","dir","keepAspect","aspect","canvasSize","selected","selectionBorder","max","m","min","restrictView","qr","save","translate","drawImage","complete","naturalHeight","unwrapRect","strokeStyle","lineWidth","strokeRect","restore","_this$pointToWorld","pointToWorld","_this$pointToWorld2","_this$pointToWorld3","_this$pointToWorld4","wx","wy","resize","rectZone","pointInRect","resizeCursor","redraw","round","dx","_this$resizing$dir","rx","ry","_this$pointToWorld5","_this$pointToWorld6","_this$pointToWorld7","_this$pointToWorld8","_this6","_this$pointToWorld9","_this$pointToWorld10","X","Y","iw","ih","rect","border","r","direction","_direction","Inspector","setUpdate","setObj","update","inspector","inspector_open","fields","valueAsNumber","colorInput","TicketTypeEditor","_ttype$data","useEditor","ttype","refCanvas","imageSelection","setImageSelection","isNewImage","setIsNewImage","noImage","imageId","_ttype$data2","setData","parse","setCanvas","panel","br","fitZoom","footer","files","setNewImage","accept","_ttype$data3","setImage","getData","TicketViewer","minWidth","minHeight","ViewTicketSimple","setRes","qrcode","setQrcode","ticketRef","html2canvas","then","visible","center","marginBottom","innerHTML","appendChild","ViewTicket","simpleViewer","setSimpleViewer","EditTicketTypesForm","_ticketTypes$data$fil","Map","changes","setChanges","newTypes","setNewTypes","from","values","_changes$get","get","_changes$get2","set","push","EditEventForm","_event$data","_event$data2","defaultValue","toISOString","slice","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","setStaff","selectedStaff","setSelectedStaff","_staffAll$data","marginLeft","_staffAll$data5","PopupQrCode","EventPage","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editTypeFormOpen","setEditTypeFormOpen","editStaffOpen","setEditStaffOpen","ticketOpen","setTicketOpen","qrcodeLinkOpen","setQrcodeLinkOpen","stats","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","replace","card","card__header","card__body","line","href","_stats$data","_stats$data$find","marginRight","count","fontWeight","reduce","p","right","EditTicketForm","setTicket","deletionOpen","setDeletionOpen","hideCode","setHideCode","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","hasAddPermission","hasEditPermission","startsWith","scanned","PrintTicketsPage","_useMemo","useMemo","codePref","every","_useMemo2","isCorrectCodes","prefix","print","table","colSpan","_objectSpread","sortV","lastIndexOf","DebugPage","logErrors","setLogErrors","log","setLog","refLogErrors","refLog","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","UsersPage","_users$data","users","_users$data$find","bossId","u","deleted","o","colorizeOperation","access","colors","page","add","change","delete","ChangePasswordForm","passwordRef","password2Ref","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","getLog","_getLog","parseLogResponse","responseLog","LogPage","_log$data","isFetching","refetch","colorizeAction","actionCode","tableName","recordId","userName","userId","added","updated","restored","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}
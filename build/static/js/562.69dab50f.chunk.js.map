{"version":3,"file":"static/js/562.69dab50f.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","api/auth.ts","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","utils/query.ts","api/events.ts","utils/nums.ts","utils/dates.ts","api/ticketTypes.ts","api/tickets.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/TicketEditor/styles.module.css?35f4","utils/imagefileToData.ts","utils/useFont.ts","components/TicketEditor/editor.ts","components/TicketEditor/inspector.tsx","api/fonts.ts","components/TicketEditor/index.tsx","components/TicketEditor/viewer.tsx","utils/saveCanvasAsPng.ts","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/simple.tsx","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/PopupConfirmDeletion/index.tsx","api/staff.ts","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/EventsFullPage/styles.module.css?dfe7","pages/EventsFullPage/index.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","components/create/CreateFontForm.tsx","pages/FontsPage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://ticket_system/./src/pages/ManagersPage/styles.module.css?b9cc","api/managers.ts","components/create/CreateManagerForm.tsx","pages/ManagersPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","utils/getTicketPrefix.ts","pages/PrintTicketsPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/useSound.ts","pages/ScannerPage/index.tsx","api/checkTicket.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","App.tsx"],"sourcesContent":["import type { TicketPattern } from \"../components/TicketEditor/editor\";\n\nexport class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface User\n{\n\tauth: boolean,\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\toperations: string[],\n}\n\nexport interface UserFull\n{\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\tbossId: number | null,\n\tdeleted: boolean,\n\taccess: string[],\n\toperations: string[],\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string,\n}\n\nexport interface ImgData\n{\n\tdata: string,\n\tname: string,\n\taccessEventId: number,\n}\n\nexport interface ResponseEvent\n{\n\tid: number,\n\tname: string,\n\tdate: string,\n}\n\nexport interface EventData\n{\n\tid: number,\n\tname: string,\n\tdate: Date,\n}\nexport interface EventDataFull\n{\n\tid: number,\n\tdeleted: boolean,\n\tname: string,\n\tdate: Date,\n\tactive: boolean,\n\taccess: User[],\n}\n\nexport interface ResponseCheckTicket\n{\n\tsuccess: boolean,\n\terrorCode: null | \"event\" | \"scanned\" | \"notExist\",\n\tticket: ResponseTicket | null,\n\tevent: ResponseEvent | null,\n}\n\nexport interface ResponseTicket\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\teventId: number,\n\tcreatedDate: string,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: string,\n\tauthOnPltf: boolean,\n}\n\nexport type CheckTicketResult = CheckTicketResult_success | CheckTicketResult_event | CheckTicketResult_scanned | CheckTicketResult_notExist;\n\ninterface CheckTicketResult_success\n{\n\tsuccess: true,\n\terrorCode: null,\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_event\n{\n\tsuccess: boolean,\n\terrorCode: \"event\",\n\tticket: Ticket,\n\tevent: EventData,\n}\n\ninterface CheckTicketResult_scanned\n{\n\tsuccess: false,\n\terrorCode: \"scanned\",\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_notExist\n{\n\tsuccess: false,\n\terrorCode: \"notExist\",\n\tticket: null,\n\tevent: null,\n}\n\nexport type Ticket = Ticket_common | Ticket_scanned;\n\ninterface Ticket_common\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: Date,\n\tauthOnPltf: boolean,\n}\n\ninterface Ticket_scanned\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy: string,\n\tscannedById: number,\n\tscannedDate: Date,\n\tauthOnPltf: boolean,\n}\n\nexport interface TicketType\n{\n\tid: number,\n\tname: string,\n\timageId: number | null,\n\tpattern: TicketPattern,\n}\n\nexport interface TicketStats\n{\n\ttypeId: number,\n\tcount: number,\n\tscanned: number,\n\tauthOnPltf: number,\n}\n\nexport interface Font\n{\n\tid: number,\n\tname: string,\n\ttype: \"ttf\" | \"otf\" | \"woff\" | \"woff2\",\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"GET\", input, body);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"GET\", input, body);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n\nexport async function fetchPostForm<T>(input: RequestInfo | URL, body: FormData)\n{\n\tconst res = await fetch(input, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t});\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as T;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError } from \"./dataTypes\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPost } from \"../utils/fetch\";\n\nexport function createEmptyUser(): User\n{\n\treturn { auth: false, id: -1, login: \"\", roles: [], name: \"\", operations: [] };\n}\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", async () =>\n\t{\n\t\tconst res = await fetch(\"/api/user\");\n\t\tconst data = await res.json();\n\n\t\tif (res.status == 401) return createEmptyUser();\n\t\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\t\tconst user = data as User;\n\t\tuser.auth = true;\n\t\treturn user;\n\t});\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\"),\n\t);\n}\n\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeNameData) =>\n\t\t\tawait fetchPost(\"/api/user/change_name\", data),\n\t\tonSuccess: (_, data: ChangeNameData) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeNameData\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_debug_events: \"page_debug_events\",\n\tpage_debug_users: \"page_debug_users\",\n\tpage_fonts: \"page_fonts\",\n\tpage_managers: \"page_managers\",\n\n\tget_staff_event: \"get_staff_event\",\n\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tadd_font: \"add_font\",\n\tadd_manager: \"add_manager\",\n\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n\tdelete_manager: \"delete_manager\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","import { useMutation, useQueryClient } from \"react-query\";\nimport { ApiError, User } from \"./dataTypes\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { createEmptyUser } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (authData: AuthData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => fetchPost(\"/api/logout\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", (_?: User) => createEmptyUser());\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredH\":\"styles_body_centeredH__1xVSd\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centeredH = false, centered = false, centeredPage = false, height100 = false, gap = 0, padding, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredH && styles.body_centeredH,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\", padding }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\tcenteredH?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tpadding?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_fonts\") && <Link to=\"/fonts\" className=\"button button_large\">Шрифты</Link>}\n\t\t\t{hasPermission(user, \"page_managers\") && <Link to=\"/managers\" className=\"button button_large\">Организаторы</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/d\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [logFrontend, setLogFrontend] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLogFrontend = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t{useHasPermission(\"page_debug_users\") && <Link to=\"/d/users\" className=\"button\">Users</Link>}\n\t\t\t{useHasPermission(\"page_debug_events\") && <Link to=\"/d/events\" className=\"button\">Events</Link>}\n\t\t\t<Link to=\"/d/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogFrontend(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_frontend\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogFrontend(data);\n\t\t\t\t\tsetTimeout(() => refLogFrontend.current?.parentElement?.scrollTo(0, refLogFrontend.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogFrontend(JSON.stringify(x)); }\n\t\t\t}}>Log frontend</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"logFrontend\" open={logFrontend != \"\"} close={() => setLogFrontend(\"\")}>\n\t\t\t\t<pre ref={refLogFrontend}>{logFrontend}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\",\"ticketTypes\":\"styles_ticketTypes__FIDHq\"};","import type { QueryClient, QueryKey } from \"react-query\";\n\nexport function queryStrKey(queryKey: QueryKey)\n{\n\treturn queryKey instanceof Array ? queryKey.map(v => `${v}`) : `${queryKey}`;\n}\n\nexport function queryInvalidate(queryClient: QueryClient, queryKey: QueryKey)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tqueryClient.invalidateQueries(queryKey, { exact: true });\n}\n\nexport function queryListAddItem<T>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items, item] : [item]);\n}\n\nexport function queryListUpdateItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items?.map(v => v.id == item.id ? item : v) || []);\n}\n\nexport function queryListDeleteItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, itemId: number | string)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? items.filter(v => v.id != itemId) : []);\n}\n\ninterface ObjWithId\n{\n\tid: number | string,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, EventData, ResponseEvent, ResponseMsg, type EventDataFull } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem, queryInvalidate } from \"../utils/query\";\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery(\"events\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events\");\n\t\treturn events.map(parseEventResponse);\n\t}, {\n\t\tonSuccess: data =>\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v)),\n\t});\n}\n\nexport function useEventsFull()\n{\n\treturn useQuery(\"events_full\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events_full\");\n\t\treturn events.map(parseEventResponse) as EventDataFull[];\n\t});\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst event = await fetchJsonGet<ResponseEvent>(\"/api/events/\" + eventId);\n\t\treturn parseEventResponse(event);\n\t});\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst res = await fetch(\"/api/scanner_events/\" + eventId);\n\t\tconst data = await res.json();\n\t\tif (!res.ok)\n\t\t{\n\t\t\tif (res.status == 403)\n\t\t\t\treturn NaN;\n\t\t\tthrow new ApiError((await res.json() as ResponseMsg).msg);\n\t\t}\n\t\treturn parseEventResponse(data as ResponseEvent);\n\t}, { retry: 3 });\n}\n\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events\", eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListAddItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events/\" + eventId, eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListUpdateItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/events/\" + eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, [\"event\", eventId]);\n\t\t\tqueryListDeleteItem(queryClient, \"events\", eventId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationGetAccessToEvent()\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventId: number | string) =>\n\t\t\tawait fetchPost(`/api/events/${eventId}/add_access`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, \"events\");\n\t\t\tqueryInvalidate(queryClient, \"events_full\");\n\t\t},\n\t});\n}\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false, year = true)\n{\n\tif (!date) return \"\";\n\tconst nums = [padNum(date.getDate(), 2), padNum(date.getMonth() + 1, 2)];\n\tif (year) nums.push(`${date.getFullYear()}`);\n\tif (reverse) nums.reverse();\n\treturn nums.join(\".\");\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport type { ImgData, TicketType } from \"./dataTypes\";\nimport type { TicketPattern } from \"../components/TicketEditor/editor\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryInvalidate, queryListUpdateItem } from \"../utils/query\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery([\"ticket_types\", eventId], async () =>\n\t\tawait fetchJsonGet<TicketType[]>(`/api/events/${eventId}/ticket_types`),\n\t\t{\n\t\t\tonSuccess: data =>\n\t\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v)),\n\t\t});\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypesData[]) =>\n\t\t\tawait fetchJsonPost<TicketType[]>(`/api/events/${eventId}/ticket_types`, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryInvalidate(queryClient, [\"tickets\", eventId])\n\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], data);\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n\n\nexport function useTicketType(typeId: number)\n{\n\treturn useQuery([\"ticket_type\", `${typeId}`], async () =>\n\t\tawait fetchJsonGet<TicketType>(\"/api/ticket_types/\" + typeId),\n\t\t{ enabled: typeId >= 0 }\n\t);\n}\n\nexport function useMutationUpdateTicketType(typeId: number | string, onSuccess?: (ticket: TicketType) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypeData) =>\n\t\t\tawait fetchJsonPost<TicketType>(\"/api/ticket_types/\" + typeId, data),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"ticket_type\", `${typeId}`], data);\n\t\t\tqueryListUpdateItem(queryClient, [\"ticket_types\", typeId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypeData\n{\n\timg: ImgData | null,\n\tpattern: TicketPattern,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseTicket, Ticket, TicketStats } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", `${eventId}`], async () =>\n\t{\n\t\tconst tickets = await fetchJsonGet<ResponseTicket[]>(`/api/events/${eventId}/tickets`);\n\t\treturn tickets.map(parseTicketResponse);\n\t});\n}\n\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: NewTicketData) =>\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets\", ticketData);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async function postUpdateTicket(params: UpdateTicketParams)\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets/\" + params.ticketId, params.data);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketId: number | string) =>\n\t\t\tawait fetchDelete(\"/api/tickets/\" + ticketId),\n\t\tonSuccess: (_, ticketId) =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, [\"tickets\", eventId], ticketId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useTicketStats(eventId: number | string)\n{\n\treturn useQuery([\"ticket_stats\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<TicketStats[]>(`/api/events/${eventId}/tickets_stats`),\n\t);\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(ticketTypes.data?.[0]?.id || -1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__+QOp3\",\"canvas\":\"styles_canvas__wzjs3\",\"inspector\":\"styles_inspector__TrPRu\",\"inspector_open\":\"styles_inspector_open__h5KZj\",\"fields\":\"styles_fields__fz+aE\",\"colorInput\":\"styles_colorInput__8Ty5B\",\"fontInput\":\"styles_fontInput__zF4OQ\",\"panel\":\"styles_panel__yLWcU\",\"br\":\"styles_br__7BTyB\",\"footer\":\"styles_footer__ADD9E\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string, accessEventId?: number)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t\taccessEventId,\n\t} as ImgData\n}","import { useEffect } from \"react\";\nimport { Font } from \"../api/dataTypes\";\n\nexport default function useFont(font: Font)\n{\n\tconst fontName = `${font.id}_${font.name}`;\n\tuseEffect(() =>\n\t{\n\t\tconst myFont = newFontFace(fontName, font.id, font.type);\n\t\tdocument.fonts.add(myFont);\n\t\treturn () =>\n\t\t{\n\t\t\tdocument.fonts.delete(myFont);\n\t\t}\n\t}, []);\n\treturn `\"${fontName}\"`;\n}\n\nexport function newFontFace(family: string, id: number, type: keyof typeof fontTypes)\n{\n\treturn new FontFace(family, `url(\"/api/fonts/${id}\")  format(\"${fontTypes[type]}\")`);\n}\n\nconst fontTypes = {\n\totf: \"opentype\",\n\tttf: \"truetype\",\n\twoff: \"woff\",\n\twoff2: \"woff2\",\n}\n","import { Font, Ticket } from \"../../api/dataTypes\";\nimport type { UpdateTicketTypeData } from \"../../api/ticketTypes\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport QRCode from \"qrcode\"\nimport { newFontFace } from \"../../utils/useFont\";\n\nexport class TicketEditor\n{\n\tprivate editor: Editor | null = null;\n\tprivate img: HTMLImageElement | null = null;\n\tprivate imgQr = new Image();\n\tprivate qrLast = 0;\n\tprivate imgFile: File | null = null;\n\tprivate data: TicketPattern = { width: 0, height: 0, objects: [] };\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate loadingImg = false;\n\tprivate loadingFont = false;\n\tprivate loadingFonts: FontFace[] = [];\n\tprivate get loading() { return this.loadingImg || this.loadingFont; }\n\tprivate ticket: Ticket | null = null;\n\tprivate fonts: { id: number, font: FontFace }[] = [];\n\tprivate listenerResize = () => this.draw();\n\tprivate listenerKeydown = (e: KeyboardEvent) => { if (e.key == \"Delete\") if (this.editor?.deleteSelectedObj()) this.draw(); };\n\tprivate listenerMouseDown = (e: MouseEvent) => { if (this.editor?.mouseDown(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerMouseMove = (e: MouseEvent) => { if (this.editor?.mouseMove(e.offsetX, e.offsetY)) this.draw() };\n\tprivate listenerMouseUp = (e: MouseEvent) => { if (this.editor?.mouseUp(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerContextMenu = (e: MouseEvent) => { e.preventDefault(); };\n\tprivate listenerWheel = (e: WheelEvent) => { e.preventDefault(); if (this.editor?.wheel(e.offsetX, e.offsetY, e.deltaY)) this.draw() };\n\tprivate inspectorSet: InspectorSetFunc = () => { };\n\n\tconstructor(private fontTypes: FontTypes | null, init = true, private viewMode = false)\n\t{\n\t\tif (!init || viewMode) return;\n\t\twindow.addEventListener(\"resize\", this.listenerResize);\n\t\twindow.addEventListener(\"keydown\", this.listenerKeydown);\n\t}\n\n\tpublic static renderQRCode(code: string, color: string, callback: (img: HTMLImageElement) => void)\n\t{\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10, margin: 2, color: { light: \"#ffffff00\", dark: color } }, (e, url) =>\n\t\t{\n\t\t\tif (e) console.error(e);\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener(\"load\", () =>\n\t\t\t{\n\t\t\t\tcallback(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tpublic setData(image: number | null, data: TicketPattern)\n\t{\n\t\tthis.img = null;\n\t\tthis.imgFile = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t\tthis.data = data || this.createNewData();\n\n\t\t// update data from prev version\n\t\tthis.data.objects.forEach(v => v.f == undefined ? v.f = -1 : {});\n\n\t\tif (!this.data.objects.find(v => v.type == \"code\"))\n\t\t\tthis.data.objects.push({ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 });\n\n\t\tthis.editor = null;\n\t\tthis.reRenderQR();\n\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t\tthis.editor?.setViewTicket(ticket);\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setNewImage(image: File)\n\t{\n\t\tthis.imgFile = image;\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tURL.revokeObjectURL(url);\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tconst url = URL.createObjectURL(image)\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = url;\n\t}\n\tpublic setImage(image: number | null)\n\t{\n\t\tthis.imgFile = null;\n\t\tthis.img = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t}\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.removeCanvasListeners();\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\n\t\tif (this.viewMode) return;\n\n\t\tcanvas.addEventListener(\"mousedown\", this.listenerMouseDown);\n\t\tcanvas.addEventListener(\"mousemove\", this.listenerMouseMove);\n\t\tcanvas.addEventListener(\"mouseup\", this.listenerMouseUp);\n\t\tcanvas.addEventListener(\"wheel\", this.listenerWheel);\n\t\tcanvas.addEventListener(\"contextmenu\", this.listenerContextMenu);\n\t}\n\tpublic setInspector(f: InspectorSetFunc)\n\t{\n\t\tthis.inspectorSet = f;\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tthis.editor?.inspectorInput(field, value);\n\t\tif (field == \"f\")\n\t\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic reset()\n\t{\n\t\tthis.editor = null;\n\t\tthis.img = null;\n\t\tthis.imgQr = new Image();\n\t\tthis.imgFile = null;\n\t\tthis.data = { width: 0, height: 0, objects: [] };\n\t\tthis.loadingImg = false;\n\t\tthis.loadingFont = false;\n\t\tthis.ticket = null;\n\t\tthis.inspectorSet(null);\n\t\tthis.draw();\n\t}\n\tpublic async getData(imageName: string, eventId: number)\n\t{\n\t\treturn {\n\t\t\tpattern: this.data,\n\t\t\timg: this.imgFile ? await imagefileToData(this.imgFile, imageName, eventId) : null,\n\t\t} as UpdateTicketTypeData\n\t}\n\tpublic destroy()\n\t{\n\t\twindow.removeEventListener(\"resize\", this.listenerResize);\n\t\twindow.removeEventListener(\"keydown\", this.listenerKeydown);\n\t\tthis.removeCanvasListeners();\n\t\tthis.inspectorSet(null);\n\t}\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.editor?.drawObject(obj);\n\t\tthis.draw();\n\t}\n\tpublic resetZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.resetZoom();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\tpublic fitZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.fitToView();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners()\n\t{\n\t\tif (this.canvas)\n\t\t{\n\t\t\tthis.canvas.removeEventListener(\"mousedown\", this.listenerMouseDown);\n\t\t\tthis.canvas.removeEventListener(\"mousemove\", this.listenerMouseMove);\n\t\t\tthis.canvas.removeEventListener(\"mouseup\", this.listenerMouseUp);\n\t\t\tthis.canvas.removeEventListener(\"wheel\", this.listenerWheel);\n\t\t\tthis.canvas.removeEventListener(\"contextmenu\", this.listenerContextMenu);\n\t\t}\n\t}\n\n\tprivate loadImage(image: number)\n\t{\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = `/api/img/${image}`;\n\t}\n\n\tprivate loadFonts()\n\t{\n\t\tthis.loadingFont = true;\n\t\tif (!this.fontTypes) return;\n\n\t\tconst reqFonts = this.data.objects.map(v => v.f);\n\t\t// delete unused fonts\n\t\tfor (let i = this.fonts.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst font = this.fonts[i];\n\t\t\tif (!reqFonts.includes(font.id))\n\t\t\t{\n\t\t\t\tdocument.fonts.delete(font.font);\n\t\t\t\tthis.fonts.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t// load new fonts\n\n\t\tconst loadedFonts = this.fonts.map(v => v.id);\n\t\tfor (const obj of this.data.objects)\n\t\t{\n\t\t\tif (obj.f < 0 || loadedFonts.includes(obj.f))\n\t\t\t\tcontinue\n\t\t\tconst font = newFontFace(`font_${obj.f}`, obj.f, this.fontTypes[obj.f]);\n\t\t\tthis.fonts.push({ id: obj.f, font });\n\t\t\tthis.loadingFonts.push(font);\n\t\t\tdocument.fonts.add(font);\n\t\t\tfont.load().then(() =>\n\t\t\t{\n\t\t\t\tthis.loadingFonts.splice(this.loadingFonts.indexOf(font), 1)\n\t\t\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t\t\t\tif (!this.loadingFont)\n\t\t\t\t\tthis.draw();\n\t\t\t});\n\t\t}\n\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t}\n\n\tprivate reRenderQR()\n\t{\n\t\tconst color = this.data.objects.find(v => v.type == \"qr\")?.c || \"#000000\";\n\t\tconst id = ++this.qrLast;\n\t\tTicketEditor.renderQRCode(this.ticket?.code || \"23-31224-34-07-4321\", color, img =>\n\t\t{\n\t\t\tif (id != this.qrLast) return;\n\t\t\tthis.imgQr = img;\n\t\t\tif (this.editor)\n\t\t\t{\n\t\t\t\tthis.editor.setQr(img);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setCursor(cursor: Cursor)\n\t{\n\t\tif (!this.canvas) return;\n\t\tthis.canvas.style.cursor = cursor;\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas) return;\n\t\tconst parent = this.canvas.parentElement;\n\t\tif (!parent) return;\n\n\t\tlet w = parent.clientWidth;\n\t\tlet h = parent.clientHeight;\n\t\tif (this.viewMode && this.img && !this.loading)\n\t\t{\n\t\t\tw = this.data.width;\n\t\t\th = this.data.height;\n\t\t}\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.style.width = `${w}px`;\n\t\tthis.canvas.height = h;\n\t\tthis.canvas.style.height = `${h}px`;\n\n\t\tif (!this.ctx) return;\n\t\tthis.ctx.fillStyle = \"#00000033\";\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (!this.img || this.loading)\n\t\t{\n\t\t\tthis.ctx.fillStyle = \"black\";\n\t\t\tconst text = this.loading ? \"Загрузка\" : (this.viewMode ? \"Этот тип билетов\\nне настроен\" : \"Загрузите картинку\");\n\t\t\tthis.drawTextAtCenter(text, 32);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor)\n\t\t{\n\t\t\tthis.editor = new Editor(this.img, this.data, this.reRenderQR.bind(this), this.setCursor.bind(this), this.inspectorSet, this.imgQr, this.viewMode)\n\t\t\tthis.editor.setCanvasSize({ w, h });\n\t\t\tthis.editor.fitToView();\n\t\t}\n\t\tthis.editor.setCanvasSize({ w, h });\n\t\tthis.ctx.imageSmoothingEnabled = false;\n\t\tif (this.ticket)\n\t\t\tthis.editor.setViewTicket(this.ticket);\n\t\tthis.editor.draw(this.ctx)\n\t}\n\n\tprivate drawTextAtCenter(text: string, size: number)\n\t{\n\t\tif (!this.ctx || !this.canvas) return;\n\t\tconst w = this.canvas.width;\n\t\tconst h = this.canvas.height;\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.font = `${size}px Arial`;\n\t\tconst lines = text.split(\"\\n\");\n\t\tconst dy = -lines.length * size * 0.8 / 2;\n\t\tconst ddy = lines.length * size * 0.8;\n\t\tfor (let i = 0; i < lines.length; i++)\n\t\t\tthis.ctx.fillText(lines[i], w / 2, h / 2 + dy + ddy * i);\n\t}\n\n\tprivate createNewData()\n\t{\n\t\treturn {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tobjects: [\n\t\t\t\t{ type: \"qr\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"name\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"promo\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t],\n\t\t} as TicketPattern;\n\t}\n}\n\nexport interface FontTypes\n{\n\t[id: number]: Font[\"type\"];\n}\n\nexport interface TicketPattern\n{\n\twidth: number,\n\theight: number,\n\tobjects: TicketPatternObject[],\n}\nexport interface TicketPatternObject\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tc: string, // color\n\tf: number, // font\n\ttype: TicketPatternObjectType,\n}\ntype TicketPatternObjectType = \"qr\" | \"name\" | \"promo\" | \"code\";\n\ntype InspectorSetFunc = (obj: TicketPatternObject | null) => void;\ntype InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) => void;\n\ntype MoveMode = null | \"view\" | \"obj\" | \"resize\";\ntype Cursor = \"default\" | \"move\" | \"n-resize\" | \"e-resize\" | \"ne-resize\" | \"nw-resize\";\n\n\nclass Editor\n{\n\tprivate transform = { x: 0, y: 0, s: 1 };\n\tprivate moving = { sx: 0, sy: 0, vx: 0, vy: 0, vw: 0, vh: 0, mode: null as MoveMode };\n\tprivate drawing = { sx: 0, sy: 0, ex: 0, ey: 0, active: false, type: null as TicketPatternObjectType | null };\n\tprivate resizing = { dir: [0, 0] as RectZone, keepAspect: false, aspect: 1 };\n\tprivate canvasSize = { w: 0, h: 0 };\n\tprivate selected = -1;\n\tprivate readonly selectionBorder = 16;\n\tprivate ticket: Ticket | null = null;\n\n\tconstructor(\n\t\tprivate img: HTMLImageElement,\n\t\tprivate data: TicketPattern,\n\t\tprivate reRenderQR: () => void,\n\t\tprivate setCursor: (cursor: Cursor) => void,\n\t\tprivate setInspector: InspectorSetFunc,\n\t\tprivate imgqr: HTMLImageElement,\n\t\tprivate viewMode: boolean,\n\t)\n\t{\n\t\tdata.width = img.width;\n\t\tdata.height = img.height;\n\t}\n\n\tpublic fitToView()\n\t{\n\t\tconst m = this.viewMode ? 0 : 100;\n\t\tthis.transform.s = Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height);\n\t\tthis.transform.x = (this.canvasSize.w - this.img.width * this.transform.s) / 2;\n\t\tthis.transform.y = (this.canvasSize.h - this.img.height * this.transform.s) / 2;\n\t\tthis.restrictView();\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tif (this.selected < 0) return;\n\t\tconst obj = this.data.objects[this.selected]\n\t\tconst fs = [\"x\", \"y\", \"w\", \"h\", \"f\"] as const;\n\t\tif (fs.includes(field as any))\n\t\t{\n\t\t\tconst f = field as typeof fs[number];\n\t\t\tconst v = value as number;\n\t\t\tobj[f] = Math.max(v, 0);\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (f == \"w\") obj.h = obj.w;\n\t\t\t\tif (f == \"h\") obj.w = obj.h;\n\t\t\t}\n\t\t}\n\t\telse if (field == \"c\")\n\t\t{\n\t\t\tobj[field] = value;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tthis.reRenderQR();\n\t\t}\n\t}\n\tpublic setCanvasSize(size: { w: number, h: number })\n\t{\n\t\tthis.canvasSize = size;\n\t}\n\tpublic setQr(qr: HTMLImageElement)\n\t{\n\t\tthis.imgqr = qr;\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.x, this.transform.y);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tctx.fillStyle = \"black\"\n\t\tctx.fillRect(0, 0, this.img.width, this.img.height);\n\t\tctx.drawImage(this.img, 0, 0);\n\n\t\tconst texts = {\n\t\t\tname: this.ticket?.personName ?? \"Иванов Иван Иванович 太阳\",\n\t\t\tpromo: this.ticket?.promocode ?? \"Неутомимый\",\n\t\t\tcode: this.ticket?.code ?? \"23-31224-34-07-4321\",\n\t\t}\n\n\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t{\n\t\t\tconst obj = this.data.objects[i];\n\t\t\t// ctx.fillStyle = \"#ffffff88\";\n\t\t\t// ctx.fillRect(...unwrapRect(obj));\n\t\t\tctx.fillStyle = obj.c;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (this.imgqr.complete && this.imgqr.naturalHeight != 0)\n\t\t\t\t\tctx.drawImage(this.imgqr, ...unwrapRect(obj));\n\t\t\t\telse\n\t\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\telse if (obj.type == \"name\" || obj.type == \"promo\" || obj.type == \"code\")\n\t\t\t{\n\t\t\t\tconst font = `font_${obj.f}, Arial`;\n\t\t\t\tctx.font = `${obj.h}px ${font}`;\n\t\t\t\tctx.fillText(texts[obj.type], obj.x, obj.y + obj.h * 0.8, obj.w);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\tif (this.selected == i)\n\t\t\t{\n\t\t\t\tctx.strokeStyle = \"orange\";\n\t\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\t\tctx.strokeRect(...unwrapRect(obj));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\tctx.strokeStyle = \"white\";\n\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\tlet w = this.drawing.ex - this.drawing.sx;\n\t\t\tlet h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (this.drawing.type == \"qr\")\n\t\t\t\th = w;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t\tctx.strokeStyle = \"black\";\n\t\t\tctx.lineWidth = 2 / this.transform.s;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.drawing.type = obj;\n\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t}\n\n\tpublic deleteSelectedObj()\n\t{\n\t\tif (this.selected < 0)\n\t\t\treturn false;\n\n\t\tconst obj = this.data.objects[this.selected];\n\t\tobj.x = 0;\n\t\tobj.y = 0;\n\t\tobj.w = 0;\n\t\tobj.h = 0;\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t\treturn true;\n\t}\n\n\tpublic resetZoom()\n\t{\n\t\tthis.transform.s = 1;\n\t\tthis.restrictView();\n\t}\n\n\tpublic mouseDown(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.sx = x;\n\t\tthis.moving.sy = y;\n\t\tif (button == 2)\n\t\t{\n\t\t\tthis.moving.vx = this.transform.x;\n\t\t\tthis.moving.vy = this.transform.y;\n\t\t\tthis.moving.mode = \"view\";\n\t\t\tthis.setCursor(\"move\");\n\t\t\treturn;\n\t\t}\n\t\tif (button == 0)\n\t\t{\n\t\t\tif (this.drawing.type)\n\t\t\t{\n\t\t\t\t[this.drawing.sx, this.drawing.sy] = this.pointToWorld(x, y);\n\t\t\t\tthis.drawing.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t\t{\n\t\t\t\tconst obj = this.data.objects[i];\n\t\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\t\tlet resize = false;\n\t\t\t\tif (this.selected == i)\n\t\t\t\t{\n\t\t\t\t\tthis.resizing.dir = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\t\t\tresize = this.resizing.dir[0] != 0 || this.resizing.dir[1] != 0;\n\t\t\t\t\tthis.resizing.aspect = obj.h / obj.w;\n\t\t\t\t\tthis.resizing.keepAspect = obj.type == \"qr\";\n\t\t\t\t}\n\t\t\t\tif (pointInRect(wx, wy, obj) || resize)\n\t\t\t\t{\n\t\t\t\t\tthis.selected = i;\n\t\t\t\t\tthis.setInspector(obj);\n\t\t\t\t\tthis.moving.vx = obj.x;\n\t\t\t\t\tthis.moving.vy = obj.y;\n\t\t\t\t\tthis.moving.vw = obj.w;\n\t\t\t\t\tthis.moving.vh = obj.h;\n\t\t\t\t\tthis.moving.mode = resize ? \"resize\" : \"obj\";\n\t\t\t\t\tthis.setCursor(resize ? resizeCursor(this.resizing.dir) : \"move\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst redraw = this.selected >= 0;\n\t\t\tthis.selected = -1;\n\t\t\tthis.setInspector(null);\n\t\t\treturn redraw;\n\t\t}\n\t}\n\n\tpublic mouseMove(x: number, y: number)\n\t{\n\t\tif (this.moving.mode == \"view\")\n\t\t{\n\t\t\tthis.transform.x = this.moving.vx + (x - this.moving.sx);\n\t\t\tthis.transform.y = this.moving.vy + (y - this.moving.sy);\n\t\t\tthis.restrictView();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"obj\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tobj.x = this.moving.vx + (x - this.moving.sx) / this.transform.s;\n\t\t\tobj.y = this.moving.vy + (y - this.moving.sy) / this.transform.s;\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"resize\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst dx = (x - this.moving.sx) / this.transform.s;\n\t\t\tconst dy = (y - this.moving.sy) / this.transform.s;\n\t\t\tconst [rx, ry] = this.resizing.dir;\n\t\t\tif (this.resizing.keepAspect)\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx == 0)\n\t\t\t\t{\n\t\t\t\t\tif (ry > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t\t}\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t\t}\n\t\t\t\t\tobj.w = obj.h / this.resizing.aspect;\n\t\t\t\t\tobj.x = this.moving.vx - (obj.w - this.moving.vw) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t}\n\t\t\t\tif (ry > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t}\n\t\t\t\tif (ry < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.w = Math.max(obj.w, 5);\n\t\t\tobj.h = Math.max(obj.h, 5);\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.selected >= 0)\n\t\t{\n\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst resize = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\tif (resize[0] != 0 || resize[1] != 0)\n\t\t\t\tthis.setCursor(resizeCursor(resize));\n\t\t\telse\n\t\t\t\tthis.setCursor(\"default\");\n\t\t}\n\t}\n\n\tpublic mouseUp(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.mode = null;\n\t\tthis.setCursor(\"default\");\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects.find(v => v.type == this.drawing.type);\n\t\t\tif (!obj)\n\t\t\t{\n\t\t\t\tconsole.error(\"Ticket editor: drawing obj not found\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tobj.x = this.drawing.sx;\n\t\t\tobj.y = this.drawing.sy;\n\t\t\tobj.w = this.drawing.ex - this.drawing.sx;\n\t\t\tobj.h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (obj.w < 0)\n\t\t\t{\n\t\t\t\tobj.x += obj.w;\n\t\t\t\tobj.w *= -1;\n\t\t\t}\n\t\t\tif (obj.h < 0)\n\t\t\t{\n\t\t\t\tobj.y += obj.h;\n\t\t\t\tobj.h *= -1;\n\t\t\t}\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.drawing.active = false;\n\t\t\tthis.drawing.type = null;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tobj.h = obj.w;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic wheel(x: number, y: number, d: number)\n\t{\n\t\tconst X = (x - this.transform.x) / this.transform.s;\n\t\tconst Y = (y - this.transform.y) / this.transform.s;\n\n\t\tif (d > 0)\n\t\t\tthis.transform.s /= 1.1;\n\t\telse\n\t\t\tthis.transform.s *= 1.1;\n\t\tconst m = 200;\n\t\tthis.transform.s = Math.max(this.transform.s, Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height));\n\n\t\tthis.transform.x = x - X * this.transform.s;\n\t\tthis.transform.y = y - Y * this.transform.s;\n\t\tthis.restrictView();\n\t\treturn true;\n\t}\n\n\tprivate restrictView()\n\t{\n\t\tconst m = 100;\n\t\tconst iw = this.img.width * this.transform.s\n\t\tconst ih = this.img.height * this.transform.s\n\t\tif (iw > this.canvasSize.w)\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + this.canvasSize.w - m), m);\n\t\telse\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + m), this.canvasSize.w - m);\n\t\tif (ih > this.canvasSize.h)\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + this.canvasSize.h - m), m);\n\t\telse\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + m), this.canvasSize.h - m);\n\t}\n\n\tprivate pointToWorld(x: number, y: number)\n\t{\n\t\treturn [(x - this.transform.x) / this.transform.s, (y - this.transform.y) / this.transform.s];\n\t}\n\tprivate pointToScreen(x: number, y: number)\n\t{\n\t\treturn [x * this.transform.s + this.transform.x, y * this.transform.s + this.transform.y];\n\t}\n}\n\ninterface Rect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\n\nfunction pointInRect(x: number, y: number, rect: Rect)\n{\n\treturn x > rect.x && x < rect.x + rect.w &&\n\t\ty > rect.y && y < rect.y + rect.h;\n}\n\ntype RectZone = [number, number];  // [x, y] 1 - bottom, right; -1 = top, left\nfunction rectZone(x: number, y: number, rect: Rect, border: number): RectZone\n{\n\tconst r = [0, 0] as RectZone;\n\n\tif (!pointInRect(x, y, { x: rect.x - border, y: rect.y - border, w: rect.w + border * 2, h: rect.h + border * 2 }))\n\t\treturn r;\n\n\tif (Math.abs(x - rect.x) <= border) r[0] = -1;\n\tif (Math.abs(x - (rect.x + rect.w)) <= border) r[0] = 1;\n\tif (Math.abs(y - rect.y) <= border) r[1] = -1;\n\tif (Math.abs(y - (rect.y + rect.h)) <= border) r[1] = 1;\n\n\treturn r;\n}\nfunction resizeCursor(direction: RectZone): Cursor\n{\n\tconst [x, y] = direction;\n\tif (x == 0)\n\t{\n\t\tif (y == 0) return \"default\"; // none\n\t\tif (y > 0) return \"n-resize\"; // down\n\t\treturn \"n-resize\"; // up\n\t}\n\tif (x > 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // right\n\t\tif (y > 0) return \"nw-resize\"; // down-right\n\t\treturn \"ne-resize\"; // up-right\n\t}\n\tif (x < 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // left\n\t\tif (y > 0) return \"ne-resize\"; // down-left\n\t\treturn \"nw-resize\"; // up-left\n\t}\n\treturn \"default\"; // none\n}\n\nfunction unwrapRect({ x, y, w, h }: Rect): [number, number, number, number]\n{\n\treturn [x, y, w, h];\n}\n","import { useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport type { TicketEditor, TicketPatternObject } from \"./editor\";\nimport classNames from \"../../utils/classNames\";\nimport { Font } from \"../../api/dataTypes\";\n\ntype E = React.ChangeEvent<HTMLInputElement>;\n\nexport function Inspector({ editor, fonts }: InspectorProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [obj, setObj] = useState<TicketPatternObject | null>(null);\n\tconst update = () => setUpdate(v => v + 1);\n\teditor.setInspector(obj =>\n\t{\n\t\tsetObj(obj);\n\t\tupdate();\n\t});\n\n\treturn (\n\t\t<div className={classNames(styles.inspector, obj && styles.inspector_open)}>\n\t\t\t<h2>{{\n\t\t\t\t\"qr\": \"QR код\",\n\t\t\t\t\"code\": \"Код билета\",\n\t\t\t\t\"name\": \"Посетитель\",\n\t\t\t\t\"promo\": \"Промокод\",\n\t\t\t\t\"\": \"\",\n\t\t\t}[obj?.type || \"\"]}</h2>\n\t\t\t<div className={styles.fields}>\n\t\t\t\t<label>\n\t\t\t\t\t<span>X:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.x || 0} onInput={(e: E) => { editor.inspectorInput(\"x\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Y:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.y || 0} onInput={(e: E) => { editor.inspectorInput(\"y\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Ширина:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.w || 0} onInput={(e: E) => { editor.inspectorInput(\"w\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Высота:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.h || 0} onInput={(e: E) => { editor.inspectorInput(\"h\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<label className={styles.colorInput}>\n\t\t\t\t<span>Цвет:</span>\n\t\t\t\t<input type=\"color\" value={obj?.c || \"#000000\"} onInput={(e: E) => { editor.inspectorInput(\"c\", e.target.value); update(); }} />\n\t\t\t</label>\n\t\t\t{obj?.type != \"qr\" &&\n\t\t\t\t<label className={styles.fontInput}>\n\t\t\t\t\t<span>Шрифт:</span>\n\t\t\t\t\t<select value={obj?.f || -1} onChange={e => { editor.inspectorInput(\"f\", parseInt(e.target.value) || -1); update(); }}>\n\t\t\t\t\t\t<option value={-1}>Arial</option>\n\t\t\t\t\t\t{fonts.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\ninterface InspectorProps\n{\n\teditor: TicketEditor,\n\tfonts: Font[],\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Font } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPostForm } from \"../utils/fetch\";\nimport { queryListAddItem } from \"../utils/query\";\n\nexport function useFonts()\n{\n\treturn useQuery(\"fonts\", async () =>\n\t\tawait fetchJsonGet<Font[]>(\"/api/fonts\")\n\t);\n}\n\nexport function useMutationNewFont(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (fontData: NewFontData) =>\n\t\t{\n\t\t\tconst formData = new FormData();\n\t\t\tformData.set(\"name\", fontData.name);\n\t\t\tformData.set(\"type\", fontData.type);\n\t\t\tformData.set(\"font\", fontData.file);\n\n\t\t\treturn await fetchPostForm<Font>(\"/api/fonts\", formData);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"fonts\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewFontData\n{\n\tname: string,\n\ttype: string,\n\tfile: File,\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateTicketType, useTicketType } from \"../../api/ticketTypes\";\nimport { FontTypes, TicketEditor } from \"./editor\";\nimport { Inspector } from \"./inspector\";\nimport { useFonts } from \"../../api/fonts\";\n\nexport default function TicketTypeEditor({ typeId, eventId, open, close }: EditTicketTypeFormProps)\n{\n\tconst editor = useEditor();\n\tconst mutation = useMutationUpdateTicketType(typeId, close);\n\tconst ttype = useTicketType(typeId);\n\tconst fonts = useFonts();\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\tconst [imageSelection, setImageSelection] = useState(false);\n\tconst [isNewImage, setIsNewImage] = useState(false);\n\tconst noImage = ttype.data?.imageId == null;\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetImageSelection(false);\n\t\t\tsetIsNewImage(false);\n\t\t\teditor.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\tsetImageSelection(!ttype.data?.imageId)\n\t\t}\n\t}, [ttype.data, open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактор билета\">\n\t\t\t{displayError(ttype)}\n\t\t\t{displayError(fonts)}\n\t\t\t{displayError(mutation)}\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.root}>\n\t\t\t\t<div className={styles.canvas}>\n\t\t\t\t\t<canvas ref={refCanvas} />\n\t\t\t\t\t<Inspector editor={editor} fonts={fonts.data || []} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.panel}>\n\t\t\t\t\t<span>Нарисовать объекты:</span>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"qr\")}>QR код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"code\")}>Код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"name\")}>Имя посетителя</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"promo\")}>Промокод</button>\n\t\t\t\t\t<span className={styles.br}></span>\n\t\t\t\t\t<button className=\"button icon\" onClick={() => editor.fitZoom()}>fit_screen</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.resetZoom()}>1:1</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{imageSelection ? <>\n\t\t\t\t\t\t\t{!noImage && <button className=\"button\" onClick={() => setImageSelection(false)}>Отмена</button>}\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={e =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files[0])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\teditor.setNewImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\t\tsetImageSelection(false);\n\t\t\t\t\t\t\t\t\t\tsetIsNewImage(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} accept=\"image/png, image/jpeg, image/gif\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => setImageSelection(true)}>Изменить картинку</button>\n\t\t\t\t\t\t\t{isNewImage && !noImage && <button className=\"button\" onClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetIsNewImage(false);\n\t\t\t\t\t\t\t\teditor.setImage(ttype.data?.imageId || null)\n\t\t\t\t\t\t\t}}>Отменить изменение картинки</button>}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => close?.()}>Отмена</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = await editor.getData(`ticket_${typeId}`, eventId);\n\t\t\t\t\t\t\tmutation.mutate(data);\n\t\t\t\t\t\t}}>Сохранить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport function useEditor(viewMode = false)\n{\n\tconst [_, setUpdate] = useState(0);\n\tconst fonts = useFonts();\n\tlet fontTypes: FontTypes | null = null;\n\tif (fonts.data)\n\t{\n\t\tfontTypes = {};\n\t\tfor (const font of fonts.data || [])\n\t\t\tfontTypes[font.id] = font.type;\n\t}\n\n\tconst editor = useRef(new TicketEditor(fontTypes, false, viewMode));\n\tuseEffect(() =>\n\t{\n\t\teditor.current = new TicketEditor(fontTypes, true, viewMode);\n\t\tsetUpdate(v => v + 1);\n\t\treturn () => editor.current.destroy();\n\t}, [viewMode, fonts.data]);\n\n\treturn editor.current;\n}\n\ninterface EditTicketTypeFormProps extends PopupProps\n{\n\teventId: number,\n\ttypeId: number,\n}\n","import { useEffect, useRef } from \"react\";\nimport { useEditor } from \".\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport Spinner from \"../Spinner\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { saveCanvasAsPng } from \"../../utils/saveCanvasAsPng\";\n\nexport default function TicketViewer({ ticket }: TicketViewerProps)\n{\n\tconst editor = useEditor(true);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) editor.reset();\n\t}, [ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (ticket && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\teditor.setViewTicket(ticket);\n\t\t}\n\t}, [ttype.data, ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<div style={{ minWidth: 400, minHeight: 300 }}>\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{displayError(ttype)}\n\t\t\t<canvas ref={refCanvas} onClick={() =>\n\t\t\t{\n\t\t\t\tif (refCanvas.current && ticket && ttype.data?.imageId)\n\t\t\t\t\tsaveCanvasAsPng(refCanvas.current, `ticket_${ticket.code}.png`);\n\t\t\t}} />\n\t\t</div>\n\t)\n}\n\ninterface TicketViewerProps\n{\n\tticket: Ticket | null,\n}\n","export function saveCanvasAsPng(canvas: HTMLCanvasElement, fname: string)\n{\n\tconst a = document.createElement(\"a\");\n\ta.setAttribute(\"download\", fname);\n\n\tcanvas.toBlob(blob =>\n\t{\n\t\tif (!blob) return;\n\t\tconst url = URL.createObjectURL(blob);\n\t\ta.setAttribute(\"href\", url);\n\t\ta.click();\n\t\tURL.revokeObjectURL(url);\n\t});\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicketSimple({ event, ticket, close }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket || !qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [ticket, qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={close} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}","import { useState } from \"react\";\nimport Popup from \"../Popup\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport TicketViewer from \"../TicketEditor/viewer\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport ViewTicketSimple from \"./simple\";\n\nexport default function ViewTicket({ ticket, event, close }: ViewTicketProps)\n{\n\tconst [simpleViewer, setSimpleViewer] = useState<Ticket | null>(null);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\n\treturn (<>\n\t\t<Popup open={!!ticket && !simpleViewer} close={close} title=\"Просмотр билета\">\n\t\t\t<small>(сохранение по клику на картинку)</small>\n\t\t\t<TicketViewer ticket={ticket} />\n\t\t\t{ttype.data && !ttype.data.imageId && <div style={{ textAlign: \"center\" }}>\n\t\t\t\t<button className=\"button\" onClick={() => setSimpleViewer(ticket)}>Сгенерировать qr код</button>\n\t\t\t</div>}\n\t\t</Popup>\n\t\t<ViewTicketSimple ticket={simpleViewer} event={event} close={() => { setSimpleViewer(null); close() }} />\n\t</>\n\t)\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/staff\"),\n\t);\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(`/api/events/${eventId}/staff`),\n\t);\n}\n\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (staffData: StaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd[]>(`/api/events/${eventId}/staff`, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newStaffData: NewStaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/staff\", newStaffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/staff/\" + staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"events\", staffId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(`/api/staff/${staffId}/reset_password`),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\nimport { useTicketStats } from \"../../api/tickets\";\nimport TicketTypeEditor from \"../../components/TicketEditor\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editTypeFormOpen, setEditTypeFormOpen] = useState(-1);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst stats = useTicketStats(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\tconst stats_sum = (stats.data || []).reduce((p, v) =>\n\t{\n\t\tp.count += v.count;\n\t\tp.scanned += v.scanned;\n\t\tp.authOnPltf += v.authOnPltf;\n\t\treturn p;\n\t}, {\n\t\tcount: 0,\n\t\tscanned: 0,\n\t\tauthOnPltf: 0,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t\t<TicketTypeEditor typeId={editTypeFormOpen} eventId={parseInt(eventId)} open={editTypeFormOpen >= 0} close={() => setEditTypeFormOpen(-1)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t<div className={styles.ticketTypes}>\n\t\t\t\t\t\t\t\t{ticketTypes.data?.map(v =>\n\t\t\t\t\t\t\t\t\t<Fragment key={v.id}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button button_small icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: \"0.5em\", color: v.pattern ? \"green\" : \"\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditTypeFormOpen(v.id)}\n\t\t\t\t\t\t\t\t\t\t\t>edit_square</button>\n\t\t\t\t\t\t\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (!stats.data) return <><div></div><div></div><div></div></>;\n\t\t\t\t\t\t\t\t\t\t\tconst data = stats.data?.find(s => s.typeId == v.id);\n\t\t\t\t\t\t\t\t\t\t\tconst count = data?.count || 0;\n\t\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{count}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(count || 0, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.scanned || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.scanned || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.authOnPltf || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.authOnPltf || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{stats.data && <>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span>Всего</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.count}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.scanned}</span>\n\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.scanned, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.authOnPltf}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.authOnPltf, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{stats.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(stats, error => <div>{error}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n\nfunction calcPercent(v: number, all: number)\n{\n\tif (all == 0) return 0;\n\treturn Math.floor(v / all * 100);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"event\":\"styles_event__AM1vG\",\"title\":\"styles_title__Vipq0\",\"activeMark\":\"styles_activeMark__zBB4P\",\"toggle\":\"styles_toggle__1O26V\",\"toggleInp\":\"styles_toggleInp__s3up7\",\"eventInfo\":\"styles_eventInfo__GuWN-\",\"access\":\"styles_access__1bK7b\"};","import { useEventsFull, useMutationGetAccessToEvent } from \"../../api/events\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport { dateToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"События\");\n\tconst user = useUser();\n\tconst events = useEventsFull()\n\tconst getAccessToEvent = useMutationGetAccessToEvent();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{events.isLoading && <h3>Загрузка</h3>}\n\t\t\t{!events.isLoading && events.isFetching && <h3>Обновление</h3>}\n\t\t\t{getAccessToEvent.isLoading && <Spinner />}\n\t\t\t{displayError(events)}\n\t\t\t{displayError(getAccessToEvent)}\n\t\t\t{events.data?.map(v => <div className={styles.event} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{dateToString(v.date)}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<div className={styles.activeMark} style={{ backgroundColor: v.active ? \"green\" : \"tomato\" }} title=\"active\"></div>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.eventInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.access}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>\n\t\t\t\t\t\t\t\t<div>{o.login}</div>\n\t\t\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{o.id}</div>\n\t\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t\t<div>{o.name}</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!v.access.some(v => v.id == user.data?.id) &&\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button button_light button_small\"\n\t\t\t\t\t\t\tstyle={{ alignSelf: \"end\" }}\n\t\t\t\t\t\t\tonClick={() => getAccessToEvent.mutate(v.id)}\n\t\t\t\t\t\t>Get access</button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t\t}\n\t\t</Layout >\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName=\"button button_large space_between\"\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationNewFont } from \"../../api/fonts\";\n\nexport default function CreateFontForm({ open, close }: PopupProps)\n{\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_file = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewFont(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_file.current)\n\t\t{\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_file.current.value = \"\";\n\t\t}\n\t}, [open, inp_name, inp_file]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление шрифта\">\n\t\t\t{displayError(mutation, undefined, er => er.includes(\"already exist\") ? \"Шрифт с таким названием уже существует\" : er)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst file = inp_file.current?.files?.[0];\n\t\t\t\tif (name && file)\n\t\t\t\t\tmutation.mutate({ file, name, type: file.name.split(\".\").at(-1) || \"\" });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Файл\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={inp_file}\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".ttf,.otf,.woff,.woff2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst name = inp_name.current;\n\t\t\t\t\t\t\tconst file = inp_file.current;\n\t\t\t\t\t\t\tif (!name || !file) return;\n\t\t\t\t\t\t\tconst filename = file.files?.[0]?.name || \"\";\n\t\t\t\t\t\t\tconst splited = filename.split(\".\")\n\t\t\t\t\t\t\tconst fontName = splited.length == 1 ? splited : splited.slice(0, -1);\n\t\t\t\t\t\t\tname.value = fontName.join(\".\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { useState } from \"react\";\nimport { useFonts } from \"../../api/fonts\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateFontForm from \"../../components/create/CreateFontForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { Font } from \"../../api/dataTypes\";\nimport useFont from \"../../utils/useFont\";\n\nexport default function FontsPage()\n{\n\tuseTitle(\"Шрифты\");\n\tconst [createFontOpen, setCreateFontOpen] = useState(false);\n\tconst [exampleText, setExampleText] = useState(\"Мыши булочки жевали!\");\n\tconst fonts = useFonts();\n\n\treturn (\n\t\t<Layout centeredPage gap={12}>\n\t\t\t<h1>Шрифты</h1>\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{displayError(fonts)}\n\n\t\t\t<input type=\"text\" value={exampleText} onInput={e => setExampleText((e.target as HTMLInputElement).value)} />\n\n\t\t\t{fonts.data?.map(v => <FontPreview key={v.id} font={v} text={exampleText} />)}\n\n\t\t\t{useHasPermission(\"add_font\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFontOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateFontForm open={createFontOpen} close={() => setCreateFontOpen(false)} />\n\t\t</Layout>\n\t);\n}\n\nfunction FontPreview({ font, text }: { font: Font, text: string })\n{\n\tconst fontName = useFont(font);\n\treturn <div className=\"space_between\" style={{ fontFamily: fontName, fontSize: \"1.2rem\", gap: \"0 1rem\", flexWrap: \"wrap\" }}>\n\t\t<span>{font.name}</span>\n\t\t<span>{text}</span>\n\t</div>\n}\n","import { useQuery, useQueryClient } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog(page = 0)\n{\n\tconst queryClient = useQueryClient();\n\tconst fn = async (p: number) =>\n\t\t(await fetchJsonGet<LogItemResponse[]>(`/api/debug/log?p=${p}`)).map(parseLogResponse);\n\tqueryClient.prefetchQuery([\"log\", page - 1], () => fn(page - 1));\n\tqueryClient.prefetchQuery([\"log\", page + 1], () => fn(page + 1));\n\treturn useQuery([\"log\", page], () => fn(page));\n}\n\nexport function useLogCacheClear()\n{\n\tconst queryClient = useQueryClient();\n\treturn () =>\n\t{\n\t\tqueryClient.removeQueries(\"log\");\n\t\tqueryClient.invalidateQueries(\"logLen\");\n\t}\n}\n\nexport function useLogLen()\n{\n\treturn useQuery(\"logLen\", async () =>\n\t\tawait fetchJsonGet<LogLenResponse>(\"/api/debug/log_len\")\n\t);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n\nexport interface LogLenResponse\n{\n\tlen: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"btns\":\"styles_btns__aRipu\",\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\"};","import { useState } from \"react\";\nimport { LogItem, useLog, useLogCacheClear, useLogLen } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst clearCache = useLogCacheClear();\n\tconst [page, setPage] = useState(0);\n\tconst log = useLog(page);\n\tconst logLen = useLogLen().data?.len ?? 0;\n\n\treturn <Layout centeredPage>\n\t\t{displayError(log)}\n\t\t<div className={styles.btns}>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => { clearCache(); setPage(0); log.refetch(); }}>Update</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => setPage(0)}>&lt;&lt;</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => setPage(p => Math.max(p - 1, 0))}>&lt;</button>\n\t\t\t<span>{page + 1}/{logLen}</span>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => setPage(p => Math.min(p + 1, logLen - 1))}>&gt;</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => setPage(logLen - 1)}>&gt;&gt;</button>\n\t\t</div>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__vi6jw\",\"login\":\"styles_login__rRIkN\",\"userTag\":\"styles_userTag__0uCj4\"};","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem } from \"../utils/query\";\n\n\nexport function useManagers()\n{\n\treturn useQuery(\"managers\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/managers\"),\n\t);\n}\n\nexport function useMutationNewManager(onSuccess?: (manager: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newManagerData: NewManagerData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/managers\", newManagerData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"managers\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewManagerData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteManager(managerId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/managers/\" + managerId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"managers\", managerId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\nimport { useMutationNewManager } from \"../../api/managers\";\n\nexport default function CreateManagerForm({ open, close }: PopupProps)\n{\n\tconst [newManager, setNewManager] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewManager(manager =>\n\t{\n\t\tsetNewManager(manager);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление организатора\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newManager} close={() => setNewManager(null)} title=\"Данные организатора\">\n\t\t\t<div>Логин: {newManager?.login}</div>\n\t\t\t<div>Пароль: {newManager?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useManagers, useMutationDeleteManager } from \"../../api/managers\";\nimport CreateManagerForm from \"../../components/create/CreateManagerForm\";\nimport useUser from \"../../api/user\";\n\nexport default function ManagersPage()\n{\n\tuseTitle(\"Организаторы\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionManager, setDeletionManager] = useState(-1);\n\tconst user = useUser();\n\tconst managers = useManagers();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Организаторы</h1>\n\t\t\t{managers.isLoading && <Spinner />}\n\t\t\t{displayError(managers)}\n\t\t\t{managers.data?.length == 0 && <h2>Организаторы отсутствуют</h2>}\n\t\t\t{managers.data?.map(v => <div className={styles.user + \" space_between\"} key={v.id}>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t<span className={styles.login}>{v.login}</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t{v.id != user.data?.id &&\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionManager(v.id)}>Удалить</button>\n\t\t\t\t\t}\n\t\t\t\t\t{v.id == user.data?.id &&\n\t\t\t\t\t\t<span className={styles.userTag}>Вы</span>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_manager\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateManagerForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionManager} title=\"Удаление организатора\" mutationFn={useMutationDeleteManager} open={deletionManager >= 0} close={() => setDeletionManager(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: isCorrectCodes ? \"5.4em\" : \"10.4em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"4em\" }}><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useMutation } from \"react-query\";\nimport { ApiError, CheckTicketResult, ResponseCheckTicket } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\nimport { fetchJsonPost } from \"../utils/fetch\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: TicketData) =>\n\t\t{\n\t\t\tconst apiResult = await fetchJsonPost<ResponseCheckTicket>(\"/api/check_ticket\", ticketData)\n\t\t\tconst result = apiResult as CheckTicketResult;\n\t\t\tif (apiResult.ticket)\n\t\t\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\t\t\tif (apiResult.event)\n\t\t\t\tresult.event = parseEventResponse(apiResult.event)\n\t\t\treturn result\n\t\t},\n\t\tonSuccess: onSuccess,\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionStaff, setDeletionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.isLoading && <Spinner/>}\n\t\t\t{displayError(staff)}\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={deletionStaff >= 0} close={() => setDeletionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\",\"table\":\"styles_table__46OhS\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\nimport { dateToString } from \"../../utils/dates\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst showAuthOnPlt = tickets.data?.some(v => v.authOnPltf);\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredH gap=\"1rem\" padding=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"10.5em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"2.6em\" }} title=\"Дата добавления\"><span className=\"icon\">note_add</span></th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"1.4em\" }} title=\"Билет использован\"><span className=\"icon\">login</span></th>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <th style={{ width: \"1.4em\" }} title=\"Вошёл в игру\"><span className=\"icon\">stadia_controller</span></th>}\n\t\t\t\t\t\t\t\t<th style={{ width: \"3.2em\" }}>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th style={{ width: \"2.3em\" }}>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{dateToString(v.createdDate, true, false)}</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <td className={styles.center}>{v.authOnPltf ? \"✓\" : \"✖\"}</td>}\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\n\nimport DebugPage from \"./pages/DebugPage\";\nimport EventPage from \"./pages/EventPage\";\nimport EventsFullPage from \"./pages/EventsFullPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport FontsPage from \"./pages/FontsPage\";\nimport LogPage from \"./pages/LogPage\";\nimport ManagersPage from \"./pages/ManagersPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport UsersPage from \"./pages/UsersPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_users\", \"/d/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_events\", \"/d/events\", <EventsFullPage />)}\n\t\t\t\t{ProtectedRoute(\"page_fonts\", \"/fonts\", <FontsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_managers\", \"/managers\", <ManagersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchWithJson","_x","_x2","_x3","_fetchWithJson","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","input","body","res","wrap","_context","prev","next","fetch","headers","undefined","JSON","stringify","sent","ok","t0","json","t1","msg","abrupt","stop","fetchPost","fetchDelete","fetchJson","_x4","_x5","_x6","_fetchJson","_callee2","data","_context2","fetchJsonGet","fetchJsonPost","fetchPostForm","_x7","_x8","_fetchPostForm","_callee3","_context3","useUser","useQuery","user","status","auth","id","login","roles","name","operations","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","length","names","Array","_key","filter","v","join","MessageFromBackend","_useState","useState","_useState2","_slicedToArray","setMessage","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","Spinner","_ref","zIndex","spinner","Header","backLink","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","setQueryData","_","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centeredH","centeredH","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","padding","header","maxHeight","body_centered","body_centeredH","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","_mutationFn","authData","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Popup","_ref$open","open","_ref$title","popup","DebugPage","logErrors","setLogErrors","_useState3","_useState4","logFrontend","setLogFrontend","_useState5","_useState6","log","setLog","refLogErrors","refLogFrontend","refLog","text","setTimeout","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","_refLogFrontend$curre","_refLogFrontend$curre2","_refLogFrontend$curre3","_refLogFrontend$curre4","queryStrKey","queryKey","map","queryInvalidate","invalidateQueries","exact","queryListAddItem","item","_queryClient$getQuery","getQueryState","items","queryListUpdateItem","_queryClient$getQuery2","queryListDeleteItem","itemId","_queryClient$getQuery3","parseEventResponse","responseEvent","event","date","Date","useEvent","eventId","useMutationDeleteEvent","_mutationFn3","_callee7","_context7","padNum","num","len","padStart","countWord","one","two","five","numS","dateToString","reverse","year","nums","getDate","getMonth","push","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","useTicketTypes","forEach","useTicketType","typeId","enabled","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","useTickets","tickets","useMutationDeleteTicket","_mutationFn2","_callee4","ticketId","_context4","CreateTicketForm","_ticketTypes$data3","_ticketTypes$data4","_ticketTypes$data5","setTicet","setTypeId","personName","setPersonName","personLink","setPersonLink","_useState7","_useState8","promocode","setPromocode","_useState9","_useState10","code","setCode","_useState11","_useState12","autocode","setAutocode","ticketData","useMutationNewTicket","ticketTypes","_ticketTypes$data","_ticketTypes$data$","reset","parseInt","onChange","_ticketTypes$data2","_ticketTypes$data2$e$","target","selectedIndex","checked","fontSize","imagefileToData","_imagefileToData","file","accessEventId","imgBase64","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","console","newFontFace","family","FontFace","fontTypes","otf","ttf","woff","woff2","TicketEditor","_this","init","viewMode","editor","img","imgQr","Image","qrLast","imgFile","width","height","objects","canvas","ctx","loadingImg","loadingFont","loadingFonts","fonts","listenerResize","draw","listenerKeydown","_this$editor","key","deleteSelectedObj","listenerMouseDown","_this$editor2","mouseDown","offsetX","offsetY","button","listenerMouseMove","_this$editor3","mouseMove","listenerMouseUp","_this$editor4","mouseUp","listenerContextMenu","listenerWheel","_this$editor5","wheel","deltaY","inspectorSet","inspectorInput","_this$editor6","loadFonts","this","get","image","loadImage","createNewData","f","find","x","y","w","h","c","reRenderQR","_this$editor7","setViewTicket","_this2","URL","revokeObjectURL","url","createObjectURL","removeCanvasListeners","getContext","_getData","imageName","t2","pattern","removeEventListener","obj","_this$editor8","drawObject","resetZoom","fitToView","_this3","_this4","reqFonts","i","font","delete","splice","_step","loadedFonts","_iterator","_createForOfIteratorHelper","_loop","add","load","then","indexOf","s","n","done","err","_this$data$objects$fi","_this$ticket","_this5","renderQRCode","setQr","cursor","parent","clientWidth","clientHeight","loading","fillStyle","fillRect","Editor","bind","setCursor","setCanvasSize","imageSmoothingEnabled","drawTextAtCenter","size","lines","split","dy","ddy","fillText","callback","QRCode","errorCorrectionLevel","scale","margin","light","dark","setInspector","imgqr","_this6","transform","moving","sx","sy","vx","vy","vw","vh","mode","drawing","ex","ey","active","resizing","dir","keepAspect","aspect","canvasSize","selected","selectionBorder","max","m","min","restrictView","qr","_this$ticket$personNa","_this$ticket2","_this$ticket$promocod","_this$ticket3","_this$ticket$code","_this$ticket4","save","translate","drawImage","texts","promo","complete","naturalHeight","unwrapRect","strokeStyle","lineWidth","strokeRect","restore","_this$pointToWorld","pointToWorld","_this$pointToWorld2","_this$pointToWorld3","_this$pointToWorld4","wx","wy","resize","rectZone","pointInRect","resizeCursor","redraw","round","dx","_this$resizing$dir","rx","ry","_this$pointToWorld5","_this$pointToWorld6","_this$pointToWorld7","_this$pointToWorld8","_this7","_this$pointToWorld9","_this$pointToWorld10","X","Y","iw","ih","rect","border","r","direction","_direction","Inspector","setUpdate","setObj","update","inspector","inspector_open","fields","onInput","valueAsNumber","colorInput","fontInput","useFonts","TicketTypeEditor","_ttype$data","useEditor","useMutationUpdateTicketType","ttype","refCanvas","imageSelection","setImageSelection","isNewImage","setIsNewImage","noImage","imageId","_ttype$data2","setData","parse","setCanvas","panel","br","fitZoom","footer","_Fragment","files","setNewImage","accept","_ttype$data3","setImage","getData","destroy","TicketViewer","minWidth","minHeight","fname","a","createElement","setAttribute","toBlob","blob","click","saveCanvasAsPng","ViewTicketSimple","setRes","qrcode","setQrcode","ticketRef","timeout","html2canvas","clearTimeout","center","marginTop","marginBottom","innerHTML","appendChild","ViewTicket","simpleViewer","setSimpleViewer","EditTicketTypesForm","_ticketTypes$data$fil","Map","changes","setChanges","newTypes","setNewTypes","inp","some","action","useMutationUpdateTicketTypes","from","values","_changes$get","_changes$get2","set","EditEventForm","_event$data","_event$data2","inp_title","inp_date","_callee6","eventData","_context6","useMutationUpdateEvent","_inp_title$current","_inp_date$current","defaultValue","toISOString","PopupConfirmDeletion","mutatateParams","useStaff","useStaffEvent","useMutationDeleteStaff","staffId","_callee5","_context5","useMutationResetStaffPassword","_mutationFn4","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","staff","setStaff","selectedStaff","setSelectedStaff","staffData","useMutationUpdateStaff","isSuccess","_staffAll$data","marginLeft","_staffAll$data5","PopupQrCode","EventPage","_staff$data","createFormOpen","setCreateFormOpen","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editTypeFormOpen","setEditTypeFormOpen","editStaffOpen","setEditStaffOpen","_useState13","_useState14","ticketOpen","setTicketOpen","_useState15","_useState16","qrcodeLinkOpen","setQrcodeLinkOpen","useParams","stats","useTicketStats","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","stats_sum","reduce","p","count","scanned","authOnPltf","card","card__header","card__body","line","href","Fragment","marginRight","_stats$data","calcPercent","fontWeight","right","all","UsersPage","_events$data","events","getAccessToEvent","_callee8","_context8","useMutationGetAccessToEvent","isFetching","toggleInp","htmlFor","deleted","activeMark","backgroundColor","toggle","eventInfo","access","o","alignSelf","CreateEventForm","useMutationNewEvent","EventsPage","_events$data$sort","useEvents","sort","b","CreateFontForm","inp_name","inp_file","fontData","formData","FormData","useMutationNewFont","er","_inp_name$current","_inp_file$current","_inp_file$current$fil","_file$files","_file$files$","splited","fontName","FontsPage","_fonts$data","createFontOpen","setCreateFontOpen","exampleText","setExampleText","FontPreview","myFont","useFont","fontFamily","flexWrap","parseLogResponse","responseLog","LogPage","_useLogLen$data$len","_useLogLen$data","_log$data","clearCache","removeQueries","useLogCacheClear","page","setPage","fn","prefetchQuery","useLog","logLen","btns","refetch","table","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","added","updated","restored","useMutationDeleteManager","managerId","CreateManagerForm","newManager","setNewManager","newManagerData","useMutationNewManager","manager","placeholder","replaceAll","ManagersPage","_managers$data","_managers$data2","deletionManager","setDeletionManager","managers","userTag","getTicketPrefix","toString","PrintTicketsPage","_useMemo","useMemo","codePref","every","startsWith","_useMemo2","isCorrectCodes","prefix","print","colSpan","_objectSpread","sortV","lastIndexOf","ChangePasswordForm","passwordRef","password2Ref","useMutationChangePassword","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","Scanner","_ref$active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","highlightScanRegion","maxScansPerSecond","old","start","catch","pause","ScannerHeader","onInputBtn","top","bottom","useSound","audio","Audio","preload","currentTime","play","ScannerPage","urlParams","qrScanResult","setQrScanResult","ticketCode","setTicketCode","checkTicketResult","setCheckTicketResult","startHintOpen","setStartHintOpen","inputOpen","setInputOpen","alreadyScanned","setAlreadyScanned","cameraError","setCameraError","inputRef","NaN","retry","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","focus","handleCloseInput","apiResult","useMutationCheckTicket","success","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","errorCode","_inputRef$current","CreateStaffForm","newStaff","setNewStaff","newStaffData","useMutationNewStaff","StaffPage","_staff$data2","deletionStaff","setDeletionStaff","resetPasswordStaff","setResetPasswordStaff","userInfo","EditTicketForm","setTicket","deletionOpen","setDeletionOpen","_postUpdateTicket","params","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","_tickets$data2","hasAddPermission","hasEditPermission","showAuthOnPlt","_users$data","users","_users$data$find","bossId","u","colorizeOperation","colors","change","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes","EventsFullPage"],"sourceRoot":""}
{"version":3,"file":"static/js/626.949d22e5.chunk.js","mappings":"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","sources":["api/apiError.ts","utils/fetchPost.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","utils/nums.ts","utils/dates.ts","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/fetchDelete.ts","api/events.ts","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","api/tickets.ts","api/checkTicket.ts","utils/useSound.ts","utils/getTicketPrefix.ts","pages/ScannerPage/index.tsx","webpack://ticket_system/./src/pages/EventsPage/styles.module.css?6236","utils/displayError.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","api/staff.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","components/PopupConfirmDeletion/index.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","api/ticketTypes.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/edit/EditStaffForm.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","pages/PrintTicketsPage/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","App.tsx"],"sourcesContent":["export default class ApiError extends Error {}","export default function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", role: \"\", name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", getUsers);\n}\n\nasync function getUsers(): Promise<UserFull[]>\n{\n\tconst res = await fetch(\"/api/users\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as UserFull[];\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangePassword,\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\nasync function postChangePassword(data: ChangePasswordData)\n{\n\tconst res = await fetchPost(\"/api/user/change_password\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangeName,\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postChangeName(data: ChangeName)\n{\n\tconst res = await fetchPost(\"/api/user/change_name\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn data;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n\tget_staff_event: \"get_staff_event\",\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)}>\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\t\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\" className=\"button button_large\">{`</>`}</Link>}\n\t\t\t{hasPermission(user, \"page_users\") && <Link to=\"/users\" className=\"button button_large\">Пользователи</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined)\n{\n\tif (!date) return \"\";\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false)\n{\n\treturn dateToString(date) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","export default function fetchDelete(input: RequestInfo | URL)\n{\n\treturn fetch(input, {\n\t\tmethod: \"DELETE\",\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { EventData, ResponseEvent, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\tconst query = useQuery(\"events\", getEvents, {\n\t\tonSuccess: data =>\n\t\t{\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v));\n\t\t}\n\t});\n\treturn query;\n}\n\nasync function getEvents(): Promise<EventData[]>\n{\n\tconst res = await fetch(\"/api/events\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tconst events = data as ResponseEvent[];\n\treturn events.map(parseEventResponse);\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getEvent(eventId));\n}\n\nasync function getEvent(eventId: number | string): Promise<EventData>\n{\n\tconst res = await fetch(\"/api/events/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], () => getScannerEvent(eventId), { retry: 3 });\n}\n\nasync function getScannerEvent(eventId: number | string): Promise<EventData | typeof NaN>\n{\n\tconst res = await fetch(\"/api/scanner_event/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) return NaN;\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewEvent,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events, data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewEvent(eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event\", eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (eventData: NewEventData) => postUpdateEvent(eventId, eventData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], () => data);\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? [...events.filter(v => v.id != data.id), data] : [data]);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateEvent(eventId: number | string, eventData: NewEventData)\n{\n\tconst res = await fetchPost(\"/api/event/\" + eventId, eventData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseEventResponse(data as ResponseEvent);\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteEvent(eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.removeQueries([\"event\", `${eventId}`], { exact: true });\n\t\t\tif (queryClient.getQueryState(\"events\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"events\", (events?: EventData[]) => events ? events.filter(v => v.id != eventId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteEvent(eventId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/event/\" + eventId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, ResponseTicket, Ticket } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\nimport fetchDelete from \"../utils/fetchDelete\";\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", eventId], () => getTickets(eventId));\n}\n\nasync function getTickets(eventId: number | string): Promise<Ticket[]>\n{\n\tconst res = await fetch(\"/api/tickets/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn (data as ResponseTicket[]).map(parseTicketResponse);\n}\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets ? [...tickets, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewTicket(ticketData: NewTicketData)\n{\n\tconst res = await fetchPost(\"/api/ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postUpdateTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${data.eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${data.eventId}`], (tickets?: Ticket[]) => tickets?.map(v => v.id == data.id ? data : v) || []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicket(params: UpdateTicketParams)\n{\n\tconst res = await fetchPost(\"/api/ticket/\" + params.ticketId, params.data);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn parseTicketResponse(data as ResponseTicket);\n}\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postDeleteTicket,\n\t\tonSuccess: (ticketId) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"tickets\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"tickets\", `${eventId}`], (tickets?: Ticket[]) => tickets?.filter(v => v.id != ticketId) || []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteTicket(ticketId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/ticket/\" + ticketId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn ticketId\n}\n","import { useMutation } from \"react-query\";\nimport fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { CheckTicketResult, ResponseCheckTicket, ResponseMsg } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postCheckTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\n\nasync function postCheckTicket(ticketData: TicketData): Promise<CheckTicketResult>\n{\n\tconst res = await fetchPost(\"/api/check_ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst apiResult = data as ResponseCheckTicket;\n\tconst result = data as CheckTicketResult;\n\tif (apiResult.ticket)\n\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\tif (apiResult.event)\n\t\tresult.event = parseEventResponse(apiResult.event)\n\treturn result\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"space_between\":\"styles_space_between__AD+M6\"};","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport ApiError from \"../api/apiError\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(error);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName={classNames(\"button button_large\", styles.space_between)}\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport fetchDelete from \"../utils/fetchDelete\";\nimport fetchPost from \"../utils/fetchPost\";\nimport ApiError from \"./apiError\";\nimport { Staff, ResponseMsg } from \"./dataTypes\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", getStaff);\n}\n\nasync function getStaff(): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/staff\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], () => getStaffEvent(eventId));\n}\n\nasync function getStaffEvent(eventId: number | string): Promise<Staff[]>\n{\n\tconst res = await fetch(\"/api/event/staff/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (staffData: StaffData) => postStaff(eventId, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState([\"staff\", `${eventId}`])?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postStaff(eventId: number | string, staffData: StaffData)\n{\n\tconst res = await fetchPost(\"/api/event/staff/\" + eventId, staffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as Staff[];\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postNewStaff,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? [...staff, data] : [data]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postNewStaff(newStaffData: NewStaffData)\n{\n\tconst res = await fetchPost(\"/api/staff\", newStaffData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tif (data.exist) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postDeleteStaff(staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.filter(v => v.id != staffId) : []);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postDeleteStaff(staffId: number | string)\n{\n\tconst res = await fetchDelete(\"/api/staff/\" + staffId);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: Staff) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => postResetStaffPassword(staffId),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"staff\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"staff\", (staff?: Staff[]) => staff ? staff.map(v => v.id != staffId ? v : data) : []);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postResetStaffPassword(staffId: number | string)\n{\n\tconst res = await fetchPost(\"/api/staff/reset_password/\" + staffId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as Staff;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"space_between\":\"styles_space_between__Z0Ibu\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { Staff } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<Staff | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [delitionStaff, setDelitionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDelitionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className={styles.space_between}>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={delitionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={delitionStaff >= 0} close={() => setDelitionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\"};","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseMsg, TicketType } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\nimport fetchPost from \"../utils/fetchPost\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\treturn useQuery([\"ticket_types\", eventId], () => getTicketTypes(eventId));\n}\n\nasync function getTicketTypes(eventId: number | string): Promise<TicketType[]>\n{\n\tconst res = await fetch(\"/api/ticket_types/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: (data: UpdateTicketTypesData[]) => postUpdateTicketTypes(eventId, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryClient.invalidateQueries([\"tickets\", `${eventId}`], { exact: true });\n\t\t\telse\n\t\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], () => data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postUpdateTicketTypes(eventId: number | string, updateTicketTypesData: UpdateTicketTypesData[])\n{\n\tconst res = await fetchPost(\"/api/ticket_types/\" + eventId, updateTicketTypesData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst inp_typeId = useRef<HTMLSelectElement>(null);\n\tconst inp_personName = useRef<HTMLInputElement>(null);\n\tconst inp_personLink = useRef<HTMLInputElement>(null);\n\tconst inp_promocode = useRef<HTMLInputElement>(null);\n\tconst inp_code = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_personName.current && inp_personLink.current && inp_promocode.current)\n\t\t{\n\t\t\tinp_personName.current.value = \"\";\n\t\t\tinp_personLink.current.value = \"\";\n\t\t\tinp_promocode.current.value = \"\";\n\t\t\t// inp_code.current.value = \"\";\n\t\t}\n\t}, [open, inp_personName, inp_personLink, inp_promocode]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst typeId = inp_typeId.current?.value;\n\t\t\t\tconst personName = inp_personName.current?.value;\n\t\t\t\tconst personLink = inp_personLink.current?.value || \"\";\n\t\t\t\tconst promocode = inp_promocode.current?.value || \"\";\n\t\t\t\tconst code = inp_code.current?.value || \"\";\n\t\t\t\tif (typeId && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: parseInt(typeId, 10),\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select ref={inp_typeId} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input ref={inp_personName} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input ref={inp_personLink} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input ref={inp_promocode} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t{/* <FormField label=\"code\">\n\t\t\t\t\t<input ref={inp_code} type=\"text\" />\n\t\t\t\t</FormField> */}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicket({ event, ticket, setTicket }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={() => setTicket(null)} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tsetTicket: (ticket: Ticket | null) => void,\n}","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport ApiError from \"../../api/apiError\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t{ticketTypes.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst inp_typeId = useRef<HTMLSelectElement>(null);\n\tconst inp_personName = useRef<HTMLInputElement>(null);\n\tconst inp_personLink = useRef<HTMLInputElement>(null);\n\tconst inp_promocode = useRef<HTMLInputElement>(null);\n\tconst inp_code = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && inp_typeId.current && inp_personName.current && inp_personLink.current && inp_promocode.current && inp_code.current)\n\t\t{\n\t\t\tinp_typeId.current.value = `${ticketTypes.data?.find(v => v.name == ticket.type)?.id}` || \"\";\n\t\t\tinp_personName.current.value = ticket.personName || \"\";\n\t\t\tinp_personLink.current.value = ticket.personLink || \"\";\n\t\t\tinp_promocode.current.value = ticket.promocode || \"\";\n\t\t\tinp_code.current.value = ticket.code;\n\t\t}\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, inp_personName, inp_personLink, inp_promocode, inp_code, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst typeId = inp_typeId.current?.value;\n\t\t\t\tconst personName = inp_personName.current?.value;\n\t\t\t\tconst personLink = inp_personLink.current?.value || \"\";\n\t\t\t\tconst promocode = inp_promocode.current?.value || \"\";\n\t\t\t\tconst code = inp_code.current?.value || \"\";\n\t\t\t\tif (ticket && typeId && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId: parseInt(typeId, 10),\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select ref={inp_typeId} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input ref={inp_personName} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input ref={inp_personLink} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input ref={inp_promocode} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"code\">\n\t\t\t\t\t<input ref={inp_code} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ApiError from \"../../api/apiError\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t<th>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} setTicket={setTicketOpen} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>log</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.role}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роль</h3>\n\t\t\t\t\t{user.data?.role}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport EventPage from \"./pages/EventPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport displayError from \"./utils/displayError\";\nimport ProfilePage from \"./pages/ProfilePage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchPost","input","body","fetch","method","headers","undefined","JSON","stringify","useUser","useQuery","getUser","_getUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","user","wrap","_context","prev","next","sent","json","status","abrupt","auth","id","login","role","name","operations","ok","msg","stop","getUsers","_getUsers","_callee2","_context2","postChangePassword","_x","_postChangePassword","_callee3","_context3","t0","t1","postChangeName","_x2","_postChangeName","_callee4","_context4","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","HeaderBack","navigate","useNavigate","_jsx","className","styles","root","children","onClick","classNames","_len","length","names","Array","_key","filter","v","join","postAuth","_postAuth","authData","postLogout","_postLogout","Spinner","_ref","color","zIndex","_jsxs","spinner","style","Header","backLink","_useState","useState","_useState2","_slicedToArray","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","document","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","error","setError","inp_login","useRef","inp_password","onError","setQueryData","message","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Scanner","_ref$active","active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","result","highlightScanRegion","maxScansPerSecond","old","destroy","start","catch","pause","padNum","num","len","padStart","countWord","one","two","five","numS","at","dateToString","date","getDate","getMonth","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","relativeDate","nowBreak","now","Date","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","ScannerHeader","event","onInputBtn","top","bottom","fetchDelete","getEvents","_getEvents","events","map","parseEventResponse","useEvent","eventId","_getEvent","getEvent","useScannerEvent","_getScannerEvent","getScannerEvent","retry","NaN","responseEvent","postNewEvent","_x3","_postNewEvent","eventData","useMutationUpdateEvent","_x4","_x5","_postUpdateEvent","postUpdateEvent","_queryClient$getQuery2","getQueryState","_callee5","_context5","useMutationDeleteEvent","_x6","_postDeleteEvent","postDeleteEvent","_queryClient$getQuery3","removeQueries","exact","_callee6","_context6","Popup","_ref$open","open","close","_ref$title","popup","useTickets","_getTickets","getTickets","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","postNewTicket","_postNewTicket","ticketData","postUpdateTicket","_postUpdateTicket","params","ticketId","useMutationDeleteTicket","postDeleteTicket","tickets","_postDeleteTicket","postCheckTicket","_postCheckTicket","apiResult","useSound","url","audio","Audio","preload","currentTime","play","getTicketPrefix","toString","ScannerPage","urlParams","useParams","qrScanResult","setQrScanResult","_useState3","_useState4","ticketCode","setTicketCode","_useState5","_useState6","_useState7","_useState8","checkTicketResult","setCheckTicketResult","_useState9","_useState10","startHintOpen","setStartHintOpen","_useState11","_useState12","inputOpen","setInputOpen","_useState13","_useState14","alreadyScanned","setAlreadyScanned","_useState15","_useState16","cameraError","setCameraError","inputRef","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","setTimeout","focus","handleCloseInput","reset","useMutationCheckTicket","success","code","isSuccess","timeout","clearTimeout","_Fragment","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","personName","promocode","errorCode","marginTop","_inputRef$current","displayError","requestRes","render","isError","defaultRender","textAlign","CreateEventForm","inp_title","inp_date","_queryClient$getQuery","useMutationNewEvent","_inp_title$current","_inp_date$current","EventsPage","_events$data","_events$data$sort","createFormOpen","setCreateFormOpen","forEach","useEvents","sort","a","b","space_between","useStaff","getStaff","_getStaff","useStaffEvent","_getStaffEvent","getStaffEvent","useMutationUpdateStaff","staffData","_postStaff","postStaff","postNewStaff","_postNewStaff","newStaffData","exist","useMutationDeleteStaff","staffId","_postDeleteStaff","postDeleteStaff","staff","useMutationResetStaffPassword","_postResetStaffPassword","postResetStaffPassword","_queryClient$getQuery4","CreateStaffForm","newStaff","setNewStaff","inp_name","useMutationNewStaff","_inp_name$current","placeholder","onInput","replaceAll","PopupConfirmDeletion","mutatateParams","itemId","item","StaffPage","_staff$data","_staff$data2","delitionStaff","setDelitionStaff","resetPasswordStaff","setResetPasswordStaff","toggleInp","htmlFor","toggle","userInfo","useTicketTypes","_getTicketTypes","getTicketTypes","useMutationUpdateTicketTypes","_postUpdateTicketTypes","postUpdateTicketTypes","inp","some","action","updateTicketTypesData","CreateTicketForm","_ticketTypes$data","_ticketTypes$data2","_ticketTypes$data3","setTicet","inp_typeId","inp_personName","inp_personLink","inp_promocode","inp_code","useMutationNewTicket","ticketTypes","_inp_typeId$current","_inp_personName$curre","_inp_personLink$curre","_inp_promocode$curren","_inp_code$current","typeId","personLink","parseInt","ViewTicket","setTicket","setRes","qrcode","setQrcode","ticketRef","QRCode","errorCorrectionLevel","scale","html2canvas","then","canvas","visible","center","marginBottom","innerHTML","appendChild","EditTicketTypesForm","_ticketTypes$data$fil","setUpdate","Map","changes","setChanges","newTypes","setNewTypes","size","from","values","_changes$get","get","_changes$get2","onChange","set","target","i","push","EditEventForm","_event$data","_event$data2","defaultValue","toISOString","slice","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","setStaff","selectedStaff","setSelectedStaff","_staffAll$data","find","marginLeft","_staffAll$data5","EventPage","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editStaffOpen","setEditStaffOpen","ticketOpen","setTicketOpen","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","replace","card","card__header","card__body","right","EditTicketForm","_ticketTypes$data4","deletionOpen","setDeletionOpen","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","hasAddPermission","hasEditPermission","width","href","startsWith","scanned","PrintTicketsPage","_useMemo","useMemo","codePref","every","_useMemo2","isCorrectCodes","prefix","print","table","colSpan","_objectSpread","sortV","lastIndexOf","DebugPage","logErrors","setLogErrors","log","setLog","refLogErrors","refLog","text","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","UsersPage","_users$data","users","_users$data$find","bossId","u","o","colorizeOperation","access","colors","page","add","change","delete","ChangePasswordForm","passwordRef","password2Ref","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}
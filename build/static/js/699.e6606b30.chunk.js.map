{"version":3,"file":"static/js/699.e6606b30.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","webpack://ticket_system/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","api/auth.ts","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://ticket_system/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","utils/query.ts","api/events.ts","utils/nums.ts","utils/dates.ts","api/ticketTypes.ts","api/tickets.ts","components/create/CreateTicketForm.tsx","webpack://ticket_system/./src/components/TicketEditor/styles.module.css?35f4","utils/imagefileToData.ts","utils/useFont.ts","components/TicketEditor/editor.ts","components/TicketEditor/inspector.tsx","api/fonts.ts","components/TicketEditor/index.tsx","components/TicketEditor/viewer.tsx","webpack://ticket_system/./src/components/ViewTicket/styles.module.css?3dc1","components/ViewTicket/simple.tsx","components/ViewTicket/index.tsx","components/edit/EditTicketTypesForm.tsx","components/edit/EditEventForm.tsx","components/PopupConfirmDeletion/index.tsx","api/staff.ts","components/edit/EditStaffForm.tsx","components/PopupQrCode/index.tsx","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/EventsFullPage/styles.module.css?dfe7","pages/EventsFullPage/index.tsx","components/create/CreateEventForm.tsx","pages/EventsPage/index.tsx","components/create/CreateFontForm.tsx","pages/FontsPage/index.tsx","api/log.ts","webpack://ticket_system/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://ticket_system/./src/pages/ManagersPage/styles.module.css?b9cc","api/managers.ts","components/create/CreateManagerForm.tsx","pages/ManagersPage/index.tsx","webpack://ticket_system/./src/pages/PrintTicketsPage/styles.module.css?1c5e","utils/getTicketPrefix.ts","pages/PrintTicketsPage/index.tsx","webpack://ticket_system/./src/pages/ProfilePage/styles.module.css?79a0","components/edit/ChangePasswordForm.tsx","pages/ProfilePage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","utils/useSound.ts","pages/ScannerPage/index.tsx","api/checkTicket.ts","webpack://ticket_system/./src/pages/StaffPage/styles.module.css?0cf2","components/create/CreateStaffForm.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","components/edit/EditTicketForm.tsx","pages/TicketsPage/index.tsx","webpack://ticket_system/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","App.tsx"],"sourcesContent":["import type { TicketPattern } from \"../components/TicketEditor/editor\";\n\nexport class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface User\n{\n\tauth: boolean,\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\toperations: string[],\n}\n\nexport interface UserFull\n{\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\tbossId: number | null,\n\tdeleted: boolean,\n\taccess: string[],\n\toperations: string[],\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string,\n}\n\nexport interface ImgData\n{\n\tdata: string,\n\tname: string,\n\taccessEventId: number,\n}\n\nexport interface ResponseEvent\n{\n\tid: number,\n\tname: string,\n\tdate: string,\n}\n\nexport interface EventData\n{\n\tid: number,\n\tname: string,\n\tdate: Date,\n}\nexport interface EventDataFull\n{\n\tid: number,\n\tdeleted: boolean,\n\tname: string,\n\tdate: Date,\n\tactive: boolean,\n\taccess: User[],\n}\n\nexport interface ResponseCheckTicket\n{\n\tsuccess: boolean,\n\terrorCode: null | \"event\" | \"scanned\" | \"notExist\",\n\tticket: ResponseTicket | null,\n\tevent: ResponseEvent | null,\n}\n\nexport interface ResponseTicket\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\teventId: number,\n\tcreatedDate: string,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: string,\n\tauthOnPltf: boolean,\n}\n\nexport type CheckTicketResult = CheckTicketResult_success | CheckTicketResult_event | CheckTicketResult_scanned | CheckTicketResult_notExist;\n\ninterface CheckTicketResult_success\n{\n\tsuccess: true,\n\terrorCode: null,\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_event\n{\n\tsuccess: boolean,\n\terrorCode: \"event\",\n\tticket: Ticket,\n\tevent: EventData,\n}\n\ninterface CheckTicketResult_scanned\n{\n\tsuccess: false,\n\terrorCode: \"scanned\",\n\tticket: Ticket_scanned,\n\tevent: null,\n}\n\ninterface CheckTicketResult_notExist\n{\n\tsuccess: false,\n\terrorCode: \"notExist\",\n\tticket: null,\n\tevent: null,\n}\n\nexport type Ticket = Ticket_common | Ticket_scanned;\n\ninterface Ticket_common\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy?: string,\n\tscannedById?: number,\n\tscannedDate?: Date,\n\tauthOnPltf: boolean,\n}\n\ninterface Ticket_scanned\n{\n\tid: number,\n\tcode: string,\n\ttype: string,\n\ttypeId: number,\n\teventId: number,\n\tcreatedDate: Date,\n\tpersonName?: string,\n\tpersonLink?: string,\n\tpromocode?: string,\n\tscanned: boolean,\n\tscannedBy: string,\n\tscannedById: number,\n\tscannedDate: Date,\n\tauthOnPltf: boolean,\n}\n\nexport interface TicketType\n{\n\tid: number,\n\tname: string,\n\timageId: number | null,\n\tpattern: TicketPattern,\n}\n\nexport interface TicketStats\n{\n\ttypeId: number,\n\tcount: number,\n\tscanned: number,\n\tauthOnPltf: number,\n}\n\nexport interface Font\n{\n\tid: number,\n\tname: string,\n\ttype: \"ttf\" | \"otf\" | \"woff\" | \"woff2\",\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"GET\", input, body);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"GET\", input, body);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n\nexport async function fetchPostForm<T>(input: RequestInfo | URL, body: FormData)\n{\n\tconst res = await fetch(input, {\n\t\tmethod: \"POST\",\n\t\tbody,\n\t});\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as T;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError } from \"./dataTypes\";\nimport { ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPost } from \"../utils/fetch\";\n\nexport function createEmptyUser(): User\n{\n\treturn { auth: false, id: -1, login: \"\", roles: [], name: \"\", operations: [] };\n}\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", async () =>\n\t{\n\t\tconst res = await fetch(\"/api/user\");\n\t\tconst data = await res.json();\n\n\t\tif (res.status == 401) return createEmptyUser();\n\t\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\t\tconst user = data as User;\n\t\tuser.auth = true;\n\t\treturn user;\n\t});\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\"),\n\t);\n}\n\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeNameData) =>\n\t\t\tawait fetchPost(\"/api/user/change_name\", data),\n\t\tonSuccess: (_, data: ChangeNameData) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeNameData\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n\tpage_debug: \"page_debug\",\n\tpage_debug_events: \"page_debug_events\",\n\tpage_debug_users: \"page_debug_users\",\n\tpage_fonts: \"page_fonts\",\n\tpage_managers: \"page_managers\",\n\n\tget_staff_event: \"get_staff_event\",\n\n\tadd_event: \"add_event\",\n\tadd_ticket: \"add_ticket\",\n\tadd_staff: \"add_staff\",\n\tadd_font: \"add_font\",\n\tadd_manager: \"add_manager\",\n\n\tchange_ticket_types: \"change_ticket_types\",\n\tchange_ticket: \"change_ticket\",\n\tchange_event: \"change_event\",\n\tchange_staff_event: \"change_staff_event\",\n\tchange_staff: \"change_staff\",\n\n\tdelete_event: \"delete_event\",\n\tdelete_ticket: \"delete_ticket\",\n\tdelete_staff: \"delete_staff\",\n\tdelete_manager: \"delete_manager\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => setMenuOpen(v => !v)} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","import { useMutation, useQueryClient } from \"react-query\";\nimport { ApiError, User } from \"./dataTypes\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { createEmptyUser } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (authData: AuthData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: () => fetchPost(\"/api/logout\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", (_?: User) => createEmptyUser());\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredH\":\"styles_body_centeredH__1xVSd\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centeredH = false, centered = false, centeredPage = false, height100 = false, gap = 0, padding, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredH && styles.body_centeredH,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\", padding }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\tcenteredH?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tpadding?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Билетная система\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t\t{hasPermission(user, \"page_fonts\") && <Link to=\"/fonts\" className=\"button button_large\">Шрифты</Link>}\n\t\t\t{hasPermission(user, \"page_managers\") && <Link to=\"/managers\" className=\"button button_large\">Организаторы</Link>}\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/d\" className=\"button button_large\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t{useHasPermission(\"page_debug_users\") && <Link to=\"/d/users\" className=\"button\">Users</Link>}\n\t\t\t{useHasPermission(\"page_debug_events\") && <Link to=\"/d/events\" className=\"button\">Events</Link>}\n\t\t\t<Link to=\"/d/log\" className=\"button\">Log</Link>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\",\"line\":\"styles_line__4myXW\",\"ticketTypes\":\"styles_ticketTypes__FIDHq\"};","import type { QueryClient, QueryKey } from \"react-query\";\n\nexport function queryStrKey(queryKey: QueryKey)\n{\n\treturn queryKey instanceof Array ? queryKey.map(v => `${v}`) : `${queryKey}`;\n}\n\nexport function queryInvalidate(queryClient: QueryClient, queryKey: QueryKey)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tqueryClient.invalidateQueries(queryKey, { exact: true });\n}\n\nexport function queryListAddItem<T>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items, item] : [item]);\n}\n\nexport function queryListUpdateItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items?.map(v => v.id == item.id ? item : v) || []);\n}\n\nexport function queryListDeleteItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, itemId: number | string)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? items.filter(v => v.id != itemId) : []);\n}\n\ninterface ObjWithId\n{\n\tid: number | string,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, EventData, ResponseEvent, ResponseMsg, type EventDataFull } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem, queryInvalidate } from \"../utils/query\";\n\nexport function parseEventResponse(responseEvent: ResponseEvent)\n{\n\tconst event = responseEvent as unknown as EventData;\n\tevent.date = new Date(responseEvent.date);\n\treturn event;\n}\n\nexport function useEvents()\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery(\"events\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events\");\n\t\treturn events.map(parseEventResponse);\n\t}, {\n\t\tonSuccess: data =>\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"event\", `${v.id}`], v)),\n\t});\n}\n\nexport function useEventsFull()\n{\n\treturn useQuery(\"events_full\", async () =>\n\t{\n\t\tconst events = await fetchJsonGet<ResponseEvent[]>(\"/api/events_full\");\n\t\treturn events.map(parseEventResponse) as EventDataFull[];\n\t});\n}\n\nexport function useEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst event = await fetchJsonGet<ResponseEvent>(\"/api/events/\" + eventId);\n\t\treturn parseEventResponse(event);\n\t});\n}\n\nexport function useScannerEvent(eventId: number | string)\n{\n\treturn useQuery([\"event\", `${eventId}`], async () =>\n\t{\n\t\tconst res = await fetch(\"/api/scanner_events/\" + eventId);\n\t\tconst data = await res.json();\n\t\tif (!res.ok)\n\t\t{\n\t\t\tif (res.status == 403)\n\t\t\t\treturn NaN;\n\t\t\tthrow new ApiError((await res.json() as ResponseMsg).msg);\n\t\t}\n\t\treturn parseEventResponse(data as ResponseEvent);\n\t}, { retry: 3 });\n}\n\n\nexport function useMutationNewEvent(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events\", eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListAddItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\ninterface NewEventData\n{\n\tname: string,\n\tdate: Date | string,\n}\n\nexport function useMutationUpdateEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventData: NewEventData) =>\n\t\t{\n\t\t\tconst event = await fetchJsonPost<ResponseEvent>(\"/api/events/\" + eventId, eventData);\n\t\t\treturn parseEventResponse(event);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"event\", `${data.id}`], data);\n\t\t\tqueryListUpdateItem(queryClient, \"events\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationDeleteEvent(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/events/\" + eventId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, [\"event\", eventId]);\n\t\t\tqueryListDeleteItem(queryClient, \"events\", eventId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n}\n\nexport function useMutationGetAccessToEvent()\n{\n\tconst queryClient = useQueryClient();\n\treturn useMutation({\n\t\tmutationFn: async (eventId: number | string) =>\n\t\t\tawait fetchPost(`/api/events/${eventId}/add_access`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryInvalidate(queryClient, \"events\");\n\t\t\tqueryInvalidate(queryClient, \"events_full\");\n\t\t},\n\t});\n}\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false, year = true)\n{\n\tif (!date) return \"\";\n\tconst nums = [padNum(date.getDate(), 2), padNum(date.getMonth() + 1, 2)];\n\tif (year) nums.push(`${date.getFullYear()}`);\n\tif (reverse) nums.reverse();\n\treturn nums.join(\".\");\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport type { ImgData, TicketType } from \"./dataTypes\";\nimport type { TicketPattern } from \"../components/TicketEditor/editor\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryInvalidate, queryListUpdateItem } from \"../utils/query\";\n\nexport function useTicketTypes(eventId: number | string)\n{\n\tconst queryClient = useQueryClient();\n\treturn useQuery([\"ticket_types\", eventId], async () =>\n\t\tawait fetchJsonGet<TicketType[]>(`/api/events/${eventId}/ticket_types`),\n\t\t{\n\t\t\tonSuccess: data =>\n\t\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v)),\n\t\t});\n}\n\nexport function useMutationUpdateTicketTypes(eventId: number | string, onSuccess?: (ticket: TicketType[]) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypesData[]) =>\n\t\t\tawait fetchJsonPost<TicketType[]>(`/api/events/${eventId}/ticket_types`, data),\n\t\tonSuccess: (data, inp) =>\n\t\t{\n\t\t\tconst someTypeChanged = inp.some(v => v.action == \"delete\" || v.action == \"update\")\n\t\t\tif (someTypeChanged)\n\t\t\t\tqueryInvalidate(queryClient, [\"tickets\", eventId])\n\t\t\tqueryClient.setQueryData([\"ticket_types\", `${eventId}`], data);\n\t\t\tdata.forEach(v => queryClient.setQueryData([\"ticket_type\", `${v.id}`], v));\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypesData\n{\n\tname: string,\n\tid?: number,\n\taction: \"add\" | \"update\" | \"delete\",\n}\n\n\nexport function useTicketType(typeId: number)\n{\n\treturn useQuery([\"ticket_type\", `${typeId}`], async () =>\n\t\tawait fetchJsonGet<TicketType>(\"/api/ticket_types/\" + typeId),\n\t\t{ enabled: typeId >= 0 }\n\t);\n}\n\nexport function useMutationUpdateTicketType(typeId: number | string, onSuccess?: (ticket: TicketType) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: UpdateTicketTypeData) =>\n\t\t\tawait fetchJsonPost<TicketType>(\"/api/ticket_types/\" + typeId, data),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"ticket_type\", `${typeId}`], data);\n\t\t\tqueryListUpdateItem(queryClient, [\"ticket_types\", typeId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport interface UpdateTicketTypeData\n{\n\timg: ImgData | null,\n\tpattern: TicketPattern,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ResponseTicket, Ticket, TicketStats } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = responseTicket as unknown as Ticket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}\n\nexport default function useTickets(eventId: number | string)\n{\n\treturn useQuery([\"tickets\", `${eventId}`], async () =>\n\t{\n\t\tconst tickets = await fetchJsonGet<ResponseTicket[]>(`/api/events/${eventId}/tickets`);\n\t\treturn tickets.map(parseTicketResponse);\n\t});\n}\n\n\nexport function useMutationNewTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: NewTicketData) =>\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets\", ticketData);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewTicketData\n{\n\ttypeId: number,\n\teventId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n\tcode: string,\n}\n\nexport function useMutationUpdateTicket(onSuccess?: (ticket: Ticket) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async function postUpdateTicket(params: UpdateTicketParams)\n\t\t{\n\t\t\tconst ticket = await fetchJsonPost<ResponseTicket>(\"/api/tickets/\" + params.ticketId, params.data);\n\t\t\treturn parseTicketResponse(ticket);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, [\"tickets\", data.eventId], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface UpdateTicketParams\n{\n\tticketId: number | string,\n\tdata: UpdateTicketData,\n}\ninterface UpdateTicketData\n{\n\ttypeId: number,\n\tpersonName: string,\n\tpersonLink: string,\n\tpromocode: string,\n}\n\nexport function useMutationDeleteTicket(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketId: number | string) =>\n\t\t\tawait fetchDelete(\"/api/tickets/\" + ticketId),\n\t\tonSuccess: (_, ticketId) =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, [\"tickets\", eventId], ticketId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useTicketStats(eventId: number | string)\n{\n\treturn useQuery([\"ticket_stats\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<TicketStats[]>(`/api/events/${eventId}/tickets_stats`),\n\t);\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateTicketForm({ open, eventId, close, setTicet }: CreateTicketFormProps)\n{\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst [code, setCode] = useState(\"\");\n\tconst [autocode, setAutocode] = useState(true);\n\tconst mutation = useMutationNewTicket(ticket =>\n\t{\n\t\tsetTicet(ticket);\n\t\tclose?.();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tsetAutocode(true);\n\t\t\tsetTypeId(ticketTypes.data?.[0]?.id || -1);\n\t\t\tsetPersonName(\"\");\n\t\t\tsetPersonLink(\"\");\n\t\t\tsetPromocode(\"\");\n\t\t\tsetCode(\"\");\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление билета\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\teventId: parseInt(`${eventId}`, 10),\n\t\t\t\t\t\ttypeId: typeId,\n\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\tcode: autocode ? \"\" : code,\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" checked={autocode} onChange={e => setAutocode(e.target.checked)} />\n\t\t\t\t\t<span style={{ color: autocode ? \"darkgreen\" : \"darkred\" }}>Авто-код билета</span>\n\t\t\t\t</label>\n\t\t\t\t{!autocode &&\n\t\t\t\t\t<FormField label=\"Код билета (ручной ввод)\">\n\t\t\t\t\t\t<div style={{ color: \"darkred\", fontSize: \"0.9rem\" }}>Не используйте без необходимости!</div>\n\t\t\t\t\t\t<input value={code} onChange={e => setCode(e.target.value)} type=\"text\" />\n\t\t\t\t\t</FormField>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={!ticketTypes.data || ticketTypes.data.length == 0}>Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps extends PopupProps\n{\n\teventId: number | string,\n\tsetTicet: (ticket: Ticket) => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__+QOp3\",\"canvas\":\"styles_canvas__wzjs3\",\"inspector\":\"styles_inspector__TrPRu\",\"inspector_open\":\"styles_inspector_open__h5KZj\",\"fields\":\"styles_fields__fz+aE\",\"colorInput\":\"styles_colorInput__8Ty5B\",\"fontInput\":\"styles_fontInput__zF4OQ\",\"panel\":\"styles_panel__yLWcU\",\"br\":\"styles_br__7BTyB\",\"footer\":\"styles_footer__ADD9E\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string, accessEventId?: number)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t\taccessEventId,\n\t} as ImgData\n}","import { useEffect } from \"react\";\nimport { Font } from \"../api/dataTypes\";\n\nexport default function useFont(font: Font)\n{\n\tconst fontName = `${font.id}_${font.name}`;\n\tuseEffect(() =>\n\t{\n\t\tconst myFont = newFontFace(fontName, font.id, font.type);\n\t\tdocument.fonts.add(myFont);\n\t\treturn () =>\n\t\t{\n\t\t\tdocument.fonts.delete(myFont);\n\t\t}\n\t}, []);\n\treturn `\"${fontName}\"`;\n}\n\nexport function newFontFace(family: string, id: number, type: keyof typeof fontTypes)\n{\n\treturn new FontFace(family, `url(\"/api/fonts/${id}\")  format(\"${fontTypes[type]}\")`);\n}\n\nconst fontTypes = {\n\totf: \"opentype\",\n\tttf: \"truetype\",\n\twoff: \"woff\",\n\twoff2: \"woff2\",\n}\n","import { Font, Ticket } from \"../../api/dataTypes\";\nimport type { UpdateTicketTypeData } from \"../../api/ticketTypes\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport QRCode from \"qrcode\"\nimport { newFontFace } from \"../../utils/useFont\";\n\nexport class TicketEditor\n{\n\tprivate editor: Editor | null = null;\n\tprivate img: HTMLImageElement | null = null;\n\tprivate imgQr = new Image();\n\tprivate qrLast = 0;\n\tprivate imgFile: File | null = null;\n\tprivate data: TicketPattern = { width: 0, height: 0, objects: [] };\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate loadingImg = false;\n\tprivate loadingFont = false;\n\tprivate loadingFonts: FontFace[] = [];\n\tprivate get loading() { return this.loadingImg || this.loadingFont; }\n\tprivate ticket: Ticket | null = null;\n\tprivate fonts: { id: number, font: FontFace }[] = [];\n\tprivate listenerResize = () => this.draw();\n\tprivate listenerKeydown = (e: KeyboardEvent) => { if (e.key == \"Delete\") if (this.editor?.deleteSelectedObj()) this.draw(); };\n\tprivate listenerMouseDown = (e: MouseEvent) => { if (this.editor?.mouseDown(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerMouseMove = (e: MouseEvent) => { if (this.editor?.mouseMove(e.offsetX, e.offsetY)) this.draw() };\n\tprivate listenerMouseUp = (e: MouseEvent) => { if (this.editor?.mouseUp(e.offsetX, e.offsetY, e.button)) this.draw() };\n\tprivate listenerContextMenu = (e: MouseEvent) => { e.preventDefault(); };\n\tprivate listenerWheel = (e: WheelEvent) => { e.preventDefault(); if (this.editor?.wheel(e.offsetX, e.offsetY, e.deltaY)) this.draw() };\n\tprivate inspectorSet: InspectorSetFunc = () => { };\n\n\tconstructor(private fontTypes: FontTypes | null, init = true, private viewMode = false)\n\t{\n\t\tif (!init || viewMode) return;\n\t\twindow.addEventListener(\"resize\", this.listenerResize);\n\t\twindow.addEventListener(\"keydown\", this.listenerKeydown);\n\t}\n\n\tpublic static renderQRCode(code: string, color: string, callback: (img: HTMLImageElement) => void)\n\t{\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10, margin: 2, color: { light: \"#ffffff00\", dark: color } }, (e, url) =>\n\t\t{\n\t\t\tif (e) console.error(e);\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener(\"load\", () =>\n\t\t\t{\n\t\t\t\tcallback(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tpublic setData(image: number | null, data: TicketPattern)\n\t{\n\t\tthis.img = null;\n\t\tthis.imgFile = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t\tthis.data = data || this.createNewData();\n\n\t\t// update data from prev version\n\t\tthis.data.objects.forEach(v => v.f == undefined ? v.f = -1 : {});\n\n\t\tif (!this.data.objects.find(v => v.type == \"code\"))\n\t\t\tthis.data.objects.push({ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 });\n\n\t\tthis.editor = null;\n\t\tthis.reRenderQR();\n\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t\tthis.editor?.setViewTicket(ticket);\n\t\tthis.reRenderQR();\n\t\tthis.draw();\n\t}\n\tpublic setNewImage(image: File)\n\t{\n\t\tthis.imgFile = image;\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tURL.revokeObjectURL(url);\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tconst url = URL.createObjectURL(image)\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = url;\n\t}\n\tpublic setImage(image: number | null)\n\t{\n\t\tthis.imgFile = null;\n\t\tthis.img = null;\n\t\tif (image != null)\n\t\t\tthis.loadImage(image);\n\t}\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.removeCanvasListeners();\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\n\t\tif (this.viewMode) return;\n\n\t\tcanvas.addEventListener(\"mousedown\", this.listenerMouseDown);\n\t\tcanvas.addEventListener(\"mousemove\", this.listenerMouseMove);\n\t\tcanvas.addEventListener(\"mouseup\", this.listenerMouseUp);\n\t\tcanvas.addEventListener(\"wheel\", this.listenerWheel);\n\t\tcanvas.addEventListener(\"contextmenu\", this.listenerContextMenu);\n\t}\n\tpublic setInspector(f: InspectorSetFunc)\n\t{\n\t\tthis.inspectorSet = f;\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tthis.editor?.inspectorInput(field, value);\n\t\tif (field == \"f\")\n\t\t\tthis.loadFonts();\n\t\tthis.draw();\n\t}\n\tpublic reset()\n\t{\n\t\tthis.editor = null;\n\t\tthis.img = null;\n\t\tthis.imgQr = new Image();\n\t\tthis.imgFile = null;\n\t\tthis.data = { width: 0, height: 0, objects: [] };\n\t\tthis.loadingImg = false;\n\t\tthis.loadingFont = false;\n\t\tthis.ticket = null;\n\t\tthis.inspectorSet(null);\n\t\tthis.draw();\n\t}\n\tpublic async getData(imageName: string, eventId: number)\n\t{\n\t\treturn {\n\t\t\tpattern: this.data,\n\t\t\timg: this.imgFile ? await imagefileToData(this.imgFile, imageName, eventId) : null,\n\t\t} as UpdateTicketTypeData\n\t}\n\tpublic destroy()\n\t{\n\t\twindow.removeEventListener(\"resize\", this.listenerResize);\n\t\twindow.removeEventListener(\"keydown\", this.listenerKeydown);\n\t\tthis.removeCanvasListeners();\n\t\tthis.inspectorSet(null);\n\t}\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.editor?.drawObject(obj);\n\t\tthis.draw();\n\t}\n\tpublic resetZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.resetZoom();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\tpublic fitZoom()\n\t{\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.fitToView();\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tprivate removeCanvasListeners()\n\t{\n\t\tif (this.canvas)\n\t\t{\n\t\t\tthis.canvas.removeEventListener(\"mousedown\", this.listenerMouseDown);\n\t\t\tthis.canvas.removeEventListener(\"mousemove\", this.listenerMouseMove);\n\t\t\tthis.canvas.removeEventListener(\"mouseup\", this.listenerMouseUp);\n\t\t\tthis.canvas.removeEventListener(\"wheel\", this.listenerWheel);\n\t\t\tthis.canvas.removeEventListener(\"contextmenu\", this.listenerContextMenu);\n\t\t}\n\t}\n\n\tprivate loadImage(image: number)\n\t{\n\t\tconst img = new Image();\n\t\tthis.img = img;\n\t\tthis.img.addEventListener(\"load\", () =>\n\t\t{\n\t\t\tthis.loadingImg = false;\n\t\t\tthis.editor = null;\n\t\t\tthis.draw();\n\t\t});\n\t\tthis.loadingImg = true;\n\t\tthis.img.src = `/api/img/${image}`;\n\t}\n\n\tprivate loadFonts()\n\t{\n\t\tthis.loadingFont = true;\n\t\tif (!this.fontTypes) return;\n\n\t\tconst reqFonts = this.data.objects.map(v => v.f);\n\t\t// delete unused fonts\n\t\tfor (let i = this.fonts.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst font = this.fonts[i];\n\t\t\tif (!reqFonts.includes(font.id))\n\t\t\t{\n\t\t\t\tdocument.fonts.delete(font.font);\n\t\t\t\tthis.fonts.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\t// load new fonts\n\n\t\tconst loadedFonts = this.fonts.map(v => v.id);\n\t\tfor (const obj of this.data.objects)\n\t\t{\n\t\t\tif (obj.f < 0 || loadedFonts.includes(obj.f))\n\t\t\t\tcontinue\n\t\t\tconst font = newFontFace(`font_${obj.f}`, obj.f, this.fontTypes[obj.f]);\n\t\t\tthis.fonts.push({ id: obj.f, font });\n\t\t\tthis.loadingFonts.push(font);\n\t\t\tdocument.fonts.add(font);\n\t\t\tfont.load().then(() =>\n\t\t\t{\n\t\t\t\tthis.loadingFonts.splice(this.loadingFonts.indexOf(font), 1)\n\t\t\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t\t\t\tif (!this.loadingFont)\n\t\t\t\t\tthis.draw();\n\t\t\t});\n\t\t}\n\t\tthis.loadingFont = this.loadingFonts.length != 0;\n\t}\n\n\tprivate reRenderQR()\n\t{\n\t\tconst color = this.data.objects.find(v => v.type == \"qr\")?.c || \"#000000\";\n\t\tconst id = ++this.qrLast;\n\t\tTicketEditor.renderQRCode(this.ticket?.code || \"23-31224-34-07-4321\", color, img =>\n\t\t{\n\t\t\tif (id != this.qrLast) return;\n\t\t\tthis.imgQr = img;\n\t\t\tif (this.editor)\n\t\t\t{\n\t\t\t\tthis.editor.setQr(img);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setCursor(cursor: Cursor)\n\t{\n\t\tif (!this.canvas) return;\n\t\tthis.canvas.style.cursor = cursor;\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas) return;\n\t\tconst parent = this.canvas.parentElement;\n\t\tif (!parent) return;\n\n\t\tlet w = parent.clientWidth;\n\t\tlet h = parent.clientHeight;\n\t\tif (this.viewMode && this.img && !this.loading)\n\t\t{\n\t\t\tw = this.data.width;\n\t\t\th = this.data.height;\n\t\t}\n\t\tthis.canvas.width = w;\n\t\tthis.canvas.style.width = `${w}px`;\n\t\tthis.canvas.height = h;\n\t\tthis.canvas.style.height = `${h}px`;\n\n\t\tif (!this.ctx) return;\n\t\tthis.ctx.fillStyle = \"#00000033\";\n\t\tthis.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n\t\tif (!this.img || this.loading)\n\t\t{\n\t\t\tthis.ctx.fillStyle = \"black\";\n\t\t\tconst text = this.loading ? \"Загрузка\" : (this.viewMode ? \"Этот тип билетов\\nне настроен\" : \"Загрузите картинку\");\n\t\t\tthis.drawTextAtCenter(text, 32);\n\t\t\treturn;\n\t\t}\n\t\tif (!this.editor)\n\t\t{\n\t\t\tthis.editor = new Editor(this.img, this.data, this.reRenderQR.bind(this), this.setCursor.bind(this), this.inspectorSet, this.imgQr, this.viewMode)\n\t\t\tthis.editor.setCanvasSize({ w, h });\n\t\t\tthis.editor.fitToView();\n\t\t}\n\t\tthis.editor.setCanvasSize({ w, h });\n\t\tthis.ctx.imageSmoothingEnabled = false;\n\t\tif (this.ticket)\n\t\t\tthis.editor.setViewTicket(this.ticket);\n\t\tthis.editor.draw(this.ctx)\n\t}\n\n\tprivate drawTextAtCenter(text: string, size: number)\n\t{\n\t\tif (!this.ctx || !this.canvas) return;\n\t\tconst w = this.canvas.width;\n\t\tconst h = this.canvas.height;\n\t\tthis.ctx.textAlign = \"center\";\n\t\tthis.ctx.font = `${size}px Arial`;\n\t\tconst lines = text.split(\"\\n\");\n\t\tconst dy = -lines.length * size * 0.8 / 2;\n\t\tconst ddy = lines.length * size * 0.8;\n\t\tfor (let i = 0; i < lines.length; i++)\n\t\t\tthis.ctx.fillText(lines[i], w / 2, h / 2 + dy + ddy * i);\n\t}\n\n\tprivate createNewData()\n\t{\n\t\treturn {\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tobjects: [\n\t\t\t\t{ type: \"qr\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"code\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"name\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t\t{ type: \"promo\", x: 0, y: 0, w: 0, h: 0, c: \"#000000\", f: -1 },\n\t\t\t],\n\t\t} as TicketPattern;\n\t}\n}\n\nexport interface FontTypes\n{\n\t[id: number]: Font[\"type\"];\n}\n\nexport interface TicketPattern\n{\n\twidth: number,\n\theight: number,\n\tobjects: TicketPatternObject[],\n}\nexport interface TicketPatternObject\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tc: string, // color\n\tf: number, // font\n\ttype: TicketPatternObjectType,\n}\ntype TicketPatternObjectType = \"qr\" | \"name\" | \"promo\" | \"code\";\n\ntype InspectorSetFunc = (obj: TicketPatternObject | null) => void;\ntype InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) => void;\n\ntype MoveMode = null | \"view\" | \"obj\" | \"resize\";\ntype Cursor = \"default\" | \"move\" | \"n-resize\" | \"e-resize\" | \"ne-resize\" | \"nw-resize\";\n\n\nclass Editor\n{\n\tprivate transform = { x: 0, y: 0, s: 1 };\n\tprivate moving = { sx: 0, sy: 0, vx: 0, vy: 0, vw: 0, vh: 0, mode: null as MoveMode };\n\tprivate drawing = { sx: 0, sy: 0, ex: 0, ey: 0, active: false, type: null as TicketPatternObjectType | null };\n\tprivate resizing = { dir: [0, 0] as RectZone, keepAspect: false, aspect: 1 };\n\tprivate canvasSize = { w: 0, h: 0 };\n\tprivate selected = -1;\n\tprivate readonly selectionBorder = 16;\n\tprivate ticket: Ticket | null = null;\n\n\tconstructor(\n\t\tprivate img: HTMLImageElement,\n\t\tprivate data: TicketPattern,\n\t\tprivate reRenderQR: () => void,\n\t\tprivate setCursor: (cursor: Cursor) => void,\n\t\tprivate setInspector: InspectorSetFunc,\n\t\tprivate imgqr: HTMLImageElement,\n\t\tprivate viewMode: boolean,\n\t)\n\t{\n\t\tdata.width = img.width;\n\t\tdata.height = img.height;\n\t}\n\n\tpublic fitToView()\n\t{\n\t\tconst m = this.viewMode ? 0 : 100;\n\t\tthis.transform.s = Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height);\n\t\tthis.transform.x = (this.canvasSize.w - this.img.width * this.transform.s) / 2;\n\t\tthis.transform.y = (this.canvasSize.h - this.img.height * this.transform.s) / 2;\n\t\tthis.restrictView();\n\t}\n\tpublic inspectorInput: InspectorInputFunc = <T extends keyof TicketPatternObject>(field: T, value: TicketPatternObject[T]) =>\n\t{\n\t\tif (this.selected < 0) return;\n\t\tconst obj = this.data.objects[this.selected]\n\t\tconst fs = [\"x\", \"y\", \"w\", \"h\", \"f\"] as const;\n\t\tif (fs.includes(field as any))\n\t\t{\n\t\t\tconst f = field as typeof fs[number];\n\t\t\tconst v = value as number;\n\t\t\tobj[f] = Math.max(v, 0);\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (f == \"w\") obj.h = obj.w;\n\t\t\t\tif (f == \"h\") obj.w = obj.h;\n\t\t\t}\n\t\t}\n\t\telse if (field == \"c\")\n\t\t{\n\t\t\tobj[field] = value;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tthis.reRenderQR();\n\t\t}\n\t}\n\tpublic setCanvasSize(size: { w: number, h: number })\n\t{\n\t\tthis.canvasSize = size;\n\t}\n\tpublic setQr(qr: HTMLImageElement)\n\t{\n\t\tthis.imgqr = qr;\n\t}\n\tpublic setViewTicket(ticket: Ticket)\n\t{\n\t\tthis.ticket = ticket;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.x, this.transform.y);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tctx.fillStyle = \"black\"\n\t\tctx.fillRect(0, 0, this.img.width, this.img.height);\n\t\tctx.drawImage(this.img, 0, 0);\n\n\t\tconst texts = {\n\t\t\tname: this.ticket?.personName ?? \"Иванов Иван Иванович 太阳\",\n\t\t\tpromo: this.ticket?.promocode ?? \"Неутомимый\",\n\t\t\tcode: this.ticket?.code ?? \"23-31224-34-07-4321\",\n\t\t}\n\n\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t{\n\t\t\tconst obj = this.data.objects[i];\n\t\t\t// ctx.fillStyle = \"#ffffff88\";\n\t\t\t// ctx.fillRect(...unwrapRect(obj));\n\t\t\tctx.fillStyle = obj.c;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t{\n\t\t\t\tif (this.imgqr.complete && this.imgqr.naturalHeight != 0)\n\t\t\t\t\tctx.drawImage(this.imgqr, ...unwrapRect(obj));\n\t\t\t\telse\n\t\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\telse if (obj.type == \"name\" || obj.type == \"promo\" || obj.type == \"code\")\n\t\t\t{\n\t\t\t\tconst font = `font_${obj.f}, Arial`;\n\t\t\t\tctx.font = `${obj.h}px ${font}`;\n\t\t\t\tctx.fillText(texts[obj.type], obj.x, obj.y + obj.h * 0.8, obj.w);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tctx.fillRect(...unwrapRect(obj));\n\t\t\t}\n\t\t\tif (this.selected == i)\n\t\t\t{\n\t\t\t\tctx.strokeStyle = \"orange\";\n\t\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\t\tctx.strokeRect(...unwrapRect(obj));\n\t\t\t}\n\t\t}\n\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\tctx.strokeStyle = \"white\";\n\t\t\tctx.lineWidth = 4 / this.transform.s;\n\t\t\tlet w = this.drawing.ex - this.drawing.sx;\n\t\t\tlet h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (this.drawing.type == \"qr\")\n\t\t\t\th = w;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t\tctx.strokeStyle = \"black\";\n\t\t\tctx.lineWidth = 2 / this.transform.s;\n\t\t\tctx.strokeRect(this.drawing.sx, this.drawing.sy, w, h);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic drawObject(obj: TicketPatternObjectType)\n\t{\n\t\tthis.drawing.type = obj;\n\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t}\n\n\tpublic deleteSelectedObj()\n\t{\n\t\tif (this.selected < 0)\n\t\t\treturn false;\n\n\t\tconst obj = this.data.objects[this.selected];\n\t\tobj.x = 0;\n\t\tobj.y = 0;\n\t\tobj.w = 0;\n\t\tobj.h = 0;\n\t\tthis.selected = -1;\n\t\tthis.setInspector(null);\n\t\treturn true;\n\t}\n\n\tpublic resetZoom()\n\t{\n\t\tthis.transform.s = 1;\n\t\tthis.restrictView();\n\t}\n\n\tpublic mouseDown(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.sx = x;\n\t\tthis.moving.sy = y;\n\t\tif (button == 2)\n\t\t{\n\t\t\tthis.moving.vx = this.transform.x;\n\t\t\tthis.moving.vy = this.transform.y;\n\t\t\tthis.moving.mode = \"view\";\n\t\t\tthis.setCursor(\"move\");\n\t\t\treturn;\n\t\t}\n\t\tif (button == 0)\n\t\t{\n\t\t\tif (this.drawing.type)\n\t\t\t{\n\t\t\t\t[this.drawing.sx, this.drawing.sy] = this.pointToWorld(x, y);\n\t\t\t\tthis.drawing.active = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.data.objects.length; i++)\n\t\t\t{\n\t\t\t\tconst obj = this.data.objects[i];\n\t\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\t\tlet resize = false;\n\t\t\t\tif (this.selected == i)\n\t\t\t\t{\n\t\t\t\t\tthis.resizing.dir = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\t\t\tresize = this.resizing.dir[0] != 0 || this.resizing.dir[1] != 0;\n\t\t\t\t\tthis.resizing.aspect = obj.h / obj.w;\n\t\t\t\t\tthis.resizing.keepAspect = obj.type == \"qr\";\n\t\t\t\t}\n\t\t\t\tif (pointInRect(wx, wy, obj) || resize)\n\t\t\t\t{\n\t\t\t\t\tthis.selected = i;\n\t\t\t\t\tthis.setInspector(obj);\n\t\t\t\t\tthis.moving.vx = obj.x;\n\t\t\t\t\tthis.moving.vy = obj.y;\n\t\t\t\t\tthis.moving.vw = obj.w;\n\t\t\t\t\tthis.moving.vh = obj.h;\n\t\t\t\t\tthis.moving.mode = resize ? \"resize\" : \"obj\";\n\t\t\t\t\tthis.setCursor(resize ? resizeCursor(this.resizing.dir) : \"move\");\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst redraw = this.selected >= 0;\n\t\t\tthis.selected = -1;\n\t\t\tthis.setInspector(null);\n\t\t\treturn redraw;\n\t\t}\n\t}\n\n\tpublic mouseMove(x: number, y: number)\n\t{\n\t\tif (this.moving.mode == \"view\")\n\t\t{\n\t\t\tthis.transform.x = this.moving.vx + (x - this.moving.sx);\n\t\t\tthis.transform.y = this.moving.vy + (y - this.moving.sy);\n\t\t\tthis.restrictView();\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"obj\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tobj.x = this.moving.vx + (x - this.moving.sx) / this.transform.s;\n\t\t\tobj.y = this.moving.vy + (y - this.moving.sy) / this.transform.s;\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.moving.mode == \"resize\" && this.selected >= 0)\n\t\t{\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst dx = (x - this.moving.sx) / this.transform.s;\n\t\t\tconst dy = (y - this.moving.sy) / this.transform.s;\n\t\t\tconst [rx, ry] = this.resizing.dir;\n\t\t\tif (this.resizing.keepAspect)\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t\tobj.h = obj.w * this.resizing.aspect;\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh);\n\t\t\t\t\tif (ry == 0)\n\t\t\t\t\t\tobj.y = this.moving.vy - (obj.h - this.moving.vh) / 2;\n\t\t\t\t}\n\t\t\t\tif (rx == 0)\n\t\t\t\t{\n\t\t\t\t\tif (ry > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t\t}\n\t\t\t\t\tif (ry < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t\t}\n\t\t\t\t\tobj.w = obj.h / this.resizing.aspect;\n\t\t\t\t\tobj.x = this.moving.vx - (obj.w - this.moving.vw) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (rx > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.w = this.moving.vw + dx;\n\t\t\t\t}\n\t\t\t\tif (rx < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.x = this.moving.vx + dx;\n\t\t\t\t\tobj.w = this.moving.vw - dx;\n\t\t\t\t}\n\t\t\t\tif (ry > 0)\n\t\t\t\t{\n\t\t\t\t\tobj.h = this.moving.vh + dy;\n\t\t\t\t}\n\t\t\t\tif (ry < 0)\n\t\t\t\t{\n\t\t\t\t\tobj.y = this.moving.vy + dy;\n\t\t\t\t\tobj.h = this.moving.vh - dy;\n\t\t\t\t}\n\t\t\t}\n\t\t\tobj.w = Math.max(obj.w, 5);\n\t\t\tobj.h = Math.max(obj.h, 5);\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.setInspector(obj);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\treturn true;\n\t\t}\n\t\tif (this.selected >= 0)\n\t\t{\n\t\t\tconst [wx, wy] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects[this.selected];\n\t\t\tconst resize = rectZone(wx, wy, obj, this.selectionBorder / this.transform.s);\n\t\t\tif (resize[0] != 0 || resize[1] != 0)\n\t\t\t\tthis.setCursor(resizeCursor(resize));\n\t\t\telse\n\t\t\t\tthis.setCursor(\"default\");\n\t\t}\n\t}\n\n\tpublic mouseUp(x: number, y: number, button: number)\n\t{\n\t\tthis.moving.mode = null;\n\t\tthis.setCursor(\"default\");\n\t\tif (this.drawing.active)\n\t\t{\n\t\t\t[this.drawing.ex, this.drawing.ey] = this.pointToWorld(x, y);\n\t\t\tconst obj = this.data.objects.find(v => v.type == this.drawing.type);\n\t\t\tif (!obj)\n\t\t\t{\n\t\t\t\tconsole.error(\"Ticket editor: drawing obj not found\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tobj.x = this.drawing.sx;\n\t\t\tobj.y = this.drawing.sy;\n\t\t\tobj.w = this.drawing.ex - this.drawing.sx;\n\t\t\tobj.h = this.drawing.ey - this.drawing.sy;\n\t\t\tif (obj.w < 0)\n\t\t\t{\n\t\t\t\tobj.x += obj.w;\n\t\t\t\tobj.w *= -1;\n\t\t\t}\n\t\t\tif (obj.h < 0)\n\t\t\t{\n\t\t\t\tobj.y += obj.h;\n\t\t\t\tobj.h *= -1;\n\t\t\t}\n\t\t\tobj.x = Math.round(obj.x);\n\t\t\tobj.y = Math.round(obj.y);\n\t\t\tobj.w = Math.round(obj.w);\n\t\t\tobj.h = Math.round(obj.h);\n\t\t\tthis.drawing.active = false;\n\t\t\tthis.drawing.type = null;\n\t\t\tif (obj.type == \"qr\")\n\t\t\t\tobj.h = obj.w;\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic wheel(x: number, y: number, d: number)\n\t{\n\t\tconst X = (x - this.transform.x) / this.transform.s;\n\t\tconst Y = (y - this.transform.y) / this.transform.s;\n\n\t\tif (d > 0)\n\t\t\tthis.transform.s /= 1.1;\n\t\telse\n\t\t\tthis.transform.s *= 1.1;\n\t\tconst m = 200;\n\t\tthis.transform.s = Math.max(this.transform.s, Math.min((this.canvasSize.w - m) / this.img.width, (this.canvasSize.h - m) / this.img.height));\n\n\t\tthis.transform.x = x - X * this.transform.s;\n\t\tthis.transform.y = y - Y * this.transform.s;\n\t\tthis.restrictView();\n\t\treturn true;\n\t}\n\n\tprivate restrictView()\n\t{\n\t\tconst m = 100;\n\t\tconst iw = this.img.width * this.transform.s\n\t\tconst ih = this.img.height * this.transform.s\n\t\tif (iw > this.canvasSize.w)\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + this.canvasSize.w - m), m);\n\t\telse\n\t\t\tthis.transform.x = Math.min(Math.max(this.transform.x, -iw + m), this.canvasSize.w - m);\n\t\tif (ih > this.canvasSize.h)\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + this.canvasSize.h - m), m);\n\t\telse\n\t\t\tthis.transform.y = Math.min(Math.max(this.transform.y, -ih + m), this.canvasSize.h - m);\n\t}\n\n\tprivate pointToWorld(x: number, y: number)\n\t{\n\t\treturn [(x - this.transform.x) / this.transform.s, (y - this.transform.y) / this.transform.s];\n\t}\n\tprivate pointToScreen(x: number, y: number)\n\t{\n\t\treturn [x * this.transform.s + this.transform.x, y * this.transform.s + this.transform.y];\n\t}\n}\n\ninterface Rect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\n\nfunction pointInRect(x: number, y: number, rect: Rect)\n{\n\treturn x > rect.x && x < rect.x + rect.w &&\n\t\ty > rect.y && y < rect.y + rect.h;\n}\n\ntype RectZone = [number, number];  // [x, y] 1 - bottom, right; -1 = top, left\nfunction rectZone(x: number, y: number, rect: Rect, border: number): RectZone\n{\n\tconst r = [0, 0] as RectZone;\n\n\tif (!pointInRect(x, y, { x: rect.x - border, y: rect.y - border, w: rect.w + border * 2, h: rect.h + border * 2 }))\n\t\treturn r;\n\n\tif (Math.abs(x - rect.x) <= border) r[0] = -1;\n\tif (Math.abs(x - (rect.x + rect.w)) <= border) r[0] = 1;\n\tif (Math.abs(y - rect.y) <= border) r[1] = -1;\n\tif (Math.abs(y - (rect.y + rect.h)) <= border) r[1] = 1;\n\n\treturn r;\n}\nfunction resizeCursor(direction: RectZone): Cursor\n{\n\tconst [x, y] = direction;\n\tif (x == 0)\n\t{\n\t\tif (y == 0) return \"default\"; // none\n\t\tif (y > 0) return \"n-resize\"; // down\n\t\treturn \"n-resize\"; // up\n\t}\n\tif (x > 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // right\n\t\tif (y > 0) return \"nw-resize\"; // down-right\n\t\treturn \"ne-resize\"; // up-right\n\t}\n\tif (x < 0)\n\t{\n\t\tif (y == 0) return \"e-resize\"; // left\n\t\tif (y > 0) return \"ne-resize\"; // down-left\n\t\treturn \"nw-resize\"; // up-left\n\t}\n\treturn \"default\"; // none\n}\n\nfunction unwrapRect({ x, y, w, h }: Rect): [number, number, number, number]\n{\n\treturn [x, y, w, h];\n}\n","import { useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport type { TicketEditor, TicketPatternObject } from \"./editor\";\nimport classNames from \"../../utils/classNames\";\nimport { Font } from \"../../api/dataTypes\";\n\ntype E = React.ChangeEvent<HTMLInputElement>;\n\nexport function Inspector({ editor, fonts }: InspectorProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [obj, setObj] = useState<TicketPatternObject | null>(null);\n\tconst update = () => setUpdate(v => v + 1);\n\teditor.setInspector(obj =>\n\t{\n\t\tsetObj(obj);\n\t\tupdate();\n\t});\n\n\treturn (\n\t\t<div className={classNames(styles.inspector, obj && styles.inspector_open)}>\n\t\t\t<h2>{{\n\t\t\t\t\"qr\": \"QR код\",\n\t\t\t\t\"code\": \"Код билета\",\n\t\t\t\t\"name\": \"Посетитель\",\n\t\t\t\t\"promo\": \"Промокод\",\n\t\t\t\t\"\": \"\",\n\t\t\t}[obj?.type || \"\"]}</h2>\n\t\t\t<div className={styles.fields}>\n\t\t\t\t<label>\n\t\t\t\t\t<span>X:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.x || 0} onInput={(e: E) => { editor.inspectorInput(\"x\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Y:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.y || 0} onInput={(e: E) => { editor.inspectorInput(\"y\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Ширина:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.w || 0} onInput={(e: E) => { editor.inspectorInput(\"w\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t<span>Высота:</span>\n\t\t\t\t\t<input type=\"number\" value={obj?.h || 0} onInput={(e: E) => { editor.inspectorInput(\"h\", e.target.valueAsNumber); update(); }} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<label className={styles.colorInput}>\n\t\t\t\t<span>Цвет:</span>\n\t\t\t\t<input type=\"color\" value={obj?.c || \"#000000\"} onInput={(e: E) => { editor.inspectorInput(\"c\", e.target.value); update(); }} />\n\t\t\t</label>\n\t\t\t{obj?.type != \"qr\" &&\n\t\t\t\t<label className={styles.fontInput}>\n\t\t\t\t\t<span>Шрифт:</span>\n\t\t\t\t\t<select value={obj?.f || -1} onChange={e => { editor.inspectorInput(\"f\", parseInt(e.target.value) || -1); update(); }}>\n\t\t\t\t\t\t<option value={-1}>Arial</option>\n\t\t\t\t\t\t{fonts.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\ninterface InspectorProps\n{\n\teditor: TicketEditor,\n\tfonts: Font[],\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { Font } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPostForm } from \"../utils/fetch\";\nimport { queryListAddItem } from \"../utils/query\";\n\nexport function useFonts()\n{\n\treturn useQuery(\"fonts\", async () =>\n\t\tawait fetchJsonGet<Font[]>(\"/api/fonts\")\n\t);\n}\n\nexport function useMutationNewFont(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (fontData: NewFontData) =>\n\t\t{\n\t\t\tconst formData = new FormData();\n\t\t\tformData.set(\"name\", fontData.name);\n\t\t\tformData.set(\"type\", fontData.type);\n\t\t\tformData.set(\"font\", fontData.file);\n\n\t\t\treturn await fetchPostForm<Font>(\"/api/fonts\", formData);\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"fonts\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewFontData\n{\n\tname: string,\n\ttype: string,\n\tfile: File,\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateTicketType, useTicketType } from \"../../api/ticketTypes\";\nimport { FontTypes, TicketEditor } from \"./editor\";\nimport { Inspector } from \"./inspector\";\nimport { useFonts } from \"../../api/fonts\";\n\nexport default function TicketTypeEditor({ typeId, eventId, open, close }: EditTicketTypeFormProps)\n{\n\tconst editor = useEditor();\n\tconst mutation = useMutationUpdateTicketType(typeId, close);\n\tconst ttype = useTicketType(typeId);\n\tconst fonts = useFonts();\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\tconst [imageSelection, setImageSelection] = useState(false);\n\tconst [isNewImage, setIsNewImage] = useState(false);\n\tconst noImage = ttype.data?.imageId == null;\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetImageSelection(false);\n\t\t\tsetIsNewImage(false);\n\t\t\teditor.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\tsetImageSelection(!ttype.data?.imageId)\n\t\t}\n\t}, [ttype.data, open, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактор билета\">\n\t\t\t{displayError(ttype)}\n\t\t\t{displayError(fonts)}\n\t\t\t{displayError(mutation)}\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.root}>\n\t\t\t\t<div className={styles.canvas}>\n\t\t\t\t\t<canvas ref={refCanvas} />\n\t\t\t\t\t<Inspector editor={editor} fonts={fonts.data || []} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.panel}>\n\t\t\t\t\t<span>Нарисовать объекты:</span>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"qr\")}>QR код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"code\")}>Код</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"name\")}>Имя посетителя</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.drawObject(\"promo\")}>Промокод</button>\n\t\t\t\t\t<span className={styles.br}></span>\n\t\t\t\t\t<button className=\"button icon\" onClick={() => editor.fitZoom()}>fit_screen</button>\n\t\t\t\t\t<button className=\"button\" onClick={() => editor.resetZoom()}>1:1</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{imageSelection ? <>\n\t\t\t\t\t\t\t{!noImage && <button className=\"button\" onClick={() => setImageSelection(false)}>Отмена</button>}\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type=\"file\" onChange={e =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (e.target.files && e.target.files[0])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\teditor.setNewImage(e.target.files[0]);\n\t\t\t\t\t\t\t\t\t\tsetImageSelection(false);\n\t\t\t\t\t\t\t\t\t\tsetIsNewImage(true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}} accept=\"image/png, image/jpeg, image/gif\" />\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => setImageSelection(true)}>Изменить картинку</button>\n\t\t\t\t\t\t\t{isNewImage && !noImage && <button className=\"button\" onClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetIsNewImage(false);\n\t\t\t\t\t\t\t\teditor.setImage(ttype.data?.imageId || null)\n\t\t\t\t\t\t\t}}>Отменить изменение картинки</button>}\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => close?.()}>Отмена</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={async () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst data = await editor.getData(`ticket_${typeId}`, eventId);\n\t\t\t\t\t\t\tmutation.mutate(data);\n\t\t\t\t\t\t}}>Сохранить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport function useEditor(viewMode = false)\n{\n\tconst [_, setUpdate] = useState(0);\n\tconst fonts = useFonts();\n\tlet fontTypes: FontTypes | null = null;\n\tif (fonts.data)\n\t{\n\t\tfontTypes = {};\n\t\tfor (const font of fonts.data || [])\n\t\t\tfontTypes[font.id] = font.type;\n\t}\n\n\tconst editor = useRef(new TicketEditor(fontTypes, false, viewMode));\n\tuseEffect(() =>\n\t{\n\t\teditor.current = new TicketEditor(fontTypes, true, viewMode);\n\t\tsetUpdate(v => v + 1);\n\t\treturn () => editor.current.destroy();\n\t}, [viewMode, fonts.data]);\n\n\treturn editor.current;\n}\n\ninterface EditTicketTypeFormProps extends PopupProps\n{\n\teventId: number,\n\ttypeId: number,\n}\n","import { useEffect, useRef } from \"react\";\nimport { useEditor } from \".\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport Spinner from \"../Spinner\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function TicketViewer({ ticket }: TicketViewerProps)\n{\n\tconst editor = useEditor(true);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\tconst refCanvas = useRef<HTMLCanvasElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) editor.reset();\n\t}, [ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (ticket && ttype.data)\n\t\t{\n\t\t\teditor.setData(ttype.data.imageId, JSON.parse(JSON.stringify(ttype.data.pattern)));\n\t\t\teditor.setViewTicket(ticket);\n\t\t}\n\t}, [ttype.data, ticket, editor]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (refCanvas.current)\n\t\t\teditor.setCanvas(refCanvas.current);\n\t}, [refCanvas, editor]);\n\n\treturn (\n\t\t<div style={{ minWidth: 400, minHeight: 300 }}>\n\t\t\t{ttype.isLoading && <Spinner />}\n\t\t\t{displayError(ttype)}\n\t\t\t<canvas ref={refCanvas} />\n\t\t</div>\n\t)\n}\n\ninterface TicketViewerProps\n{\n\tticket: Ticket | null,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Lo44K\",\"visible\":\"styles_visible__icoL+\",\"center\":\"styles_center__w1Z-q\"};","import { useEffect, useRef, useState } from \"react\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../utils/dates\";\nimport html2canvas from \"html2canvas\";\nimport Popup from \"../Popup\";\n\nexport default function ViewTicketSimple({ event, ticket, close }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<Popup open={!!ticket} close={close} title=\"Просмотр билета\">\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} alt={ticket?.code} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t\t{res && <div className={styles.center}>Это картинка, можно копировать</div>}\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}","import { useState } from \"react\";\nimport Popup from \"../Popup\";\nimport { EventData, Ticket } from \"../../api/dataTypes\";\nimport TicketViewer from \"../TicketEditor/viewer\";\nimport { useTicketType } from \"../../api/ticketTypes\";\nimport ViewTicketSimple from \"./simple\";\n\nexport default function ViewTicket({ ticket, event, close }: ViewTicketProps)\n{\n\tconst [simpleViewer, setSimpleViewer] = useState<Ticket | null>(null);\n\tconst ttype = useTicketType(ticket?.typeId || -1);\n\n\treturn (<>\n\t\t<Popup open={!!ticket && !simpleViewer} close={close} title=\"Просмотр билета\">\n\t\t\t<TicketViewer ticket={ticket} />\n\t\t\t{ttype.data && !ttype.data.imageId && <div style={{ textAlign: \"center\" }}>\n\t\t\t\t<button className=\"button\" onClick={() => setSimpleViewer(ticket)}>Сгенерировать qr код</button>\n\t\t\t</div>}\n\t\t</Popup>\n\t\t<ViewTicketSimple ticket={simpleViewer} event={event} close={() => { setSimpleViewer(null); close() }} />\n\t</>\n\t)\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n\tclose: () => void,\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { UpdateTicketTypesData, useMutationUpdateTicketTypes, useTicketTypes } from \"../../api/ticketTypes\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditTicketTypesForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst [, setUpdate] = useState(0);\n\tconst [changes, setChanges] = useState<Map<number, UpdateTicketTypesData>>(new Map());\n\tconst [newTypes, setNewTypes] = useState<UpdateTicketTypesData[]>([]);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst mutation = useMutationUpdateTicketTypes(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tsetChanges(new Map())\n\t\tsetNewTypes([]);\n\t\tsetUpdate(0);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение видов билетов\">\n\t\t\t{displayError(mutation)}\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (changes.size > 0 || newTypes.length > 0)\n\t\t\t\t\tmutation.mutate([...newTypes.filter(v => v.action == \"add\"), ...Array.from(changes.values())]);\n\t\t\t}}>\n\t\t\t\t{ticketTypes.data?.filter(v => changes.get(v.id)?.action != \"delete\")?.map(v =>\n\t\t\t\t\t<FormField key={v.id}>\n\t\t\t\t\t\t<input type=\"text\" required value={changes.get(v.id)?.name || v.name} onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: e.target.value, action: \"update\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchanges.set(v.id, { id: v.id, name: \"\", action: \"delete\" });\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t{newTypes.filter(v => v.action == \"add\").map((v, i) =>\n\t\t\t\t\t<FormField key={\"new\" + i}>\n\t\t\t\t\t\t<input type=\"text\" required onChange={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].name = e.target.value;\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}} />\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTypes[i].action = \"delete\";\n\t\t\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t\t\t}}>Удалить</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tnewTypes.push({ name: \"\", action: \"add\" });\n\t\t\t\t\tsetUpdate(v => v + 1);\n\t\t\t\t}}>Добавить</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useEvent, useMutationUpdateEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EditEventForm({ eventId, open, close }: EditEventFormProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationUpdateEvent(eventId, close);\n\tconst event = useEvent(eventId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required defaultValue={event.data?.name} />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required defaultValue={event.data?.date.toISOString().slice(0, -5)} />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditEventFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirmDeletion<T, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, open, close }: PopupConfirmDeletionProps<T, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title={title}>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t<h1>Вы уверены?</h1>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmDeletionProps<T, K> extends PopupProps\n{\n\tmutationFn: (itemId: number | string, onSuccess: (item: T | void) => void) => UseMutationResult<T, any, K, any>,\n\tmutatateParams?: K,\n\titemId: number | string,\n\ttitle: string,\n\tonSuccess?: (item: T) => void,\n}\n","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\n\nexport function useStaff()\n{\n\treturn useQuery(\"staff\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/staff\"),\n\t);\n}\n\nexport function useStaffEvent(eventId: number | string)\n{\n\treturn useQuery([\"staff\", `${eventId}`], async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(`/api/events/${eventId}/staff`),\n\t);\n}\n\n\nexport function useMutationUpdateStaff(eventId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (staffData: StaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd[]>(`/api/events/${eventId}/staff`, staffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"staff\", `${eventId}`], data);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\ntype StaffData = number[];\n\nexport function useMutationNewStaff(onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newStaffData: NewStaffData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/staff\", newStaffData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewStaffData\n{\n\tname: string;\n\tlogin: string;\n}\n\nexport function useMutationDeleteStaff(staffId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/staff/\" + staffId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"events\", staffId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nexport function useMutationResetStaffPassword(staffId: number | string, onSuccess?: (staff: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(`/api/staff/${staffId}/reset_password`),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"staff\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationUpdateStaff, useStaff, useStaffEvent } from \"../../api/staff\";\n\n\nexport default function EditStaffForm({ eventId, open, close }: EditTicketTypesFormProps)\n{\n\tconst staffCurrent = useStaffEvent(eventId);\n\tconst staffAll = useStaff();\n\tconst [staff, setStaff] = useState<number[]>([]);\n\tconst [selectedStaff, setSelectedStaff] = useState(-1);\n\tconst mutation = useMutationUpdateStaff(eventId, close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t}, [staffCurrent.isSuccess, staffCurrent.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (open && staffCurrent.isSuccess)\n\t\t\tsetStaff(staffCurrent.data.map(v => v.id));\n\t\tif (open)\n\t\t\tsetSelectedStaff(-1);\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open, staffCurrent.isSuccess, staffCurrent.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение доступа клерков\">\n\t\t\t{displayError(staffCurrent)}\n\t\t\t{displayError(staffAll)}\n\t\t\t{displayError(mutation)}\n\t\t\t{staffCurrent.isLoading && <Spinner />}\n\t\t\t{staffAll.isLoading && <Spinner />}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(staff);\n\t\t\t}}>\n\t\t\t\t{staff.map(id =>\n\t\t\t\t{\n\t\t\t\t\tconst v = staffAll.data?.find(v => v.id == id);\n\t\t\t\t\treturn <FormField key={id}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{v?.name}</span>\n\t\t\t\t\t\t\t<span style={{ marginLeft: \"1em\", color: \"gray\" }}>({v?.login})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button type=\"button\" className=\"button button_small\" onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetStaff(staff => staff.filter(v => v != id));\n\t\t\t\t\t\t}}>Закрыть доступ</button>\n\t\t\t\t\t</FormField>\n\t\t\t\t})}\n\t\t\t\t<select onChange={e => setSelectedStaff(parseInt(e.target.value))}>\n\t\t\t\t\t<option value=\"-1\">Выберите клерка</option>\n\t\t\t\t\t{staffAll.data?.filter(v => !staff.includes(v.id)).map(v => <option value={v.id} key={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tif (selectedStaff >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetStaff(staff => [...staff, selectedStaff]);\n\t\t\t\t\t\tsetSelectedStaff(-1);\n\t\t\t\t\t}\n\t\t\t\t}}>Добавить доступ</button>\n\t\t\t\t<button type=\"button\" className=\"button button_small\" disabled={staffAll.data?.filter(v => !staff.includes(v.id)).length == 0}  onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tsetStaff(staff => staffAll.data?.map(v => v.id) || staff);\n\t\t\t\t}}>Добавить всех</button>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface EditTicketTypesFormProps extends PopupProps\n{\n\teventId: number | string,\n}\n","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\nimport Popup from \"../Popup\";\n\nexport default function PopupQrCode({ code, setCode, title }: ViewTicketProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale: 10 }, (e, url) => setQrcode(url));\n\t}, [code]);\n\n\treturn (\n\t\t<Popup open={!!code} close={() => setCode(\"\")} title={title}>\n\t\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t\t</Popup>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\ttitle?: string,\n\tcode: string,\n\tsetCode: (code: string) => void,\n}","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent, useMutationDeleteEvent } from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { Fragment, useEffect, useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport EditTicketTypesForm from \"../../components/edit/EditTicketTypesForm\";\nimport EditEventForm from \"../../components/edit/EditEventForm\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport displayError from \"../../utils/displayError\";\nimport { useStaffEvent } from \"../../api/staff\";\nimport EditStaffForm from \"../../components/edit/EditStaffForm\";\nimport PopupQrCode from \"../../components/PopupQrCode\";\nimport { useTicketStats } from \"../../api/tickets\";\nimport TicketTypeEditor from \"../../components/TicketEditor\";\n\nexport default function EventPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deleteFormOpen, setDeleteFormOpen] = useState(false);\n\tconst [editFormOpen, setEditFormOpen] = useState(false);\n\tconst [editTypesFormOpen, setEditTypesFormOpen] = useState(false);\n\tconst [editTypeFormOpen, setEditTypeFormOpen] = useState(-1);\n\tconst [editStaffOpen, setEditStaffOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [qrcodeLinkOpen, setQrcodeLinkOpen] = useState(\"\");\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst staff = useStaffEvent(eventId);\n\tconst stats = useTicketStats(eventId);\n\tconst hasAddTicketPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditTypesPermission = useHasPermission(\"change_ticket_types\");\n\tconst hasEditEventPermission = useHasPermission(\"change_event\");\n\tconst hasViewStaffPermission = useHasPermission(\"get_staff_event\");\n\tconst hasEditStaffPermission = useHasPermission(\"change_staff_event\");\n\tconst hasDeleteEventPermission = useHasPermission(\"delete_event\");\n\tuseTitle(event.data?.name || \"Мероприятие\");\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst backLink = \"/events\";\n\tconst stats_sum = (stats.data || []).reduce((p, v) =>\n\t{\n\t\tp.count += v.count;\n\t\tp.scanned += v.scanned;\n\t\tp.authOnPltf += v.authOnPltf;\n\t\treturn p;\n\t}, {\n\t\tcount: 0,\n\t\tscanned: 0,\n\t\tauthOnPltf: 0,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event, error => <Layout backLink={backLink} centered>{error}</Layout>)}\n\t\t\t{event.data &&\n\t\t\t\t<Layout backLink={backLink} centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t{hasEditEventPermission && <button className=\"button\" onClick={() => setEditFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditEventForm eventId={eventId} open={editFormOpen} close={() => setEditFormOpen(false)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.data.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.data.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className={styles.line}>\n\t\t\t\t\t\t<Link to={`/scanner/${eventId}`} className=\"button\">Ссылка на сканер</Link>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => setQrcodeLinkOpen(new URL(`/scanner/${eventId}`, window.location.href).href)}>Qr код на сканер</button>\n\t\t\t\t\t\t<PopupQrCode title=\"Ссылка на сканер\" code={qrcodeLinkOpen} setCode={setQrcodeLinkOpen} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{hasAddTicketPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить билет</button>}\n\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t{hasEditTypesPermission && <button className=\"button\" onClick={() => setEditTypesFormOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t<EditTicketTypesForm eventId={eventId} open={editTypesFormOpen} close={() => setEditTypesFormOpen(false)} />\n\t\t\t\t\t\t\t<TicketTypeEditor typeId={editTypeFormOpen} eventId={parseInt(eventId)} open={editTypeFormOpen >= 0} close={() => setEditTypeFormOpen(-1)} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(ticketTypes, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t<div className={styles.ticketTypes}>\n\t\t\t\t\t\t\t\t{ticketTypes.data?.map(v =>\n\t\t\t\t\t\t\t\t\t<Fragment key={v.id}>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button button_small icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginRight: \"0.5em\", color: v.pattern ? \"green\" : \"\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setEditTypeFormOpen(v.id)}\n\t\t\t\t\t\t\t\t\t\t\t>edit_square</button>\n\t\t\t\t\t\t\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (!stats.data) return <><div></div><div></div><div></div></>;\n\t\t\t\t\t\t\t\t\t\t\tconst data = stats.data?.find(s => s.typeId == v.id);\n\t\t\t\t\t\t\t\t\t\t\tconst count = data?.count || 0;\n\t\t\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{count}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(count || 0, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.scanned || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.scanned || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{data?.authOnPltf || 0}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(data?.authOnPltf || 0, count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{stats.data && <>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span>Всего</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">group</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.count}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">login</span>\n\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.scanned}</span>\n\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.scanned, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t{stats_sum.authOnPltf > 0 && <>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon\">stadia_controller</span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{stats_sum.authOnPltf}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span> ({calcPercent(stats_sum.authOnPltf, stats_sum.count)}%)</span>\n\t\t\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{stats.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{displayError(stats, error => <div>{error}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{hasViewStaffPermission &&\n\t\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t\t<h2>Клерки</h2>\n\t\t\t\t\t\t\t\t{hasEditStaffPermission && <button className=\"button\" onClick={() => setEditStaffOpen(true)}>Редактировать</button>}\n\t\t\t\t\t\t\t\t<EditStaffForm eventId={eventId} open={editStaffOpen} close={() => setEditStaffOpen(false)} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t\t{staff.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t\t{displayError(staff, error => <div>{error}</div>)}\n\t\t\t\t\t\t\t\t{staff.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t{hasDeleteEventPermission && <button className=\"button\" onClick={() => setDeleteFormOpen(true)}>Удалить</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<PopupConfirmDeletion title=\"Удаление меропрятия\" onSuccess={() => navigate(\"/events\")} mutationFn={useMutationDeleteEvent} itemId={eventId} open={deleteFormOpen} close={() => setDeleteFormOpen(false)} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n\nfunction calcPercent(v: number, all: number)\n{\n\tif (all == 0) return 0;\n\treturn Math.floor(v / all * 100);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"event\":\"styles_event__AM1vG\",\"title\":\"styles_title__Vipq0\",\"activeMark\":\"styles_activeMark__zBB4P\",\"toggle\":\"styles_toggle__1O26V\",\"toggleInp\":\"styles_toggleInp__s3up7\",\"eventInfo\":\"styles_eventInfo__GuWN-\",\"access\":\"styles_access__1bK7b\"};","import { useEventsFull, useMutationGetAccessToEvent } from \"../../api/events\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport { dateToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"События\");\n\tconst user = useUser();\n\tconst events = useEventsFull()\n\tconst getAccessToEvent = useMutationGetAccessToEvent();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{events.isLoading && <h3>Загрузка</h3>}\n\t\t\t{!events.isLoading && events.isFetching && <h3>Обновление</h3>}\n\t\t\t{getAccessToEvent.isLoading && <Spinner />}\n\t\t\t{displayError(events)}\n\t\t\t{displayError(getAccessToEvent)}\n\t\t\t{events.data?.map(v => <div className={styles.event} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{dateToString(v.date)}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<div className={styles.activeMark} style={{ backgroundColor: v.active ? \"green\" : \"tomato\" }} title=\"active\"></div>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.eventInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.access}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>\n\t\t\t\t\t\t\t\t<div>{o.login}</div>\n\t\t\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{o.id}</div>\n\t\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t\t<div>{o.name}</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!v.access.some(v => v.id == user.data?.id) &&\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"button button_light button_small\"\n\t\t\t\t\t\t\tstyle={{ alignSelf: \"end\" }}\n\t\t\t\t\t\t\tonClick={() => getAccessToEvent.mutate(v.id)}\n\t\t\t\t\t\t>Get access</button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)\n\t\t\t}\n\t\t</Layout >\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport { useMutationNewEvent } from \"../../api/events\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function CreateEventForm({ open, close }: PopupProps)\n{\n\tconst inp_title = useRef<HTMLInputElement>(null);\n\tconst inp_date = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewEvent(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_title.current && inp_date.current)\n\t\t{\n\t\t\tinp_title.current.value = \"\";\n\t\t\tinp_date.current.value = \"\";\n\t\t}\n\t}, [open, inp_title, inp_date]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление меропрятия\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst title = inp_title.current?.value;\n\t\t\t\tconst date = inp_date.current?.value;\n\t\t\t\tif (title && date)\n\t\t\t\t\tmutation.mutate({ date: date, name: title });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_title} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Дата\">\n\t\t\t\t\t<input ref={inp_date} type=\"datetime-local\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport { useEvents } from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport { dateToString } from \"../../utils/dates\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateEventForm from \"../../components/create/CreateEventForm\";\nimport { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function EventsPage()\n{\n\tuseTitle(\"Мероприятия\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout backLink=\"/\" centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <Spinner/>}\n\t\t\t{displayError(events)}\n\t\t\t{events.data?.sort((a, b) => a.date < b.date ? 1 : -1)?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName=\"button button_large space_between\"\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t{useHasPermission(\"add_event\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateEventForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t</Layout>\n\t);\n}\n","import { useEffect, useRef } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationNewFont } from \"../../api/fonts\";\n\nexport default function CreateFontForm({ open, close }: PopupProps)\n{\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_file = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewFont(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_file.current)\n\t\t{\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_file.current.value = \"\";\n\t\t}\n\t}, [open, inp_name, inp_file]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Добавление шрифта\">\n\t\t\t{displayError(mutation, undefined, er => er.includes(\"already exist\") ? \"Шрифт с таким названием уже существует\" : er)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst file = inp_file.current?.files?.[0];\n\t\t\t\tif (name && file)\n\t\t\t\t\tmutation.mutate({ file, name, type: file.name.split(\".\").at(-1) || \"\" });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Файл\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={inp_file}\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\".ttf,.otf,.woff,.woff2\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst name = inp_name.current;\n\t\t\t\t\t\t\tconst file = inp_file.current;\n\t\t\t\t\t\t\tif (!name || !file) return;\n\t\t\t\t\t\t\tconst filename = file.files?.[0]?.name || \"\";\n\t\t\t\t\t\t\tconst splited = filename.split(\".\")\n\t\t\t\t\t\t\tconst fontName = splited.length == 1 ? splited : splited.slice(0, -1);\n\t\t\t\t\t\t\tname.value = fontName.join(\".\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Создать</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t);\n}\n","import { useState } from \"react\";\nimport { useFonts } from \"../../api/fonts\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport CreateFontForm from \"../../components/create/CreateFontForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { Font } from \"../../api/dataTypes\";\nimport useFont from \"../../utils/useFont\";\n\nexport default function FontsPage()\n{\n\tuseTitle(\"Шрифты\");\n\tconst [createFontOpen, setCreateFontOpen] = useState(false);\n\tconst [exampleText, setExampleText] = useState(\"Мыши булочки жевали!\");\n\tconst fonts = useFonts();\n\n\treturn (\n\t\t<Layout centeredPage gap={12}>\n\t\t\t<h1>Шрифты</h1>\n\t\t\t{fonts.isLoading && <Spinner />}\n\t\t\t{displayError(fonts)}\n\n\t\t\t<input type=\"text\" value={exampleText} onInput={e => setExampleText((e.target as HTMLInputElement).value)} />\n\n\t\t\t{fonts.data?.map(v => <FontPreview key={v.id} font={v} text={exampleText} />)}\n\n\t\t\t{useHasPermission(\"add_font\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFontOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateFontForm open={createFontOpen} close={() => setCreateFontOpen(false)} />\n\t\t</Layout>\n\t);\n}\n\nfunction FontPreview({ font, text }: { font: Font, text: string })\n{\n\tconst fontName = useFont(font);\n\treturn <div className=\"space_between\" style={{ fontFamily: fontName, fontSize: \"1.2rem\", gap: \"0 1rem\", flexWrap: \"wrap\" }}>\n\t\t<span>{font.name}</span>\n\t\t<span>{text}</span>\n\t</div>\n}\n","import { useQuery } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", async () =>\n\t{\n\t\tconst log = await fetchJsonGet<LogItemResponse[]>(\"/api/debug/log\");\n\t\treturn log.map(parseLogResponse);\n\t});\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className=\"button button_small\" onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className=\"button button_small\" htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__vi6jw\",\"login\":\"styles_login__rRIkN\",\"userTag\":\"styles_userTag__0uCj4\"};","import { useQuery, useQueryClient, useMutation } from \"react-query\";\nimport { UserWithPwd } from \"./dataTypes\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport { queryListAddItem, queryListDeleteItem } from \"../utils/query\";\n\n\nexport function useManagers()\n{\n\treturn useQuery(\"managers\", async () =>\n\t\tawait fetchJsonGet<UserWithPwd[]>(\"/api/managers\"),\n\t);\n}\n\nexport function useMutationNewManager(onSuccess?: (manager: UserWithPwd) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (newManagerData: NewManagerData) =>\n\t\t\tawait fetchJsonPost<UserWithPwd>(\"/api/managers\", newManagerData),\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"managers\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface NewManagerData\n{\n\tname: string;\n\tlogin: string;\n}\n\n\nexport function useMutationDeleteManager(managerId: number | string, onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(\"/api/managers/\" + managerId),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"managers\", managerId);\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\nimport { useMutationNewManager } from \"../../api/managers\";\n\nexport default function CreateManagerForm({ open, close }: PopupProps)\n{\n\tconst [newManager, setNewManager] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewManager(manager =>\n\t{\n\t\tsetNewManager(manager);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление организатора\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newManager} close={() => setNewManager(null)} title=\"Данные организатора\">\n\t\t\t<div>Логин: {newManager?.login}</div>\n\t\t\t<div>Пароль: {newManager?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useManagers, useMutationDeleteManager } from \"../../api/managers\";\nimport CreateManagerForm from \"../../components/create/CreateManagerForm\";\nimport useUser from \"../../api/user\";\n\nexport default function ManagersPage()\n{\n\tuseTitle(\"Организаторы\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionManager, setDeletionManager] = useState(-1);\n\tconst user = useUser();\n\tconst managers = useManagers();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Организаторы</h1>\n\t\t\t{managers.isLoading && <Spinner />}\n\t\t\t{displayError(managers)}\n\t\t\t{managers.data?.length == 0 && <h2>Организаторы отсутствуют</h2>}\n\t\t\t{managers.data?.map(v => <div className={styles.user + \" space_between\"} key={v.id}>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.name}</span>\n\t\t\t\t\t<span className={styles.login}>{v.login}</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t{v.id != user.data?.id &&\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionManager(v.id)}>Удалить</button>\n\t\t\t\t\t}\n\t\t\t\t\t{v.id == user.data?.id &&\n\t\t\t\t\t\t<span className={styles.userTag}>Вы</span>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_manager\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateManagerForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionManager} title=\"Удаление организатора\" mutationFn={useMutationDeleteManager} open={deletionManager >= 0} close={() => setDeletionManager(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QCWgG\",\"table\":\"styles_table__Klrj7\",\"center\":\"styles_center__pcMYz\",\"mark\":\"styles_mark__4aU1o\"};","import { padNum } from \"./nums\";\n\nexport default function getTicketPrefix(id: number, date: Date)\n{\n\treturn `${padNum(id, 3)}-${date.getFullYear().toString().at(-1)}${padNum(date.getMonth() + 1, 2)}${padNum(date.getDate(), 2)}-`;\n}","import { useParams } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport { useEffect, useMemo } from \"react\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function PrintTicketsPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tconst [isCorrectCodes, prefix] = useMemo(() =>\n\t{\n\t\tif (!tickets.data || !event.data) return [false, \"\"];\n\t\tconst codePref = getTicketPrefix(event.data.id, event.data.date);\n\t\treturn [tickets.data.every(v => v.code.startsWith(codePref)), codePref];\n\t}, [tickets.data, event.data]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.isSuccess && tickets.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() => window.print(), 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [event.isSuccess, tickets.isSuccess]);\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Spinner />}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.isSuccess && tickets.isSuccess &&\n\t\t\t\t<div className={styles.root}>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th colSpan={5}>\n\t\t\t\t\t\t\t\t\t<span>{event.data.name}</span>\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>|</span>}\n\t\t\t\t\t\t\t\t\t{isCorrectCodes && <span style={{ marginLeft: \"1rem\" }}>Все коды дожны начинаться с {prefix}</span>}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: isCorrectCodes ? \"5.4em\" : \"10.4em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"4em\" }}><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data\n\t\t\t\t\t\t\t\t.map(v => isCorrectCodes\n\t\t\t\t\t\t\t\t\t? { ...v, code: v.code.slice(prefix.length), sortV: v.code.slice(v.code.lastIndexOf(\"-\")) }\n\t\t\t\t\t\t\t\t\t: { ...v, sortV: v.code })\n\t\t\t\t\t\t\t\t.sort((a, b) => a.sortV > b.sortV ? 1 : -1)\n\t\t\t\t\t\t\t\t.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.type.startsWith(\"<Удалён>\") ? v.type.slice(8) : v.type}</td>\n\t\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t\t<td className={styles.center}><span className={styles.mark}>{v.scanned && \"✓\"}</span></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useMutationChangePassword } from \"../../api/user\";\n\nexport default function ChangePasswordForm({ open, close }: PopupProps)\n{\n\tconst [error, setError] = useState(\"\");\n\tconst passwordRef = useRef<HTMLInputElement>(null);\n\tconst password2Ref = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationChangePassword(close);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && passwordRef.current && password2Ref.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tsetError(\"\");\n\t\t\tpasswordRef.current.value = \"\";\n\t\t\tpassword2Ref.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, passwordRef, password2Ref]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Изменение пароля\">\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst password = passwordRef.current?.value;\n\t\t\t\tconst password2 = password2Ref.current?.value;\n\n\t\t\t\tif (!password || password.length <= 4) return setError(\"Короткий пароль\");\n\t\t\t\tif (password != password2) return setError(\"Пароли не совпадают\");\n\n\t\t\t\tmutation.mutate({ password });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Новый пароль\">\n\t\t\t\t\t<input ref={passwordRef} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ещё раз\">\n\t\t\t\t\t<input ref={password2Ref} type=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t{error != \"\" && <h4 style={{ color: \"tomato\" }}>{error}</h4>}\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport ChangePasswordForm from \"../../components/edit/ChangePasswordForm\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst [passwordEditing, setPasswordEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button className=\"button\" onClick={() => setPasswordEditing(true)}>Сменить пароль</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ChangePasswordForm open={passwordEditing} close={() => setPasswordEditing(false)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scannerRect\":\"styles_scannerRect__zwl3N\",\"scannerVideo\":\"styles_scannerVideo__ZCceC\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\",\"alreadyScanned\":\"styles_alreadyScanned__OI-PM\",\"alreadyScanned_visible\":\"styles_alreadyScanned_visible__keU3C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\nimport classNames from \"../../utils/classNames\";\n\n\nexport default function Scanner({ active = true, className, onScan, onCameraError }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start().catch(() => onCameraError());\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start().catch(() => onCameraError());\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={classNames(styles.root, className)} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tclassName?: string\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n\tonCameraError: () => void,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonInputBtn: () => void,\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn [play];\n};\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { CheckTicketResult } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport classNames from \"../../utils/classNames\";\nimport { useScannerEvent } from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport Popup from \"../../components/Popup\";\nimport { useParams } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useMutationCheckTicket from \"../../api/checkTicket\";\nimport Spinner from \"../../components/Spinner\";\nimport useSound from \"../../utils/useSound\";\nimport beep from \"./beep.mp3\";\nimport beepError from \"./beepError.mp3\";\nimport getTicketPrefix from \"../../utils/getTicketPrefix\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst urlParams = useParams();\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [startHintOpen, setStartHintOpen] = useState(true);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst [alreadyScanned, setAlreadyScanned] = useState(false);\n\tconst [cameraError, setCameraError] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst event = useScannerEvent(urlParams[\"eventId\"]!);\n\n\tconst [playBeep] = useSound(beep);\n\tconst [playBeepError] = useSound(beepError);\n\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event.data && typeof event.data != \"number\")\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (inputRef.current)\n\t\t\t\t\tinputRef.current.focus();\n\t\t\t}, 50);\n\t\t\tinputRef.current.value = getTicketPrefix(event.data.id, event.data.date);\n\t\t}\n\t}, [inputRef, event.data]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\n\tconst mutation = useMutationCheckTicket(\n\t\tresult =>\n\t\t{\n\t\t\tsetCheckTicketResult(result);\n\t\t\tif (!result.success) playBeepError();\n\t\t},\n\t\terror =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error);\n\t\t}\n\t);\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event.data && mutation.status == \"idle\" && typeof event.data != \"number\")\n\t\t{\n\t\t\tplayBeep();\n\t\t\tif (ticketCode == qrScanResult && !error)\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tsetAlreadyScanned(true);\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tsetQrScanResult(null);\n\t\t\tsetAlreadyScanned(false);\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.data.id });\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [qrScanResult, event.data, mutation.status]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mutation.isSuccess) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tsetQrScanResult(null);\n\t\t\tmutation.reset();\n\t\t}, 1000);\n\t\treturn () => clearTimeout(timeout);\n\t\t// eslint-disable-next-line\n\t}, [mutation.isSuccess]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!alreadyScanned) return;\n\t\tconst timeout = setTimeout(() => setAlreadyScanned(false), 500);\n\t\treturn () => clearTimeout(timeout);\n\t}, [alreadyScanned]);\n\n\treturn (\n\t\t<>\n\t\t\t{event.isLoading && <Spinner />}\n\t\t\t{event.error && <Layout centered gap=\"1em\" header={null}>Произошла ошибка</Layout>}\n\t\t\t{typeof event.data == \"number\" && <Layout centered centeredPage gap=\"1em\" header={null}>\n\t\t\t\t<div>Это событие ещё не началось или уже кончилось</div>\n\t\t\t\t<div>Если это не так, управляющий должен включить приём билетов</div>\n\t\t\t</Layout>}\n\t\t\t{typeof event.data != \"number\" && event.data &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event.data} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<div className={styles.scannerRect}>\n\t\t\t\t\t\t\t<Scanner onScan={handleScan} onCameraError={() => setCameraError(true)} className={styles.scannerVideo} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t<div className={classNames(styles.alreadyScanned, alreadyScanned && styles.alreadyScanned_visible)}>Тот же билет</div>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {checkTicketResult.event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(checkTicketResult.event.date)} ({relativeDate(checkTicketResult.event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Проверить</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup open={cameraError}>\n\t\t\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t\t<Popup title=\"Сканер билетов\" open={startHintOpen} close={() => setStartHintOpen(false)}>\n\t\t\t\t\t\t<h2>{event.data.name}</h2>\n\t\t\t\t\t\t<p>Для сканирования билета наведите камеру на QR код так, чтобы он поместился в мигающую рамку.</p>\n\t\t\t\t\t\t<p><strong>Включите звук</strong>, чтобы слышать сигнал при сканировании.</p>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { useMutation } from \"react-query\";\nimport { ApiError, CheckTicketResult, ResponseCheckTicket } from \"./dataTypes\";\nimport { parseEventResponse } from \"./events\";\nimport { parseTicketResponse } from \"./tickets\";\nimport { fetchJsonPost } from \"../utils/fetch\";\n\n\nexport default function useMutationCheckTicket(onSuccess?: (res: CheckTicketResult) => void, onError?: (msg: string) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (ticketData: TicketData) =>\n\t\t{\n\t\t\tconst apiResult = await fetchJsonPost<ResponseCheckTicket>(\"/api/check_ticket\", ticketData)\n\t\t\tconst result = apiResult as CheckTicketResult;\n\t\t\tif (apiResult.ticket)\n\t\t\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\t\t\tif (apiResult.event)\n\t\t\t\tresult.event = parseEventResponse(apiResult.event)\n\t\t\treturn result\n\t\t},\n\t\tonSuccess: onSuccess,\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка\")\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__JQBf0\",\"title\":\"styles_title__OlEMb\",\"toggle\":\"styles_toggle__wBqj6\",\"toggleInp\":\"styles_toggleInp__Tox8V\",\"userInfo\":\"styles_userInfo__Pveb6\"};","import { useEffect, useRef, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useMutationNewStaff } from \"../../api/staff\";\nimport displayError from \"../../utils/displayError\";\nimport { UserWithPwd } from \"../../api/dataTypes\";\n\nexport default function CreateStaffForm({ open, close }: PopupProps)\n{\n\tconst [newStaff, setNewStaff] = useState<UserWithPwd | null>(null);\n\tconst inp_name = useRef<HTMLInputElement>(null);\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationNewStaff(staff =>\n\t{\n\t\tsetNewStaff(staff);\n\t\tclose?.()\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open && inp_name.current && inp_login.current)\n\t\t{\n\t\t\tmutation.reset();\n\t\t\tinp_name.current.value = \"\";\n\t\t\tinp_login.current.value = \"\";\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, inp_name, inp_login]);\n\n\treturn <>\n\t\t<Popup open={open} close={close} title=\"Добавление сотрудника\">\n\t\t\t{displayError(mutation)}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tconst name = inp_name.current?.value;\n\t\t\t\tconst login = inp_login.current?.value;\n\t\t\t\tif (name && login)\n\t\t\t\t\tmutation.mutate({ name, login });\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={inp_name} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} placeholder=\"Англ. буквы, цифры и _\" type=\"text\" required\n\t\t\t\t\t\tonInput={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inp_login.current)\n\t\t\t\t\t\t\t\tinp_login.current.value = inp_login.current.value.replaceAll(/[^a-z_\\d]/g, \"\");\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\">Добавить</button>\n\t\t\t</Form>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t</Popup>\n\t\t<Popup open={!!newStaff} close={() => setNewStaff(null)} title=\"Данные сотрудника\">\n\t\t\t<div>Логин: {newStaff?.login}</div>\n\t\t\t<div>Пароль: {newStaff?.password}</div>\n\t\t\t<h4 style={{ marginTop: 8 }}>Пароль нельзя посмотреть заново</h4>\n\t\t</Popup>\n\t</>\n}\n","import { useState } from \"react\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { useMutationDeleteStaff, useMutationResetStaffPassword, useStaff } from \"../../api/staff\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport CreateStaffForm from \"../../components/create/CreateStaffForm\";\nimport PopupConfirmDeletion from \"../../components/PopupConfirmDeletion\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function StaffPage()\n{\n\tuseTitle(\"Сотрудники\");\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [deletionStaff, setDeletionStaff] = useState(-1);\n\tconst [resetPasswordStaff, setResetPasswordStaff] = useState(-1);\n\tconst staff = useStaff();\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t<h1>Сотрудники</h1>\n\t\t\t{staff.isLoading && <Spinner/>}\n\t\t\t{displayError(staff)}\n\t\t\t{staff.data?.length == 0 && <h2>У вас нет сотрудников</h2>}\n\t\t\t{staff.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>Логин: {v.login}</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>Пароль: </span>\n\t\t\t\t\t\t{v.password || <button className=\"button button_light button_small\" onClick={() => setResetPasswordStaff(v.id)}>Сбросить пароль</button>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<button className=\"button button_danger button_small\" onClick={() => setDeletionStaff(v.id)}>Уволить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t\t{useHasPermission(\"add_staff\") &&\n\t\t\t\t<div className=\"space_between\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<CreateStaffForm open={createFormOpen} close={() => setCreateFormOpen(false)} />\n\t\t\t<PopupConfirmDeletion itemId={deletionStaff} title=\"Увольнение сотрудника\" mutationFn={useMutationDeleteStaff} open={deletionStaff >= 0} close={() => setDeletionStaff(-1)} />\n\t\t\t<PopupConfirmDeletion itemId={resetPasswordStaff} title=\"Сброс пароля сотрудника\" mutationFn={useMutationResetStaffPassword} open={resetPasswordStaff >= 0} close={() => setResetPasswordStaff(-1)} />\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\",\"table\":\"styles_table__46OhS\"};","import { useEffect, useState } from \"react\";\nimport { Form, FormField } from \"../Form\";\nimport Popup from \"../Popup\";\nimport { useMutationDeleteTicket, useMutationUpdateTicket } from \"../../api/tickets\";\nimport Spinner from \"../Spinner\";\nimport { useTicketTypes } from \"../../api/ticketTypes\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport { useHasPermission } from \"../../api/operations\";\nimport PopupConfirmDeletion from \"../PopupConfirmDeletion\";\n\nexport default function EditTicketForm({ ticket, eventId, close, setTicket }: CreateTicketFormProps)\n{\n\tconst [deletionOpen, setDeletionOpen] = useState(false);\n\tconst [typeId, setTypeId] = useState(-1);\n\tconst [personName, setPersonName] = useState(\"\");\n\tconst [personLink, setPersonLink] = useState(\"\");\n\tconst [promocode, setPromocode] = useState(\"\");\n\tconst mutation = useMutationUpdateTicket(ticket =>\n\t{\n\t\tsetTicket(ticket);\n\t\tclose();\n\t});\n\tconst ticketTypes = useTicketTypes(eventId);\n\tconst hasDeletePermission = useHasPermission(\"delete_ticket\");\n\n\tconst open = !!ticket;\n\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetTypeId(ticketTypes.data?.find(v => v.name == ticket.type)?.id || -1);\n\t\t\tsetPersonName(ticket.personName || \"\");\n\t\t\tsetPersonLink(ticket.personLink || \"\");\n\t\t\tsetPromocode(ticket.promocode || \"\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmutation.reset();\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [open, ticket, ticketTypes.data]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Редактирование билета\">\n\t\t\t{ticketTypes.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tif (ticket && typeId >= 0 && personName)\n\t\t\t\t\tmutation.mutate({\n\t\t\t\t\t\tticketId: ticket.id,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\ttypeId,\n\t\t\t\t\t\t\tpersonName,\n\t\t\t\t\t\t\tpersonLink,\n\t\t\t\t\t\t\tpromocode,\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}}>\n\t\t\t\t<FormField label=\"Тип билета\">\n\t\t\t\t\t<select value={typeId} onChange={e => setTypeId(ticketTypes.data?.[e.target.selectedIndex]?.id || -1)} disabled={ticketTypes.data?.length == 0} required>\n\t\t\t\t\t\t{ticketTypes.data?.map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t\t{ticketTypes.data?.length == 0 && <h4>Добавьте типы билетов</h4>}\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Посетитель\">\n\t\t\t\t\t<input value={personName} onChange={e => setPersonName(e.target.value)} type=\"text\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Ссылка на посетителя\">\n\t\t\t\t\t<input value={personLink} onChange={e => setPersonLink(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Промокод\">\n\t\t\t\t\t<input value={promocode} onChange={e => setPromocode(e.target.value)} type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_small\" disabled={mutation.isLoading || !ticketTypes.data || ticketTypes.data.length == 0}>Подтвердить</button>\n\t\t\t</Form>\n\t\t\t{hasDeletePermission && <button\n\t\t\t\tclassName=\"button button_danger button_small\"\n\t\t\t\tonClick={() => setDeletionOpen(true)}\n\t\t\t>Удалить билет</button>}\n\t\t\t<PopupConfirmDeletion itemId={eventId} mutatateParams={ticket?.id || 0} title=\"Удаление билета\" onSuccess={close} mutationFn={useMutationDeleteTicket} open={deletionOpen} close={() => setDeletionOpen(false)} />\n\t\t</Popup>\n\t);\n}\n\ninterface CreateTicketFormProps\n{\n\teventId: string | number,\n\tticket: Ticket | null,\n\tclose: () => void,\n\tsetTicket: (ticket: Ticket) => void,\n}\n","import { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport { useEvent } from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport ViewTicket from \"../../components/ViewTicket\";\nimport { useEffect, useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Spinner from \"../../components/Spinner\";\nimport CreateTicketForm from \"../../components/create/CreateTicketForm\";\nimport { useHasPermission } from \"../../api/operations\";\nimport { ApiError } from \"../../api/dataTypes\";\nimport displayError from \"../../utils/displayError\";\nimport EditTicketForm from \"../../components/edit/EditTicketForm\";\nimport { dateToString } from \"../../utils/dates\";\n\nexport default function TicketsPage()\n{\n\tconst [createFormOpen, setCreateFormOpen] = useState(false);\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst [editFormOpen, setEditFormOpen] = useState<Ticket | null>(null);\n\tconst navigate = useNavigate();\n\tconst urlParams = useParams();\n\tconst eventId = urlParams[\"eventId\"]!;\n\tconst event = useEvent(eventId);\n\tconst tickets = useTickets(eventId);\n\tconst hasAddPermission = useHasPermission(\"add_ticket\");\n\tconst hasEditPermission = useHasPermission(\"change_ticket\");\n\tuseTitle([event.data?.name, \"Билеты\"]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (event.error instanceof ApiError && event.error.message.includes(\"not found\"))\n\t\t\tnavigate(\"/not_found\", { replace: true });\n\t}, [event.error, navigate]);\n\n\tconst showAuthOnPlt = tickets.data?.some(v => v.authOnPltf);\n\tconst backLink = `/events/${eventId}`;\n\n\treturn (\n\t\t<>\n\t\t\t{(event.isLoading || tickets.isLoading) && <Layout backLink={backLink}><Spinner /></Layout>}\n\t\t\t{displayError(event)}\n\t\t\t{displayError(tickets)}\n\t\t\t{event.data && tickets.isSuccess &&\n\t\t\t\t<Layout backLink={backLink} centeredH gap=\"1rem\" padding=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.data.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<Link target=\"_blank\" to={`/events/${eventId}/print_tickets`} className=\"button\">Распечатать</Link>\n\t\t\t\t\t\t{hasAddPermission && <button className=\"button\" onClick={() => setCreateFormOpen(true)}>Добавить</button>}\n\t\t\t\t\t\t<CreateTicketForm eventId={eventId} open={createFormOpen} close={() => setCreateFormOpen(false)} setTicet={setTicketOpen} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<table className={styles.table}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"10.5em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"2.6em\" }} title=\"Дата добавления\"><span className=\"icon\">note_add</span></th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th style={{ width: \"1.4em\" }} title=\"Билет использован\"><span className=\"icon\">login</span></th>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <th style={{ width: \"1.4em\" }} title=\"Вошёл в игру\"><span className=\"icon\">stadia_controller</span></th>}\n\t\t\t\t\t\t\t\t<th style={{ width: \"3.2em\" }}>Билет</th>\n\t\t\t\t\t\t\t\t{hasEditPermission && <th style={{ width: \"2.3em\" }}>Ред</th>}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{v.personLink ? <a href={v.personLink}>{v.personName}</a> : v.personName}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{dateToString(v.createdDate, true, false)}</td>\n\t\t\t\t\t\t\t\t<td style={{ color: v.type.startsWith(\"<Удалён>\") ? \"red\" : \"\" }}>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t{showAuthOnPlt && <td className={styles.center}>{v.authOnPltf ? \"✓\" : \"✖\"}</td>}\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t{hasEditPermission &&\n\t\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t\t<button className=\"button button_small\" onClick={() => setEditFormOpen(v)}>Ред</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event.data} close={() => setTicketOpen(null)} />\n\t\t\t\t\t<EditTicketForm ticket={editFormOpen} eventId={eventId} close={() => setEditFormOpen(null)} setTicket={setTicketOpen} />\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t\t{v.bossId != null && <>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t\t<div style={{ color: \"#990099\" }}>{users.data.find(u => u.id == v.bossId)?.login}</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Access</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.access.map((o, i) => <div key={i}>{o}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\n\nimport DebugPage from \"./pages/DebugPage\";\nimport EventPage from \"./pages/EventPage\";\nimport EventsFullPage from \"./pages/EventsFullPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport FontsPage from \"./pages/FontsPage\";\nimport LogPage from \"./pages/LogPage\";\nimport ManagersPage from \"./pages/ManagersPage\";\nimport PrintTicketsPage from \"./pages/PrintTicketsPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\nimport UsersPage from \"./pages/UsersPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/scanner/:eventId\" element={<ScannerPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/print_tickets\", <PrintTicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/d/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_users\", \"/d/users\", <UsersPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug_events\", \"/d/events\", <EventsFullPage />)}\n\t\t\t\t{ProtectedRoute(\"page_fonts\", \"/fonts\", <FontsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_managers\", \"/managers\", <ManagersPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","fetchWithJson","_x","_x2","_x3","_fetchWithJson","_asyncToGenerator","_regeneratorRuntime","mark","_callee","method","input","body","res","wrap","_context","prev","next","fetch","headers","undefined","JSON","stringify","sent","ok","t0","json","t1","msg","abrupt","stop","fetchPost","fetchDelete","fetchJson","_x4","_x5","_x6","_fetchJson","_callee2","data","_context2","fetchJsonGet","fetchJsonPost","fetchPostForm","_x7","_x8","_fetchPostForm","_callee3","_context3","useUser","useQuery","user","status","auth","id","login","roles","name","operations","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","_user$data3","_user$data4","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","length","names","Array","_key","filter","v","join","MessageFromBackend","_useState","useState","_useState2","_slicedToArray","setMessage","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","Spinner","_ref","zIndex","spinner","Header","backLink","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","setQueryData","_","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","_ref$centeredH","centeredH","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","padding","header","maxHeight","body_centered","body_centeredH","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","concat","_toConsumableArray","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","_mutationFn","authData","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Popup","_ref$open","open","_ref$title","popup","DebugPage","logErrors","setLogErrors","_useState3","_useState4","log","setLog","refLogErrors","refLog","text","setTimeout","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","queryStrKey","queryKey","map","queryInvalidate","invalidateQueries","exact","queryListAddItem","item","_queryClient$getQuery","getQueryState","items","queryListUpdateItem","_queryClient$getQuery2","queryListDeleteItem","itemId","_queryClient$getQuery3","parseEventResponse","responseEvent","event","date","Date","useEvent","eventId","useMutationDeleteEvent","_mutationFn3","_callee7","_context7","padNum","num","len","padStart","countWord","one","two","five","numS","dateToString","reverse","year","nums","getDate","getMonth","push","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","datetimeToString","relativeDate","nowBreak","now","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","useTicketTypes","forEach","useTicketType","typeId","enabled","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","useTickets","tickets","useMutationDeleteTicket","_mutationFn2","_callee4","ticketId","_context4","CreateTicketForm","_ticketTypes$data3","_ticketTypes$data4","_ticketTypes$data5","setTicet","setTypeId","personName","setPersonName","_useState5","_useState6","personLink","setPersonLink","_useState7","_useState8","promocode","setPromocode","_useState9","_useState10","code","setCode","_useState11","_useState12","autocode","setAutocode","ticketData","useMutationNewTicket","ticketTypes","_ticketTypes$data","_ticketTypes$data$","reset","parseInt","onChange","_ticketTypes$data2","_ticketTypes$data2$e$","target","selectedIndex","checked","fontSize","imagefileToData","_imagefileToData","file","accessEventId","imgBase64","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","console","newFontFace","family","FontFace","fontTypes","otf","ttf","woff","woff2","TicketEditor","_this","init","viewMode","editor","img","imgQr","Image","qrLast","imgFile","width","height","objects","canvas","ctx","loadingImg","loadingFont","loadingFonts","fonts","listenerResize","draw","listenerKeydown","_this$editor","key","deleteSelectedObj","listenerMouseDown","_this$editor2","mouseDown","offsetX","offsetY","button","listenerMouseMove","_this$editor3","mouseMove","listenerMouseUp","_this$editor4","mouseUp","listenerContextMenu","listenerWheel","_this$editor5","wheel","deltaY","inspectorSet","inspectorInput","_this$editor6","loadFonts","this","get","image","loadImage","createNewData","f","find","x","y","w","h","c","reRenderQR","_this$editor7","setViewTicket","_this2","URL","revokeObjectURL","url","createObjectURL","removeCanvasListeners","getContext","_getData","imageName","t2","pattern","removeEventListener","obj","_this$editor8","drawObject","resetZoom","fitToView","_this3","_this4","reqFonts","i","font","delete","splice","_step","loadedFonts","_iterator","_createForOfIteratorHelper","_loop","add","load","then","indexOf","s","n","done","err","_this$data$objects$fi","_this$ticket","_this5","renderQRCode","setQr","cursor","parent","clientWidth","clientHeight","loading","fillStyle","fillRect","Editor","bind","setCursor","setCanvasSize","imageSmoothingEnabled","drawTextAtCenter","size","lines","split","dy","ddy","fillText","callback","QRCode","errorCorrectionLevel","scale","margin","light","dark","setInspector","imgqr","_this6","transform","moving","sx","sy","vx","vy","vw","vh","mode","drawing","ex","ey","active","resizing","dir","keepAspect","aspect","canvasSize","selected","selectionBorder","max","m","min","restrictView","qr","_this$ticket$personNa","_this$ticket2","_this$ticket$promocod","_this$ticket3","_this$ticket$code","_this$ticket4","save","translate","drawImage","texts","promo","complete","naturalHeight","unwrapRect","strokeStyle","lineWidth","strokeRect","restore","_this$pointToWorld","pointToWorld","_this$pointToWorld2","_this$pointToWorld3","_this$pointToWorld4","wx","wy","resize","rectZone","pointInRect","resizeCursor","redraw","round","dx","_this$resizing$dir","rx","ry","_this$pointToWorld5","_this$pointToWorld6","_this$pointToWorld7","_this$pointToWorld8","_this7","_this$pointToWorld9","_this$pointToWorld10","X","Y","iw","ih","rect","border","r","direction","_direction","Inspector","setUpdate","setObj","update","inspector","inspector_open","fields","onInput","valueAsNumber","colorInput","fontInput","useFonts","TicketTypeEditor","_ttype$data","useEditor","useMutationUpdateTicketType","ttype","refCanvas","imageSelection","setImageSelection","isNewImage","setIsNewImage","noImage","imageId","_ttype$data2","setData","parse","setCanvas","panel","br","fitZoom","footer","_Fragment","files","setNewImage","accept","_ttype$data3","setImage","getData","destroy","TicketViewer","minWidth","minHeight","ViewTicketSimple","setRes","qrcode","setQrcode","ticketRef","timeout","html2canvas","clearTimeout","center","marginTop","marginBottom","innerHTML","appendChild","ViewTicket","simpleViewer","setSimpleViewer","EditTicketTypesForm","_ticketTypes$data$fil","Map","changes","setChanges","newTypes","setNewTypes","inp","some","action","useMutationUpdateTicketTypes","from","values","_changes$get","_changes$get2","set","EditEventForm","_event$data","_event$data2","inp_title","inp_date","_callee6","eventData","_context6","useMutationUpdateEvent","_inp_title$current","_inp_date$current","defaultValue","toISOString","PopupConfirmDeletion","mutatateParams","useStaff","useStaffEvent","useMutationDeleteStaff","staffId","_callee5","_context5","useMutationResetStaffPassword","_mutationFn4","EditStaffForm","_staffAll$data2","_staffAll$data3","_staffAll$data4","staffCurrent","staffAll","staff","setStaff","selectedStaff","setSelectedStaff","staffData","useMutationUpdateStaff","isSuccess","_staffAll$data","marginLeft","_staffAll$data5","PopupQrCode","EventPage","_staff$data","createFormOpen","setCreateFormOpen","deleteFormOpen","setDeleteFormOpen","editFormOpen","setEditFormOpen","editTypesFormOpen","setEditTypesFormOpen","editTypeFormOpen","setEditTypeFormOpen","editStaffOpen","setEditStaffOpen","_useState13","_useState14","ticketOpen","setTicketOpen","_useState15","_useState16","qrcodeLinkOpen","setQrcodeLinkOpen","useParams","stats","useTicketStats","hasAddTicketPermission","hasEditTypesPermission","hasEditEventPermission","hasViewStaffPermission","hasEditStaffPermission","hasDeleteEventPermission","stats_sum","reduce","p","count","scanned","authOnPltf","card","card__header","card__body","line","href","Fragment","marginRight","_stats$data","calcPercent","fontWeight","right","all","UsersPage","_events$data","events","getAccessToEvent","_callee8","_context8","useMutationGetAccessToEvent","isFetching","toggleInp","htmlFor","deleted","activeMark","backgroundColor","toggle","eventInfo","access","o","alignSelf","CreateEventForm","useMutationNewEvent","EventsPage","_events$data$sort","useEvents","sort","a","b","CreateFontForm","inp_name","inp_file","fontData","formData","FormData","useMutationNewFont","er","_inp_name$current","_inp_file$current","_inp_file$current$fil","_file$files","_file$files$","splited","fontName","FontsPage","_fonts$data","createFontOpen","setCreateFontOpen","exampleText","setExampleText","FontPreview","myFont","useFont","fontFamily","flexWrap","parseLogResponse","responseLog","LogPage","_log$data","refetch","table","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","added","updated","restored","useMutationDeleteManager","managerId","CreateManagerForm","newManager","setNewManager","newManagerData","useMutationNewManager","manager","placeholder","replaceAll","ManagersPage","_managers$data","_managers$data2","deletionManager","setDeletionManager","managers","userTag","getTicketPrefix","toString","PrintTicketsPage","_useMemo","useMemo","codePref","every","startsWith","_useMemo2","isCorrectCodes","prefix","print","colSpan","_objectSpread","sortV","lastIndexOf","ChangePasswordForm","passwordRef","password2Ref","useMutationChangePassword","_passwordRef$current","_password2Ref$current","password2","ProfilePage","nameRef","userNameEditing","setUserNameEditing","passwordEditing","setPasswordEditing","nameMutation","useMutationChangeName","Scanner","_ref$active","onScan","onCameraError","qrScanner","setQrScanner","videoRef","scanner","QrScanner","highlightScanRegion","maxScansPerSecond","old","start","catch","pause","ScannerHeader","onInputBtn","top","bottom","useSound","audio","Audio","preload","currentTime","play","ScannerPage","urlParams","qrScanResult","setQrScanResult","ticketCode","setTicketCode","checkTicketResult","setCheckTicketResult","startHintOpen","setStartHintOpen","inputOpen","setInputOpen","alreadyScanned","setAlreadyScanned","cameraError","setCameraError","inputRef","NaN","retry","_useSound","beep","playBeep","_useSound3","beepError","playBeepError","handleScan","useCallback","handleOpenInput","focus","handleCloseInput","apiResult","useMutationCheckTicket","success","isIdle","scanner_scanned","scannerRect","scannerVideo","scanResult","alreadyScanned_visible","big","result_desc","errorCode","_inputRef$current","CreateStaffForm","newStaff","setNewStaff","newStaffData","useMutationNewStaff","StaffPage","_staff$data2","deletionStaff","setDeletionStaff","resetPasswordStaff","setResetPasswordStaff","userInfo","EditTicketForm","setTicket","deletionOpen","setDeletionOpen","_postUpdateTicket","params","useMutationUpdateTicket","hasDeletePermission","_ticketTypes$data$fin","TicketsPage","_tickets$data","_tickets$data2","hasAddPermission","hasEditPermission","showAuthOnPlt","_users$data","users","_users$data$find","bossId","u","colorizeOperation","colors","page","change","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes","EventsFullPage"],"sourceRoot":""}
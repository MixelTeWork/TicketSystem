{"version":3,"file":"static/js/800.dd31b543.chunk.js","mappings":"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","sources":["api/apiError.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","webpack://ticket_system/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","utils/classNames.ts","webpack://ticket_system/./src/components/Header/styles.module.css?07e3","utils/fetchPost.ts","api/auth.ts","components/Header/index.tsx","webpack://ticket_system/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://ticket_system/./src/pages/AuthPage/styles.module.css?7367","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://ticket_system/./src/pages/ScannerPage/styles.module.css?d401","api/events.ts","pages/ScannerPage/EventSelection/index.tsx","webpack://ticket_system/./src/components/Scanner/styles.module.css?0297","components/Scanner/index.tsx","utils/nums.ts","utils/dates.ts","webpack://ticket_system/./src/pages/ScannerPage/ScannerHeader/styles.module.css?d047","pages/ScannerPage/ScannerHeader/index.tsx","api/tickets.ts","api/checkTicket.ts","webpack://ticket_system/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/ScannerPage/index.tsx","webpack://ticket_system/./src/pages/EventsPage/styles.module.css?6236","pages/EventsPage/index.tsx","pages/StaffPage/index.tsx","webpack://ticket_system/./src/pages/EventPage/styles.module.css?2091","api/ticketTypes.ts","pages/EventPage/index.tsx","webpack://ticket_system/./src/pages/TicketsPage/styles.module.css?e67a","webpack://ticket_system/./src/pages/TicketsPage/ViewTicket/styles.module.css?526f","pages/TicketsPage/ViewTicket/index.tsx","pages/TicketsPage/index.tsx","App.tsx"],"sourcesContent":["export default class ApiError extends Error {}","import { useQuery } from \"react-query\";\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser, { staleTime: Infinity, cacheTime: Infinity })\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\n\nconst Operations = {\n\tpage_scanner: \"page_scanner\",\n\tpage_events: \"page_events\",\n\tpage_staff: \"page_staff\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)}>\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\"};","export default function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n","import fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { ResponseMsg, User } from \"./dataTypes\";\n\nexport default async function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutation, useQueryClient } from \"react-query\";\nimport { postLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\n\nexport default function Header()\n{\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t\tnavigate(\"/auth\");\n\t\t}\n\t});\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{location.pathname != \"/\" && <button onClick={() => navigate(-1)}>Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<span>{user.data?.name}</span>\n\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status == \"loading\"}>\n\t\t\t\t\tВыйти\n\t\t\t\t</button>\n\t\t\t</span>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, centered = false, centeredPage = false, height100 = false, gap = 0, header = <Header /> }: LayoutProps)\n{\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\",\"field\":\"styles_field__+iIr8\"};","import { FormEvent, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutation, useQueryClient } from \"react-query\";\nimport postAuth from \"../../api/auth\";\nimport ApiError from \"../../api/apiError\";\nimport { useNavigate } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\n\nexport default function AuthPage()\n{\n\tconst queryClient = useQueryClient();\n\tconst navigate = useNavigate()\n\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t\tnavigate(\"/\");\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tif (error instanceof ApiError)\n\t\t\t\tsetError(error.message);\n\t\t\telse\n\t\t\t\tsetError(\"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\n\tfunction onSubmit(e: FormEvent)\n\t{\n\t\te.preventDefault();\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t<form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<label className={styles.field}>\n\t\t\t\t\t<span>Логин</span>\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</label>\n\t\t\t\t<label className={styles.field}>\n\t\t\t\t\t<span>Пароль</span>\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</label>\n\t\t\t\t<button type=\"submit\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</form>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_scanner\") && <Link to=\"/scanner\" className=\"button button_large\">Сканер</Link>}\n\t\t\t{hasPermission(user, \"page_events\") && <Link to=\"/events\" className=\"button button_large\">Мероприятия</Link>}\n\t\t\t{hasPermission(user, \"page_staff\") && <Link to=\"/staff\" className=\"button button_large\">Сотрудники</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"scanner\":\"styles_scanner__+xzXT\",\"scanner_scanned\":\"styles_scanner_scanned__lX+Yf\",\"scanned_anim\":\"styles_scanned_anim__UmXGC\",\"scanResult\":\"styles_scanResult__35K03\",\"big\":\"styles_big__bcOVH\",\"success\":\"styles_success__dlqOt\",\"result_desc\":\"styles_result_desc__oS+OA\",\"error\":\"styles_error__0ctGO\"};","import { useQuery } from \"react-query\";\nimport { EventData, ResponseEvent, ResponseMsg } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\n\nexport default function useEvents()\n{\n\treturn useQuery(\"events\", getEvents);\n}\n\nasync function getEvents(): Promise<EventData[]>\n{\n\tconst res = await fetch(\"/api/events\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\tconst events = data as ResponseEvent[];\n\treturn events.map(e => ({ ...e, date: new Date(e.date) }));\n}\n","import { EventData } from \"../../../api/dataTypes\";\nimport useEvents from \"../../../api/events\";\n\nexport default function EventSelection({ setEvent }: EventSelectionProps)\n{\n\tconst events = useEvents();\n\n\treturn (\n\t\t<>\n\t\t\t<h2>Выбор мероприятия</h2>\n\t\t\t{events.isError && \"Произошла ошибка\"}\n\t\t\t{events.isLoading && \"Загрузка мероприятий\"}\n\t\t\t{events.isSuccess && <>\n\t\t\t\t{events.data.map(e =>\n\t\t\t\t\t<button className=\"button button_large\" key={e.id} onClick={() => setEvent(e)}>{e.name}</button>\n\t\t\t\t)}\n\t\t\t</>}\n\t\t</>\n\t);\n}\n\ninterface EventSelectionProps\n{\n\tsetEvent: (eventData: EventData) => void\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\"};","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport QrScanner from \"qr-scanner\";\n\n\nexport default function Scanner({ active = true, onScan }: ScannerProps)\n{\n\tconst [qrScanner, setQrScanner] = useState<QrScanner>();\n\tconst videoRef = useRef<HTMLVideoElement | null>(null)\n\n\tuseEffect(() =>\n\t{\n\t\tif (!videoRef.current) return;\n\t\tconst scanner = new QrScanner(\n\t\t\tvideoRef.current,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\n\t\t\t},\n\t\t)\n\t\tsetQrScanner((old: QrScanner | undefined) =>\n\t\t{\n\t\t\told?.stop();\n\t\t\told?.destroy();\n\t\t\treturn scanner;\n\t\t});\n\t\tscanner.start()\n\n\t\treturn () =>\n\t\t{\n\t\t\tscanner.stop();\n\t\t\tscanner.destroy();\n\t\t}\n\t}, [videoRef, onScan]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrScanner) return;\n\t\tif (active) qrScanner.start();\n\t\telse qrScanner.pause(false);\n\t}, [active, qrScanner])\n\n\treturn (\n\t\t<video className={styles.root} ref={videoRef}></video>\n\t);\n}\n\ninterface ScannerProps\n{\n\tactive?: boolean,\n\tonScan: (result: string) => void,\n}","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined)\n{\n\tif (!date) return \"\";\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false)\n{\n\treturn dateToString(date) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E-Z+Q\",\"top\":\"styles_top__r6L7-\",\"bottom\":\"styles_bottom__GMtUi\"};","import { EventData } from \"../../../api/dataTypes\";\nimport { dateToString } from \"../../../utils/dates\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerHeader({ event, onBackBtn, onInputBtn }: ScannerHeaderProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.top}>\n\t\t\t\t<button onClick={onBackBtn}>Назад</button>\n\t\t\t\t<button onClick={onInputBtn}>Ручной ввод</button>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<span>{event.name}</span>\n\t\t\t\t<span>|</span>\n\t\t\t\t<span>{dateToString(event.date)}</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface ScannerHeaderProps\n{\n\tevent: EventData,\n\tonBackBtn: () => void,\n\tonInputBtn: () => void,\n}\n","import { useQuery } from \"react-query\";\nimport { ResponseMsg, ResponseTicket, Ticket } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\n\nexport default function useTickets(eventId: number)\n{\n\treturn useQuery([\"tickets\", eventId], () => getTickets(eventId));\n}\n\nasync function getTickets(eventId: number): Promise<Ticket[]>\n{\n\tconst res = await fetch(\"/api/tickets/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn (data as ResponseTicket[]).map(t => parseTicketResponse(t));\n}\n\nexport function parseTicketResponse(responseTicket: ResponseTicket)\n{\n\tconst ticket = <Ticket><unknown>responseTicket;\n\tif (responseTicket.scannedDate)\n\t\tticket.scannedDate = new Date(responseTicket.scannedDate);\n\tif (responseTicket.createdDate)\n\t\tticket.createdDate = new Date(responseTicket.createdDate);\n\treturn ticket;\n}","import fetchPost from \"../utils/fetchPost\"\nimport ApiError from \"./apiError\";\nimport { CheckTicketResult, ResponseCheckTicket, ResponseMsg } from \"./dataTypes\";\nimport { parseTicketResponse } from \"./tickets\";\n\nexport default async function postCheckTicket(ticketData: TicketData): Promise<CheckTicketResult>\n{\n\tconst res = await fetchPost(\"/api/check_ticket\", ticketData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst apiResult = data as ResponseCheckTicket;\n\tconst result = data as CheckTicketResult;\n\tif (apiResult.ticket)\n\t\tresult.ticket = parseTicketResponse(apiResult.ticket)\n\treturn result\n}\n\ninterface TicketData\n{\n\tcode: string,\n\teventId: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: PopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t<button className={styles.close} onClick={close}>✖</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface PopupProps extends React.PropsWithChildren\n{\n\topen?: boolean,\n\tclose?: () => void,\n\ttitle?: string,\n}","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport EventSelection from \"./EventSelection\";\nimport { CheckTicketResult, EventData } from \"../../api/dataTypes\";\nimport Scanner from \"../../components/Scanner\";\nimport ScannerHeader from \"./ScannerHeader\";\nimport { useMutation } from \"react-query\";\nimport postCheckTicket from \"../../api/checkTicket\";\nimport ApiError from \"../../api/apiError\";\nimport classNames from \"../../utils/classNames\";\nimport useEvents from \"../../api/events\";\nimport { dateToString, relativeDate, secondsPast, timeToString } from \"../../utils/dates\";\nimport useUser from \"../../api/user\";\nimport Popup from \"../../components/Popup\";\nimport { padNum } from \"../../utils/nums\";\n\nexport default function ScannerPage()\n{\n\tconst [event, setEvent] = useState<EventData | null>(null);\n\tconst [qrScanResult, setQrScanResult] = useState<string | null>(null);\n\tconst [ticketCode, setTicketCode] = useState<string | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [checkTicketResult, setCheckTicketResult] = useState<CheckTicketResult | null>(null);\n\tconst [inputOpen, setInputOpen] = useState(false);\n\tconst inputRef = useRef<HTMLInputElement>(null);\n\tconst handleScan = useCallback((res: string) => setQrScanResult(res), []);\n\tconst handleBackBtn = useCallback(() => { setEvent(null); setQrScanResult(null); setTicketCode(null); setError(null); setCheckTicketResult(null); mutation.reset(); }, []);\n\tconst handleOpenInput = useCallback(() =>\n\t{\n\t\tsetInputOpen(true);\n\t\tif (inputRef.current && event)\n\t\t\tinputRef.current.value = `${padNum(event.id, 3)}-${event.date.getFullYear().toString().at(-1)}${padNum(event.date.getMonth() + 1, 2)}${padNum(event.date.getDate(), 2)}-`;\n\t}, [inputRef, event]);\n\tconst handleCloseInput = useCallback(() => setInputOpen(false), []);\n\tconst user = useUser();\n\tconst events = useEvents();\n\n\tconst mutation = useMutation({\n\t\tmutationFn: postCheckTicket,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tsetCheckTicketResult(data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tsetCheckTicketResult(null);\n\t\t\tsetError(error instanceof ApiError ? error.message : \"Произошла ошибка\");\n\t\t\tmutation.reset();\n\t\t}\n\t});\n\n\tuseEffect(() =>\n\t{\n\t\tif (qrScanResult && event && mutation.status == \"idle\")\n\t\t{\n\t\t\tsetTicketCode(qrScanResult);\n\t\t\tsetError(null);\n\t\t\tsetQrScanResult(null);\n\t\t\tsetCheckTicketResult(null);\n\t\t\tmutation.mutate({ code: qrScanResult, eventId: event.id });\n\t\t}\n\t}, [qrScanResult, event, mutation]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (mutation.isSuccess)\n\t\t{\n\t\t\tconst timeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tsetQrScanResult(null);\n\t\t\t\tmutation.reset();\n\t\t\t}, 1000);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [mutation]);\n\n\treturn (\n\t\t<>\n\t\t\t{!event && <Layout centered gap=\"1em\"><EventSelection setEvent={setEvent} /></Layout>}\n\t\t\t{event &&\n\t\t\t\t<Layout height100 header={<ScannerHeader event={event} onBackBtn={handleBackBtn} onInputBtn={handleOpenInput} />}>\n\t\t\t\t\t<div className={classNames(styles.scanner, !mutation.isIdle && styles.scanner_scanned)}>\n\t\t\t\t\t\t<Scanner onScan={handleScan} />\n\t\t\t\t\t\t{/* <button onClick={() => handleScan(\"001-30809-03-0008\")}>Scan!</button> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.scanResult}>\n\t\t\t\t\t\t{ticketCode && <div>Код билета: {ticketCode}</div>}\n\t\t\t\t\t\t{error && <div>{error}</div>}\n\t\t\t\t\t\t{checkTicketResult?.success && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.success, styles.big)}>Действителен</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"notExist\" && <div className={classNames(styles.error, styles.big)}>Не найден</div>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"event\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Другое мероприятие</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t{(() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst event = events.data?.find(v => v.id == checkTicketResult.ticket.eventId);\n\t\t\t\t\t\t\t\t\tif (!event) return <div>Неизвестное мероприятие</div>;\n\t\t\t\t\t\t\t\t\treturn <>\n\t\t\t\t\t\t\t\t\t\t<div>Мероприятие: {event.name}</div>\n\t\t\t\t\t\t\t\t\t\t<div>Его дата: {dateToString(event.date)} ({relativeDate(event.date, \"day\")})</div>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t<div>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{checkTicketResult?.errorCode == \"scanned\" && <>\n\t\t\t\t\t\t\t<div className={classNames(styles.error, styles.big)}>Использованный</div>\n\t\t\t\t\t\t\t<div className={styles.result_desc}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Кем: </span>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcheckTicketResult.ticket.scannedById == user.data?.id ?\n\t\t\t\t\t\t\t\t\t\t<span>Вами</span> : <>\n\t\t\t\t\t\t\t\t\t\t\t<span>{checkTicketResult.ticket.scannedBy} </span>\n\t\t\t\t\t\t\t\t\t\t\t<span className={styles.error}>(Не вами)</span>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span>Когда: </span>\n\t\t\t\t\t\t\t\t\t<span>{timeToString(checkTicketResult.ticket.scannedDate, true)} </span>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName={classNames(secondsPast(checkTicketResult.ticket.scannedDate) > 30 && styles.error)}\n\t\t\t\t\t\t\t\t\t>({relativeDate(checkTicketResult.ticket.scannedDate)})</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Посетитель: {checkTicketResult.ticket.personName}</div>\n\t\t\t\t\t\t\t\t<div>Тип билета: {checkTicketResult.ticket.type}</div>\n\t\t\t\t\t\t\t\t<div>Промокод: {checkTicketResult.ticket.promocode}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Popup title=\"Введите код билета\" open={inputOpen} close={handleCloseInput}>\n\t\t\t\t\t\t<input type=\"text\" ref={inputRef} />\n\t\t\t\t\t\t<button disabled={mutation.status != \"idle\"} onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (inputRef.current)\n\t\t\t\t\t\t\t\tsetQrScanResult(inputRef.current?.value);\n\t\t\t\t\t\t\thandleCloseInput();\n\t\t\t\t\t\t}}>Сканировать</button>\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"space_between\":\"styles_space_between__AD+M6\"};","import { Link } from \"react-router-dom\";\nimport useEvents from \"../../api/events\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { dateToString } from \"../../utils/dates\";\n\nexport default function EventsPage()\n{\n\tconst events = useEvents();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1rem\">\n\t\t\t<h1>Мероприятия</h1>\n\t\t\t{events.isLoading && <div>Загрузка</div>}\n\t\t\t{events.isError && <div>Ошибка</div>}\n\t\t\t{events.data?.map(e =>\n\t\t\t\t<Link\n\t\t\t\t\tto={`/events/${e.id}`}\n\t\t\t\t\tclassName={classNames(\"button button_large\", styles.space_between)}\n\t\t\t\t\tkey={e.id}\n\t\t\t\t>\n\t\t\t\t\t<span>{e.name}</span>\n\t\t\t\t\t<span>{dateToString(e.date)}</span>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t<div className={styles.space_between}>\n\t\t\t\t<span></span>\n\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Добавить</button>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\n\nexport default function StaffPage()\n{\n\treturn (\n\t\t<Layout centered>\n\t\t\tТут будет страница настройки сотрудников\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"styles_card__1zOYj\",\"card__header\":\"styles_card__header__o4cfX\",\"card__body\":\"styles_card__body__KU56x\",\"gap\":\"styles_gap__Z5dnR\",\"right\":\"styles_right__fxm89\"};","import { useQuery } from \"react-query\";\nimport { ResponseMsg, TicketType } from \"./dataTypes\";\nimport ApiError from \"./apiError\";\n\nexport default function useTicketTypes(eventId: number)\n{\n\treturn useQuery([\"ticket_types\", eventId], () => getTicketTypes(eventId));\n}\n\nasync function getTicketTypes(eventId: number): Promise<TicketType[]>\n{\n\tconst res = await fetch(\"/api/ticket_types/\" + eventId);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn data as TicketType[];\n}\n","import { Link, useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport useEvents from \"../../api/events\";\nimport { dateToString } from \"../../utils/dates\";\nimport useTicketTypes from \"../../api/ticketTypes\";\n\nexport default function EventPage()\n{\n\tconst urlParams = useParams();\n\tconst eventId = parseInt(urlParams[\"eventId\"]!, 10);\n\tconst events = useEvents();\n\tconst event = events.data?.find(e => e.id == eventId);\n\tconst ticketTypes = useTicketTypes(eventId);\n\n\treturn (\n\t\t<>\n\t\t\t{events.isLoading && <Layout centered>Загрузка</Layout>}\n\t\t\t{events.isError && <Layout centered>Ошибка</Layout>}\n\t\t\t{event &&\n\t\t\t\t<Layout centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Мероприятие: {event.name}</h1>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Мероприятие</h2>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Редактировать</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t<div>Название: {event.name}</div>\n\t\t\t\t\t\t\t<div>Дата проведения: {dateToString(event.date)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.card}>\n\t\t\t\t\t\t<div className={styles.card__header}>\n\t\t\t\t\t\t\t<h2>Виды билетов</h2>\n\t\t\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Редактировать</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.card__body}>\n\t\t\t\t\t\t\t{ticketTypes.isLoading && <div>Загрузка</div>}\n\t\t\t\t\t\t\t{ticketTypes.isError && <div>Ошибка</div>}\n\t\t\t\t\t\t\t{ticketTypes.data?.map(v => <div key={v.id}>{v.name}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Добавить билет</button>\n\t\t\t\t\t<Link to={`/events/${eventId}/tickets`} className=\"button\">Список билетов</Link>\n\t\t\t\t\t<div className={styles.gap}></div>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Удалить</button>\n\t\t\t\t\t</div>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"styles_center__9dZ9p\",\"right\":\"styles_right__Zz+YX\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__L6Gyd\",\"visible\":\"styles_visible__nfYo0\",\"center\":\"styles_center__LDcBX\"};","import { useEffect, useRef, useState, createElement } from \"react\";\nimport { EventData, Ticket } from \"../../../api/dataTypes\";\nimport classNames from \"../../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport QRCode from \"qrcode\"\nimport { dateToString } from \"../../../utils/dates\";\nimport html2canvas from \"html2canvas\";\n\nexport default function ViewTicket({ event, ticket }: ViewTicketProps)\n{\n\tconst [res, setRes] = useState<HTMLCanvasElement | null>(null);\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tconst ticketRef = useRef<HTMLDivElement>(null);\n\tuseEffect(() =>\n\t{\n\t\tif (!ticket) return;\n\t\tsetRes(null);\n\t\tQRCode.toDataURL(ticket.code, { errorCorrectionLevel: \"H\", scale: 8 }, (e, url) => setQrcode(url));\n\t}, [ticket]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!qrcode || !ticketRef.current) return;\n\t\tconst timeout = setTimeout(() =>\n\t\t{\n\t\t\tif (!qrcode || !ticketRef.current) return;\n\t\t\thtml2canvas(ticketRef.current).then(canvas => setRes(canvas));\n\t\t}, 10)\n\t\treturn () => clearTimeout(timeout);\n\t}, [qrcode, ticketRef])\n\n\treturn (\n\t\t<>\n\t\t\t<div ref={ticketRef} className={classNames(styles.root, !res && styles.visible)}>\n\t\t\t\t<h1>Билет</h1>\n\t\t\t\t<div className={styles.center} style={{ marginTop: \"1rem\" }}>\n\t\t\t\t\t<img src={qrcode} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.center} style={{ marginBottom: \"1rem\" }}>{ticket?.code}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div>Мероприятие: {event?.name}</div>\n\t\t\t\t\t<div>Дата: {dateToString(event?.date)}</div>\n\t\t\t\t\t<div>Тип билета: {ticket?.type}</div>\n\t\t\t\t\t<div>Посетитель: {ticket?.personName}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{res && <div ref={ref =>\n\t\t\t{\n\t\t\t\tif (!ref) return;\n\t\t\t\tref.innerHTML = \"\";\n\t\t\t\tref.appendChild(res);\n\t\t\t}}></div>}\n\t\t</>\n\t);\n}\n\ninterface ViewTicketProps\n{\n\tevent: EventData | undefined,\n\tticket: Ticket | null,\n}","import { useParams } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport useEvents from \"../../api/events\";\nimport useTickets from \"../../api/tickets\";\nimport Popup from \"../../components/Popup\";\nimport ViewTicket from \"./ViewTicket\";\nimport { useState } from \"react\";\nimport { Ticket } from \"../../api/dataTypes\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function TicketsPage()\n{\n\tconst [ticketOpen, setTicketOpen] = useState<Ticket | null>(null);\n\tconst urlParams = useParams();\n\tconst eventId = parseInt(urlParams[\"eventId\"]!, 10);\n\tconst events = useEvents();\n\tconst event = events.data?.find(e => e.id == eventId);\n\tconst tickets = useTickets(eventId);\n\n\treturn (\n\t\t<>\n\t\t\t{events.isLoading && <Layout centered>Загрузка</Layout>}\n\t\t\t{events.isError && <Layout centered>Ошибка</Layout>}\n\t\t\t{event &&\n\t\t\t\t<Layout centeredPage gap=\"1rem\">\n\t\t\t\t\t<h1>Билеты: {event.name}</h1>\n\t\t\t\t\t<div className={styles.right}>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Распечатать</button>\n\t\t\t\t\t\t<button className=\"button\" onClick={() => alert(\"Пока не работает\")}>Добавить</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style={{ width: \"11em\" }}>Код</th>\n\t\t\t\t\t\t\t\t<th>Посетитель</th>\n\t\t\t\t\t\t\t\t<th>Тип билета</th>\n\t\t\t\t\t\t\t\t<th>Промокод</th>\n\t\t\t\t\t\t\t\t<th><div>Исполь</div><div>зован</div></th>\n\t\t\t\t\t\t\t\t<th>Билет</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{tickets.data?.map(v => <tr key={v.id}>\n\t\t\t\t\t\t\t\t<td>{v.code}</td>\n\t\t\t\t\t\t\t\t<td>{v.personName}</td>\n\t\t\t\t\t\t\t\t<td>{v.type}</td>\n\t\t\t\t\t\t\t\t<td>{v.promocode}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>{v.scanned ? \"✓\" : \"✖\"}</td>\n\t\t\t\t\t\t\t\t<td className={styles.center}>\n\t\t\t\t\t\t\t\t\t<button onClick={() => setTicketOpen(v)}>Билет</button>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<Popup open={!!ticketOpen} close={() => setTicketOpen(null)} title=\"Просмотр билета\">\n\t\t\t\t\t\t<ViewTicket ticket={ticketOpen} event={event} />\n\t\t\t\t\t</Popup>\n\t\t\t\t</Layout>\n\t\t\t}\n\t\t</>\n\t);\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport EventsPage from \"./pages/EventsPage\";\nimport StaffPage from \"./pages/StaffPage\";\nimport EventPage from \"./pages/EventPage\";\nimport TicketsPage from \"./pages/TicketsPage\";\n\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{user.isError && \"Ошибка\"}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t{ProtectedRoute(null, \"/\", <IndexPage />)}\n\t\t\t\t{ProtectedRoute(\"page_scanner\", \"/scanner\", <ScannerPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events\", <EventsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId\", <EventPage />)}\n\t\t\t\t{ProtectedRoute(\"page_events\", \"/events/:eventId/tickets\", <TicketsPage />)}\n\t\t\t\t{ProtectedRoute(\"page_staff\", \"/staff\", <StaffPage />)}\n\t\t\t\t{ProtectedRoute(null, \"*\", <NotFoundPage />)}\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","_Error","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","_wrapNativeSuper","Error","useUser","useQuery","getUser","staleTime","Infinity","cacheTime","_getUser","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","user","wrap","_context","prev","next","fetch","sent","json","status","abrupt","auth","id","login","name","operations","ok","msg","stop","hasPermission","operation","_user$data","_user$data2","includes","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","HeaderBack","navigate","useNavigate","_jsx","className","styles","root","children","onClick","classNames","_len","length","names","Array","_key","filter","v","join","fetchPost","input","body","method","headers","undefined","JSON","stringify","postAuth","_x","_postAuth","authData","postLogout","_postLogout","_callee2","_context2","Header","location","queryClient","useQueryClient","mutation","useMutation","mutationFn","onSuccess","invalidateQueries","_jsxs","block","Link","to","home","src","logo","alt","mutate","disabled","Layout","_ref","_ref$centered","centered","_ref$centeredPage","centeredPage","_ref$height","height100","_ref$gap","gap","_ref$header","header","style","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","AuthPage","_useState","useState","_useState2","_slicedToArray","error","setError","inp_login","useRef","inp_password","setQueryData","onError","message","form","onSubmit","e","_inp_login$current","_inp_password$current","preventDefault","current","value","password","field","ref","type","required","IndexPage","useEvents","getEvents","_getEvents","events","map","_objectSpread","date","Date","EventSelection","setEvent","_Fragment","isError","isLoading","isSuccess","Scanner","_ref$active","active","onScan","qrScanner","setQrScanner","videoRef","scanner","QrScanner","result","highlightScanRegion","maxScansPerSecond","old","destroy","start","pause","padNum","num","len","concat","padStart","countWord","one","two","five","numS","at","dateToString","getDate","getMonth","getFullYear","timeToString","seconds","dateStr","getHours","getMinutes","getSeconds","relativeDate","nowBreak","now","delta","getTime","d","Math","floor","abs","dY","dM","dD","dh","dm","ds","_getChange","sv","getChange","_getChange2","vChange","vNames","relative","_toConsumableArray","ScannerHeader","event","onBackBtn","onInputBtn","top","bottom","useTickets","eventId","_getTickets","getTickets","t","parseTicketResponse","responseTicket","ticket","scannedDate","createdDate","postCheckTicket","_postCheckTicket","ticketData","apiResult","Popup","_ref$open","open","close","_ref$title","title","popup","ScannerPage","_useState3","_useState4","qrScanResult","setQrScanResult","_useState5","_useState6","ticketCode","setTicketCode","_useState7","_useState8","_useState9","_useState10","checkTicketResult","setCheckTicketResult","_useState11","_useState12","inputOpen","setInputOpen","inputRef","handleScan","useCallback","handleBackBtn","reset","handleOpenInput","toString","handleCloseInput","code","timeout","setTimeout","clearTimeout","isIdle","scanner_scanned","scanResult","success","big","result_desc","personName","promocode","errorCode","_events$data","find","scannedById","scannedBy","marginTop","_inputRef$current","EventsPage","space_between","alert","StaffPage","useTicketTypes","_getTicketTypes","getTicketTypes","EventPage","_ticketTypes$data","urlParams","useParams","parseInt","ticketTypes","card","card__header","card__body","right","ViewTicket","setRes","qrcode","setQrcode","ticketRef","QRCode","errorCorrectionLevel","scale","url","html2canvas","then","canvas","visible","center","marginBottom","innerHTML","appendChild","TicketsPage","_tickets$data","ticketOpen","setTicketOpen","tickets","width","scanned","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}